(self.webpackChunkangulartodo=self.webpackChunkangulartodo||[]).push([[429],{367:(e,t,n)=>{"use strict";var r=n(759),i=n(34),o=n(762),s=n(685),a=n(300);function u(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var c,l=u(r),h=((c={})["already-activated"]="You are trying to activate AppCheck for FirebaseApp {$appName}, while it is already activated. AppCheck can only be activated once.",c["use-before-activation"]="AppCheck is being used before activate() is called for FirebaseApp {$appName}. Please make sure you call activate() before instantiating other Firebase services.",c["fetch-network-error"]="Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.",c["fetch-parse-error"]="Fetch client could not parse response. Original error: {$originalErrorMessage}.",c["fetch-status-error"]="Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.",c["storage-open"]="Error thrown when opening storage. Original error: {$originalErrorMessage}.",c["storage-get"]="Error thrown when reading from storage. Original error: {$originalErrorMessage}.",c["storage-set"]="Error thrown when writing to storage. Original error: {$originalErrorMessage}.",c["recaptcha-error"]="ReCAPTCHA error.",c),f=new s.ErrorFactory("appCheck","AppCheck",h),d=new Map,p={activated:!1,tokenObservers:[]},g={enabled:!1};function v(e){return d.get(e)||p}function m(e,t){d.set(e,t)}function y(){return g}var _="https://content-firebaseappcheck.googleapis.com/v1beta",b=function(){function e(e,t,n,r,i){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=n,this.lowerBound=r,this.upperBound=i,this.pending=null,this.nextErrorWaitInterval=r,r>i)throw new Error("Proactive refresh lower bound greater than upper bound!")}return e.prototype.start=function(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(function(){})},e.prototype.stop=function(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)},e.prototype.isRunning=function(){return!!this.pending},e.prototype.process=function(e){return o.__awaiter(this,void 0,void 0,function(){var t;return o.__generator(this,function(n){switch(n.label){case 0:this.stop(),n.label=1;case 1:return n.trys.push([1,6,,7]),this.pending=new s.Deferred,[4,(r=this.getNextRun(e),new Promise(function(e){setTimeout(e,r)}))];case 2:return n.sent(),this.pending.resolve(),[4,this.pending.promise];case 3:return n.sent(),this.pending=new s.Deferred,[4,this.operation()];case 4:return n.sent(),this.pending.resolve(),[4,this.pending.promise];case 5:return n.sent(),this.process(!0).catch(function(){}),[3,7];case 6:return t=n.sent(),this.retryPolicy(t)?this.process(!1).catch(function(){}):this.stop(),[3,7];case 7:return[2]}var r})})},e.prototype.getNextRun=function(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();var t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t},e}();function w(){return self.grecaptcha}function T(e){if(!v(e).activated)throw f.create("use-before-activation",{appName:e.name})}function E(e,t){var n=e.url,r=e.body;return o.__awaiter(this,void 0,void 0,function(){var e,i,s,a,u,c,l,h,d,p;return o.__generator(this,function(o){switch(o.label){case 0:e={"Content-Type":"application/json"},(i=t.getImmediate({optional:!0}))&&(e["X-Firebase-Client"]=i.getPlatformInfoString()),s={method:"POST",body:JSON.stringify(r),headers:e},o.label=1;case 1:return o.trys.push([1,3,,4]),[4,fetch(n,s)];case 2:return a=o.sent(),[3,4];case 3:throw u=o.sent(),f.create("fetch-network-error",{originalErrorMessage:u.message});case 4:if(200!==a.status)throw f.create("fetch-status-error",{httpStatus:a.status});o.label=5;case 5:return o.trys.push([5,7,,8]),[4,a.json()];case 6:return c=o.sent(),[3,8];case 7:throw l=o.sent(),f.create("fetch-parse-error",{originalErrorMessage:l.message});case 8:if(!(h=c.ttl.match(/^([\d.]+)(s)$/))||!h[2]||isNaN(Number(h[1])))throw f.create("fetch-parse-error",{originalErrorMessage:"ttl field (timeToLive) is not in standard Protobuf Duration format: "+c.ttl});return d=1e3*Number(h[1]),p=Date.now(),[2,{token:c.attestationToken,expireTimeMillis:p+d,issuedAtTimeMillis:p}]}})})}function I(e,t){var n=e.options;return{url:_+"/projects/"+n.projectId+"/apps/"+n.appId+":exchangeRecaptchaToken?key="+n.apiKey,body:{recaptcha_token:t}}}function k(e,t){var n=e.options;return{url:_+"/projects/"+n.projectId+"/apps/"+n.appId+":exchangeDebugToken?key="+n.apiKey,body:{debug_token:t}}}var C="firebase-app-check-store",S="debug-token",A=null;function x(){return A||(A=new Promise(function(e,t){try{var n=indexedDB.open("firebase-app-check-database",1);n.onsuccess=function(t){e(t.target.result)},n.onerror=function(e){var n;t(f.create("storage-open",{originalErrorMessage:null===(n=e.target.error)||void 0===n?void 0:n.message}))},n.onupgradeneeded=function(e){var t=e.target.result;switch(e.oldVersion){case 0:t.createObjectStore(C,{keyPath:"compositeKey"})}}}catch(r){t(f.create("storage-open",{originalErrorMessage:r.message}))}}))}function N(e){return P(O(e))}function D(e,t){return o.__awaiter(this,void 0,void 0,function(){var n,r,i,s;return o.__generator(this,function(o){switch(o.label){case 0:return[4,x()];case 1:return n=o.sent(),r=n.transaction(C,"readwrite"),i=r.objectStore(C),s=i.put({compositeKey:e,value:t}),[2,new Promise(function(e,t){s.onsuccess=function(t){e()},r.onerror=function(e){var n;t(f.create("storage-set",{originalErrorMessage:null===(n=e.target.error)||void 0===n?void 0:n.message}))}})]}})})}function P(e){return o.__awaiter(this,void 0,void 0,function(){var t,n,r,i;return o.__generator(this,function(o){switch(o.label){case 0:return[4,x()];case 1:return t=o.sent(),n=t.transaction(C,"readonly"),r=n.objectStore(C),i=r.get(e),[2,new Promise(function(e,t){i.onsuccess=function(t){var n=t.target.result;e(n?n.value:void 0)},n.onerror=function(e){var n;t(f.create("storage-get",{originalErrorMessage:null===(n=e.target.error)||void 0===n?void 0:n.message}))}})]}})})}function O(e){return e.options.appId+"-"+e.name}var R=new a.Logger("@firebase/app-check");function L(e,t){return s.isIndexedDBAvailable()?function(e,t){return D(O(e),t)}(e,t).catch(function(e){R.warn("Failed to write token to indexeddb. Error: "+e)}):Promise.resolve()}function M(){return o.__awaiter(this,void 0,void 0,function(){var e;return o.__generator(this,function(t){if((e=y()).enabled&&e.token)return[2,e.token.promise];throw Error("\n            Can't get debug token in production mode.\n        ")})})}var F={error:"UNKNOWN_ERROR"};function j(e,t,n){return void 0===n&&(n=!1),o.__awaiter(this,void 0,void 0,function(){var r,i,a,u,c,l,h,f,d,p;return o.__generator(this,function(g){switch(g.label){case 0:return T(e),r=v(e),a=void 0,(i=r.token)?[3,2]:[4,r.cachedTokenPromise];case 1:(u=g.sent())&&B(u)&&(i=u,m(e,o.__assign(o.__assign({},r),{token:i})),V(e,{token:i.token})),g.label=2;case 2:return!n&&i&&B(i)?[2,{token:i.token}]:y().enabled?(l=E,h=k,f=[e],[4,M()]):[3,6];case 3:return[4,l.apply(void 0,[h.apply(void 0,f.concat([g.sent()])),t])];case 4:return c=g.sent(),[4,L(e,c)];case 5:return g.sent(),m(e,o.__assign(o.__assign({},r),{token:c})),[2,{token:c.token}];case 6:return g.trys.push([6,8,,9]),[4,r.provider.getToken()];case 7:return i=g.sent(),[3,9];case 8:return d=g.sent(),R.error(d),a=d,[3,9];case 9:return i?[3,10]:(p=function(e){return{token:(t=F,s.base64.encodeString(JSON.stringify(t),!1)),error:e};var t}(a),[3,12]);case 10:return p={token:i.token},m(e,o.__assign(o.__assign({},r),{token:i})),[4,L(e,i)];case 11:g.sent(),g.label=12;case 12:return V(e,p),[2,p]}})})}function q(e,t,n,r,i){var s=v(e),a={next:r,error:i,type:n},u=o.__assign(o.__assign({},s),{tokenObservers:o.__spreadArray(o.__spreadArray([],s.tokenObservers),[a])});if(!u.tokenRefresher){var c=function(e,t){var n=this;return new b(function(){return o.__awaiter(n,void 0,void 0,function(){var n;return o.__generator(this,function(r){switch(r.label){case 0:return v(e).token?[3,2]:[4,j(e,t)];case 1:return n=r.sent(),[3,4];case 2:return[4,j(e,t,!0)];case 3:n=r.sent(),r.label=4;case 4:if(n.error)throw n.error;return[2]}})})},function(){return!0},function(){var t=v(e);if(t.token){var n=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return n=Math.min(n,t.token.expireTimeMillis-3e5),Math.max(0,n-Date.now())}return 0},3e4,96e4)}(e,t);u.tokenRefresher=c}if(!u.tokenRefresher.isRunning()&&s.isTokenAutoRefreshEnabled&&u.tokenRefresher.start(),s.token&&B(s.token)){var l=s.token;Promise.resolve().then(function(){return r({token:l.token})}).catch(function(){})}else null==s.token&&s.cachedTokenPromise.then(function(e){e&&B(e)&&r({token:e.token})}).catch(function(){});m(e,u)}function U(e,t){var n=v(e),r=n.tokenObservers.filter(function(e){return e.next!==t});0===r.length&&n.tokenRefresher&&n.tokenRefresher.isRunning()&&n.tokenRefresher.stop(),m(e,o.__assign(o.__assign({},n),{tokenObservers:r}))}function V(e,t){for(var n=0,r=v(e).tokenObservers;n<r.length;n++){var i=r[n];try{"EXTERNAL"===i.type&&null!=t.error?i.error(t.error):i.next(t)}catch(o){}}}function B(e){return e.expireTimeMillis-Date.now()>0}function H(e){return o.__awaiter(this,void 0,void 0,function(){var t;return o.__generator(this,function(n){switch(n.label){case 0:return T(e),[4,v(e).reCAPTCHAState.initialized.promise];case 1:return t=n.sent(),[2,new Promise(function(n,r){var i=v(e).reCAPTCHAState;t.ready(function(){n(t.execute(i.widgetId,{action:"fire_app_check"}))})})]}})})}function W(e,t,n,r){var i=n.render(r,{sitekey:t,size:"invisible"}),s=v(e);m(e,o.__assign(o.__assign({},s),{reCAPTCHAState:o.__assign(o.__assign({},s.reCAPTCHAState),{widgetId:i})}))}var K=function(){function e(e){this._siteKey=e}return e.prototype.getToken=function(){return o.__awaiter(this,void 0,void 0,function(){var e;return o.__generator(this,function(t){switch(t.label){case 0:if(!this._app||!this._platformLoggerProvider)throw f.create("use-before-activation",{appName:""});t.label=1;case 1:return t.trys.push([1,3,,4]),[4,H(this._app)];case 2:return e=t.sent(),[3,4];case 3:throw t.sent(),f.create("recaptcha-error");case 4:return[2,E(I(this._app,e),this._platformLoggerProvider)]}})})},e.prototype.initialize=function(e,t){this._app=e,this._platformLoggerProvider=t,function(e,t){var n=v(e),r=new s.Deferred;m(e,o.__assign(o.__assign({},n),{reCAPTCHAState:{initialized:r}}));var i="fire_app_check_"+e.name,a=document.createElement("div");a.id=i,a.style.display="none",document.body.appendChild(a);var u,c,l=w();return l?l.ready(function(){W(e,t,l,i),r.resolve(l)}):(u=function(){var n=w();if(!n)throw new Error("no recaptcha");n.ready(function(){W(e,t,n,i),r.resolve(n)})},(c=document.createElement("script")).src="https://www.google.com/recaptcha/api.js",c.onload=u,document.head.appendChild(c)),r.promise}(e,this._siteKey).catch(function(){})},e}(),z=function(){function e(e){this._customProviderOptions=e}return e.prototype.getToken=function(){return o.__awaiter(this,void 0,void 0,function(){var e,t,n;return o.__generator(this,function(r){switch(r.label){case 0:if(!this._app)throw f.create("use-before-activation",{appName:""});return[4,this._customProviderOptions.getToken()];case 1:return e=r.sent(),t=s.issuedAtTime(e.token),n=null!==t&&t<Date.now()&&t>0?1e3*t:Date.now(),[2,o.__assign(o.__assign({},e),{issuedAtTimeMillis:n})]}})})},e.prototype.initialize=function(e){this._app=e},e}();var G="app-check-internal";!function(e){e.INTERNAL.registerComponent(new i.Component("appCheck",function(e){return t=e.getProvider("app").getImmediate(),n=e.getProvider("platform-logger"),{app:t,activate:function(e,r){return function(e,t,n,r){var i=v(e);if(i.activated)throw f.create("already-activated",{appName:e.name});var a=o.__assign(o.__assign({},i),{activated:!0});a.cachedTokenPromise=function(e){return o.__awaiter(this,void 0,void 0,function(){var t,n;return o.__generator(this,function(r){switch(r.label){case 0:if(!s.isIndexedDBAvailable())return[3,5];t=void 0,r.label=1;case 1:return r.trys.push([1,3,,4]),[4,N(e)];case 2:return t=r.sent(),[3,4];case 3:return n=r.sent(),R.warn("Failed to read token from indexeddb. Error: "+n),[3,4];case 4:return[2,t];case 5:return[2,void 0]}})})}(e).then(function(t){return t&&B(t)&&m(e,o.__assign(o.__assign({},v(e)),{token:t})),t}),a.provider="string"==typeof t?new K(t):t instanceof K||t instanceof z?t:new z({getToken:t.getToken}),a.isTokenAutoRefreshEnabled=void 0===r?e.automaticDataCollectionEnabled:r,m(e,a),a.provider.initialize(e,n)}(t,e,n,r)},setTokenAutoRefreshEnabled:function(e){return function(e,t){var n=v(e);n.tokenRefresher&&(!0===t?n.tokenRefresher.start():n.tokenRefresher.stop()),m(e,o.__assign(o.__assign({},n),{isTokenAutoRefreshEnabled:t}))}(t,e)},getToken:function(e){return function(e,t,n){return o.__awaiter(this,void 0,void 0,function(){var r;return o.__generator(this,function(i){switch(i.label){case 0:return[4,j(e,t,n)];case 1:if((r=i.sent()).error)throw r.error;return[2,{token:r.token}]}})})}(t,n,e)},onTokenChanged:function(e,r,i){return function(e,t,n,r,i){var o,s=function(){};return o=null!=n.next?n.next.bind(n):n,null!=n.error?s=n.error.bind(n):r&&(s=r),q(e,t,"EXTERNAL",o,s),function(){return U(e,o)}}(t,n,e,r)},INTERNAL:{delete:function(){for(var e=0,n=v(t).tokenObservers;e<n.length;e++)U(t,n[e].next);return Promise.resolve()}}};var t,n},"PUBLIC").setServiceProps({ReCaptchaV3Provider:K,CustomProvider:z}).setInstantiationMode("EXPLICIT").setInstanceCreatedCallback(function(e,t,n){e.getProvider(G).initialize()})),e.INTERNAL.registerComponent(new i.Component(G,function(e){return t=e.getProvider("app").getImmediate(),n=e.getProvider("platform-logger"),{getToken:function(e){return j(t,n,e)},addTokenListener:function(e){return q(t,n,"INTERNAL",e)},removeTokenListener:function(e){return U(t,e)}};var t,n},"PUBLIC").setInstantiationMode("EXPLICIT")),e.registerVersion("@firebase/app-check","0.3.1")}(l.default),function(){var e=s.getGlobal();if("string"==typeof e.FIREBASE_APPCHECK_DEBUG_TOKEN||!0===e.FIREBASE_APPCHECK_DEBUG_TOKEN){var t=y();t.enabled=!0;var n=new s.Deferred;t.token=n,n.resolve("string"==typeof e.FIREBASE_APPCHECK_DEBUG_TOKEN?e.FIREBASE_APPCHECK_DEBUG_TOKEN:function(){return o.__awaiter(this,void 0,void 0,function(){var e,t;return o.__generator(this,function(n){switch(n.label){case 0:e=void 0,n.label=1;case 1:return n.trys.push([1,3,,4]),[4,P(S)];case 2:return e=n.sent(),[3,4];case 3:return n.sent(),[3,4];case 4:return e?[2,e]:((r=t="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)}),D(S,r)).catch(function(e){return R.warn("Failed to persist debug token to indexeddb. Error: "+e)}),console.log("AppCheck debug token: "+t+". You will need to whitelist it in the Firebase console for it to work"),[2,t])}var r})})}())}}()},759:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>w,firebase:()=>b});var r,i,o=n(762),s=n(685),a=n(34),u=n(300),c=((r={})["no-app"]="No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",r["bad-app-name"]="Illegal App name: '{$appName}",r["duplicate-app"]="Firebase App named '{$appName}' already exists",r["app-deleted"]="Firebase App named '{$appName}' already deleted",r["invalid-app-argument"]="firebase.{$appName}() takes either no argument or a Firebase App instance.",r["invalid-log-argument"]="First argument to `onLog` must be null or a function.",r),l=new s.ErrorFactory("app","Firebase",c),h="@firebase/app",f="[DEFAULT]",d=((i={})[h]="fire-core",i["@firebase/analytics"]="fire-analytics",i["@firebase/app-check"]="fire-app-check",i["@firebase/auth"]="fire-auth",i["@firebase/database"]="fire-rtdb",i["@firebase/functions"]="fire-fn",i["@firebase/installations"]="fire-iid",i["@firebase/messaging"]="fire-fcm",i["@firebase/performance"]="fire-perf",i["@firebase/remote-config"]="fire-rc",i["@firebase/storage"]="fire-gcs",i["@firebase/firestore"]="fire-fst",i["fire-js"]="fire-js",i["firebase-wrapper"]="fire-js-all",i),p=new u.Logger("@firebase/app"),g=function(){function e(e,t,n){var r=this;this.firebase_=n,this.isDeleted_=!1,this.name_=t.name,this.automaticDataCollectionEnabled_=t.automaticDataCollectionEnabled||!1,this.options_=(0,s.deepCopy)(e),this.container=new a.ComponentContainer(t.name),this._addComponent(new a.Component("app",function(){return r},"PUBLIC")),this.firebase_.INTERNAL.components.forEach(function(e){return r._addComponent(e)})}return Object.defineProperty(e.prototype,"automaticDataCollectionEnabled",{get:function(){return this.checkDestroyed_(),this.automaticDataCollectionEnabled_},set:function(e){this.checkDestroyed_(),this.automaticDataCollectionEnabled_=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"name",{get:function(){return this.checkDestroyed_(),this.name_},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"options",{get:function(){return this.checkDestroyed_(),this.options_},enumerable:!1,configurable:!0}),e.prototype.delete=function(){var e=this;return new Promise(function(t){e.checkDestroyed_(),t()}).then(function(){return e.firebase_.INTERNAL.removeApp(e.name_),Promise.all(e.container.getProviders().map(function(e){return e.delete()}))}).then(function(){e.isDeleted_=!0})},e.prototype._getService=function(e,t){var n;void 0===t&&(t=f),this.checkDestroyed_();var r=this.container.getProvider(e);return r.isInitialized()||"EXPLICIT"!==(null===(n=r.getComponent())||void 0===n?void 0:n.instantiationMode)||r.initialize(),r.getImmediate({identifier:t})},e.prototype._removeServiceInstance=function(e,t){void 0===t&&(t=f),this.container.getProvider(e).clearInstance(t)},e.prototype._addComponent=function(e){try{this.container.addComponent(e)}catch(t){p.debug("Component "+e.name+" failed to register with FirebaseApp "+this.name,t)}},e.prototype._addOrOverwriteComponent=function(e){this.container.addOrOverwriteComponent(e)},e.prototype.toJSON=function(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}},e.prototype.checkDestroyed_=function(){if(this.isDeleted_)throw l.create("app-deleted",{appName:this.name_})},e}();g.prototype.name&&g.prototype.options||g.prototype.delete||console.log("dc");var v=function e(){var t=function(e){var t={},n=new Map,r={__esModule:!0,initializeApp:function(n,i){void 0===i&&(i={}),"object"==typeof i&&null!==i||(i={name:i});var o=i;void 0===o.name&&(o.name=f);var a=o.name;if("string"!=typeof a||!a)throw l.create("bad-app-name",{appName:String(a)});if((0,s.contains)(t,a))throw l.create("duplicate-app",{appName:a});var u=new e(n,o,r);return t[a]=u,u},app:i,registerVersion:function(e,t,n){var r,i=null!==(r=d[e])&&void 0!==r?r:e;n&&(i+="-"+n);var s=i.match(/\s|\//),u=t.match(/\s|\//);if(s||u){var c=['Unable to register library "'+i+'" with version "'+t+'":'];return s&&c.push('library name "'+i+'" contains illegal characters (whitespace or "/")'),s&&u&&c.push("and"),u&&c.push('version name "'+t+'" contains illegal characters (whitespace or "/")'),void p.warn(c.join(" "))}o(new a.Component(i+"-version",function(){return{library:i,version:t}},"VERSION"))},setLogLevel:u.setLogLevel,onLog:function(e,t){if(null!==e&&"function"!=typeof e)throw l.create("invalid-log-argument");(0,u.setUserLogHandler)(e,t)},apps:null,SDK_VERSION:"8.8.1",INTERNAL:{registerComponent:o,removeApp:function(e){delete t[e]},components:n,useAsService:function(e,t){return"serverAuth"===t?null:t}}};function i(e){if(!(0,s.contains)(t,e=e||f))throw l.create("no-app",{appName:e});return t[e]}function o(o){var a=o.name;if(n.has(a))return p.debug("There were multiple attempts to register component "+a+"."),"PUBLIC"===o.type?r[a]:null;if(n.set(a,o),"PUBLIC"===o.type){var u=function(e){if(void 0===e&&(e=i()),"function"!=typeof e[a])throw l.create("invalid-app-argument",{appName:a});return e[a]()};void 0!==o.serviceProps&&(0,s.deepExtend)(u,o.serviceProps),r[a]=u,e.prototype[a]=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return this._getService.bind(this,a).apply(this,o.multipleInstances?e:[])}}for(var c=0,h=Object.keys(t);c<h.length;c++)t[h[c]]._addComponent(o);return"PUBLIC"===o.type?r[a]:null}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(t).map(function(e){return t[e]})}}),i.App=e,r}(g);return t.INTERNAL=(0,o.__assign)((0,o.__assign)({},t.INTERNAL),{createFirebaseNamespace:e,extendNamespace:function(e){(0,s.deepExtend)(t,e)},createSubscribe:s.createSubscribe,ErrorFactory:s.ErrorFactory,deepExtend:s.deepExtend}),t}(),m=function(){function e(e){this.container=e}return e.prototype.getPlatformInfoString=function(){return this.container.getProviders().map(function(e){if(function(e){var t=e.getComponent();return"VERSION"===(null==t?void 0:t.type)}(e)){var t=e.getImmediate();return t.library+"/"+t.version}return null}).filter(function(e){return e}).join(" ")},e}();if((0,s.isBrowser)()&&void 0!==self.firebase){p.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var y=self.firebase.SDK_VERSION;y&&y.indexOf("LITE")>=0&&p.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var _=v.initializeApp;v.initializeApp=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return(0,s.isNode)()&&p.warn('\n      Warning: This is a browser-targeted Firebase bundle but it appears it is being\n      run in a Node environment.  If running in a Node environment, make sure you\n      are using the bundle specified by the "main" field in package.json.\n      \n      If you are using Webpack, you can specify "main" as the first item in\n      "resolve.mainFields":\n      https://webpack.js.org/configuration/resolve/#resolvemainfields\n      \n      If using Rollup, use the @rollup/plugin-node-resolve plugin and specify "main"\n      as the first item in "mainFields", e.g. [\'main\', \'module\'].\n      https://github.com/rollup/@rollup/plugin-node-resolve\n      '),_.apply(void 0,e)};var b=v;!function(e,t){e.INTERNAL.registerComponent(new a.Component("platform-logger",function(e){return new m(e)},"PRIVATE")),e.registerVersion(h,"0.6.29",void 0),e.registerVersion("fire-js","")}(b);const w=b},34:(e,t,n)=>{"use strict";n.r(t),n.d(t,{Component:()=>o,ComponentContainer:()=>u,Provider:()=>a});var r=n(762),i=n(685),o=function(){function e(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return e.prototype.setInstantiationMode=function(e){return this.instantiationMode=e,this},e.prototype.setMultipleInstances=function(e){return this.multipleInstances=e,this},e.prototype.setServiceProps=function(e){return this.serviceProps=e,this},e.prototype.setInstanceCreatedCallback=function(e){return this.onInstanceCreated=e,this},e}(),s="[DEFAULT]",a=function(){function e(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.onInitCallbacks=new Map}return e.prototype.get=function(e){var t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){var n=new i.Deferred;if(this.instancesDeferred.set(t,n),this.isInitialized(t)||this.shouldAutoInitialize())try{var r=this.getOrInitializeService({instanceIdentifier:t});r&&n.resolve(r)}catch(o){}}return this.instancesDeferred.get(t).promise},e.prototype.getImmediate=function(e){var t,n=this.normalizeInstanceIdentifier(null==e?void 0:e.identifier),r=null!==(t=null==e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service "+this.name+" is not available")}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}},e.prototype.getComponent=function(){return this.component},e.prototype.setComponent=function(e){var t,n;if(e.name!==this.name)throw Error("Mismatching Component "+e.name+" for Provider "+this.name+".");if(this.component)throw Error("Component for "+this.name+" has already been provided");if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:s})}catch(h){}try{for(var i=(0,r.__values)(this.instancesDeferred.entries()),o=i.next();!o.done;o=i.next()){var a=(0,r.__read)(o.value,2),u=a[1],c=this.normalizeInstanceIdentifier(a[0]);try{var l=this.getOrInitializeService({instanceIdentifier:c});u.resolve(l)}catch(h){}}}catch(f){t={error:f}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}}},e.prototype.clearInstance=function(e){void 0===e&&(e=s),this.instancesDeferred.delete(e),this.instances.delete(e)},e.prototype.delete=function(){return(0,r.__awaiter)(this,void 0,void 0,function(){var e;return(0,r.__generator)(this,function(t){switch(t.label){case 0:return e=Array.from(this.instances.values()),[4,Promise.all((0,r.__spreadArray)((0,r.__spreadArray)([],(0,r.__read)(e.filter(function(e){return"INTERNAL"in e}).map(function(e){return e.INTERNAL.delete()}))),(0,r.__read)(e.filter(function(e){return"_delete"in e}).map(function(e){return e._delete()}))))];case 1:return t.sent(),[2]}})})},e.prototype.isComponentSet=function(){return null!=this.component},e.prototype.isInitialized=function(e){return void 0===e&&(e=s),this.instances.has(e)},e.prototype.initialize=function(e){var t,n;void 0===e&&(e={});var i=e.options,o=void 0===i?{}:i,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(this.name+"("+s+") has already been initialized");if(!this.isComponentSet())throw Error("Component "+this.name+" has not been registered yet");var a=this.getOrInitializeService({instanceIdentifier:s,options:o});try{for(var u=(0,r.__values)(this.instancesDeferred.entries()),c=u.next();!c.done;c=u.next()){var l=(0,r.__read)(c.value,2),h=l[1];s===this.normalizeInstanceIdentifier(l[0])&&h.resolve(a)}}catch(f){t={error:f}}finally{try{c&&!c.done&&(n=u.return)&&n.call(u)}finally{if(t)throw t.error}}return a},e.prototype.onInit=function(e,t){var n,r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);var o=this.instances.get(r);return o&&e(o,r),function(){i.delete(e)}},e.prototype.invokeOnInitCallbacks=function(e,t){var n,i,o=this.onInitCallbacks.get(t);if(o)try{for(var s=(0,r.__values)(o),a=s.next();!a.done;a=s.next()){var u=a.value;try{u(e,t)}catch(c){}}}catch(l){n={error:l}}finally{try{a&&!a.done&&(i=s.return)&&i.call(s)}finally{if(n)throw n.error}}},e.prototype.getOrInitializeService=function(e){var t,n=e.instanceIdentifier,r=e.options,i=void 0===r?{}:r,o=this.instances.get(n);if(!o&&this.component&&(o=this.component.instanceFactory(this.container,{instanceIdentifier:(t=n,t===s?void 0:t),options:i}),this.instances.set(n,o),this.invokeOnInitCallbacks(o,n),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,n,o)}catch(a){}return o||null},e.prototype.normalizeInstanceIdentifier=function(e){return void 0===e&&(e=s),this.component?this.component.multipleInstances?e:s:e},e.prototype.shouldAutoInitialize=function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode},e}(),u=function(){function e(e){this.name=e,this.providers=new Map}return e.prototype.addComponent=function(e){var t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component "+e.name+" has already been registered with "+this.name);t.setComponent(e)},e.prototype.addOrOverwriteComponent=function(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)},e.prototype.getProvider=function(e){if(this.providers.has(e))return this.providers.get(e);var t=new a(e,this);return this.providers.set(e,t),t},e.prototype.getProviders=function(){return Array.from(this.providers.values())},e}()},192:(e,t,n)=>{"use strict";var r=n(759),i=n(34),o=n(685),s=n(762),a=n(300);e=n.hmd(e);var u="";function c(e){u=e}var l,h=function(){function e(e){this.domStorage_=e,this.prefix_="firebase:"}return e.prototype.set=function(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),(0,o.stringify)(t))},e.prototype.get=function(e){var t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:(0,o.jsonEval)(t)},e.prototype.remove=function(e){this.domStorage_.removeItem(this.prefixedName_(e))},e.prototype.prefixedName_=function(e){return this.prefix_+e},e.prototype.toString=function(){return this.domStorage_.toString()},e}(),f=function(){function e(){this.cache_={},this.isInMemoryStorage=!0}return e.prototype.set=function(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t},e.prototype.get=function(e){return(0,o.contains)(this.cache_,e)?this.cache_[e]:null},e.prototype.remove=function(e){delete this.cache_[e]},e}(),d=function(e){try{if("undefined"!=typeof window&&void 0!==window[e]){var t=window[e];return t.setItem("firebase:sentinel","cache"),t.removeItem("firebase:sentinel"),new h(t)}}catch(n){}return new f},p=d("localStorage"),g=d("sessionStorage"),v=new a.Logger("@firebase/database"),m=(l=1,function(){return l++}),y=function(e){var t=(0,o.stringToByteArray)(e),n=new o.Sha1;n.update(t);var r=n.digest();return o.base64.encodeByteArray(r)},_=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var n="",r=0;r<e.length;r++){var i=e[r];Array.isArray(i)||i&&"object"==typeof i&&"number"==typeof i.length?n+=_.apply(null,i):n+="object"==typeof i?(0,o.stringify)(i):i,n+=" "}return n},b=null,w=!0,T=function(e,t){(0,o.assert)(!t||!0===e||!1===e,"Can't turn on custom loggers persistently."),!0===e?(v.logLevel=a.LogLevel.VERBOSE,b=v.log.bind(v),t&&g.set("logging_enabled",!0)):"function"==typeof e?b=e:(b=null,g.remove("logging_enabled"))},E=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(!0===w&&(w=!1,null===b&&!0===g.get("logging_enabled")&&T(!0)),b){var n=_.apply(null,e);b(n)}},I=function(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];E.apply(void 0,(0,s.__spreadArray)([e],(0,s.__read)(t)))}},k=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n="FIREBASE INTERNAL ERROR: "+_.apply(void 0,(0,s.__spreadArray)([],(0,s.__read)(e)));v.error(n)},C=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n="FIREBASE FATAL ERROR: "+_.apply(void 0,(0,s.__spreadArray)([],(0,s.__read)(e)));throw v.error(n),new Error(n)},S=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n="FIREBASE WARNING: "+_.apply(void 0,(0,s.__spreadArray)([],(0,s.__read)(e)));v.warn(n)},A=function(e){return"number"==typeof e&&(e!=e||e===Number.POSITIVE_INFINITY||e===Number.NEGATIVE_INFINITY)},x="[MIN_NAME]",N="[MAX_NAME]",D=function(e,t){if(e===t)return 0;if(e===x||t===N)return-1;if(t===x||e===N)return 1;var n=q(e),r=q(t);return null!==n?null!==r?n-r==0?e.length-t.length:n-r:-1:null!==r?1:e<t?-1:1},P=function(e,t){return e===t?0:e<t?-1:1},O=function(e,t){if(t&&e in t)return t[e];throw new Error("Missing required key ("+e+") in object: "+(0,o.stringify)(t))},R=function(e){if("object"!=typeof e||null===e)return(0,o.stringify)(e);var t=[];for(var n in e)t.push(n);t.sort();for(var r="{",i=0;i<t.length;i++)0!==i&&(r+=","),r+=(0,o.stringify)(t[i]),r+=":",r+=R(e[t[i]]);return r+"}"},L=function(e,t){var n=e.length;if(n<=t)return[e];for(var r=[],i=0;i<n;i+=t)r.push(e.substring(i,i+t>n?n:i+t));return r};function M(e,t){for(var n in e)e.hasOwnProperty(n)&&t(n,e[n])}var F=function(e){var t,n,r,i,s;(0,o.assert)(!A(e),"Invalid JSON number"),0===e?(n=0,r=0,t=1/e==-1/0?1:0):(t=e<0,(e=Math.abs(e))>=Math.pow(2,-1022)?(n=(i=Math.min(Math.floor(Math.log(e)/Math.LN2),1023))+1023,r=Math.round(e*Math.pow(2,52-i)-Math.pow(2,52))):(n=0,r=Math.round(e/Math.pow(2,-1074))));var a=[];for(s=52;s;s-=1)a.push(r%2?1:0),r=Math.floor(r/2);for(s=11;s;s-=1)a.push(n%2?1:0),n=Math.floor(n/2);a.push(t?1:0),a.reverse();var u=a.join(""),c="";for(s=0;s<64;s+=8){var l=parseInt(u.substr(s,8),2).toString(16);1===l.length&&(l="0"+l),c+=l}return c.toLowerCase()},j=new RegExp("^-?(0*)\\d{1,10}$"),q=function(e){if(j.test(e)){var t=Number(e);if(t>=-2147483648&&t<=2147483647)return t}return null},U=function(e){try{e()}catch(t){setTimeout(function(){throw S("Exception was thrown by user callback.",t.stack||""),t},Math.floor(0))}},V=function(e,t){var n=setTimeout(e,t);return"object"==typeof n&&n.unref&&n.unref(),n},B=function(){function e(e,t){var n=this;this.appName_=e,this.appCheckProvider=t,this.appCheck=null==t?void 0:t.getImmediate({optional:!0}),this.appCheck||null==t||t.get().then(function(e){return n.appCheck=e})}return e.prototype.getToken=function(e){var t=this;return this.appCheck?this.appCheck.getToken(e):new Promise(function(n,r){setTimeout(function(){t.appCheck?t.getToken(e).then(n,r):n(null)},0)})},e.prototype.addTokenChangeListener=function(e){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then(function(t){return t.addTokenListener(e)})},e.prototype.notifyForInvalidToken=function(){S('Provided AppCheck credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly.')},e}(),H=function(){function e(e,t,n){var r=this;this.appName_=e,this.firebaseOptions_=t,this.authProvider_=n,this.auth_=null,this.auth_=n.getImmediate({optional:!0}),this.auth_||n.onInit(function(e){return r.auth_=e})}return e.prototype.getToken=function(e){var t=this;return this.auth_?this.auth_.getToken(e).catch(function(e){return e&&"auth/token-not-initialized"===e.code?(E("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(e)}):new Promise(function(n,r){setTimeout(function(){t.auth_?t.getToken(e).then(n,r):n(null)},0)})},e.prototype.addTokenChangeListener=function(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(function(t){return t.addAuthTokenListener(e)})},e.prototype.removeTokenChangeListener=function(e){this.authProvider_.get().then(function(t){return t.removeAuthTokenListener(e)})},e.prototype.notifyForInvalidToken=function(){var e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';S(e+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.')},e}(),W=function(){function e(e){this.accessToken=e}return e.prototype.getToken=function(e){return Promise.resolve({accessToken:this.accessToken})},e.prototype.addTokenChangeListener=function(e){e(this.accessToken)},e.prototype.removeTokenChangeListener=function(e){},e.prototype.notifyForInvalidToken=function(){},e.OWNER="owner",e}(),K=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,z="websocket",G="long_polling",Q=function(){function e(e,t,n,r,i,o,s){void 0===i&&(i=!1),void 0===o&&(o=""),void 0===s&&(s=!1),this.secure=t,this.namespace=n,this.webSocketOnly=r,this.nodeAdmin=i,this.persistenceKey=o,this.includeNamespaceInQueryParams=s,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=p.get("host:"+e)||this._host}return e.prototype.isCacheableHost=function(){return"s-"===this.internalHost.substr(0,2)},e.prototype.isCustomHost=function(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain},Object.defineProperty(e.prototype,"host",{get:function(){return this._host},set:function(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&p.set("host:"+this._host,this.internalHost))},enumerable:!1,configurable:!0}),e.prototype.toString=function(){var e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e},e.prototype.toURLString=function(){return(this.secure?"https://":"http://")+this.host+"/"+(this.includeNamespaceInQueryParams?"?ns="+this.namespace:"")},e}();function $(e,t,n){var r;if((0,o.assert)("string"==typeof t,"typeof type must == string"),(0,o.assert)("object"==typeof n,"typeof params must == object"),t===z)r=(e.secure?"wss://":"ws://")+e.internalHost+"/.ws?";else{if(t!==G)throw new Error("Unknown connection type: "+t);r=(e.secure?"https://":"http://")+e.internalHost+"/.lp?"}(function(e){return e.host!==e.internalHost||e.isCustomHost()||e.includeNamespaceInQueryParams})(e)&&(n.ns=e.namespace);var i=[];return M(n,function(e,t){i.push(e+"="+t)}),r+i.join("&")}var Y=function(){function e(){this.counters_={}}return e.prototype.incrementCounter=function(e,t){void 0===t&&(t=1),(0,o.contains)(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t},e.prototype.get=function(){return(0,o.deepCopy)(this.counters_)},e}(),X={},Z={};function J(e){var t=e.toString();return X[t]||(X[t]=new Y),X[t]}var ee=function(){function e(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}return e.prototype.closeAfter=function(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)},e.prototype.handleResponse=function(e,t){var n=this;this.pendingResponses[e]=t;for(var r=function(){var e=i.pendingResponses[i.currentResponseNum];delete i.pendingResponses[i.currentResponseNum];for(var t=function(t){e[t]&&U(function(){n.onMessage_(e[t])})},r=0;r<e.length;++r)t(r);if(i.currentResponseNum===i.closeAfterResponse)return i.onClose&&(i.onClose(),i.onClose=null),"break";i.currentResponseNum++},i=this;this.pendingResponses[this.currentResponseNum]&&"break"!==r(););},e}(),te="start",ne="close",re=function(){function e(e,t,n,r,i,o,s){var a=this;this.connId=e,this.repoInfo=t,this.applicationId=n,this.appCheckToken=r,this.authToken=i,this.transportSessionId=o,this.lastSessionId=s,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=I(e),this.stats_=J(t),this.urlFn=function(e){return a.appCheckToken&&(e.ac=a.appCheckToken),$(t,G,e)}}return e.prototype.open=function(e,t){var n=this;this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new ee(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(function(){n.log_("Timed out trying to connect."),n.onClosed_(),n.connectTimeoutTimer_=null},Math.floor(3e4)),function(e){if((0,o.isNodeSdk)()||"complete"===document.readyState)e();else{var t=!1,n=function(){document.body?t||(t=!0,e()):setTimeout(n,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",function(){"complete"===document.readyState&&n()}),window.attachEvent("onload",n))}}(function(){if(!n.isClosed_){n.scriptTagHolder=new ie(function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=(0,s.__read)(e,5),i=r[0],o=r[1],a=r[2];if(n.incrementIncomingBytes_(e),n.scriptTagHolder)if(n.connectTimeoutTimer_&&(clearTimeout(n.connectTimeoutTimer_),n.connectTimeoutTimer_=null),n.everConnected_=!0,i===te)n.id=o,n.password=a;else{if(i!==ne)throw new Error("Unrecognized command received: "+i);o?(n.scriptTagHolder.sendNewPolls=!1,n.myPacketOrderer.closeAfter(o,function(){n.onClosed_()})):n.onClosed_()}},function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=(0,s.__read)(e,2),i=r[0],o=r[1];n.incrementIncomingBytes_(e),n.myPacketOrderer.handleResponse(i,o)},function(){n.onClosed_()},n.urlFn);var e={start:"t"};e.ser=Math.floor(1e8*Math.random()),n.scriptTagHolder.uniqueCallbackIdentifier&&(e.cb=n.scriptTagHolder.uniqueCallbackIdentifier),e.v="5",n.transportSessionId&&(e.s=n.transportSessionId),n.lastSessionId&&(e.ls=n.lastSessionId),n.applicationId&&(e.p=n.applicationId),n.appCheckToken&&(e.ac=n.appCheckToken),"undefined"!=typeof location&&location.hostname&&K.test(location.hostname)&&(e.r="f");var t=n.urlFn(e);n.log_("Connecting via long-poll to "+t),n.scriptTagHolder.addTag(t,function(){})}})},e.prototype.start=function(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)},e.forceAllow=function(){e.forceAllow_=!0},e.forceDisallow=function(){e.forceDisallow_=!0},e.isAvailable=function(){return!((0,o.isNodeSdk)()||!e.forceAllow_&&(e.forceDisallow_||"undefined"==typeof document||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))},e.prototype.markConnectionHealthy=function(){},e.prototype.shutdown_=function(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)},e.prototype.onClosed_=function(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))},e.prototype.close=function(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())},e.prototype.send=function(e){var t=(0,o.stringify)(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);for(var n=(0,o.base64Encode)(t),r=L(n,1840),i=0;i<r.length;i++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[i]),this.curSegmentNum++},e.prototype.addDisconnectPingFrame=function(e,t){if(!(0,o.isNodeSdk)()){this.myDisconnFrame=document.createElement("iframe");var n={dframe:"t"};n.id=e,n.pw=t,this.myDisconnFrame.src=this.urlFn(n),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}},e.prototype.incrementIncomingBytes_=function(e){var t=(0,o.stringify)(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)},e}(),ie=function(){function e(t,n,r,i){if(this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,o.isNodeSdk)())this.commandCB=t,this.onMessageCB=n;else{this.uniqueCallbackIdentifier=m(),window["pLPCommand"+this.uniqueCallbackIdentifier]=t,window["pRTLPCB"+this.uniqueCallbackIdentifier]=n,this.myIFrame=e.createIFrame_();var s="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,"javascript:".length)&&(s='<script>document.domain="'+document.domain+'";<\/script>');var a="<html><body>"+s+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(a),this.myIFrame.doc.close()}catch(u){E("frame writing exception"),u.stack&&E(u.stack),E(u)}}}return e.createIFrame_=function(){var e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||E("No IE domain setting required")}catch(n){var t=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+t+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e},e.prototype.close=function(){var e=this;this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout(function(){null!==e.myIFrame&&(document.body.removeChild(e.myIFrame),e.myIFrame=null)},Math.floor(0)));var t=this.onDisconnect;t&&(this.onDisconnect=null,t())},e.prototype.startLongPoll=function(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););},e.prototype.newRequest_=function(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;var e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;for(var t=this.urlFn(e),n="",r=0;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+n.length<=1870;){var i=this.pendingSegs.shift();n=n+"&seg"+r+"="+i.seg+"&ts"+r+"="+i.ts+"&d"+r+"="+i.d,r++}return this.addLongPollTag_(t+=n,this.currentSerial),!0}return!1},e.prototype.enqueueSegment=function(e,t,n){this.pendingSegs.push({seg:e,ts:t,d:n}),this.alive&&this.newRequest_()},e.prototype.addLongPollTag_=function(e,t){var n=this;this.outstandingRequests.add(t);var r=function(){n.outstandingRequests.delete(t),n.newRequest_()},i=setTimeout(r,Math.floor(25e3));this.addTag(e,function(){clearTimeout(i),r()})},e.prototype.addTag=function(e,t){var n=this;(0,o.isNodeSdk)()?this.doNodeLongPoll(e,t):setTimeout(function(){try{if(!n.sendNewPolls)return;var r=n.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){var e=r.readyState;e&&"loaded"!==e&&"complete"!==e||(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),t())},r.onerror=function(){E("Long-poll script failed to load: "+e),n.sendNewPolls=!1,n.close()},n.myIFrame.doc.body.appendChild(r)}catch(i){}},Math.floor(1))},e}(),oe=null;"undefined"!=typeof MozWebSocket?oe=MozWebSocket:"undefined"!=typeof WebSocket&&(oe=WebSocket);var se=function(){function e(t,n,r,i,o,s,a){this.connId=t,this.applicationId=r,this.appCheckToken=i,this.authToken=o,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=I(this.connId),this.stats_=J(n),this.connURL=e.connectionURL_(n,s,a,i),this.nodeAdmin=n.nodeAdmin}return e.connectionURL_=function(e,t,n,r){var i={v:"5"};return!(0,o.isNodeSdk)()&&"undefined"!=typeof location&&location.hostname&&K.test(location.hostname)&&(i.r="f"),t&&(i.s=t),n&&(i.ls=n),r&&(i.ac=r),$(e,z,i)},e.prototype.open=function(e,t){var n=this;this.onDisconnect=t,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,p.set("previous_websocket_failure",!0);try{if((0,o.isNodeSdk)()){var r={headers:{"User-Agent":"Firebase/5/"+u+"/"+process.platform+"/"+(this.nodeAdmin?"AdminNode":"Node"),"X-Firebase-GMPID":this.applicationId||""}};this.authToken&&(r.headers.Authorization="Bearer "+this.authToken),this.appCheckToken&&(r.headers["X-Firebase-AppCheck"]=this.appCheckToken);var i=process.env,s=0===this.connURL.indexOf("wss://")?i.HTTPS_PROXY||i.https_proxy:i.HTTP_PROXY||i.http_proxy;s&&(r.proxy={origin:s}),this.mySock=new oe(this.connURL,[],r)}else this.mySock=new oe(this.connURL,[],r={headers:{"X-Firebase-GMPID":this.applicationId||"","X-Firebase-AppCheck":this.appCheckToken||""}})}catch(c){this.log_("Error instantiating WebSocket.");var a=c.message||c.data;return a&&this.log_(a),void this.onClosed_()}this.mySock.onopen=function(){n.log_("Websocket connected."),n.everConnected_=!0},this.mySock.onclose=function(){n.log_("Websocket connection was disconnected."),n.mySock=null,n.onClosed_()},this.mySock.onmessage=function(e){n.handleIncomingFrame(e)},this.mySock.onerror=function(e){n.log_("WebSocket error.  Closing connection.");var t=e.message||e.data;t&&n.log_(t),n.onClosed_()}},e.prototype.start=function(){},e.forceDisallow=function(){e.forceDisallow_=!0},e.isAvailable=function(){var t=!1;if("undefined"!=typeof navigator&&navigator.userAgent){var n=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);n&&n.length>1&&parseFloat(n[1])<4.4&&(t=!0)}return!t&&null!==oe&&!e.forceDisallow_},e.previouslyFailed=function(){return p.isInMemoryStorage||!0===p.get("previous_websocket_failure")},e.prototype.markConnectionHealthy=function(){p.remove("previous_websocket_failure")},e.prototype.appendFrame_=function(e){if(this.frames.push(e),this.frames.length===this.totalFrames){var t=this.frames.join("");this.frames=null;var n=(0,o.jsonEval)(t);this.onMessage(n)}},e.prototype.handleNewFrameCount_=function(e){this.totalFrames=e,this.frames=[]},e.prototype.extractFrameCount_=function(e){if((0,o.assert)(null===this.frames,"We already have a frame buffer"),e.length<=6){var t=Number(e);if(!isNaN(t))return this.handleNewFrameCount_(t),null}return this.handleNewFrameCount_(1),e},e.prototype.handleIncomingFrame=function(e){if(null!==this.mySock){var t=e.data;if(this.bytesReceived+=t.length,this.stats_.incrementCounter("bytes_received",t.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(t);else{var n=this.extractFrameCount_(t);null!==n&&this.appendFrame_(n)}}},e.prototype.send=function(e){this.resetKeepAlive();var t=(0,o.stringify)(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);var n=L(t,16384);n.length>1&&this.sendString_(String(n.length));for(var r=0;r<n.length;r++)this.sendString_(n[r])},e.prototype.shutdown_=function(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)},e.prototype.onClosed_=function(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))},e.prototype.close=function(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())},e.prototype.resetKeepAlive=function(){var e=this;clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(function(){e.mySock&&e.sendString_("0"),e.resetKeepAlive()},Math.floor(45e3))},e.prototype.sendString_=function(e){try{this.mySock.send(e)}catch(t){this.log_("Exception thrown from WebSocket.send():",t.message||t.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}},e.responsesRequiredToBeHealthy=2,e.healthyTimeout=3e4,e}(),ae=function(){function e(e){this.initTransports_(e)}return Object.defineProperty(e,"ALL_TRANSPORTS",{get:function(){return[re,se]},enumerable:!1,configurable:!0}),e.prototype.initTransports_=function(t){var n,r,i=se&&se.isAvailable(),o=i&&!se.previouslyFailed();if(t.webSocketOnly&&(i||S("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),o=!0),o)this.transports_=[se];else{var a=this.transports_=[];try{for(var u=(0,s.__values)(e.ALL_TRANSPORTS),c=u.next();!c.done;c=u.next()){var l=c.value;l&&l.isAvailable()&&a.push(l)}}catch(h){n={error:h}}finally{try{c&&!c.done&&(r=u.return)&&r.call(u)}finally{if(n)throw n.error}}}},e.prototype.initialTransport=function(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")},e.prototype.upgradeTransport=function(){return this.transports_.length>1?this.transports_[1]:null},e}(),ue=function(){function e(e,t,n,r,i,o,s,a,u,c){this.id=e,this.repoInfo_=t,this.applicationId_=n,this.appCheckToken_=r,this.authToken_=i,this.onMessage_=o,this.onReady_=s,this.onDisconnect_=a,this.onKill_=u,this.lastSessionId=c,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=I("c:"+this.id+":"),this.transportManager_=new ae(t),this.log_("Connection created"),this.start_()}return e.prototype.start_=function(){var e=this,t=this.transportManager_.initialTransport();this.conn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(function(){e.conn_&&e.conn_.open(n,r)},Math.floor(0));var i=t.healthyTimeout||0;i>0&&(this.healthyTimeout_=V(function(){e.healthyTimeout_=null,e.isHealthy_||(e.conn_&&e.conn_.bytesReceived>102400?(e.log_("Connection exceeded healthy timeout but has received "+e.conn_.bytesReceived+" bytes.  Marking connection healthy."),e.isHealthy_=!0,e.conn_.markConnectionHealthy()):e.conn_&&e.conn_.bytesSent>10240?e.log_("Connection exceeded healthy timeout but has sent "+e.conn_.bytesSent+" bytes.  Leaving connection alive."):(e.log_("Closing unhealthy connection after timeout."),e.close()))},Math.floor(i)))},e.prototype.nextTransportId_=function(){return"c:"+this.id+":"+this.connectionCount++},e.prototype.disconnReceiver_=function(e){var t=this;return function(n){e===t.conn_?t.onConnectionLost_(n):e===t.secondaryConn_?(t.log_("Secondary connection lost."),t.onSecondaryConnectionLost_()):t.log_("closing an old connection")}},e.prototype.connReceiver_=function(e){var t=this;return function(n){2!==t.state_&&(e===t.rx_?t.onPrimaryMessageReceived_(n):e===t.secondaryConn_?t.onSecondaryMessageReceived_(n):t.log_("message on old connection"))}},e.prototype.sendRequest=function(e){this.sendData_({t:"d",d:e})},e.prototype.tryCleanupConnection=function(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)},e.prototype.onSecondaryControl_=function(e){if("t"in e){var t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),this.tx_!==this.secondaryConn_&&this.rx_!==this.secondaryConn_||this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}},e.prototype.onSecondaryMessageReceived_=function(e){var t=O("t",e),n=O("d",e);if("c"===t)this.onSecondaryControl_(n);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(n)}},e.prototype.upgradeIfSecondaryHealthy_=function(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))},e.prototype.proceedWithUpgrade_=function(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()},e.prototype.onPrimaryMessageReceived_=function(e){var t=O("t",e),n=O("d",e);"c"===t?this.onControl_(n):"d"===t&&this.onDataMessage_(n)},e.prototype.onDataMessage_=function(e){this.onPrimaryResponse_(),this.onMessage_(e)},e.prototype.onPrimaryResponse_=function(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))},e.prototype.onControl_=function(e){var t=O("t",e);if("d"in e){var n=e.d;if("h"===t)this.onHandshake_(n);else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(var r=0;r<this.pendingDataMessages.length;++r)this.onDataMessage_(this.pendingDataMessages[r]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(n):"r"===t?this.onReset_(n):"e"===t?k("Server Error: "+n):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):k("Unknown control packet command: "+t)}},e.prototype.onHandshake_=function(e){var t=e.ts,n=e.v,r=e.h;this.sessionId=e.s,this.repoInfo_.host=r,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),"5"!==n&&S("Protocol version mismatch detected"),this.tryStartUpgrade_())},e.prototype.tryStartUpgrade_=function(){var e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)},e.prototype.startUpgrade_=function(e){var t=this;this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),V(function(){t.secondaryConn_&&(t.log_("Timed out trying to upgrade."),t.secondaryConn_.close())},Math.floor(6e4))},e.prototype.onReset_=function(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())},e.prototype.onConnectionEstablished_=function(e,t){var n=this;this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):V(function(){n.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))},e.prototype.sendPingOnPrimaryIfNecessary_=function(){this.isHealthy_||1!==this.state_||(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))},e.prototype.onSecondaryConnectionLost_=function(){var e=this.secondaryConn_;this.secondaryConn_=null,this.tx_!==e&&this.rx_!==e||this.close()},e.prototype.onConnectionLost_=function(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(p.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()},e.prototype.onConnectionShutdown_=function(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()},e.prototype.sendData_=function(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)},e.prototype.close=function(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))},e.prototype.closeConnections_=function(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)},e}(),ce=function(){function e(){}return e.prototype.put=function(e,t,n,r){},e.prototype.merge=function(e,t,n,r){},e.prototype.refreshAuthToken=function(e){},e.prototype.refreshAppCheckToken=function(e){},e.prototype.onDisconnectPut=function(e,t,n){},e.prototype.onDisconnectMerge=function(e,t,n){},e.prototype.onDisconnectCancel=function(e,t){},e.prototype.reportStats=function(e){},e}(),le=function(){function e(e){this.allowedEvents_=e,this.listeners_={},(0,o.assert)(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}return e.prototype.trigger=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];if(Array.isArray(this.listeners_[e]))for(var r=(0,s.__spreadArray)([],(0,s.__read)(this.listeners_[e])),i=0;i<r.length;i++)r[i].callback.apply(r[i].context,t)},e.prototype.on=function(e,t,n){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:n});var r=this.getInitialEvent(e);r&&t.apply(n,r)},e.prototype.off=function(e,t,n){this.validateEventType_(e);for(var r=this.listeners_[e]||[],i=0;i<r.length;i++)if(r[i].callback===t&&(!n||n===r[i].context))return void r.splice(i,1)},e.prototype.validateEventType_=function(e){(0,o.assert)(this.allowedEvents_.find(function(t){return t===e}),"Unknown event: "+e)},e}(),he=function(e){function t(){var t=e.call(this,["online"])||this;return t.online_=!0,"undefined"==typeof window||void 0===window.addEventListener||(0,o.isMobileCordova)()||(window.addEventListener("online",function(){t.online_||(t.online_=!0,t.trigger("online",!0))},!1),window.addEventListener("offline",function(){t.online_&&(t.online_=!1,t.trigger("online",!1))},!1)),t}return(0,s.__extends)(t,e),t.getInstance=function(){return new t},t.prototype.getInitialEvent=function(e){return(0,o.assert)("online"===e,"Unknown event type: "+e),[this.online_]},t.prototype.currentlyOnline=function(){return this.online_},t}(le),fe=function(){function e(e,t){if(void 0===t){this.pieces_=e.split("/");for(var n=0,r=0;r<this.pieces_.length;r++)this.pieces_[r].length>0&&(this.pieces_[n]=this.pieces_[r],n++);this.pieces_.length=n,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}return e.prototype.toString=function(){for(var e="",t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"},e}();function de(){return new fe("")}function pe(e){return e.pieceNum_>=e.pieces_.length?null:e.pieces_[e.pieceNum_]}function ge(e){return e.pieces_.length-e.pieceNum_}function ve(e){var t=e.pieceNum_;return t<e.pieces_.length&&t++,new fe(e.pieces_,t)}function me(e){return e.pieceNum_<e.pieces_.length?e.pieces_[e.pieces_.length-1]:null}function ye(e,t){return void 0===t&&(t=0),e.pieces_.slice(e.pieceNum_+t)}function _e(e){if(e.pieceNum_>=e.pieces_.length)return null;for(var t=[],n=e.pieceNum_;n<e.pieces_.length-1;n++)t.push(e.pieces_[n]);return new fe(t,0)}function be(e,t){for(var n=[],r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);if(t instanceof fe)for(r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);else{var i=t.split("/");for(r=0;r<i.length;r++)i[r].length>0&&n.push(i[r])}return new fe(n,0)}function we(e){return e.pieceNum_>=e.pieces_.length}function Te(e,t){var n=pe(e),r=pe(t);if(null===n)return t;if(n===r)return Te(ve(e),ve(t));throw new Error("INTERNAL ERROR: innerPath ("+t+") is not within outerPath ("+e+")")}function Ee(e,t){for(var n=ye(e,0),r=ye(t,0),i=0;i<n.length&&i<r.length;i++){var o=D(n[i],r[i]);if(0!==o)return o}return n.length===r.length?0:n.length<r.length?-1:1}function Ie(e,t){if(ge(e)!==ge(t))return!1;for(var n=e.pieceNum_,r=t.pieceNum_;n<=e.pieces_.length;n++,r++)if(e.pieces_[n]!==t.pieces_[r])return!1;return!0}function ke(e,t){var n=e.pieceNum_,r=t.pieceNum_;if(ge(e)>ge(t))return!1;for(;n<e.pieces_.length;){if(e.pieces_[n]!==t.pieces_[r])return!1;++n,++r}return!0}var Ce=function(e,t){this.errorPrefix_=t,this.parts_=ye(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(var n=0;n<this.parts_.length;n++)this.byteLength_+=(0,o.stringLength)(this.parts_[n]);Se(this)};function Se(e){if(e.byteLength_>768)throw new Error(e.errorPrefix_+"has a key path longer than 768 bytes ("+e.byteLength_+").");if(e.parts_.length>32)throw new Error(e.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+Ae(e))}function Ae(e){return 0===e.parts_.length?"":"in property '"+e.parts_.join(".")+"'"}var xe,Ne,De=function(e){function t(){var t,n,r=e.call(this,["visible"])||this;return"undefined"!=typeof document&&void 0!==document.addEventListener&&(void 0!==document.hidden?(n="visibilitychange",t="hidden"):void 0!==document.mozHidden?(n="mozvisibilitychange",t="mozHidden"):void 0!==document.msHidden?(n="msvisibilitychange",t="msHidden"):void 0!==document.webkitHidden&&(n="webkitvisibilitychange",t="webkitHidden")),r.visible_=!0,n&&document.addEventListener(n,function(){var e=!document[t];e!==r.visible_&&(r.visible_=e,r.trigger("visible",e))},!1),r}return(0,s.__extends)(t,e),t.getInstance=function(){return new t},t.prototype.getInitialEvent=function(e){return(0,o.assert)("visible"===e,"Unknown event type: "+e),[this.visible_]},t}(le),Pe=1e3,Oe=function(e){function t(n,r,i,s,a,u,c,l){var h=e.call(this)||this;if(h.repoInfo_=n,h.applicationId_=r,h.onDataUpdate_=i,h.onConnectStatus_=s,h.onServerInfoUpdate_=a,h.authTokenProvider_=u,h.appCheckTokenProvider_=c,h.authOverride_=l,h.id=t.nextPersistentConnectionId_++,h.log_=I("p:"+h.id+":"),h.interruptReasons_={},h.listens=new Map,h.outstandingPuts_=[],h.outstandingGets_=[],h.outstandingPutCount_=0,h.outstandingGetCount_=0,h.onDisconnectRequestQueue_=[],h.connected_=!1,h.reconnectDelay_=Pe,h.maxReconnectDelay_=3e5,h.securityDebugCallback_=null,h.lastSessionId=null,h.establishConnectionTimer_=null,h.visible_=!1,h.requestCBHash_={},h.requestNumber_=0,h.realtime_=null,h.authToken_=null,h.appCheckToken_=null,h.forceTokenRefresh_=!1,h.invalidAuthTokenCount_=0,h.invalidAppCheckTokenCount_=0,h.firstConnection_=!0,h.lastConnectionAttemptTime_=null,h.lastConnectionEstablishedTime_=null,l&&!(0,o.isNodeSdk)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");return De.getInstance().on("visible",h.onVisible_,h),-1===n.host.indexOf("fblocal")&&he.getInstance().on("online",h.onOnline_,h),h}return(0,s.__extends)(t,e),t.prototype.sendRequest=function(e,t,n){var r=++this.requestNumber_,i={r:r,a:e,b:t};this.log_((0,o.stringify)(i)),(0,o.assert)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(i),n&&(this.requestCBHash_[r]=n)},t.prototype.get=function(e){var t=this;this.initConnection_();var n=new o.Deferred,r={p:e._path.toString(),q:e._queryObject},i={action:"g",request:r,onComplete:function(e){var i=e.d;"ok"===e.s?(t.onDataUpdate_(r.p,i,!1,null),n.resolve(i)):n.reject(i)}};this.outstandingGets_.push(i),this.outstandingGetCount_++;var s=this.outstandingGets_.length-1;return this.connected_||setTimeout(function(){var e=t.outstandingGets_[s];void 0!==e&&i===e&&(delete t.outstandingGets_[s],t.outstandingGetCount_--,0===t.outstandingGetCount_&&(t.outstandingGets_=[]),t.log_("get "+s+" timed out on connection"),n.reject(new Error("Client is offline.")))},3e3),this.connected_&&this.sendGet_(s),n.promise},t.prototype.listen=function(e,t,n,r){this.initConnection_();var i=e._queryIdentifier,s=e._path.toString();this.log_("Listen called for "+s+" "+i),this.listens.has(s)||this.listens.set(s,new Map),(0,o.assert)(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,o.assert)(!this.listens.get(s).has(i),"listen() called twice for same path/queryId.");var a={onComplete:r,hashFn:t,query:e,tag:n};this.listens.get(s).set(i,a),this.connected_&&this.sendListen_(a)},t.prototype.sendGet_=function(e){var t=this,n=this.outstandingGets_[e];this.sendRequest("g",n.request,function(r){delete t.outstandingGets_[e],t.outstandingGetCount_--,0===t.outstandingGetCount_&&(t.outstandingGets_=[]),n.onComplete&&n.onComplete(r)})},t.prototype.sendListen_=function(e){var n=this,r=e.query,i=r._path.toString(),o=r._queryIdentifier;this.log_("Listen on "+i+" for "+o);var s={p:i};e.tag&&(s.q=r._queryObject,s.t=e.tag),s.h=e.hashFn(),this.sendRequest("q",s,function(s){var a=s.d,u=s.s;t.warnOnListenWarnings_(a,r),(n.listens.get(i)&&n.listens.get(i).get(o))===e&&(n.log_("listen response",s),"ok"!==u&&n.removeListen_(i,o),e.onComplete&&e.onComplete(u,a))})},t.warnOnListenWarnings_=function(e,t){if(e&&"object"==typeof e&&(0,o.contains)(e,"w")){var n=(0,o.safeGet)(e,"w");if(Array.isArray(n)&&~n.indexOf("no_index")){var r='".indexOn": "'+t._queryParams.getIndex().toString()+'"',i=t._path.toString();S("Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding "+r+" at "+i+" to your security rules for better performance.")}}},t.prototype.refreshAuthToken=function(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},function(){}),this.reduceReconnectDelayIfAdminCredential_(e)},t.prototype.reduceReconnectDelayIfAdminCredential_=function(e){(e&&40===e.length||(0,o.isAdmin)(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)},t.prototype.refreshAppCheckToken=function(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},function(){})},t.prototype.tryAuth=function(){var e=this;if(this.connected_&&this.authToken_){var t=this.authToken_,n=(0,o.isValidFormat)(t)?"auth":"gauth",r={cred:t};null===this.authOverride_?r.noauth=!0:"object"==typeof this.authOverride_&&(r.authvar=this.authOverride_),this.sendRequest(n,r,function(n){var r=n.s,i=n.d||"error";e.authToken_===t&&("ok"===r?e.invalidAuthTokenCount_=0:e.onAuthRevoked_(r,i))})}},t.prototype.tryAppCheck=function(){var e=this;this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},function(t){var n=t.s,r=t.d||"error";"ok"===n?e.invalidAppCheckTokenCount_=0:e.onAppCheckRevoked_(n,r)})},t.prototype.unlisten=function(e,t){var n=e._path.toString(),r=e._queryIdentifier;this.log_("Unlisten called for "+n+" "+r),(0,o.assert)(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(n,r)&&this.connected_&&this.sendUnlisten_(n,r,e._queryObject,t)},t.prototype.sendUnlisten_=function(e,t,n,r){this.log_("Unlisten on "+e+" for "+t);var i={p:e};r&&(i.q=n,i.t=r),this.sendRequest("n",i)},t.prototype.onDisconnectPut=function(e,t,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,t,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:t,onComplete:n})},t.prototype.onDisconnectMerge=function(e,t,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,t,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:t,onComplete:n})},t.prototype.onDisconnectCancel=function(e,t){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,t):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:t})},t.prototype.sendOnDisconnect_=function(e,t,n,r){var i={p:t,d:n};this.log_("onDisconnect "+e,i),this.sendRequest(e,i,function(e){r&&setTimeout(function(){r(e.s,e.d)},Math.floor(0))})},t.prototype.put=function(e,t,n,r){this.putInternal("p",e,t,n,r)},t.prototype.merge=function(e,t,n,r){this.putInternal("m",e,t,n,r)},t.prototype.putInternal=function(e,t,n,r,i){this.initConnection_();var o={p:t,d:n};void 0!==i&&(o.h=i),this.outstandingPuts_.push({action:e,request:o,onComplete:r}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+t)},t.prototype.sendPut_=function(e){var t=this,n=this.outstandingPuts_[e].action,r=this.outstandingPuts_[e].request,i=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(n,r,function(r){t.log_(n+" response",r),delete t.outstandingPuts_[e],t.outstandingPutCount_--,0===t.outstandingPutCount_&&(t.outstandingPuts_=[]),i&&i(r.s,r.d)})},t.prototype.reportStats=function(e){var t=this;if(this.connected_){var n={c:e};this.log_("reportStats",n),this.sendRequest("s",n,function(e){"ok"!==e.s&&t.log_("reportStats","Error sending stats: "+e.d)})}},t.prototype.onDataMessage_=function(e){if("r"in e){this.log_("from server: "+(0,o.stringify)(e));var t=e.r,n=this.requestCBHash_[t];n&&(delete this.requestCBHash_[t],n(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}},t.prototype.onDataPush_=function(e,t){this.log_("handleServerMessage",e,t),"d"===e?this.onDataUpdate_(t.p,t.d,!1,t.t):"m"===e?this.onDataUpdate_(t.p,t.d,!0,t.t):"c"===e?this.onListenRevoked_(t.p,t.q):"ac"===e?this.onAuthRevoked_(t.s,t.d):"apc"===e?this.onAppCheckRevoked_(t.s,t.d):"sd"===e?this.onSecurityDebugPacket_(t):k("Unrecognized action received from server: "+(0,o.stringify)(e)+"\nAre you using the latest client?")},t.prototype.onReady_=function(e,t){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(e),this.lastSessionId=t,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)},t.prototype.scheduleConnect_=function(e){var t=this;(0,o.assert)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(function(){t.establishConnectionTimer_=null,t.establishConnection_()},Math.floor(e))},t.prototype.initConnection_=function(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)},t.prototype.onVisible_=function(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Pe,this.realtime_||this.scheduleConnect_(0)),this.visible_=e},t.prototype.onOnline_=function(e){e?(this.log_("Browser went online."),this.reconnectDelay_=Pe,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())},t.prototype.onRealtimeDisconnect_=function(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=Pe),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());var e=(new Date).getTime()-this.lastConnectionAttemptTime_,t=Math.max(0,this.reconnectDelay_-e);t=Math.random()*t,this.log_("Trying to reconnect in "+t+"ms"),this.scheduleConnect_(t),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)},t.prototype.establishConnection_=function(){return(0,s.__awaiter)(this,void 0,void 0,function(){var e,n,r,i,a,u,c,l,h,f,d,p,g,v=this;return(0,s.__generator)(this,function(m){switch(m.label){case 0:if(!this.shouldReconnect_())return[3,4];this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=(new Date).getTime(),this.lastConnectionEstablishedTime_=null,e=this.onDataMessage_.bind(this),n=this.onReady_.bind(this),r=this.onRealtimeDisconnect_.bind(this),i=this.id+":"+t.nextConnectionId_++,a=this.lastSessionId,u=!1,c=null,this.realtime_={close:l=function(){c?c.close():(u=!0,r())},sendRequest:function(e){(0,o.assert)(c,"sendRequest call when we're not connected not allowed."),c.sendRequest(e)}},h=this.forceTokenRefresh_,this.forceTokenRefresh_=!1,m.label=1;case 1:return m.trys.push([1,3,,4]),[4,Promise.all([this.authTokenProvider_.getToken(h),this.appCheckTokenProvider_.getToken(h)])];case 2:return f=s.__read.apply(void 0,[m.sent(),2]),d=f[0],p=f[1],u?E("getToken() completed but was canceled"):(E("getToken() completed. Creating connection."),this.authToken_=d&&d.accessToken,this.appCheckToken_=p&&p.token,c=new ue(i,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,n,r,function(e){S(e+" ("+v.repoInfo_.toString()+")"),v.interrupt("server_kill")},a)),[3,4];case 3:return g=m.sent(),this.log_("Failed to get token: "+g),u||(this.repoInfo_.nodeAdmin&&S(g),l()),[3,4];case 4:return[2]}})})},t.prototype.interrupt=function(e){E("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())},t.prototype.resume=function(e){E("Resuming connection for reason: "+e),delete this.interruptReasons_[e],(0,o.isEmpty)(this.interruptReasons_)&&(this.reconnectDelay_=Pe,this.realtime_||this.scheduleConnect_(0))},t.prototype.handleTimestamp_=function(e){var t=e-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:t})},t.prototype.cancelSentTransactions_=function(){for(var e=0;e<this.outstandingPuts_.length;e++){var t=this.outstandingPuts_[e];t&&"h"in t.request&&t.queued&&(t.onComplete&&t.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])},t.prototype.onListenRevoked_=function(e,t){var n;n=t?t.map(function(e){return R(e)}).join("$"):"default";var r=this.removeListen_(e,n);r&&r.onComplete&&r.onComplete("permission_denied")},t.prototype.removeListen_=function(e,t){var n,r=new fe(e).toString();if(this.listens.has(r)){var i=this.listens.get(r);n=i.get(t),i.delete(t),0===i.size&&this.listens.delete(r)}else n=void 0;return n},t.prototype.onAuthRevoked_=function(e,t){E("Auth token revoked: "+e+"/"+t),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),"invalid_token"!==e&&"permission_denied"!==e||(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))},t.prototype.onAppCheckRevoked_=function(e,t){E("App check token revoked: "+e+"/"+t),this.appCheckToken_=null,this.forceTokenRefresh_=!0,"invalid_token"!==e&&"permission_denied"!==e||(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())},t.prototype.onSecurityDebugPacket_=function(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace("\n","\nFIREBASE: "))},t.prototype.restoreState_=function(){var e,t,n,r;this.tryAuth(),this.tryAppCheck();try{for(var i=(0,s.__values)(this.listens.values()),o=i.next();!o.done;o=i.next()){var a=o.value;try{for(var u=(n=void 0,(0,s.__values)(a.values())),c=u.next();!c.done;c=u.next())this.sendListen_(c.value)}catch(f){n={error:f}}finally{try{c&&!c.done&&(r=u.return)&&r.call(u)}finally{if(n)throw n.error}}}}catch(d){e={error:d}}finally{try{o&&!o.done&&(t=i.return)&&t.call(i)}finally{if(e)throw e.error}}for(var l=0;l<this.outstandingPuts_.length;l++)this.outstandingPuts_[l]&&this.sendPut_(l);for(;this.onDisconnectRequestQueue_.length;){var h=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(h.action,h.pathString,h.data,h.onComplete)}for(l=0;l<this.outstandingGets_.length;l++)this.outstandingGets_[l]&&this.sendGet_(l)},t.prototype.sendConnectStats_=function(){var e={},t="js";(0,o.isNodeSdk)()&&(t=this.repoInfo_.nodeAdmin?"admin_node":"node"),e["sdk."+t+"."+u.replace(/\./g,"-")]=1,(0,o.isMobileCordova)()?e["framework.cordova"]=1:(0,o.isReactNative)()&&(e["framework.reactnative"]=1),this.reportStats(e)},t.prototype.shouldReconnect_=function(){var e=he.getInstance().currentlyOnline();return(0,o.isEmpty)(this.interruptReasons_)&&e},t.nextPersistentConnectionId_=0,t.nextConnectionId_=0,t}(ce),Re=function(){function e(e,t){this.name=e,this.node=t}return e.Wrap=function(t,n){return new e(t,n)},e}(),Le=function(){function e(){}return e.prototype.getCompare=function(){return this.compare.bind(this)},e.prototype.indexedValueChanged=function(e,t){var n=new Re(x,e),r=new Re(x,t);return 0!==this.compare(n,r)},e.prototype.minPost=function(){return Re.MIN},e}(),Me=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,s.__extends)(t,e),Object.defineProperty(t,"__EMPTY_NODE",{get:function(){return xe},set:function(e){xe=e},enumerable:!1,configurable:!0}),t.prototype.compare=function(e,t){return D(e.name,t.name)},t.prototype.isDefinedOn=function(e){throw(0,o.assertionError)("KeyIndex.isDefinedOn not expected to be called.")},t.prototype.indexedValueChanged=function(e,t){return!1},t.prototype.minPost=function(){return Re.MIN},t.prototype.maxPost=function(){return new Re(N,xe)},t.prototype.makePost=function(e,t){return(0,o.assert)("string"==typeof e,"KeyIndex indexValue must always be a string."),new Re(e,xe)},t.prototype.toString=function(){return".key"},t}(Le),Fe=new Me,je=function(){function e(e,t,n,r,i){void 0===i&&(i=null),this.isReverse_=r,this.resultGenerator_=i,this.nodeStack_=[];for(var o=1;!e.isEmpty();)if(e=e,o=t?n(e.key,t):1,r&&(o*=-1),o<0)e=this.isReverse_?e.left:e.right;else{if(0===o){this.nodeStack_.push(e);break}this.nodeStack_.push(e),e=this.isReverse_?e.right:e.left}}return e.prototype.getNext=function(){if(0===this.nodeStack_.length)return null;var e,t=this.nodeStack_.pop();if(e=this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value},this.isReverse_)for(t=t.left;!t.isEmpty();)this.nodeStack_.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack_.push(t),t=t.left;return e},e.prototype.hasNext=function(){return this.nodeStack_.length>0},e.prototype.peek=function(){if(0===this.nodeStack_.length)return null;var e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}},e}(),qe=function(){function e(t,n,r,i,o){this.key=t,this.value=n,this.color=null!=r?r:e.RED,this.left=null!=i?i:Ve.EMPTY_NODE,this.right=null!=o?o:Ve.EMPTY_NODE}return e.prototype.copy=function(t,n,r,i,o){return new e(null!=t?t:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)},e.prototype.count=function(){return this.left.count()+1+this.right.count()},e.prototype.isEmpty=function(){return!1},e.prototype.inorderTraversal=function(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)},e.prototype.reverseTraversal=function(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)},e.prototype.min_=function(){return this.left.isEmpty()?this:this.left.min_()},e.prototype.minKey=function(){return this.min_().key},e.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},e.prototype.insert=function(e,t,n){var r=this,i=n(e,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n))).fixUp_()},e.prototype.removeMin_=function(){if(this.left.isEmpty())return Ve.EMPTY_NODE;var e=this;return e.left.isRed_()||e.left.left.isRed_()||(e=e.moveRedLeft_()),(e=e.copy(null,null,null,e.left.removeMin_(),null)).fixUp_()},e.prototype.remove=function(e,t){var n,r;if(t(e,(n=this).key)<0)n.left.isEmpty()||n.left.isRed_()||n.left.left.isRed_()||(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.remove(e,t),null);else{if(n.left.isRed_()&&(n=n.rotateRight_()),n.right.isEmpty()||n.right.isRed_()||n.right.left.isRed_()||(n=n.moveRedRight_()),0===t(e,n.key)){if(n.right.isEmpty())return Ve.EMPTY_NODE;r=n.right.min_(),n=n.copy(r.key,r.value,null,null,n.right.removeMin_())}n=n.copy(null,null,null,null,n.right.remove(e,t))}return n.fixUp_()},e.prototype.isRed_=function(){return this.color},e.prototype.fixUp_=function(){var e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e},e.prototype.moveRedLeft_=function(){var e=this.colorFlip_();return e.right.left.isRed_()&&(e=(e=(e=e.copy(null,null,null,null,e.right.rotateRight_())).rotateLeft_()).colorFlip_()),e},e.prototype.moveRedRight_=function(){var e=this.colorFlip_();return e.left.left.isRed_()&&(e=(e=e.rotateRight_()).colorFlip_()),e},e.prototype.rotateLeft_=function(){var t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)},e.prototype.rotateRight_=function(){var t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)},e.prototype.colorFlip_=function(){var e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)},e.prototype.checkMaxDepth_=function(){var e=this.check_();return Math.pow(2,e)<=this.count()+1},e.prototype.check_=function(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");var e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)},e.RED=!0,e.BLACK=!1,e}(),Ue=function(){function e(){}return e.prototype.copy=function(e,t,n,r,i){return this},e.prototype.insert=function(e,t,n){return new qe(e,t,null)},e.prototype.remove=function(e,t){return this},e.prototype.count=function(){return 0},e.prototype.isEmpty=function(){return!0},e.prototype.inorderTraversal=function(e){return!1},e.prototype.reverseTraversal=function(e){return!1},e.prototype.minKey=function(){return null},e.prototype.maxKey=function(){return null},e.prototype.check_=function(){return 0},e.prototype.isRed_=function(){return!1},e}(),Ve=function(){function e(t,n){void 0===n&&(n=e.EMPTY_NODE),this.comparator_=t,this.root_=n}return e.prototype.insert=function(t,n){return new e(this.comparator_,this.root_.insert(t,n,this.comparator_).copy(null,null,qe.BLACK,null,null))},e.prototype.remove=function(t){return new e(this.comparator_,this.root_.remove(t,this.comparator_).copy(null,null,qe.BLACK,null,null))},e.prototype.get=function(e){for(var t,n=this.root_;!n.isEmpty();){if(0===(t=this.comparator_(e,n.key)))return n.value;t<0?n=n.left:t>0&&(n=n.right)}return null},e.prototype.getPredecessorKey=function(e){for(var t,n=this.root_,r=null;!n.isEmpty();){if(0===(t=this.comparator_(e,n.key))){if(n.left.isEmpty())return r?r.key:null;for(n=n.left;!n.right.isEmpty();)n=n.right;return n.key}t<0?n=n.left:t>0&&(r=n,n=n.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")},e.prototype.isEmpty=function(){return this.root_.isEmpty()},e.prototype.count=function(){return this.root_.count()},e.prototype.minKey=function(){return this.root_.minKey()},e.prototype.maxKey=function(){return this.root_.maxKey()},e.prototype.inorderTraversal=function(e){return this.root_.inorderTraversal(e)},e.prototype.reverseTraversal=function(e){return this.root_.reverseTraversal(e)},e.prototype.getIterator=function(e){return new je(this.root_,null,this.comparator_,!1,e)},e.prototype.getIteratorFrom=function(e,t){return new je(this.root_,e,this.comparator_,!1,t)},e.prototype.getReverseIteratorFrom=function(e,t){return new je(this.root_,e,this.comparator_,!0,t)},e.prototype.getReverseIterator=function(e){return new je(this.root_,null,this.comparator_,!0,e)},e.EMPTY_NODE=new Ue,e}();function Be(e,t){return D(e.name,t.name)}function He(e,t){return D(e,t)}var We,Ke,ze,Ge,Qe,$e=function(e){return"number"==typeof e?"number:"+F(e):"string:"+e},Ye=function(e){if(e.isLeafNode()){var t=e.val();(0,o.assert)("string"==typeof t||"number"==typeof t||"object"==typeof t&&(0,o.contains)(t,".sv"),"Priority must be a string or number.")}else(0,o.assert)(e===Ne||e.isEmpty(),"priority of unexpected type.");(0,o.assert)(e===Ne||e.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")},Xe=function(){function e(t,n){void 0===n&&(n=e.__childrenNodeConstructor.EMPTY_NODE),this.value_=t,this.priorityNode_=n,this.lazyHash_=null,(0,o.assert)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),Ye(this.priorityNode_)}return Object.defineProperty(e,"__childrenNodeConstructor",{get:function(){return We},set:function(e){We=e},enumerable:!1,configurable:!0}),e.prototype.isLeafNode=function(){return!0},e.prototype.getPriority=function(){return this.priorityNode_},e.prototype.updatePriority=function(t){return new e(this.value_,t)},e.prototype.getImmediateChild=function(t){return".priority"===t?this.priorityNode_:e.__childrenNodeConstructor.EMPTY_NODE},e.prototype.getChild=function(t){return we(t)?this:".priority"===pe(t)?this.priorityNode_:e.__childrenNodeConstructor.EMPTY_NODE},e.prototype.hasChild=function(){return!1},e.prototype.getPredecessorChildName=function(e,t){return null},e.prototype.updateImmediateChild=function(t,n){return".priority"===t?this.updatePriority(n):n.isEmpty()&&".priority"!==t?this:e.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,n).updatePriority(this.priorityNode_)},e.prototype.updateChild=function(t,n){var r=pe(t);return null===r?n:n.isEmpty()&&".priority"!==r?this:((0,o.assert)(".priority"!==r||1===ge(t),".priority must be the last token in a path"),this.updateImmediateChild(r,e.__childrenNodeConstructor.EMPTY_NODE.updateChild(ve(t),n)))},e.prototype.isEmpty=function(){return!1},e.prototype.numChildren=function(){return 0},e.prototype.forEachChild=function(e,t){return!1},e.prototype.val=function(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()},e.prototype.hash=function(){if(null===this.lazyHash_){var e="";this.priorityNode_.isEmpty()||(e+="priority:"+$e(this.priorityNode_.val())+":");var t=typeof this.value_;e+=t+":",e+="number"===t?F(this.value_):this.value_,this.lazyHash_=y(e)}return this.lazyHash_},e.prototype.getValue=function(){return this.value_},e.prototype.compareTo=function(t){return t===e.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof e.__childrenNodeConstructor?-1:((0,o.assert)(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))},e.prototype.compareToLeafNode_=function(t){var n=typeof t.value_,r=typeof this.value_,i=e.VALUE_TYPE_ORDER.indexOf(n),s=e.VALUE_TYPE_ORDER.indexOf(r);return(0,o.assert)(i>=0,"Unknown leaf type: "+n),(0,o.assert)(s>=0,"Unknown leaf type: "+r),i===s?"object"===r?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:s-i},e.prototype.withIndex=function(){return this},e.prototype.isIndexed=function(){return!0},e.prototype.equals=function(e){return e===this||!!e.isLeafNode()&&this.value_===e.value_&&this.priorityNode_.equals(e.priorityNode_)},e.VALUE_TYPE_ORDER=["object","boolean","number","string"],e}(),Ze=new(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,s.__extends)(t,e),t.prototype.compare=function(e,t){var n=e.node.getPriority(),r=t.node.getPriority(),i=n.compareTo(r);return 0===i?D(e.name,t.name):i},t.prototype.isDefinedOn=function(e){return!e.getPriority().isEmpty()},t.prototype.indexedValueChanged=function(e,t){return!e.getPriority().equals(t.getPriority())},t.prototype.minPost=function(){return Re.MIN},t.prototype.maxPost=function(){return new Re(N,new Xe("[PRIORITY-POST]",ze))},t.prototype.makePost=function(e,t){var n=Ke(e);return new Re(t,new Xe("[PRIORITY-POST]",n))},t.prototype.toString=function(){return".priority"},t}(Le)),Je=Math.log(2),et=function(){function e(e){this.count=parseInt(Math.log(e+1)/Je,10),this.current_=this.count-1;var t=parseInt(Array(this.count+1).join("1"),2);this.bits_=e+1&t}return e.prototype.nextBitIsOne=function(){var e=!(this.bits_&1<<this.current_);return this.current_--,e},e}(),tt=function(e,t,n,r){e.sort(t);var i=function(t,r){var o,s,a=r-t;if(0===a)return null;if(1===a)return o=e[t],s=n?n(o):o,new qe(s,o.node,qe.BLACK,null,null);var u=parseInt(a/2,10)+t,c=i(t,u),l=i(u+1,r);return o=e[u],s=n?n(o):o,new qe(s,o.node,qe.BLACK,c,l)},o=function(t){for(var r=null,o=null,s=e.length,a=function(t,r){var o=s-t,a=s;s-=t;var c=i(o+1,a),l=e[o],h=n?n(l):l;u(new qe(h,l.node,r,null,c))},u=function(e){r?(r.left=e,r=e):(o=e,r=e)},c=0;c<t.count;++c){var l=t.nextBitIsOne(),h=Math.pow(2,t.count-(c+1));l?a(h,qe.BLACK):(a(h,qe.BLACK),a(h,qe.RED))}return o}(new et(e.length));return new Ve(r||t,o)},nt={},rt=function(){function e(e,t){this.indexes_=e,this.indexSet_=t}return Object.defineProperty(e,"Default",{get:function(){return(0,o.assert)(nt&&Ze,"ChildrenNode.ts has not been loaded"),Ge=Ge||new e({".priority":nt},{".priority":Ze})},enumerable:!1,configurable:!0}),e.prototype.get=function(e){var t=(0,o.safeGet)(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof Ve?t:null},e.prototype.hasIndex=function(e){return(0,o.contains)(this.indexSet_,e.toString())},e.prototype.addIndex=function(t,n){(0,o.assert)(t!==Fe,"KeyIndex always exists and isn't meant to be added to the IndexMap.");for(var r,i=[],a=!1,u=n.getIterator(Re.Wrap),c=u.getNext();c;)a=a||t.isDefinedOn(c.node),i.push(c),c=u.getNext();r=a?tt(i,t.getCompare()):nt;var l=t.toString(),h=(0,s.__assign)({},this.indexSet_);h[l]=t;var f=(0,s.__assign)({},this.indexes_);return f[l]=r,new e(f,h)},e.prototype.addToIndexes=function(t,n){var r=this;return new e((0,o.map)(this.indexes_,function(e,i){var s=(0,o.safeGet)(r.indexSet_,i);if((0,o.assert)(s,"Missing index implementation for "+i),e===nt){if(s.isDefinedOn(t.node)){for(var a=[],u=n.getIterator(Re.Wrap),c=u.getNext();c;)c.name!==t.name&&a.push(c),c=u.getNext();return a.push(t),tt(a,s.getCompare())}return nt}var l=n.get(t.name),h=e;return l&&(h=h.remove(new Re(t.name,l))),h.insert(t,t.node)}),this.indexSet_)},e.prototype.removeFromIndexes=function(t,n){return new e((0,o.map)(this.indexes_,function(e){if(e===nt)return e;var r=n.get(t.name);return r?e.remove(new Re(t.name,r)):e}),this.indexSet_)},e}(),it=function(){function e(e,t,n){this.children_=e,this.priorityNode_=t,this.indexMap_=n,this.lazyHash_=null,this.priorityNode_&&Ye(this.priorityNode_),this.children_.isEmpty()&&(0,o.assert)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}return Object.defineProperty(e,"EMPTY_NODE",{get:function(){return Qe||(Qe=new e(new Ve(He),null,rt.Default))},enumerable:!1,configurable:!0}),e.prototype.isLeafNode=function(){return!1},e.prototype.getPriority=function(){return this.priorityNode_||Qe},e.prototype.updatePriority=function(t){return this.children_.isEmpty()?this:new e(this.children_,t,this.indexMap_)},e.prototype.getImmediateChild=function(e){if(".priority"===e)return this.getPriority();var t=this.children_.get(e);return null===t?Qe:t},e.prototype.getChild=function(e){var t=pe(e);return null===t?this:this.getImmediateChild(t).getChild(ve(e))},e.prototype.hasChild=function(e){return null!==this.children_.get(e)},e.prototype.updateImmediateChild=function(t,n){if((0,o.assert)(n,"We should always be passing snapshot nodes"),".priority"===t)return this.updatePriority(n);var r=new Re(t,n),i=void 0,s=void 0;n.isEmpty()?(i=this.children_.remove(t),s=this.indexMap_.removeFromIndexes(r,this.children_)):(i=this.children_.insert(t,n),s=this.indexMap_.addToIndexes(r,this.children_));var a=i.isEmpty()?Qe:this.priorityNode_;return new e(i,a,s)},e.prototype.updateChild=function(e,t){var n=pe(e);if(null===n)return t;(0,o.assert)(".priority"!==pe(e)||1===ge(e),".priority must be the last token in a path");var r=this.getImmediateChild(n).updateChild(ve(e),t);return this.updateImmediateChild(n,r)},e.prototype.isEmpty=function(){return this.children_.isEmpty()},e.prototype.numChildren=function(){return this.children_.count()},e.prototype.val=function(t){if(this.isEmpty())return null;var n={},r=0,i=0,o=!0;if(this.forEachChild(Ze,function(s,a){n[s]=a.val(t),r++,o&&e.INTEGER_REGEXP_.test(s)?i=Math.max(i,Number(s)):o=!1}),!t&&o&&i<2*r){var s=[];for(var a in n)s[a]=n[a];return s}return t&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n},e.prototype.hash=function(){if(null===this.lazyHash_){var e="";this.getPriority().isEmpty()||(e+="priority:"+$e(this.getPriority().val())+":"),this.forEachChild(Ze,function(t,n){var r=n.hash();""!==r&&(e+=":"+t+":"+r)}),this.lazyHash_=""===e?"":y(e)}return this.lazyHash_},e.prototype.getPredecessorChildName=function(e,t,n){var r=this.resolveIndex_(n);if(r){var i=r.getPredecessorKey(new Re(e,t));return i?i.name:null}return this.children_.getPredecessorKey(e)},e.prototype.getFirstChildName=function(e){var t=this.resolveIndex_(e);if(t){var n=t.minKey();return n&&n.name}return this.children_.minKey()},e.prototype.getFirstChild=function(e){var t=this.getFirstChildName(e);return t?new Re(t,this.children_.get(t)):null},e.prototype.getLastChildName=function(e){var t=this.resolveIndex_(e);if(t){var n=t.maxKey();return n&&n.name}return this.children_.maxKey()},e.prototype.getLastChild=function(e){var t=this.getLastChildName(e);return t?new Re(t,this.children_.get(t)):null},e.prototype.forEachChild=function(e,t){var n=this.resolveIndex_(e);return n?n.inorderTraversal(function(e){return t(e.name,e.node)}):this.children_.inorderTraversal(t)},e.prototype.getIterator=function(e){return this.getIteratorFrom(e.minPost(),e)},e.prototype.getIteratorFrom=function(e,t){var n=this.resolveIndex_(t);if(n)return n.getIteratorFrom(e,function(e){return e});for(var r=this.children_.getIteratorFrom(e.name,Re.Wrap),i=r.peek();null!=i&&t.compare(i,e)<0;)r.getNext(),i=r.peek();return r},e.prototype.getReverseIterator=function(e){return this.getReverseIteratorFrom(e.maxPost(),e)},e.prototype.getReverseIteratorFrom=function(e,t){var n=this.resolveIndex_(t);if(n)return n.getReverseIteratorFrom(e,function(e){return e});for(var r=this.children_.getReverseIteratorFrom(e.name,Re.Wrap),i=r.peek();null!=i&&t.compare(i,e)>0;)r.getNext(),i=r.peek();return r},e.prototype.compareTo=function(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===ot?-1:0},e.prototype.withIndex=function(t){if(t===Fe||this.indexMap_.hasIndex(t))return this;var n=this.indexMap_.addIndex(t,this.children_);return new e(this.children_,this.priorityNode_,n)},e.prototype.isIndexed=function(e){return e===Fe||this.indexMap_.hasIndex(e)},e.prototype.equals=function(e){if(e===this)return!0;if(e.isLeafNode())return!1;var t=e;if(this.getPriority().equals(t.getPriority())){if(this.children_.count()===t.children_.count()){for(var n=this.getIterator(Ze),r=t.getIterator(Ze),i=n.getNext(),o=r.getNext();i&&o;){if(i.name!==o.name||!i.node.equals(o.node))return!1;i=n.getNext(),o=r.getNext()}return null===i&&null===o}return!1}return!1},e.prototype.resolveIndex_=function(e){return e===Fe?null:this.indexMap_.get(e.toString())},e.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,e}(),ot=new(function(e){function t(){return e.call(this,new Ve(He),it.EMPTY_NODE,rt.Default)||this}return(0,s.__extends)(t,e),t.prototype.compareTo=function(e){return e===this?0:1},t.prototype.equals=function(e){return e===this},t.prototype.getPriority=function(){return this},t.prototype.getImmediateChild=function(e){return it.EMPTY_NODE},t.prototype.isEmpty=function(){return!1},t}(it));function st(e,t){if(void 0===t&&(t=null),null===e)return it.EMPTY_NODE;if("object"==typeof e&&".priority"in e&&(t=e[".priority"]),(0,o.assert)(null===t||"string"==typeof t||"number"==typeof t||"object"==typeof t&&".sv"in t,"Invalid priority type found: "+typeof t),"object"==typeof e&&".value"in e&&null!==e[".value"]&&(e=e[".value"]),"object"!=typeof e||".sv"in e)return new Xe(e,st(t));if(e instanceof Array){var n=it.EMPTY_NODE;return M(e,function(t,r){if((0,o.contains)(e,t)&&"."!==t.substring(0,1)){var i=st(r);!i.isLeafNode()&&i.isEmpty()||(n=n.updateImmediateChild(t,i))}}),n.updatePriority(st(t))}var r=[],i=!1;if(M(e,function(e,t){if("."!==e.substring(0,1)){var n=st(t);n.isEmpty()||(i=i||!n.getPriority().isEmpty(),r.push(new Re(e,n)))}}),0===r.length)return it.EMPTY_NODE;var s=tt(r,Be,function(e){return e.name},He);if(i){var a=tt(r,Ze.getCompare());return new it(s,st(t),new rt({".priority":a},{".priority":Ze}))}return new it(s,st(t),rt.Default)}Object.defineProperties(Re,{MIN:{value:new Re(x,it.EMPTY_NODE)},MAX:{value:new Re(N,ot)}}),Me.__EMPTY_NODE=it.EMPTY_NODE,Xe.__childrenNodeConstructor=it,Ne=ot,ze=ot,Ke=st;var at,ut,ct=function(e){function t(t){var n=e.call(this)||this;return n.indexPath_=t,(0,o.assert)(!we(t)&&".priority"!==pe(t),"Can't create PathIndex with empty path or .priority key"),n}return(0,s.__extends)(t,e),t.prototype.extractChild=function(e){return e.getChild(this.indexPath_)},t.prototype.isDefinedOn=function(e){return!e.getChild(this.indexPath_).isEmpty()},t.prototype.compare=function(e,t){var n=this.extractChild(e.node),r=this.extractChild(t.node),i=n.compareTo(r);return 0===i?D(e.name,t.name):i},t.prototype.makePost=function(e,t){var n=st(e),r=it.EMPTY_NODE.updateChild(this.indexPath_,n);return new Re(t,r)},t.prototype.maxPost=function(){var e=it.EMPTY_NODE.updateChild(this.indexPath_,ot);return new Re(N,e)},t.prototype.toString=function(){return ye(this.indexPath_,0).join("/")},t}(Le),lt=new(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,s.__extends)(t,e),t.prototype.compare=function(e,t){var n=e.node.compareTo(t.node);return 0===n?D(e.name,t.name):n},t.prototype.isDefinedOn=function(e){return!0},t.prototype.indexedValueChanged=function(e,t){return!e.equals(t)},t.prototype.minPost=function(){return Re.MIN},t.prototype.maxPost=function(){return Re.MAX},t.prototype.makePost=function(e,t){var n=st(e);return new Re(t,n)},t.prototype.toString=function(){return".value"},t}(Le)),ht="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",ft=(at=0,ut=[],function(e){var t,n=e===at;at=e;var r=new Array(8);for(t=7;t>=0;t--)r[t]=ht.charAt(e%64),e=Math.floor(e/64);(0,o.assert)(0===e,"Cannot push at time == 0");var i=r.join("");if(n){for(t=11;t>=0&&63===ut[t];t--)ut[t]=0;ut[t]++}else for(t=0;t<12;t++)ut[t]=Math.floor(64*Math.random());for(t=0;t<12;t++)i+=ht.charAt(ut[t]);return(0,o.assert)(20===i.length,"nextPushId: Length should be 20."),i}),dt=function(e){if("2147483647"===e)return"-";var t=q(e);if(null!=t)return""+(t+1);for(var n=new Array(e.length),r=0;r<n.length;r++)n[r]=e.charAt(r);if(n.length<786)return n.push("-"),n.join("");for(var i=n.length-1;i>=0&&"z"===n[i];)i--;if(-1===i)return N;var o=ht.charAt(ht.indexOf(n[i])+1);return n[i]=o,n.slice(0,i+1).join("")},pt=function(e){if("-2147483648"===e)return x;var t=q(e);if(null!=t)return""+(t-1);for(var n=new Array(e.length),r=0;r<n.length;r++)n[r]=e.charAt(r);return"-"===n[n.length-1]?1===n.length?"2147483647":(delete n[n.length-1],n.join("")):(n[n.length-1]=ht.charAt(ht.indexOf(n[n.length-1])-1),n.join("")+"z".repeat(786-n.length))};function gt(e){return{type:"value",snapshotNode:e}}function vt(e,t){return{type:"child_added",snapshotNode:t,childName:e}}function mt(e,t){return{type:"child_removed",snapshotNode:t,childName:e}}function yt(e,t,n){return{type:"child_changed",snapshotNode:t,childName:e,oldSnap:n}}var _t=function(){function e(e){this.index_=e}return e.prototype.updateChild=function(e,t,n,r,i,s){(0,o.assert)(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");var a=e.getImmediateChild(t);return a.getChild(r).equals(n.getChild(r))&&a.isEmpty()===n.isEmpty()?e:(null!=s&&(n.isEmpty()?e.hasChild(t)?s.trackChildChange(mt(t,a)):(0,o.assert)(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):a.isEmpty()?s.trackChildChange(vt(t,n)):s.trackChildChange(yt(t,n,a))),e.isLeafNode()&&n.isEmpty()?e:e.updateImmediateChild(t,n).withIndex(this.index_))},e.prototype.updateFullNode=function(e,t,n){return null!=n&&(e.isLeafNode()||e.forEachChild(Ze,function(e,r){t.hasChild(e)||n.trackChildChange(mt(e,r))}),t.isLeafNode()||t.forEachChild(Ze,function(t,r){if(e.hasChild(t)){var i=e.getImmediateChild(t);i.equals(r)||n.trackChildChange(yt(t,r,i))}else n.trackChildChange(vt(t,r))})),t.withIndex(this.index_)},e.prototype.updatePriority=function(e,t){return e.isEmpty()?it.EMPTY_NODE:e.updatePriority(t)},e.prototype.filtersNodes=function(){return!1},e.prototype.getIndexedFilter=function(){return this},e.prototype.getIndex=function(){return this.index_},e}(),bt=function(){function e(t){this.indexedFilter_=new _t(t.getIndex()),this.index_=t.getIndex(),this.startPost_=e.getStartPost_(t),this.endPost_=e.getEndPost_(t)}return e.prototype.getStartPost=function(){return this.startPost_},e.prototype.getEndPost=function(){return this.endPost_},e.prototype.matches=function(e){return this.index_.compare(this.getStartPost(),e)<=0&&this.index_.compare(e,this.getEndPost())<=0},e.prototype.updateChild=function(e,t,n,r,i,o){return this.matches(new Re(t,n))||(n=it.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,n,r,i,o)},e.prototype.updateFullNode=function(e,t,n){t.isLeafNode()&&(t=it.EMPTY_NODE);var r=t.withIndex(this.index_);r=r.updatePriority(it.EMPTY_NODE);var i=this;return t.forEachChild(Ze,function(e,t){i.matches(new Re(e,t))||(r=r.updateImmediateChild(e,it.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,r,n)},e.prototype.updatePriority=function(e,t){return e},e.prototype.filtersNodes=function(){return!0},e.prototype.getIndexedFilter=function(){return this.indexedFilter_},e.prototype.getIndex=function(){return this.index_},e.getStartPost_=function(e){if(e.hasStart()){var t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}return e.getIndex().minPost()},e.getEndPost_=function(e){if(e.hasEnd()){var t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}return e.getIndex().maxPost()},e}(),wt=function(){function e(e){this.rangedFilter_=new bt(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft()}return e.prototype.updateChild=function(e,t,n,r,i,o){return this.rangedFilter_.matches(new Re(t,n))||(n=it.EMPTY_NODE),e.getImmediateChild(t).equals(n)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,n,r,i,o):this.fullLimitUpdateChild_(e,t,n,i,o)},e.prototype.updateFullNode=function(e,t,n){var r;if(t.isLeafNode()||t.isEmpty())r=it.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<t.numChildren()&&t.isIndexed(this.index_)){r=it.EMPTY_NODE.withIndex(this.index_);var i=void 0;i=this.reverse_?t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);for(var o=0;i.hasNext()&&o<this.limit_;){var s=i.getNext();if(!(this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),s)<=0:this.index_.compare(s,this.rangedFilter_.getEndPost())<=0))break;r=r.updateImmediateChild(s.name,s.node),o++}}else{r=(r=t.withIndex(this.index_)).updatePriority(it.EMPTY_NODE);var a=void 0,u=void 0,c=void 0;if(i=void 0,this.reverse_){i=r.getReverseIterator(this.index_),a=this.rangedFilter_.getEndPost(),u=this.rangedFilter_.getStartPost();var l=this.index_.getCompare();c=function(e,t){return l(t,e)}}else i=r.getIterator(this.index_),a=this.rangedFilter_.getStartPost(),u=this.rangedFilter_.getEndPost(),c=this.index_.getCompare();o=0;for(var h=!1;i.hasNext();)s=i.getNext(),!h&&c(a,s)<=0&&(h=!0),h&&o<this.limit_&&c(s,u)<=0?o++:r=r.updateImmediateChild(s.name,it.EMPTY_NODE)}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,r,n)},e.prototype.updatePriority=function(e,t){return e},e.prototype.filtersNodes=function(){return!0},e.prototype.getIndexedFilter=function(){return this.rangedFilter_.getIndexedFilter()},e.prototype.getIndex=function(){return this.index_},e.prototype.fullLimitUpdateChild_=function(e,t,n,r,i){var s;if(this.reverse_){var a=this.index_.getCompare();s=function(e,t){return a(t,e)}}else s=this.index_.getCompare();var u=e;(0,o.assert)(u.numChildren()===this.limit_,"");var c=new Re(t,n),l=this.reverse_?u.getFirstChild(this.index_):u.getLastChild(this.index_),h=this.rangedFilter_.matches(c);if(u.hasChild(t)){for(var f=u.getImmediateChild(t),d=r.getChildAfterChild(this.index_,l,this.reverse_);null!=d&&(d.name===t||u.hasChild(d.name));)d=r.getChildAfterChild(this.index_,d,this.reverse_);var p=null==d?1:s(d,c);if(h&&!n.isEmpty()&&p>=0)return null!=i&&i.trackChildChange(yt(t,n,f)),u.updateImmediateChild(t,n);null!=i&&i.trackChildChange(mt(t,f));var g=u.updateImmediateChild(t,it.EMPTY_NODE);return null!=d&&this.rangedFilter_.matches(d)?(null!=i&&i.trackChildChange(vt(d.name,d.node)),g.updateImmediateChild(d.name,d.node)):g}return n.isEmpty()?e:h&&s(l,c)>=0?(null!=i&&(i.trackChildChange(mt(l.name,l.node)),i.trackChildChange(vt(t,n))),u.updateImmediateChild(t,n).updateImmediateChild(l.name,it.EMPTY_NODE)):e},e}(),Tt=function(){function e(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Ze}return e.prototype.hasStart=function(){return this.startSet_},e.prototype.hasStartAfter=function(){return this.startAfterSet_},e.prototype.hasEndBefore=function(){return this.endBeforeSet_},e.prototype.isViewFromLeft=function(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_},e.prototype.getIndexStartValue=function(){return(0,o.assert)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_},e.prototype.getIndexStartName=function(){return(0,o.assert)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:x},e.prototype.hasEnd=function(){return this.endSet_},e.prototype.getIndexEndValue=function(){return(0,o.assert)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_},e.prototype.getIndexEndName=function(){return(0,o.assert)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:N},e.prototype.hasLimit=function(){return this.limitSet_},e.prototype.hasAnchoredLimit=function(){return this.limitSet_&&""!==this.viewFrom_},e.prototype.getLimit=function(){return(0,o.assert)(this.limitSet_,"Only valid if limit has been set"),this.limit_},e.prototype.getIndex=function(){return this.index_},e.prototype.loadsAllData=function(){return!(this.startSet_||this.endSet_||this.limitSet_)},e.prototype.isDefault=function(){return this.loadsAllData()&&this.index_===Ze},e.prototype.copy=function(){var t=new e;return t.limitSet_=this.limitSet_,t.limit_=this.limit_,t.startSet_=this.startSet_,t.indexStartValue_=this.indexStartValue_,t.startNameSet_=this.startNameSet_,t.indexStartName_=this.indexStartName_,t.endSet_=this.endSet_,t.indexEndValue_=this.indexEndValue_,t.endNameSet_=this.endNameSet_,t.indexEndName_=this.indexEndName_,t.index_=this.index_,t.viewFrom_=this.viewFrom_,t},e}();function Et(e,t,n){var r=e.copy();return r.startSet_=!0,void 0===t&&(t=null),r.indexStartValue_=t,null!=n?(r.startNameSet_=!0,r.indexStartName_=n):(r.startNameSet_=!1,r.indexStartName_=""),r}function It(e,t,n){var r=e.copy();return r.endSet_=!0,void 0===t&&(t=null),r.indexEndValue_=t,void 0!==n?(r.endNameSet_=!0,r.indexEndName_=n):(r.endNameSet_=!1,r.indexEndName_=""),r}function kt(e,t){var n=e.copy();return n.index_=t,n}function Ct(e){var t,n={};return e.isDefault()||(e.index_===Ze?t="$priority":e.index_===lt?t="$value":e.index_===Fe?t="$key":((0,o.assert)(e.index_ instanceof ct,"Unrecognized index type!"),t=e.index_.toString()),n.orderBy=(0,o.stringify)(t),e.startSet_&&(n.startAt=(0,o.stringify)(e.indexStartValue_),e.startNameSet_&&(n.startAt+=","+(0,o.stringify)(e.indexStartName_))),e.endSet_&&(n.endAt=(0,o.stringify)(e.indexEndValue_),e.endNameSet_&&(n.endAt+=","+(0,o.stringify)(e.indexEndName_))),e.limitSet_&&(e.isViewFromLeft()?n.limitToFirst=e.limit_:n.limitToLast=e.limit_)),n}function St(e){var t={};if(e.startSet_&&(t.sp=e.indexStartValue_,e.startNameSet_&&(t.sn=e.indexStartName_)),e.endSet_&&(t.ep=e.indexEndValue_,e.endNameSet_&&(t.en=e.indexEndName_)),e.limitSet_){t.l=e.limit_;var n=e.viewFrom_;""===n&&(n=e.isViewFromLeft()?"l":"r"),t.vf=n}return e.index_!==Ze&&(t.i=e.index_.toString()),t}var At=function(e){function t(t,n,r,i){var o=e.call(this)||this;return o.repoInfo_=t,o.onDataUpdate_=n,o.authTokenProvider_=r,o.appCheckTokenProvider_=i,o.log_=I("p:rest:"),o.listens_={},o}return(0,s.__extends)(t,e),t.prototype.reportStats=function(e){throw new Error("Method not implemented.")},t.getListenId_=function(e,t){return void 0!==t?"tag$"+t:((0,o.assert)(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())},t.prototype.listen=function(e,n,r,i){var s=this,a=e._path.toString();this.log_("Listen called for "+a+" "+e._queryIdentifier);var u=t.getListenId_(e,r),c={};this.listens_[u]=c;var l=Ct(e._queryParams);this.restRequest_(a+".json",l,function(e,t){var n=t;404===e&&(n=null,e=null),null===e&&s.onDataUpdate_(a,n,!1,r),(0,o.safeGet)(s.listens_,u)===c&&i(e?401===e?"permission_denied":"rest_error:"+e:"ok",null)})},t.prototype.unlisten=function(e,n){var r=t.getListenId_(e,n);delete this.listens_[r]},t.prototype.get=function(e){var t=this,n=Ct(e._queryParams),r=e._path.toString(),i=new o.Deferred;return this.restRequest_(r+".json",n,function(e,n){var o=n;404===e&&(o=null,e=null),null===e?(t.onDataUpdate_(r,o,!1,null),i.resolve(o)):i.reject(new Error(o))}),i.promise},t.prototype.refreshAuthToken=function(e){},t.prototype.restRequest_=function(e,t,n){var r=this;return void 0===t&&(t={}),t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(function(i){var a=(0,s.__read)(i,2),u=a[0],c=a[1];u&&u.accessToken&&(t.auth=u.accessToken),c&&c.token&&(t.ac=c.token);var l=(r.repoInfo_.secure?"https://":"http://")+r.repoInfo_.host+e+"?ns="+r.repoInfo_.namespace+(0,o.querystring)(t);r.log_("Sending REST request for "+l);var h=new XMLHttpRequest;h.onreadystatechange=function(){if(n&&4===h.readyState){r.log_("REST Response for "+l+" received. status:",h.status,"response:",h.responseText);var e=null;if(h.status>=200&&h.status<300){try{e=(0,o.jsonEval)(h.responseText)}catch(t){S("Failed to parse JSON response for "+l+": "+h.responseText)}n(null,e)}else 401!==h.status&&404!==h.status&&S("Got unsuccessful REST response for "+l+" Status: "+h.status),n(h.status);n=null}},h.open("GET",l,!0),h.send()})},t}(ce),xt=function(){function e(){this.rootNode_=it.EMPTY_NODE}return e.prototype.getNode=function(e){return this.rootNode_.getChild(e)},e.prototype.updateSnapshot=function(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)},e}();function Nt(){return{value:null,children:new Map}}function Dt(e,t,n){if(we(t))e.value=n,e.children.clear();else if(null!==e.value)e.value=e.value.updateChild(t,n);else{var r=pe(t);e.children.has(r)||e.children.set(r,Nt()),Dt(e.children.get(r),t=ve(t),n)}}function Pt(e,t){if(we(t))return e.value=null,e.children.clear(),!0;if(null!==e.value){if(e.value.isLeafNode())return!1;var n=e.value;return e.value=null,n.forEachChild(Ze,function(t,n){Dt(e,new fe(t),n)}),Pt(e,t)}if(e.children.size>0){var r=pe(t);return t=ve(t),e.children.has(r)&&Pt(e.children.get(r),t)&&e.children.delete(r),0===e.children.size}return!0}function Ot(e,t,n){null!==e.value?n(t,e.value):function(e,t){e.children.forEach(function(e,n){t(n,e)})}(e,function(e,r){Ot(r,new fe(t.toString()+"/"+e),n)})}var Rt=function(){function e(e){this.collection_=e,this.last_=null}return e.prototype.get=function(){var e=this.collection_.get(),t=(0,s.__assign)({},e);return this.last_&&M(this.last_,function(e,n){t[e]=t[e]-n}),this.last_=e,t},e}(),Lt=function(){function e(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new Rt(e);var n=1e4+2e4*Math.random();V(this.reportStats_.bind(this),Math.floor(n))}return e.prototype.reportStats_=function(){var e=this,t=this.statsListener_.get(),n={},r=!1;M(t,function(t,i){i>0&&(0,o.contains)(e.statsToReport_,t)&&(n[t]=i,r=!0)}),r&&this.server_.reportStats(n),V(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))},e}(),Mt=(()=>(function(e){e[e.OVERWRITE=0]="OVERWRITE",e[e.MERGE=1]="MERGE",e[e.ACK_USER_WRITE=2]="ACK_USER_WRITE",e[e.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"}(Mt||(Mt={})),Mt))();function Ft(e){return{fromUser:!1,fromServer:!0,queryId:e,tagged:!0}}var jt,qt=function(){function e(e,t,n){this.path=e,this.affectedTree=t,this.revert=n,this.type=Mt.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}return e.prototype.operationForChild=function(t){if(we(this.path)){if(null!=this.affectedTree.value)return(0,o.assert)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;var n=this.affectedTree.subtree(new fe(t));return new e(de(),n,this.revert)}return(0,o.assert)(pe(this.path)===t,"operationForChild called for unrelated child."),new e(ve(this.path),this.affectedTree,this.revert)},e}(),Ut=function(){function e(e,t){this.source=e,this.path=t,this.type=Mt.LISTEN_COMPLETE}return e.prototype.operationForChild=function(t){return we(this.path)?new e(this.source,de()):new e(this.source,ve(this.path))},e}(),Vt=function(){function e(e,t,n){this.source=e,this.path=t,this.snap=n,this.type=Mt.OVERWRITE}return e.prototype.operationForChild=function(t){return we(this.path)?new e(this.source,de(),this.snap.getImmediateChild(t)):new e(this.source,ve(this.path),this.snap)},e}(),Bt=function(){function e(e,t,n){this.source=e,this.path=t,this.children=n,this.type=Mt.MERGE}return e.prototype.operationForChild=function(t){if(we(this.path)){var n=this.children.subtree(new fe(t));return n.isEmpty()?null:n.value?new Vt(this.source,de(),n.value):new e(this.source,de(),n)}return(0,o.assert)(pe(this.path)===t,"Can't get a merge for a child not on the path of the operation"),new e(this.source,ve(this.path),this.children)},e.prototype.toString=function(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"},e}(),Ht=function(){function e(e,t,n){this.node_=e,this.fullyInitialized_=t,this.filtered_=n}return e.prototype.isFullyInitialized=function(){return this.fullyInitialized_},e.prototype.isFiltered=function(){return this.filtered_},e.prototype.isCompleteForPath=function(e){if(we(e))return this.isFullyInitialized()&&!this.filtered_;var t=pe(e);return this.isCompleteForChild(t)},e.prototype.isCompleteForChild=function(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)},e.prototype.getNode=function(){return this.node_},e}(),Wt=function(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()};function Kt(e,t,n,r,i,s){var a=r.filter(function(e){return e.type===n});a.sort(function(t,n){return function(e,t,n){if(null==t.childName||null==n.childName)throw(0,o.assertionError)("Should only compare child_ events.");var r=new Re(t.childName,t.snapshotNode),i=new Re(n.childName,n.snapshotNode);return e.index_.compare(r,i)}(e,t,n)}),a.forEach(function(n){var r=function(e,t,n){return"value"===t.type||"child_removed"===t.type||(t.prevName=n.getPredecessorChildName(t.childName,t.snapshotNode,e.index_)),t}(e,n,s);i.forEach(function(i){i.respondsTo(n.type)&&t.push(i.createEvent(r,e.query_))})})}function zt(e,t){return{eventCache:e,serverCache:t}}function Gt(e,t,n,r){return zt(new Ht(t,n,r),e.serverCache)}function Qt(e,t,n,r){return zt(e.eventCache,new Ht(t,n,r))}function $t(e){return e.eventCache.isFullyInitialized()?e.eventCache.getNode():null}function Yt(e){return e.serverCache.isFullyInitialized()?e.serverCache.getNode():null}var Xt=function(){function e(e,t){void 0===t&&(jt||(jt=new Ve(P)),t=jt),this.value=e,this.children=t}return e.fromObject=function(t){var n=new e(null);return M(t,function(e,t){n=n.set(new fe(e),t)}),n},e.prototype.isEmpty=function(){return null===this.value&&this.children.isEmpty()},e.prototype.findRootMostMatchingPathAndValue=function(e,t){if(null!=this.value&&t(this.value))return{path:de(),value:this.value};if(we(e))return null;var n=pe(e),r=this.children.get(n);if(null!==r){var i=r.findRootMostMatchingPathAndValue(ve(e),t);return null!=i?{path:be(new fe(n),i.path),value:i.value}:null}return null},e.prototype.findRootMostValueAndPath=function(e){return this.findRootMostMatchingPathAndValue(e,function(){return!0})},e.prototype.subtree=function(t){if(we(t))return this;var n=pe(t),r=this.children.get(n);return null!==r?r.subtree(ve(t)):new e(null)},e.prototype.set=function(t,n){if(we(t))return new e(n,this.children);var r=pe(t),i=(this.children.get(r)||new e(null)).set(ve(t),n),o=this.children.insert(r,i);return new e(this.value,o)},e.prototype.remove=function(t){if(we(t))return this.children.isEmpty()?new e(null):new e(null,this.children);var n=pe(t),r=this.children.get(n);if(r){var i=r.remove(ve(t)),o=void 0;return o=i.isEmpty()?this.children.remove(n):this.children.insert(n,i),null===this.value&&o.isEmpty()?new e(null):new e(this.value,o)}return this},e.prototype.get=function(e){if(we(e))return this.value;var t=pe(e),n=this.children.get(t);return n?n.get(ve(e)):null},e.prototype.setTree=function(t,n){if(we(t))return n;var r,i=pe(t),o=(this.children.get(i)||new e(null)).setTree(ve(t),n);return r=o.isEmpty()?this.children.remove(i):this.children.insert(i,o),new e(this.value,r)},e.prototype.fold=function(e){return this.fold_(de(),e)},e.prototype.fold_=function(e,t){var n={};return this.children.inorderTraversal(function(r,i){n[r]=i.fold_(be(e,r),t)}),t(e,this.value,n)},e.prototype.findOnPath=function(e,t){return this.findOnPath_(e,de(),t)},e.prototype.findOnPath_=function(e,t,n){var r=!!this.value&&n(t,this.value);if(r)return r;if(we(e))return null;var i=pe(e),o=this.children.get(i);return o?o.findOnPath_(ve(e),be(t,i),n):null},e.prototype.foreachOnPath=function(e,t){return this.foreachOnPath_(e,de(),t)},e.prototype.foreachOnPath_=function(t,n,r){if(we(t))return this;this.value&&r(n,this.value);var i=pe(t),o=this.children.get(i);return o?o.foreachOnPath_(ve(t),be(n,i),r):new e(null)},e.prototype.foreach=function(e){this.foreach_(de(),e)},e.prototype.foreach_=function(e,t){this.children.inorderTraversal(function(n,r){r.foreach_(be(e,n),t)}),this.value&&t(e,this.value)},e.prototype.foreachChild=function(e){this.children.inorderTraversal(function(t,n){n.value&&e(t,n.value)})},e}(),Zt=function(){function e(e){this.writeTree_=e}return e.empty=function(){return new e(new Xt(null))},e}();function Jt(e,t,n){if(we(t))return new Zt(new Xt(n));var r=e.writeTree_.findRootMostValueAndPath(t);if(null!=r){var i=r.path,o=r.value,s=Te(i,t);return o=o.updateChild(s,n),new Zt(e.writeTree_.set(i,o))}var a=new Xt(n),u=e.writeTree_.setTree(t,a);return new Zt(u)}function en(e,t,n){var r=e;return M(n,function(e,n){r=Jt(r,be(t,e),n)}),r}function tn(e,t){if(we(t))return Zt.empty();var n=e.writeTree_.setTree(t,new Xt(null));return new Zt(n)}function nn(e,t){return null!=rn(e,t)}function rn(e,t){var n=e.writeTree_.findRootMostValueAndPath(t);return null!=n?e.writeTree_.get(n.path).getChild(Te(n.path,t)):null}function on(e){var t=[],n=e.writeTree_.value;return null!=n?n.isLeafNode()||n.forEachChild(Ze,function(e,n){t.push(new Re(e,n))}):e.writeTree_.children.inorderTraversal(function(e,n){null!=n.value&&t.push(new Re(e,n.value))}),t}function sn(e,t){if(we(t))return e;var n=rn(e,t);return new Zt(null!=n?new Xt(n):e.writeTree_.subtree(t))}function an(e){return e.writeTree_.isEmpty()}function un(e,t){return cn(de(),e.writeTree_,t)}function cn(e,t,n){if(null!=t.value)return n.updateChild(e,t.value);var r=null;return t.children.inorderTraversal(function(t,i){".priority"===t?((0,o.assert)(null!==i.value,"Priority writes must always be leaf nodes"),r=i.value):n=cn(be(e,t),i,n)}),n.getChild(e).isEmpty()||null===r||(n=n.updateChild(be(e,".priority"),r)),n}function ln(e,t){return wn(t,e)}function hn(e,t){if(e.snap)return ke(e.path,t);for(var n in e.children)if(e.children.hasOwnProperty(n)&&ke(be(e.path,n),t))return!0;return!1}function fn(e){return e.visible}function dn(e,t,n){for(var r=Zt.empty(),i=0;i<e.length;++i){var s=e[i];if(t(s)){var a=s.path,u=void 0;if(s.snap)ke(n,a)?r=Jt(r,u=Te(n,a),s.snap):ke(a,n)&&(u=Te(a,n),r=Jt(r,de(),s.snap.getChild(u)));else{if(!s.children)throw(0,o.assertionError)("WriteRecord should have .snap or .children");if(ke(n,a))r=en(r,u=Te(n,a),s.children);else if(ke(a,n))if(we(u=Te(a,n)))r=en(r,de(),s.children);else{var c=(0,o.safeGet)(s.children,pe(u));if(c){var l=c.getChild(ve(u));r=Jt(r,de(),l)}}}}}return r}function pn(e,t,n,r,i){if(r||i){var o=sn(e.visibleWrites,t);return!i&&an(o)?n:i||null!=n||nn(o,de())?un(dn(e.allWrites,function(e){return(e.visible||i)&&(!r||!~r.indexOf(e.writeId))&&(ke(e.path,t)||ke(t,e.path))},t),n||it.EMPTY_NODE):null}var s=rn(e.visibleWrites,t);if(null!=s)return s;var a=sn(e.visibleWrites,t);return an(a)?n:null!=n||nn(a,de())?un(a,n||it.EMPTY_NODE):null}function gn(e,t,n,r){return pn(e.writeTree,e.treePath,t,n,r)}function vn(e,t){return function(e,t,n){var r=it.EMPTY_NODE,i=rn(e.visibleWrites,t);if(i)return i.isLeafNode()||i.forEachChild(Ze,function(e,t){r=r.updateImmediateChild(e,t)}),r;if(n){var o=sn(e.visibleWrites,t);return n.forEachChild(Ze,function(e,t){var n=un(sn(o,new fe(e)),t);r=r.updateImmediateChild(e,n)}),on(o).forEach(function(e){r=r.updateImmediateChild(e.name,e.node)}),r}return on(sn(e.visibleWrites,t)).forEach(function(e){r=r.updateImmediateChild(e.name,e.node)}),r}(e.writeTree,e.treePath,t)}function mn(e,t,n,r){return function(e,t,n,r,i){(0,o.assert)(r||i,"Either existingEventSnap or existingServerSnap must exist");var s=be(t,n);if(nn(e.visibleWrites,s))return null;var a=sn(e.visibleWrites,s);return an(a)?i.getChild(n):un(a,i.getChild(n))}(e.writeTree,e.treePath,t,n,r)}function yn(e,t){return function(e,t){return rn(e.visibleWrites,t)}(e.writeTree,be(e.treePath,t))}function _n(e,t,n){return function(e,t,n,r){var i=be(t,n),o=rn(e.visibleWrites,i);return null!=o?o:r.isCompleteForChild(n)?un(sn(e.visibleWrites,i),r.getNode().getImmediateChild(n)):null}(e.writeTree,e.treePath,t,n)}function bn(e,t){return wn(be(e.treePath,t),e.writeTree)}function wn(e,t){return{treePath:e,writeTree:t}}var Tn=function(){function e(){this.changeMap=new Map}return e.prototype.trackChildChange=function(e){var t=e.type,n=e.childName;(0,o.assert)("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),(0,o.assert)(".priority"!==n,"Only non-priority child changes can be tracked.");var r=this.changeMap.get(n);if(r){var i=r.type;if("child_added"===t&&"child_removed"===i)this.changeMap.set(n,yt(n,e.snapshotNode,r.snapshotNode));else if("child_removed"===t&&"child_added"===i)this.changeMap.delete(n);else if("child_removed"===t&&"child_changed"===i)this.changeMap.set(n,mt(n,r.oldSnap));else if("child_changed"===t&&"child_added"===i)this.changeMap.set(n,vt(n,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==i)throw(0,o.assertionError)("Illegal combination of changes: "+e+" occurred after "+r);this.changeMap.set(n,yt(n,e.snapshotNode,r.oldSnap))}}else this.changeMap.set(n,e)},e.prototype.getChanges=function(){return Array.from(this.changeMap.values())},e}(),En=new(function(){function e(){}return e.prototype.getCompleteChild=function(e){return null},e.prototype.getChildAfterChild=function(e,t,n){return null},e}()),In=function(){function e(e,t,n){void 0===n&&(n=null),this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=n}return e.prototype.getCompleteChild=function(e){var t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);var n=null!=this.optCompleteServerCache_?new Ht(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return _n(this.writes_,e,n)},e.prototype.getChildAfterChild=function(e,t,n){var r=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:Yt(this.viewCache_),i=function(e,t,n,r,i,o){return function(e,t,n,r,i,o,s){var a,u=sn(e.visibleWrites,t),c=rn(u,de());if(null!=c)a=c;else{if(null==n)return[];a=un(u,n)}if((a=a.withIndex(s)).isEmpty()||a.isLeafNode())return[];for(var l=[],h=s.getCompare(),f=o?a.getReverseIteratorFrom(r,s):a.getIteratorFrom(r,s),d=f.getNext();d&&l.length<1;)0!==h(d,r)&&l.push(d),d=f.getNext();return l}(e.writeTree,e.treePath,t,n,0,i,o)}(this.writes_,r,t,0,n,e);return 0===i.length?null:i[0]},e}();function kn(e,t,n,r,i,s){var a=t.eventCache;if(null!=yn(r,n))return t;var u=void 0,c=void 0;if(we(n))if((0,o.assert)(t.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),t.serverCache.isFiltered()){var l=Yt(t),h=vn(r,l instanceof it?l:it.EMPTY_NODE);u=e.filter.updateFullNode(t.eventCache.getNode(),h,s)}else{var f=gn(r,Yt(t));u=e.filter.updateFullNode(t.eventCache.getNode(),f,s)}else{var d=pe(n);if(".priority"===d){(0,o.assert)(1===ge(n),"Can't have a priority with additional path components");var p=a.getNode(),g=mn(r,n,p,c=t.serverCache.getNode());u=null!=g?e.filter.updatePriority(p,g):a.getNode()}else{var v=ve(n),m=void 0;if(a.isCompleteForChild(d)){c=t.serverCache.getNode();var y=mn(r,n,a.getNode(),c);m=null!=y?a.getNode().getImmediateChild(d).updateChild(v,y):a.getNode().getImmediateChild(d)}else m=_n(r,d,t.serverCache);u=null!=m?e.filter.updateChild(a.getNode(),d,m,v,i,s):a.getNode()}}return Gt(t,u,a.isFullyInitialized()||we(n),e.filter.filtersNodes())}function Cn(e,t,n,r,i,o,s,a){var u,c=t.serverCache,l=s?e.filter:e.filter.getIndexedFilter();if(we(n))u=l.updateFullNode(c.getNode(),r,null);else if(l.filtersNodes()&&!c.isFiltered()){var h=c.getNode().updateChild(n,r);u=l.updateFullNode(c.getNode(),h,null)}else{var f=pe(n);if(!c.isCompleteForPath(n)&&ge(n)>1)return t;var d=ve(n),p=c.getNode().getImmediateChild(f).updateChild(d,r);u=".priority"===f?l.updatePriority(c.getNode(),p):l.updateChild(c.getNode(),f,p,d,En,null)}var g=Qt(t,u,c.isFullyInitialized()||we(n),l.filtersNodes());return kn(e,g,n,i,new In(i,g,o),a)}function Sn(e,t,n,r,i,o,s){var a,u,c=t.eventCache,l=new In(i,t,o);if(we(n))u=e.filter.updateFullNode(t.eventCache.getNode(),r,s),a=Gt(t,u,!0,e.filter.filtersNodes());else{var h=pe(n);if(".priority"===h)u=e.filter.updatePriority(t.eventCache.getNode(),r),a=Gt(t,u,c.isFullyInitialized(),c.isFiltered());else{var f=ve(n),d=c.getNode().getImmediateChild(h),p=void 0;if(we(f))p=r;else{var g=l.getCompleteChild(h);p=null!=g?".priority"===me(f)&&g.getChild(_e(f)).isEmpty()?g:g.updateChild(f,r):it.EMPTY_NODE}a=d.equals(p)?t:Gt(t,e.filter.updateChild(c.getNode(),h,p,f,l,s),c.isFullyInitialized(),e.filter.filtersNodes())}}return a}function An(e,t){return e.eventCache.isCompleteForChild(t)}function xn(e,t,n){return n.foreach(function(e,n){t=t.updateChild(e,n)}),t}function Nn(e,t,n,r,i,o,s,a){if(t.serverCache.getNode().isEmpty()&&!t.serverCache.isFullyInitialized())return t;var u,c=t;u=we(n)?r:new Xt(null).setTree(n,r);var l=t.serverCache.getNode();return u.children.inorderTraversal(function(n,r){if(l.hasChild(n)){var u=xn(0,t.serverCache.getNode().getImmediateChild(n),r);c=Cn(e,c,new fe(n),u,i,o,s,a)}}),u.children.inorderTraversal(function(n,r){var u=!t.serverCache.isCompleteForChild(n)&&void 0===r.value;if(!l.hasChild(n)&&!u){var h=xn(0,t.serverCache.getNode().getImmediateChild(n),r);c=Cn(e,c,new fe(n),h,i,o,s,a)}}),c}var Dn,Pn=function(){function e(e,t){this.query_=e,this.eventRegistrations_=[];var n,r=this.query_._queryParams,i=new _t(r.getIndex()),o=(n=r).loadsAllData()?new _t(n.getIndex()):n.hasLimit()?new wt(n):new bt(n);this.processor_=function(e){return{filter:e}}(o);var s=t.serverCache,a=t.eventCache,u=i.updateFullNode(it.EMPTY_NODE,s.getNode(),null),c=o.updateFullNode(it.EMPTY_NODE,a.getNode(),null),l=new Ht(u,s.isFullyInitialized(),i.filtersNodes()),h=new Ht(c,a.isFullyInitialized(),o.filtersNodes());this.viewCache_=zt(h,l),this.eventGenerator_=new Wt(this.query_)}return Object.defineProperty(e.prototype,"query",{get:function(){return this.query_},enumerable:!1,configurable:!0}),e}();function On(e,t){var n=Yt(e.viewCache_);return n&&(e.query._queryParams.loadsAllData()||!we(t)&&!n.getImmediateChild(pe(t)).isEmpty())?n.getChild(t):null}function Rn(e){return 0===e.eventRegistrations_.length}function Ln(e,t,n){var r=[];if(n){(0,o.assert)(null==t,"A cancel should cancel all event registrations.");var i=e.query._path;e.eventRegistrations_.forEach(function(e){var t=e.createCancelEvent(n,i);t&&r.push(t)})}if(t){for(var s=[],a=0;a<e.eventRegistrations_.length;++a){var u=e.eventRegistrations_[a];if(u.matches(t)){if(t.hasAnyCallback()){s=s.concat(e.eventRegistrations_.slice(a+1));break}}else s.push(u)}e.eventRegistrations_=s}else e.eventRegistrations_=[];return r}function Mn(e,t,n,r){t.type===Mt.MERGE&&null!==t.source.queryId&&((0,o.assert)(Yt(e.viewCache_),"We should always have a full cache before handling merges"),(0,o.assert)($t(e.viewCache_),"Missing event cache, even though we have a server cache"));var i,s,a=e.viewCache_,u=function(e,t,n,r,i){var s,a,u=new Tn;if(n.type===Mt.OVERWRITE){var c=n;c.source.fromUser?s=Sn(e,t,c.path,c.snap,r,i,u):((0,o.assert)(c.source.fromServer,"Unknown source."),a=c.source.tagged||t.serverCache.isFiltered()&&!we(c.path),s=Cn(e,t,c.path,c.snap,r,i,a,u))}else if(n.type===Mt.MERGE){var l=n;l.source.fromUser?s=function(e,t,n,r,i,o,s){var a=t;return r.foreach(function(r,u){var c=be(n,r);An(t,pe(c))&&(a=Sn(e,a,c,u,i,o,s))}),r.foreach(function(r,u){var c=be(n,r);An(t,pe(c))||(a=Sn(e,a,c,u,i,o,s))}),a}(e,t,l.path,l.children,r,i,u):((0,o.assert)(l.source.fromServer,"Unknown source."),a=l.source.tagged||t.serverCache.isFiltered(),s=Nn(e,t,l.path,l.children,r,i,a,u))}else if(n.type===Mt.ACK_USER_WRITE){var h=n;s=h.revert?function(e,t,n,r,i,s){var a;if(null!=yn(r,n))return t;var u=new In(r,t,i),c=t.eventCache.getNode(),l=void 0;if(we(n)||".priority"===pe(n)){var h=void 0;if(t.serverCache.isFullyInitialized())h=gn(r,Yt(t));else{var f=t.serverCache.getNode();(0,o.assert)(f instanceof it,"serverChildren would be complete if leaf node"),h=vn(r,f)}l=e.filter.updateFullNode(c,h=h,s)}else{var d=pe(n),p=_n(r,d,t.serverCache);null==p&&t.serverCache.isCompleteForChild(d)&&(p=c.getImmediateChild(d)),(l=null!=p?e.filter.updateChild(c,d,p,ve(n),u,s):t.eventCache.getNode().hasChild(d)?e.filter.updateChild(c,d,it.EMPTY_NODE,ve(n),u,s):c).isEmpty()&&t.serverCache.isFullyInitialized()&&(a=gn(r,Yt(t))).isLeafNode()&&(l=e.filter.updateFullNode(l,a,s))}return a=t.serverCache.isFullyInitialized()||null!=yn(r,de()),Gt(t,l,a,e.filter.filtersNodes())}(e,t,h.path,r,i,u):function(e,t,n,r,i,o,s){if(null!=yn(i,n))return t;var a=t.serverCache.isFiltered(),u=t.serverCache;if(null!=r.value){if(we(n)&&u.isFullyInitialized()||u.isCompleteForPath(n))return Cn(e,t,n,u.getNode().getChild(n),i,o,a,s);if(we(n)){var c=new Xt(null);return u.getNode().forEachChild(Fe,function(e,t){c=c.set(new fe(e),t)}),Nn(e,t,n,c,i,o,a,s)}return t}var l=new Xt(null);return r.foreach(function(e,t){var r=be(n,e);u.isCompleteForPath(r)&&(l=l.set(e,u.getNode().getChild(r)))}),Nn(e,t,n,l,i,o,a,s)}(e,t,h.path,h.affectedTree,r,i,u)}else{if(n.type!==Mt.LISTEN_COMPLETE)throw(0,o.assertionError)("Unknown operation type: "+n.type);s=function(e,t,n,r,i){var o=t.serverCache;return kn(e,Qt(t,o.getNode(),o.isFullyInitialized()||we(n),o.isFiltered()),n,r,En,i)}(e,t,n.path,r,u)}var f=u.getChanges();return function(e,t,n){var r=t.eventCache;if(r.isFullyInitialized()){var i=r.getNode().isLeafNode()||r.getNode().isEmpty(),o=$t(e);(n.length>0||!e.eventCache.isFullyInitialized()||i&&!r.getNode().equals(o)||!r.getNode().getPriority().equals(o.getPriority()))&&n.push(gt($t(t)))}}(t,s,f),{viewCache:s,changes:f}}(e.processor_,a,t,n,r);return i=e.processor_,(0,o.assert)((s=u.viewCache).eventCache.getNode().isIndexed(i.filter.getIndex()),"Event snap not indexed"),(0,o.assert)(s.serverCache.getNode().isIndexed(i.filter.getIndex()),"Server snap not indexed"),(0,o.assert)(u.viewCache.serverCache.isFullyInitialized()||!a.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),e.viewCache_=u.viewCache,Fn(e,u.changes,u.viewCache.eventCache.getNode(),null)}function Fn(e,t,n,r){return function(e,t,n,r){var i=[],o=[];return t.forEach(function(t){"child_changed"===t.type&&e.index_.indexedValueChanged(t.oldSnap,t.snapshotNode)&&o.push({type:"child_moved",snapshotNode:t.snapshotNode,childName:t.childName})}),Kt(e,i,"child_removed",t,r,n),Kt(e,i,"child_added",t,r,n),Kt(e,i,"child_moved",o,r,n),Kt(e,i,"child_changed",t,r,n),Kt(e,i,"value",t,r,n),i}(e.eventGenerator_,t,n,r?[r]:e.eventRegistrations_)}var jn,qn=function(){this.views=new Map};function Un(e,t,n,r){var i,a,u=t.source.queryId;if(null!==u){var c=e.views.get(u);return(0,o.assert)(null!=c,"SyncTree gave us an op for an invalid query."),Mn(c,t,n,r)}var l=[];try{for(var h=(0,s.__values)(e.views.values()),f=h.next();!f.done;f=h.next())l=l.concat(Mn(c=f.value,t,n,r))}catch(d){i={error:d}}finally{try{f&&!f.done&&(a=h.return)&&a.call(h)}finally{if(i)throw i.error}}return l}function Vn(e,t,n,r,i){var o=e.views.get(t._queryIdentifier);if(!o){var s=gn(n,i?r:null),a=!1;s?a=!0:r instanceof it?(s=vn(n,r),a=!1):(s=it.EMPTY_NODE,a=!1);var u=zt(new Ht(s,a,!1),new Ht(r,i,!1));return new Pn(t,u)}return o}function Bn(e){var t,n,r=[];try{for(var i=(0,s.__values)(e.views.values()),o=i.next();!o.done;o=i.next()){var a=o.value;a.query._queryParams.loadsAllData()||r.push(a)}}catch(u){t={error:u}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}return r}function Hn(e,t){var n,r,i=null;try{for(var o=(0,s.__values)(e.views.values()),a=o.next();!a.done;a=o.next())i=i||On(a.value,t)}catch(u){n={error:u}}finally{try{a&&!a.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}return i}function Wn(e,t){return t._queryParams.loadsAllData()?Gn(e):e.views.get(t._queryIdentifier)}function Kn(e,t){return null!=Wn(e,t)}function zn(e){return null!=Gn(e)}function Gn(e){var t,n;try{for(var r=(0,s.__values)(e.views.values()),i=r.next();!i.done;i=r.next()){var o=i.value;if(o.query._queryParams.loadsAllData())return o}}catch(a){t={error:a}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(t)throw t.error}}return null}var Qn=1,$n=function(e){this.listenProvider_=e,this.syncPointTree_=new Xt(null),this.pendingWriteTree_={visibleWrites:Zt.empty(),allWrites:[],lastWriteId:-1},this.tagToQueryMap=new Map,this.queryToTagMap=new Map};function Yn(e,t,n,r,i){return function(e,t,n,r,i){(0,o.assert)(r>e.lastWriteId,"Stacking an older write on top of newer ones"),void 0===i&&(i=!0),e.allWrites.push({path:t,snap:n,writeId:r,visible:i}),i&&(e.visibleWrites=Jt(e.visibleWrites,t,n)),e.lastWriteId=r}(e.pendingWriteTree_,t,n,r,i),i?nr(e,new Vt({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},t,n)):[]}function Xn(e,t,n){void 0===n&&(n=!1);var r=function(e,t){for(var n=0;n<e.allWrites.length;n++){var r=e.allWrites[n];if(r.writeId===t)return r}return null}(e.pendingWriteTree_,t);if(function(e,t){var n=e.allWrites.findIndex(function(e){return e.writeId===t});(0,o.assert)(n>=0,"removeWrite called with nonexistent writeId.");var r=e.allWrites[n];e.allWrites.splice(n,1);for(var i=r.visible,s=!1,a=e.allWrites.length-1;i&&a>=0;){var u=e.allWrites[a];u.visible&&(a>=n&&hn(u,r.path)?i=!1:ke(r.path,u.path)&&(s=!0)),a--}return!!i&&(s?(function(e){e.visibleWrites=dn(e.allWrites,fn,de()),e.lastWriteId=e.allWrites.length>0?e.allWrites[e.allWrites.length-1].writeId:-1}(e),!0):(r.snap?e.visibleWrites=tn(e.visibleWrites,r.path):M(r.children,function(t){e.visibleWrites=tn(e.visibleWrites,be(r.path,t))}),!0))}(e.pendingWriteTree_,t)){var i=new Xt(null);return null!=r.snap?i=i.set(de(),!0):M(r.children,function(e){i=i.set(new fe(e),!0)}),nr(e,new qt(r.path,i,n))}return[]}function Zn(e,t,n){return nr(e,new Vt({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,n))}function Jn(e,t,n,r){var i=t._path,a=e.syncPointTree_.get(i),u=[];if(a&&("default"===t._queryIdentifier||Kn(a,t))){var c=function(e,t,n,r){var i,a,u=t._queryIdentifier,c=[],l=[],h=zn(e);if("default"===u)try{for(var f=(0,s.__values)(e.views.entries()),d=f.next();!d.done;d=f.next()){var p,g=(0,s.__read)(d.value,2),v=g[0];l=l.concat(Ln(p=g[1],n,r)),Rn(p)&&(e.views.delete(v),p.query._queryParams.loadsAllData()||c.push(p.query))}}catch(m){i={error:m}}finally{try{d&&!d.done&&(a=f.return)&&a.call(f)}finally{if(i)throw i.error}}else(p=e.views.get(u))&&(l=l.concat(Ln(p,n,r)),Rn(p)&&(e.views.delete(u),p.query._queryParams.loadsAllData()||c.push(p.query)));return h&&!zn(e)&&c.push(new((0,o.assert)(Dn,"Reference.ts has not been loaded"),Dn)(t._repo,t._path)),{removed:c,events:l}}(a,t,n,r);0===a.views.size&&(e.syncPointTree_=e.syncPointTree_.remove(i));var l=c.removed;u=c.events;var h=-1!==l.findIndex(function(e){return e._queryParams.loadsAllData()}),f=e.syncPointTree_.findOnPath(i,function(e,t){return zn(t)});if(h&&!f){var d=e.syncPointTree_.subtree(i);if(!d.isEmpty())for(var p=function(e){return e.fold(function(e,t,n){if(t&&zn(t))return[Gn(t)];var r=[];return t&&(r=Bn(t)),M(n,function(e,t){r=r.concat(t)}),r})}(d),g=0;g<p.length;++g){var v=p[g],m=v.query,y=or(e,v);e.listenProvider_.startListening(hr(m),sr(e,m),y.hashFn,y.onComplete)}}!f&&l.length>0&&!r&&(h?e.listenProvider_.stopListening(hr(t),null):l.forEach(function(t){var n=e.queryToTagMap.get(ar(t));e.listenProvider_.stopListening(hr(t),n)})),function(e,t){for(var n=0;n<t.length;++n){var r=t[n];if(!r._queryParams.loadsAllData()){var i=ar(r),o=e.queryToTagMap.get(i);e.queryToTagMap.delete(i),e.tagToQueryMap.delete(o)}}}(e,l)}return u}function er(e,t,n){var r=t._path,i=null,s=!1;e.syncPointTree_.foreachOnPath(r,function(e,t){var n=Te(e,r);i=i||Hn(t,n),s=s||zn(t)});var a,u=e.syncPointTree_.get(r);u?(s=s||zn(u),i=i||Hn(u,de())):(u=new qn,e.syncPointTree_=e.syncPointTree_.set(r,u)),null!=i?a=!0:(a=!1,i=it.EMPTY_NODE,e.syncPointTree_.subtree(r).foreachChild(function(e,t){var n=Hn(t,de());n&&(i=i.updateImmediateChild(e,n))}));var c=Kn(u,t);if(!c&&!t._queryParams.loadsAllData()){var l=ar(t);(0,o.assert)(!e.queryToTagMap.has(l),"View does not exist, but we have a tag");var h=Qn++;e.queryToTagMap.set(l,h),e.tagToQueryMap.set(h,l)}var f=function(e,t,n,r,i,o){var s=Vn(e,t,r,i,o);return e.views.has(t._queryIdentifier)||e.views.set(t._queryIdentifier,s),function(e,t){e.eventRegistrations_.push(t)}(s,n),function(e,t){var n=e.viewCache_.eventCache,r=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(Ze,function(e,t){r.push(vt(e,t))}),n.isFullyInitialized()&&r.push(gt(n.getNode())),Fn(e,r,n.getNode(),t)}(s,n)}(u,t,n,ln(e.pendingWriteTree_,r),i,a);if(!c&&!s){var d=Wn(u,t);f=f.concat(function(e,t,n){var r=t._path,i=sr(e,t),s=or(e,n),a=e.listenProvider_.startListening(hr(t),i,s.hashFn,s.onComplete),u=e.syncPointTree_.subtree(r);if(i)(0,o.assert)(!zn(u.value),"If we're adding a query, it shouldn't be shadowed");else for(var c=u.fold(function(e,t,n){if(!we(e)&&t&&zn(t))return[Gn(t).query];var r=[];return t&&(r=r.concat(Bn(t).map(function(e){return e.query}))),M(n,function(e,t){r=r.concat(t)}),r}),l=0;l<c.length;++l){var h=c[l];e.listenProvider_.stopListening(hr(h),sr(e,h))}return a}(e,t,d))}return f}function tr(e,t,n){var r=e.pendingWriteTree_,i=e.syncPointTree_.findOnPath(t,function(e,n){var r=Hn(n,Te(e,t));if(r)return r});return pn(r,t,i,n,!0)}function nr(e,t){return rr(t,e.syncPointTree_,null,ln(e.pendingWriteTree_,de()))}function rr(e,t,n,r){if(we(e.path))return ir(e,t,n,r);var i=t.get(de());null==n&&null!=i&&(n=Hn(i,de()));var o=[],s=pe(e.path),a=e.operationForChild(s),u=t.children.get(s);if(u&&a){var c=n?n.getImmediateChild(s):null,l=bn(r,s);o=o.concat(rr(a,u,c,l))}return i&&(o=o.concat(Un(i,e,r,n))),o}function ir(e,t,n,r){var i=t.get(de());null==n&&null!=i&&(n=Hn(i,de()));var o=[];return t.children.inorderTraversal(function(t,i){var s=n?n.getImmediateChild(t):null,a=bn(r,t),u=e.operationForChild(t);u&&(o=o.concat(ir(u,i,s,a)))}),i&&(o=o.concat(Un(i,e,r,n))),o}function or(e,t){var n=t.query,r=sr(e,n);return{hashFn:function(){return(function(e){return e.viewCache_.serverCache.getNode()}(t)||it.EMPTY_NODE).hash()},onComplete:function(t){if("ok"===t)return r?function(e,t,n){var r=ur(e,n);if(r){var i=cr(r),o=i.path,s=i.queryId,a=Te(o,t);return lr(e,o,new Ut(Ft(s),a))}return[]}(e,n._path,r):function(e,t){return nr(e,new Ut({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t))}(e,n._path);var i=function(e,t){var n="Unknown Error";"too_big"===e?n="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===e?n="Client doesn't have permission to access the desired data.":"unavailable"===e&&(n="The service is unavailable");var r=new Error(e+" at "+t._path.toString()+": "+n);return r.code=e.toUpperCase(),r}(t,n);return Jn(e,n,null,i)}}}function sr(e,t){var n=ar(t);return e.queryToTagMap.get(n)}function ar(e){return e._path.toString()+"$"+e._queryIdentifier}function ur(e,t){return e.tagToQueryMap.get(t)}function cr(e){var t=e.indexOf("$");return(0,o.assert)(-1!==t&&t<e.length-1,"Bad queryKey."),{queryId:e.substr(t+1),path:new fe(e.substr(0,t))}}function lr(e,t,n){var r=e.syncPointTree_.get(t);return(0,o.assert)(r,"Missing sync point for query tag that we're tracking"),Un(r,n,ln(e.pendingWriteTree_,t),null)}function hr(e){return e._queryParams.loadsAllData()&&!e._queryParams.isDefault()?new((0,o.assert)(jn,"Reference.ts has not been loaded"),jn)(e._repo,e._path):e}var fr=function(){function e(e){this.node_=e}return e.prototype.getImmediateChild=function(t){return new e(this.node_.getImmediateChild(t))},e.prototype.node=function(){return this.node_},e}(),dr=function(){function e(e,t){this.syncTree_=e,this.path_=t}return e.prototype.getImmediateChild=function(t){var n=be(this.path_,t);return new e(this.syncTree_,n)},e.prototype.node=function(){return tr(this.syncTree_,this.path_)},e}(),pr=function(e,t,n){return e&&"object"==typeof e?((0,o.assert)(".sv"in e,"Unexpected leaf node or priority contents"),"string"==typeof e[".sv"]?gr(e[".sv"],t,n):"object"==typeof e[".sv"]?vr(e[".sv"],t):void(0,o.assert)(!1,"Unexpected server value: "+JSON.stringify(e,null,2))):e},gr=function(e,t,n){switch(e){case"timestamp":return n.timestamp;default:(0,o.assert)(!1,"Unexpected server value: "+e)}},vr=function(e,t,n){e.hasOwnProperty("increment")||(0,o.assert)(!1,"Unexpected server value: "+JSON.stringify(e,null,2));var r=e.increment;"number"!=typeof r&&(0,o.assert)(!1,"Unexpected increment value: "+r);var i=t.node();if((0,o.assert)(null!=i,"Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;var s=i.getValue();return"number"!=typeof s?r:s+r},mr=function(e,t,n,r){return _r(t,new dr(n,e),r)},yr=function(e,t,n){return _r(e,new fr(t),n)};function _r(e,t,n){var r,i=e.getPriority().val(),o=pr(i,t.getImmediateChild(".priority"),n);if(e.isLeafNode()){var s=e,a=pr(s.getValue(),t,n);return a!==s.getValue()||o!==s.getPriority().val()?new Xe(a,st(o)):e}var u=e;return r=u,o!==u.getPriority().val()&&(r=r.updatePriority(new Xe(o))),u.forEachChild(Ze,function(e,i){var o=_r(i,t.getImmediateChild(e),n);o!==i&&(r=r.updateImmediateChild(e,o))}),r}var br=function(e,t,n){void 0===e&&(e=""),void 0===t&&(t=null),void 0===n&&(n={children:{},childCount:0}),this.name=e,this.parent=t,this.node=n};function wr(e,t){for(var n=t instanceof fe?t:new fe(t),r=e,i=pe(n);null!==i;){var s=(0,o.safeGet)(r.node.children,i)||{children:{},childCount:0};r=new br(i,r,s),i=pe(n=ve(n))}return r}function Tr(e){return e.node.value}function Er(e,t){e.node.value=t,Ar(e)}function Ir(e){return e.node.childCount>0}function kr(e,t){M(e.node.children,function(n,r){t(new br(n,e,r))})}function Cr(e,t,n,r){n&&!r&&t(e),kr(e,function(e){Cr(e,t,!0,r)}),n&&r&&t(e)}function Sr(e){return new fe(null===e.parent?e.name:Sr(e.parent)+"/"+e.name)}function Ar(e){null!==e.parent&&function(e,t,n){var r=function(e){return void 0===Tr(e)&&!Ir(e)}(n),i=(0,o.contains)(e.node.children,t);r&&i?(delete e.node.children[t],e.node.childCount--,Ar(e)):r||i||(e.node.children[t]=n.node,e.node.childCount++,Ar(e))}(e.parent,e.name,e)}var xr=/[\[\].#$\/\u0000-\u001F\u007F]/,Nr=/[\[\].#$\u0000-\u001F\u007F]/,Dr=10485760,Pr=function(e){return"string"==typeof e&&0!==e.length&&!xr.test(e)},Or=function(e){return"string"==typeof e&&0!==e.length&&!Nr.test(e)},Rr=function(e){return null===e||"string"==typeof e||"number"==typeof e&&!A(e)||e&&"object"==typeof e&&(0,o.contains)(e,".sv")},Lr=function(e,t,n,r){r&&void 0===t||Mr((0,o.errorPrefix)(e,"value"),t,n)},Mr=function(e,t,n){var r=n instanceof fe?new Ce(n,e):n;if(void 0===t)throw new Error(e+"contains undefined "+Ae(r));if("function"==typeof t)throw new Error(e+"contains a function "+Ae(r)+" with contents = "+t.toString());if(A(t))throw new Error(e+"contains "+t.toString()+" "+Ae(r));if("string"==typeof t&&t.length>Dr/3&&(0,o.stringLength)(t)>Dr)throw new Error(e+"contains a string greater than 10485760 utf8 bytes "+Ae(r)+" ('"+t.substring(0,50)+"...')");if(t&&"object"==typeof t){var i=!1,s=!1;if(M(t,function(t,n){if(".value"===t)i=!0;else if(".priority"!==t&&".sv"!==t&&(s=!0,!Pr(t)))throw new Error(e+" contains an invalid key ("+t+") "+Ae(r)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');var a,u;!function(e,t){e.parts_.length>0&&(e.byteLength_+=1),e.parts_.push(t),e.byteLength_+=(0,o.stringLength)(t),Se(e)}(r,t),Mr(e,n,r),u=(a=r).parts_.pop(),a.byteLength_-=(0,o.stringLength)(u),a.parts_.length>0&&(a.byteLength_-=1)}),i&&s)throw new Error(e+' contains ".value" child '+Ae(r)+" in addition to actual children.")}},Fr=function(e,t,n,r){if(!r||void 0!==t){var i=(0,o.errorPrefix)(e,"values");if(!t||"object"!=typeof t||Array.isArray(t))throw new Error(i+" must be an object containing the children to replace.");var s=[];M(t,function(e,t){var r=new fe(e);if(Mr(i,t,be(n,r)),".priority"===me(r)&&!Rr(t))throw new Error(i+"contains an invalid value for '"+r.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");s.push(r)}),function(e,t){var n,r;for(n=0;n<t.length;n++)for(var i=ye(r=t[n]),o=0;o<i.length;o++)if(".priority"===i[o]&&o===i.length-1);else if(!Pr(i[o]))throw new Error(e+"contains an invalid key ("+i[o]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');t.sort(Ee);var s=null;for(n=0;n<t.length;n++){if(r=t[n],null!==s&&ke(s,r))throw new Error(e+"contains a path "+s.toString()+" that is ancestor of another path "+r.toString());s=r}}(i,s)}},jr=function(e,t,n){if(!n||void 0!==t){if(A(t))throw new Error((0,o.errorPrefix)(e,"priority")+"is "+t.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!Rr(t))throw new Error((0,o.errorPrefix)(e,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},qr=function(e,t,n){if(!n||void 0!==t)switch(t){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error((0,o.errorPrefix)(e,"eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}},Ur=function(e,t,n,r){if(!(r&&void 0===n||Pr(n)))throw new Error((0,o.errorPrefix)(e,t)+'was an invalid key = "'+n+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},Vr=function(e,t,n,r){if(!(r&&void 0===n||Or(n)))throw new Error((0,o.errorPrefix)(e,t)+'was an invalid path = "'+n+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},Br=function(e,t){if(".info"===pe(t))throw new Error(e+" failed = Can't modify data under /.info/")},Hr=function(e,t){var n=t.path.toString();if("string"!=typeof t.repoInfo.host||0===t.repoInfo.host.length||!Pr(t.repoInfo.namespace)&&"localhost"!==t.repoInfo.host.split(":")[0]||0!==n.length&&!function(e){return e&&(e=e.replace(/^\/*\.info(\/|$)/,"/")),Or(e)}(n))throw new Error((0,o.errorPrefix)(e,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')},Wr=function(e,t,n,r){if((!r||void 0!==n)&&"boolean"!=typeof n)throw new Error((0,o.errorPrefix)(e,t)+"must be a boolean.")},Kr=function(){this.eventLists_=[],this.recursionDepth_=0};function zr(e,t){for(var n=null,r=0;r<t.length;r++){var i=t[r],o=i.getPath();null===n||Ie(o,n.path)||(e.eventLists_.push(n),n=null),null===n&&(n={events:[],path:o}),n.events.push(i)}n&&e.eventLists_.push(n)}function Gr(e,t,n){zr(e,n),$r(e,function(e){return Ie(e,t)})}function Qr(e,t,n){zr(e,n),$r(e,function(e){return ke(e,t)||ke(t,e)})}function $r(e,t){e.recursionDepth_++;for(var n=!0,r=0;r<e.eventLists_.length;r++){var i=e.eventLists_[r];i&&(t(i.path)?(Yr(e.eventLists_[r]),e.eventLists_[r]=null):n=!1)}n&&(e.eventLists_=[]),e.recursionDepth_--}function Yr(e){for(var t=0;t<e.events.length;t++){var n=e.events[t];if(null!==n){e.events[t]=null;var r=n.getEventRunner();b&&E("event: "+n.toString()),U(r)}}}var Xr="repo_interrupt",Zr=function(){function e(e,t,n,r){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=n,this.appCheckProvider_=r,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new Kr,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Nt(),this.transactionQueueTree_=new br,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}return e.prototype.toString=function(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host},e}();function Jr(e){var t=e.infoData_.getNode(new fe(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function ei(e){return(t=(t={timestamp:Jr(e)})||{}).timestamp=t.timestamp||(new Date).getTime(),t;var t}function ti(e,t,n,r,i){e.dataUpdateCount++;var s=new fe(t);n=e.interceptServerDataCallback_?e.interceptServerDataCallback_(t,n):n;var a=[];if(i)if(r){var u=(0,o.map)(n,function(e){return st(e)});a=function(e,t,n,r){var i=ur(e,r);if(i){var o=cr(i),s=o.path,a=o.queryId,u=Te(s,t),c=Xt.fromObject(n);return lr(e,s,new Bt(Ft(a),u,c))}return[]}(e.serverSyncTree_,s,u,i)}else{var c=st(n);a=function(e,t,n,r){var i=ur(e,r);if(null!=i){var o=cr(i),s=o.path,a=o.queryId,u=Te(s,t);return lr(e,s,new Vt(Ft(a),u,n))}return[]}(e.serverSyncTree_,s,c,i)}else if(r){var l=(0,o.map)(n,function(e){return st(e)});a=function(e,t,n){var r=Xt.fromObject(n);return nr(e,new Bt({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,r))}(e.serverSyncTree_,s,l)}else{var h=st(n);a=Zn(e.serverSyncTree_,s,h)}var f=s;a.length>0&&(f=pi(e,s)),Qr(e.eventQueue_,f,a)}function ni(e,t){ri(e,"connected",t),!1===t&&function(e){li(e,"onDisconnectEvents");var t=ei(e),n=Nt();Ot(e.onDisconnect_,de(),function(r,i){var o=mr(r,i,e.serverSyncTree_,t);Dt(n,r,o)});var r=[];Ot(n,de(),function(t,n){r=r.concat(Zn(e.serverSyncTree_,t,n));var i=_i(e,t);pi(e,i)}),e.onDisconnect_=Nt(),Qr(e.eventQueue_,de(),r)}(e)}function ri(e,t,n){var r=new fe("/.info/"+t),i=st(n);e.infoData_.updateSnapshot(r,i);var o=Zn(e.infoSyncTree_,r,i);Qr(e.eventQueue_,r,o)}function ii(e){return e.nextWriteId_++}function oi(e,t,n,r,i){li(e,"set",{path:t.toString(),value:n,priority:r});var o=ei(e),s=st(n,r),a=tr(e.serverSyncTree_,t),u=yr(s,a,o),c=ii(e),l=Yn(e.serverSyncTree_,t,u,c,!0);zr(e.eventQueue_,l),e.server_.put(t.toString(),s.val(!0),function(n,r){var o="ok"===n;o||S("set at "+t+" failed: "+n);var s=Xn(e.serverSyncTree_,c,!o);Qr(e.eventQueue_,t,s),hi(0,i,n,r)});var h=_i(e,t);pi(e,h),Qr(e.eventQueue_,h,[])}function si(e,t,n){e.server_.onDisconnectCancel(t.toString(),function(r,i){"ok"===r&&Pt(e.onDisconnect_,t),hi(0,n,r,i)})}function ai(e,t,n,r){var i=st(n);e.server_.onDisconnectPut(t.toString(),i.val(!0),function(n,o){"ok"===n&&Dt(e.onDisconnect_,t,i),hi(0,r,n,o)})}function ui(e,t,n){var r;r=".info"===pe(t._path)?Jn(e.infoSyncTree_,t,n):Jn(e.serverSyncTree_,t,n),Gr(e.eventQueue_,t._path,r)}function ci(e){e.persistentConnection_&&e.persistentConnection_.interrupt(Xr)}function li(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var r="";e.persistentConnection_&&(r=e.persistentConnection_.id+":"),E.apply(void 0,(0,s.__spreadArray)([r],(0,s.__read)(t)))}function hi(e,t,n,r){t&&U(function(){if("ok"===n)t(null);else{var e=(n||"error").toUpperCase(),i=e;r&&(i+=": "+r);var o=new Error(i);o.code=e,t(o)}})}function fi(e,t,n){return tr(e.serverSyncTree_,t,n)||it.EMPTY_NODE}function di(e,t){if(void 0===t&&(t=e.transactionQueueTree_),t||yi(e,t),Tr(t)){var n=vi(e,t);(0,o.assert)(n.length>0,"Sending zero length transaction queue"),n.every(function(e){return 0===e.status})&&function(e,t,n){for(var r=n.map(function(e){return e.currentWriteId}),i=fi(e,t,r),s=i,a=i.hash(),u=0;u<n.length;u++){var c=n[u];(0,o.assert)(0===c.status,"tryToSendTransactionQueue_: items in queue should all be run."),c.status=1,c.retryCount++;var l=Te(t,c.path);s=s.updateChild(l,c.currentOutputSnapshotRaw)}var h=s.val(!0),f=t;e.server_.put(f.toString(),h,function(r){li(e,"transaction put response",{path:f.toString(),status:r});var i=[];if("ok"===r){for(var o=[],s=function(t){n[t].status=2,i=i.concat(Xn(e.serverSyncTree_,n[t].currentWriteId)),n[t].onComplete&&o.push(function(){return n[t].onComplete(null,!0,n[t].currentOutputSnapshotResolved)}),n[t].unwatcher()},a=0;a<n.length;a++)s(a);for(yi(e,wr(e.transactionQueueTree_,t)),di(e,e.transactionQueueTree_),Qr(e.eventQueue_,t,i),a=0;a<o.length;a++)U(o[a])}else{if("datastale"===r)for(a=0;a<n.length;a++)n[a].status=3===n[a].status?4:0;else for(S("transaction at "+f.toString()+" failed: "+r),a=0;a<n.length;a++)n[a].status=4,n[a].abortReason=r;pi(e,t)}},a)}(e,Sr(t),n)}else Ir(t)&&kr(t,function(t){di(e,t)})}function pi(e,t){var n=gi(e,t),r=Sr(n);return function(e,t,n){if(0!==t.length){for(var r=[],i=[],s=t.filter(function(e){return 0===e.status}).map(function(e){return e.currentWriteId}),a=function(a){var u,c=t[a],l=Te(n,c.path),h=!1;if((0,o.assert)(null!==l,"rerunTransactionsUnderNode_: relativePath should not be null."),4===c.status)h=!0,u=c.abortReason,i=i.concat(Xn(e.serverSyncTree_,c.currentWriteId,!0));else if(0===c.status)if(c.retryCount>=25)h=!0,u="maxretry",i=i.concat(Xn(e.serverSyncTree_,c.currentWriteId,!0));else{var f=fi(e,c.path,s);c.currentInputSnapshot=f;var d=t[a].update(f.val());if(void 0!==d){Mr("transaction failed: Data returned ",d,c.path);var p=st(d);"object"==typeof d&&null!=d&&(0,o.contains)(d,".priority")||(p=p.updatePriority(f.getPriority()));var g=c.currentWriteId,v=ei(e),m=yr(p,f,v);c.currentOutputSnapshotRaw=p,c.currentOutputSnapshotResolved=m,c.currentWriteId=ii(e),s.splice(s.indexOf(g),1),i=(i=i.concat(Yn(e.serverSyncTree_,c.path,m,c.currentWriteId,c.applyLocally))).concat(Xn(e.serverSyncTree_,g,!0))}else h=!0,u="nodata",i=i.concat(Xn(e.serverSyncTree_,c.currentWriteId,!0))}Qr(e.eventQueue_,n,i),i=[],h&&(t[a].status=2,setTimeout(t[a].unwatcher,Math.floor(0)),t[a].onComplete&&r.push("nodata"===u?function(){return t[a].onComplete(null,!1,t[a].currentInputSnapshot)}:function(){return t[a].onComplete(new Error(u),!1,null)}))},u=0;u<t.length;u++)a(u);for(yi(e,e.transactionQueueTree_),u=0;u<r.length;u++)U(r[u]);di(e,e.transactionQueueTree_)}}(e,vi(e,n),r),r}function gi(e,t){var n,r=e.transactionQueueTree_;for(n=pe(t);null!==n&&void 0===Tr(r);)r=wr(r,n),n=pe(t=ve(t));return r}function vi(e,t){var n=[];return mi(e,t,n),n.sort(function(e,t){return e.order-t.order}),n}function mi(e,t,n){var r=Tr(t);if(r)for(var i=0;i<r.length;i++)n.push(r[i]);kr(t,function(t){mi(e,t,n)})}function yi(e,t){var n=Tr(t);if(n){for(var r=0,i=0;i<n.length;i++)2!==n[i].status&&(n[r]=n[i],r++);n.length=r,Er(t,n.length>0?n:void 0)}kr(t,function(t){yi(e,t)})}function _i(e,t){var n=Sr(gi(e,t)),r=wr(e.transactionQueueTree_,t);return function(e,t,n){for(var r=e.parent;null!==r;){if(t(r))return!0;r=r.parent}}(r,function(t){bi(e,t)}),bi(e,r),Cr(r,function(t){bi(e,t)}),n}function bi(e,t){var n=Tr(t);if(n){for(var r=[],i=[],s=-1,a=0;a<n.length;a++)3===n[a].status||(1===n[a].status?((0,o.assert)(s===a-1,"All SENT items should be at beginning of queue."),s=a,n[a].status=3,n[a].abortReason="set"):((0,o.assert)(0===n[a].status,"Unexpected transaction status in abort"),n[a].unwatcher(),i=i.concat(Xn(e.serverSyncTree_,n[a].currentWriteId,!0)),n[a].onComplete&&r.push(n[a].onComplete.bind(null,new Error("set"),!1,null))));for(-1===s?Er(t,void 0):n.length=s+1,Qr(e.eventQueue_,Sr(t),i),a=0;a<r.length;a++)U(r[a])}}var wi=function(e,t){var n=Ti(e),r=n.namespace;return"firebase.com"===n.domain&&C(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),r&&"undefined"!==r||"localhost"===n.domain||C("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||"undefined"!=typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&S("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new Q(n.host,n.secure,r,t,"ws"===n.scheme||"wss"===n.scheme,"",r!==n.subdomain),path:new fe(n.pathString)}},Ti=function(e){var t="",n="",r="",i="",o="",a=!0,u="https",c=443;if("string"==typeof e){var l=e.indexOf("//");l>=0&&(u=e.substring(0,l-1),e=e.substring(l+2));var h=e.indexOf("/");-1===h&&(h=e.length);var f=e.indexOf("?");-1===f&&(f=e.length),t=e.substring(0,Math.min(h,f)),h<f&&(i=function(e){for(var t="",n=e.split("/"),r=0;r<n.length;r++)if(n[r].length>0){var i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch(o){}t+="/"+i}return t}(e.substring(h,f)));var d=function(e){var t,n,r={};"?"===e.charAt(0)&&(e=e.substring(1));try{for(var i=(0,s.__values)(e.split("&")),o=i.next();!o.done;o=i.next()){var a=o.value;if(0!==a.length){var u=a.split("=");2===u.length?r[decodeURIComponent(u[0])]=decodeURIComponent(u[1]):S("Invalid query segment '"+a+"' in query '"+e+"'")}}}catch(c){t={error:c}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}return r}(e.substring(Math.min(e.length,f)));(l=t.indexOf(":"))>=0?(a="https"===u||"wss"===u,c=parseInt(t.substring(l+1),10)):l=t.length;var p=t.slice(0,l);if("localhost"===p.toLowerCase())n="localhost";else if(p.split(".").length<=2)n=p;else{var g=t.indexOf(".");r=t.substring(0,g).toLowerCase(),n=t.substring(g+1),o=r}"ns"in d&&(o=d.ns)}return{host:t,port:c,domain:n,subdomain:r,secure:a,scheme:u,pathString:i,namespace:o}},Ei=function(){function e(e,t,n,r){this.eventType=e,this.eventRegistration=t,this.snapshot=n,this.prevName=r}return e.prototype.getPath=function(){var e=this.snapshot.ref;return"value"===this.eventType?e._path:e.parent._path},e.prototype.getEventType=function(){return this.eventType},e.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},e.prototype.toString=function(){return this.getPath().toString()+":"+this.eventType+":"+(0,o.stringify)(this.snapshot.exportVal())},e}(),Ii=function(){function e(e,t,n){this.eventRegistration=e,this.error=t,this.path=n}return e.prototype.getPath=function(){return this.path},e.prototype.getEventType=function(){return"cancel"},e.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},e.prototype.toString=function(){return this.path.toString()+":cancel"},e}(),ki=function(){function e(e,t){this.snapshotCallback=e,this.cancelCallback=t}return e.prototype.onValue=function(e,t){this.snapshotCallback.call(null,e,t)},e.prototype.onCancel=function(e){return(0,o.assert)(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)},Object.defineProperty(e.prototype,"hasCancelCallback",{get:function(){return!!this.cancelCallback},enumerable:!1,configurable:!0}),e.prototype.matches=function(e){return this.snapshotCallback===e.snapshotCallback||this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context},e}(),Ci=function(){function e(e,t){this._repo=e,this._path=t}return e.prototype.cancel=function(){var e=new o.Deferred;return si(this._repo,this._path,e.wrapCallback(function(){})),e.promise},e.prototype.remove=function(){Br("OnDisconnect.remove",this._path);var e=new o.Deferred;return ai(this._repo,this._path,null,e.wrapCallback(function(){})),e.promise},e.prototype.set=function(e){Br("OnDisconnect.set",this._path),Lr("OnDisconnect.set",e,this._path,!1);var t=new o.Deferred;return ai(this._repo,this._path,e,t.wrapCallback(function(){})),t.promise},e.prototype.setWithPriority=function(e,t){Br("OnDisconnect.setWithPriority",this._path),Lr("OnDisconnect.setWithPriority",e,this._path,!1),jr("OnDisconnect.setWithPriority",t,!1);var n=new o.Deferred;return function(e,t,n,r,i){var o=st(n,r);e.server_.onDisconnectPut(t.toString(),o.val(!0),function(n,r){"ok"===n&&Dt(e.onDisconnect_,t,o),hi(0,i,n,r)})}(this._repo,this._path,e,t,n.wrapCallback(function(){})),n.promise},e.prototype.update=function(e){Br("OnDisconnect.update",this._path),Fr("OnDisconnect.update",e,this._path,!1);var t=new o.Deferred;return function(e,t,n,r){if((0,o.isEmpty)(n))return E("onDisconnect().update() called with empty data.  Don't do anything."),void hi(0,r,"ok",void 0);e.server_.onDisconnectMerge(t.toString(),n,function(i,o){"ok"===i&&M(n,function(n,r){var i=st(r);Dt(e.onDisconnect_,be(t,n),i)}),hi(0,r,i,o)})}(this._repo,this._path,e,t.wrapCallback(function(){})),t.promise},e}(),Si=function(){function e(e,t,n,r){this._repo=e,this._path=t,this._queryParams=n,this._orderByCalled=r}return Object.defineProperty(e.prototype,"key",{get:function(){return we(this._path)?null:me(this._path)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"ref",{get:function(){return new Di(this._repo,this._path)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"_queryIdentifier",{get:function(){var e=St(this._queryParams),t=R(e);return"{}"===t?"default":t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"_queryObject",{get:function(){return St(this._queryParams)},enumerable:!1,configurable:!0}),e.prototype.isEqual=function(t){if(!((t=(0,o.getModularInstance)(t))instanceof e))return!1;var n=this._repo===t._repo,r=Ie(this._path,t._path);return n&&r&&this._queryIdentifier===t._queryIdentifier},e.prototype.toJSON=function(){return this.toString()},e.prototype.toString=function(){return this._repo.toString()+function(e){for(var t="",n=e.pieceNum_;n<e.pieces_.length;n++)""!==e.pieces_[n]&&(t+="/"+encodeURIComponent(String(e.pieces_[n])));return t||"/"}(this._path)},e}();function Ai(e,t){if(!0===e._orderByCalled)throw new Error(t+": You can't combine multiple orderBy calls.")}function xi(e){var t=null,n=null;if(e.hasStart()&&(t=e.getIndexStartValue()),e.hasEnd()&&(n=e.getIndexEndValue()),e.getIndex()===Fe){var r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(e.hasStart()){if(e.getIndexStartName()!==x)throw new Error(r);if("string"!=typeof t)throw new Error(i)}if(e.hasEnd()){if(e.getIndexEndName()!==N)throw new Error(r);if("string"!=typeof n)throw new Error(i)}}else if(e.getIndex()===Ze){if(null!=t&&!Rr(t)||null!=n&&!Rr(n))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if((0,o.assert)(e.getIndex()instanceof ct||e.getIndex()===lt,"unknown index type."),null!=t&&"object"==typeof t||null!=n&&"object"==typeof n)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function Ni(e){if(e.hasStart()&&e.hasEnd()&&e.hasLimit()&&!e.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}var Di=function(e){function t(t,n){return e.call(this,t,n,new Tt,!1)||this}return(0,s.__extends)(t,e),Object.defineProperty(t.prototype,"parent",{get:function(){var e=_e(this._path);return null===e?null:new t(this._repo,e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"root",{get:function(){for(var e=this;null!==e.parent;)e=e.parent;return e},enumerable:!1,configurable:!0}),t}(Si),Pi=function(){function e(e,t,n){this._node=e,this.ref=t,this._index=n}return Object.defineProperty(e.prototype,"priority",{get:function(){return this._node.getPriority().val()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"key",{get:function(){return this.ref.key},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"size",{get:function(){return this._node.numChildren()},enumerable:!1,configurable:!0}),e.prototype.child=function(t){var n=new fe(t),r=Li(this.ref,t);return new e(this._node.getChild(n),r,Ze)},e.prototype.exists=function(){return!this._node.isEmpty()},e.prototype.exportVal=function(){return this._node.val(!0)},e.prototype.forEach=function(t){var n=this;return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,function(r,i){return t(new e(i,Li(n.ref,r),Ze))})},e.prototype.hasChild=function(e){var t=new fe(e);return!this._node.getChild(t).isEmpty()},e.prototype.hasChildren=function(){return!this._node.isLeafNode()&&!this._node.isEmpty()},e.prototype.toJSON=function(){return this.exportVal()},e.prototype.val=function(){return this._node.val()},e}();function Oi(e,t){return(e=(0,o.getModularInstance)(e))._checkNotDeleted("ref"),void 0!==t?Li(e._root,t):e._root}function Ri(e,t){(e=(0,o.getModularInstance)(e))._checkNotDeleted("refFromURL");var n=wi(t,e._repo.repoInfo_.nodeAdmin);Hr("refFromURL",n);var r=n.repoInfo;return e._repo.repoInfo_.isCustomHost()||r.host===e._repo.repoInfo_.host||C("refFromURL: Host name does not match the current database: (found "+r.host+" but expected "+e._repo.repoInfo_.host+")"),Oi(e,n.path.toString())}function Li(e,t){var n;return null===pe((e=(0,o.getModularInstance)(e))._path)?((n=t)&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),Vr("child","path",n,!1)):Vr("child","path",t,!1),new Di(e._repo,be(e._path,t))}function Mi(e,t){e=(0,o.getModularInstance)(e),Br("push",e._path),Lr("push",t,e._path,!0);var n,r=Jr(e._repo),i=ft(r),s=Li(e,i),a=Li(e,i);return n=null!=t?ji(a,t).then(function(){return a}):Promise.resolve(a),s.then=n.then.bind(n),s.catch=n.then.bind(n,void 0),s}function Fi(e){return Br("remove",e._path),ji(e,null)}function ji(e,t){e=(0,o.getModularInstance)(e),Br("set",e._path),Lr("set",t,e._path,!1);var n=new o.Deferred;return oi(e._repo,e._path,t,null,n.wrapCallback(function(){})),n.promise}function qi(e,t){e=(0,o.getModularInstance)(e),Br("setPriority",e._path),jr("setPriority",t,!1);var n=new o.Deferred;return oi(e._repo,be(e._path,".priority"),t,null,n.wrapCallback(function(){})),n.promise}function Ui(e,t,n){if(Br("setWithPriority",e._path),Lr("setWithPriority",t,e._path,!1),jr("setWithPriority",n,!1),".length"===e.key||".keys"===e.key)throw"setWithPriority failed: "+e.key+" is a read-only object.";var r=new o.Deferred;return oi(e._repo,e._path,t,n,r.wrapCallback(function(){})),r.promise}function Vi(e,t){Fr("update",t,e._path,!1);var n=new o.Deferred;return function(e,t,n,r){li(e,"update",{path:t.toString(),value:n});var i=!0,s=ei(e),a={};if(M(n,function(n,r){i=!1,a[n]=mr(be(t,n),st(r),e.serverSyncTree_,s)}),i)E("update() called with empty data.  Don't do anything."),hi(0,r,"ok",void 0);else{var u=ii(e),c=function(e,t,n,r){!function(e,t,n,r){(0,o.assert)(r>e.lastWriteId,"Stacking an older merge on top of newer ones"),e.allWrites.push({path:t,children:n,writeId:r,visible:!0}),e.visibleWrites=en(e.visibleWrites,t,n),e.lastWriteId=r}(e.pendingWriteTree_,t,n,r);var i=Xt.fromObject(n);return nr(e,new Bt({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},t,i))}(e.serverSyncTree_,t,a,u);zr(e.eventQueue_,c),e.server_.merge(t.toString(),n,function(n,i){var o="ok"===n;o||S("update at "+t+" failed: "+n);var s=Xn(e.serverSyncTree_,u,!o),a=s.length>0?pi(e,t):t;Qr(e.eventQueue_,a,s),hi(0,r,n,i)}),M(n,function(n){var r=_i(e,be(t,n));pi(e,r)}),Qr(e.eventQueue_,t,[])}}(e._repo,e._path,t,n.wrapCallback(function(){})),n.promise}var Bi=function(){function e(e){this.callbackContext=e}return e.prototype.respondsTo=function(e){return"value"===e},e.prototype.createEvent=function(e,t){var n=t._queryParams.getIndex();return new Ei("value",this,new Pi(e.snapshotNode,new Di(t._repo,t._path),n))},e.prototype.getEventRunner=function(e){var t=this;return"cancel"===e.getEventType()?function(){return t.callbackContext.onCancel(e.error)}:function(){return t.callbackContext.onValue(e.snapshot,null)}},e.prototype.createCancelEvent=function(e,t){return this.callbackContext.hasCancelCallback?new Ii(this,e,t):null},e.prototype.matches=function(t){return t instanceof e&&(!t.callbackContext||!this.callbackContext||t.callbackContext.matches(this.callbackContext))},e.prototype.hasAnyCallback=function(){return null!==this.callbackContext},e}(),Hi=function(){function e(e,t){this.eventType=e,this.callbackContext=t}return e.prototype.respondsTo=function(e){var t="children_added"===e?"child_added":e;return this.eventType===("children_removed"===t?"child_removed":t)},e.prototype.createCancelEvent=function(e,t){return this.callbackContext.hasCancelCallback?new Ii(this,e,t):null},e.prototype.createEvent=function(e,t){(0,o.assert)(null!=e.childName,"Child events should have a childName.");var n=Li(new Di(t._repo,t._path),e.childName),r=t._queryParams.getIndex();return new Ei(e.type,this,new Pi(e.snapshotNode,n,r),e.prevName)},e.prototype.getEventRunner=function(e){var t=this;return"cancel"===e.getEventType()?function(){return t.callbackContext.onCancel(e.error)}:function(){return t.callbackContext.onValue(e.snapshot,e.prevName)}},e.prototype.matches=function(t){return t instanceof e&&this.eventType===t.eventType&&(!this.callbackContext||!t.callbackContext||this.callbackContext.matches(t.callbackContext))},e.prototype.hasAnyCallback=function(){return!!this.callbackContext},e}();function Wi(e,t,n,r,i){var o;if("object"==typeof r&&(o=void 0,i=r),"function"==typeof r&&(o=r),i&&i.onlyOnce){var s=n,a=function(t,n){ui(e._repo,e,c),s(t,n)};a.userCallback=n.userCallback,a.context=n.context,n=a}var u=new ki(n,o||void 0),c="value"===t?new Bi(u):new Hi(t,u);return function(e,t,n){var r;r=".info"===pe(t._path)?er(e.infoSyncTree_,t,n):er(e.serverSyncTree_,t,n),Gr(e.eventQueue_,t._path,r)}(e._repo,e,c),function(){return ui(e._repo,e,c)}}function Ki(e,t,n,r){return Wi(e,"value",t,n,r)}function zi(e,t,n,r){return Wi(e,"child_added",t,n,r)}function Gi(e,t,n,r){return Wi(e,"child_changed",t,n,r)}function Qi(e,t,n,r){return Wi(e,"child_moved",t,n,r)}function $i(e,t,n,r){return Wi(e,"child_removed",t,n,r)}function Yi(e,t,n){var r=null,i=n?new ki(n):null;"value"===t?r=new Bi(i):t&&(r=new Hi(t,i)),ui(e._repo,e,r)}var Xi=function(){},Zi=function(e){function t(t,n){var r=e.call(this)||this;return r._value=t,r._key=n,r}return(0,s.__extends)(t,e),t.prototype._apply=function(e){Lr("endAt",this._value,e._path,!0);var t=It(e._queryParams,this._value,this._key);if(Ni(t),xi(t),e._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new Si(e._repo,e._path,t,e._orderByCalled)},t}(Xi);function Ji(e,t){return Ur("endAt","key",t,!0),new Zi(e,t)}var eo=function(e){function t(t,n){var r=e.call(this)||this;return r._value=t,r._key=n,r}return(0,s.__extends)(t,e),t.prototype._apply=function(e){Lr("endBefore",this._value,e._path,!1);var t,n,r,i,o=(n=this._value,r=this._key,(t=e._queryParams).index_===Fe?("string"==typeof n&&(n=pt(n)),i=It(t,n,r)):i=It(t,n,null==r?x:pt(r)),i.endBeforeSet_=!0,i);if(Ni(o),xi(o),e._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new Si(e._repo,e._path,o,e._orderByCalled)},t}(Xi);function to(e,t){return Ur("endBefore","key",t,!0),new eo(e,t)}var no=function(e){function t(t,n){var r=e.call(this)||this;return r._value=t,r._key=n,r}return(0,s.__extends)(t,e),t.prototype._apply=function(e){Lr("startAt",this._value,e._path,!0);var t=Et(e._queryParams,this._value,this._key);if(Ni(t),xi(t),e._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new Si(e._repo,e._path,t,e._orderByCalled)},t}(Xi);function ro(e,t){return void 0===e&&(e=null),Ur("startAt","key",t,!0),new no(e,t)}var io=function(e){function t(t,n){var r=e.call(this)||this;return r._value=t,r._key=n,r}return(0,s.__extends)(t,e),t.prototype._apply=function(e){Lr("startAfter",this._value,e._path,!1);var t,n,r,i,o=(n=this._value,r=this._key,(t=e._queryParams).index_===Fe?("string"==typeof n&&(n=dt(n)),i=Et(t,n,r)):i=Et(t,n,null==r?N:dt(r)),i.startAfterSet_=!0,i);if(Ni(o),xi(o),e._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new Si(e._repo,e._path,o,e._orderByCalled)},t}(Xi);function oo(e,t){return Ur("startAfter","key",t,!0),new io(e,t)}var so=function(e){function t(t){var n=e.call(this)||this;return n._limit=t,n}return(0,s.__extends)(t,e),t.prototype._apply=function(e){if(e._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new Si(e._repo,e._path,(t=this._limit,(n=e._queryParams.copy()).limitSet_=!0,n.limit_=t,n.viewFrom_="l",n),e._orderByCalled);var t,n},t}(Xi);function ao(e){if("number"!=typeof e||Math.floor(e)!==e||e<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new so(e)}var uo=function(e){function t(t){var n=e.call(this)||this;return n._limit=t,n}return(0,s.__extends)(t,e),t.prototype._apply=function(e){if(e._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new Si(e._repo,e._path,(t=this._limit,(n=e._queryParams.copy()).limitSet_=!0,n.limit_=t,n.viewFrom_="r",n),e._orderByCalled);var t,n},t}(Xi);function co(e){if("number"!=typeof e||Math.floor(e)!==e||e<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new uo(e)}var lo=function(e){function t(t){var n=e.call(this)||this;return n._path=t,n}return(0,s.__extends)(t,e),t.prototype._apply=function(e){Ai(e,"orderByChild");var t=new fe(this._path);if(we(t))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");var n=new ct(t),r=kt(e._queryParams,n);return xi(r),new Si(e._repo,e._path,r,!0)},t}(Xi);function ho(e){if("$key"===e)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===e)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===e)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return Vr("orderByChild","path",e,!1),new lo(e)}var fo=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,s.__extends)(t,e),t.prototype._apply=function(e){Ai(e,"orderByKey");var t=kt(e._queryParams,Fe);return xi(t),new Si(e._repo,e._path,t,!0)},t}(Xi);function po(){return new fo}var go=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,s.__extends)(t,e),t.prototype._apply=function(e){Ai(e,"orderByPriority");var t=kt(e._queryParams,Ze);return xi(t),new Si(e._repo,e._path,t,!0)},t}(Xi);function vo(){return new go}var mo=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,s.__extends)(t,e),t.prototype._apply=function(e){Ai(e,"orderByValue");var t=kt(e._queryParams,lt);return xi(t),new Si(e._repo,e._path,t,!0)},t}(Xi);function yo(){return new mo}var _o=function(e){function t(t,n){var r=e.call(this)||this;return r._value=t,r._key=n,r}return(0,s.__extends)(t,e),t.prototype._apply=function(e){if(Lr("equalTo",this._value,e._path,!1),e._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(e._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new Zi(this._value,this._key)._apply(new no(this._value,this._key)._apply(e))},t}(Xi);function bo(e,t){return Ur("equalTo","key",t,!0),new _o(e,t)}function wo(e){for(var t,n,r=[],i=1;i<arguments.length;i++)r[i-1]=arguments[i];var a=(0,o.getModularInstance)(e);try{for(var u=(0,s.__values)(r),c=u.next();!c.done;c=u.next()){var l=c.value;a=l._apply(a)}}catch(h){t={error:h}}finally{try{c&&!c.done&&(n=u.return)&&n.call(u)}finally{if(t)throw t.error}}return a}!function(e){(0,o.assert)(!Dn,"__referenceConstructor has already been defined"),Dn=e}(Di),function(e){(0,o.assert)(!jn,"__referenceConstructor has already been defined"),jn=e}(Di);var To={},Eo=!1;function Io(e,t,n,r,i){var o=r||e.options.databaseURL;void 0===o&&(e.options.projectId||C("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),E("Using default host for project ",e.options.projectId),o=e.options.projectId+"-default-rtdb.firebaseio.com");var s,a=wi(o,i),u=a.repoInfo,c=void 0;"undefined"!=typeof process&&(c=process.env.FIREBASE_DATABASE_EMULATOR_HOST),c?(s=!0,u=(a=wi(o="http://"+c+"?ns="+u.namespace,i)).repoInfo):s=!a.repoInfo.secure;var l=i&&s?new W(W.OWNER):new H(e.name,e.options,t);Hr("Invalid Firebase Database URL",a),we(a.path)||C("Database URL must point to the root of a Firebase Database (not including a child path).");var h=function(e,t,n,r){var i=To[t.name];i||(To[t.name]=i={});var o=i[e.toURLString()];return o&&C("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),o=new Zr(e,Eo,n,r),i[e.toURLString()]=o,o}(u,e,l,new B(e.name,n));return new ko(h,e)}var ko=function(){function e(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}return Object.defineProperty(e.prototype,"_repo",{get:function(){return this._instanceStarted||(function(e,t,n){if(e.stats_=J(e.repoInfo_),e.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)e.server_=new At(e.repoInfo_,function(t,n,r,i){ti(e,t,n,r,i)},e.authTokenProvider_,e.appCheckProvider_),setTimeout(function(){return ni(e,!0)},0);else{if(null!=n){if("object"!=typeof n)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,o.stringify)(n)}catch(s){throw new Error("Invalid authOverride provided: "+s)}}e.persistentConnection_=new Oe(e.repoInfo_,t,function(t,n,r,i){ti(e,t,n,r,i)},function(t){ni(e,t)},function(t){!function(e,t){M(t,function(t,n){ri(e,t,n)})}(e,t)},e.authTokenProvider_,e.appCheckProvider_,n),e.server_=e.persistentConnection_}var r,i;e.authTokenProvider_.addTokenChangeListener(function(t){e.server_.refreshAuthToken(t)}),e.appCheckProvider_.addTokenChangeListener(function(t){e.server_.refreshAppCheckToken(t.token)}),e.statsReporter_=(r=function(){return new Lt(e.stats_,e.server_)},i=e.repoInfo_.toString(),Z[i]||(Z[i]=r()),Z[i]),e.infoData_=new xt,e.infoSyncTree_=new $n({startListening:function(t,n,r,i){var o=[],s=e.infoData_.getNode(t._path);return s.isEmpty()||(o=Zn(e.infoSyncTree_,t._path,s),setTimeout(function(){i("ok")},0)),o},stopListening:function(){}}),ri(e,"connected",!1),e.serverSyncTree_=new $n({startListening:function(t,n,r,i){return e.server_.listen(t,r,n,function(n,r){var o=i(n,r);Qr(e.eventQueue_,t._path,o)}),[]},stopListening:function(t,n){e.server_.unlisten(t,n)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"_root",{get:function(){return this._rootInternal||(this._rootInternal=new Di(this._repo,de())),this._rootInternal},enumerable:!1,configurable:!0}),e.prototype._delete=function(){var e,t,n;return null!==this._rootInternal&&(e=this._repo,(n=To[t=this.app.name])&&n[e.key]===e||C("Database "+t+"("+e.repoInfo_+") has already been deleted."),ci(e),delete n[e.key],this._repoInternal=null,this._rootInternal=null),Promise.resolve()},e.prototype._checkNotDeleted=function(e){null===this._rootInternal&&C("Cannot call "+e+" on a deleted database.")},e}();function Co(e){(e=(0,o.getModularInstance)(e))._checkNotDeleted("goOffline"),ci(e._repo)}function So(e){var t;(e=(0,o.getModularInstance)(e))._checkNotDeleted("goOnline"),(t=e._repo).persistentConnection_&&t.persistentConnection_.resume(Xr)}var Ao={".sv":"timestamp"},xo=function(){function e(e,t){this.committed=e,this.snapshot=t}return e.prototype.toJSON=function(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}},e}();function No(e,t,n){var r;if(e=(0,o.getModularInstance)(e),Br("Reference.transaction",e._path),".length"===e.key||".keys"===e.key)throw"Reference.transaction failed: "+e.key+" is a read-only object.";var i=null===(r=null==n?void 0:n.applyLocally)||void 0===r||r,s=new o.Deferred,a=Ki(e,function(){});return function(t,n,r,i,a,u){li(t,"transaction on "+n);var c={path:n,update:r,onComplete:function(t,n,r){var i=null;t?s.reject(t):(i=new Pi(r,new Di(e._repo,e._path),Ze),s.resolve(new xo(n,i)))},status:null,order:m(),applyLocally:u,retryCount:0,unwatcher:a,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},l=fi(t,n,void 0);c.currentInputSnapshot=l;var h=c.update(l.val());if(void 0===h)c.unwatcher(),c.currentOutputSnapshotRaw=null,c.currentOutputSnapshotResolved=null,c.onComplete&&c.onComplete(null,!1,c.currentInputSnapshot);else{Mr("transaction failed: Data returned ",h,c.path),c.status=0;var f=wr(t.transactionQueueTree_,n),d=Tr(f)||[];d.push(c),Er(f,d);var p=void 0;"object"==typeof h&&null!==h&&(0,o.contains)(h,".priority")?(p=(0,o.safeGet)(h,".priority"),(0,o.assert)(Rr(p),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):p=(tr(t.serverSyncTree_,n)||it.EMPTY_NODE).getPriority().val();var g=ei(t),v=st(h,p),y=yr(v,l,g);c.currentOutputSnapshotRaw=v,c.currentOutputSnapshotResolved=y,c.currentWriteId=ii(t);var _=Yn(t.serverSyncTree_,n,y,c.currentWriteId,c.applyLocally);Qr(t.eventQueue_,n,_),di(t,t.transactionQueueTree_)}}(e._repo,e._path,t,0,a,i),s.promise}var Do=function(){function e(e){this._delegate=e}return e.prototype.cancel=function(e){(0,o.validateArgCount)("OnDisconnect.cancel",0,1,arguments.length),(0,o.validateCallback)("OnDisconnect.cancel","onComplete",e,!0);var t=this._delegate.cancel();return e&&t.then(function(){return e(null)},function(t){return e(t)}),t},e.prototype.remove=function(e){(0,o.validateArgCount)("OnDisconnect.remove",0,1,arguments.length),(0,o.validateCallback)("OnDisconnect.remove","onComplete",e,!0);var t=this._delegate.remove();return e&&t.then(function(){return e(null)},function(t){return e(t)}),t},e.prototype.set=function(e,t){(0,o.validateArgCount)("OnDisconnect.set",1,2,arguments.length),(0,o.validateCallback)("OnDisconnect.set","onComplete",t,!0);var n=this._delegate.set(e);return t&&n.then(function(){return t(null)},function(e){return t(e)}),n},e.prototype.setWithPriority=function(e,t,n){(0,o.validateArgCount)("OnDisconnect.setWithPriority",2,3,arguments.length),(0,o.validateCallback)("OnDisconnect.setWithPriority","onComplete",n,!0);var r=this._delegate.setWithPriority(e,t);return n&&r.then(function(){return n(null)},function(e){return n(e)}),r},e.prototype.update=function(e,t){if((0,o.validateArgCount)("OnDisconnect.update",1,2,arguments.length),Array.isArray(e)){for(var n={},r=0;r<e.length;++r)n[""+r]=e[r];e=n,S("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}(0,o.validateCallback)("OnDisconnect.update","onComplete",t,!0);var i=this._delegate.update(e);return t&&i.then(function(){return t(null)},function(e){return t(e)}),i},e}(),Po=function(){function e(e,t){this.committed=e,this.snapshot=t}return e.prototype.toJSON=function(){return(0,o.validateArgCount)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}},e}(),Oo=function(){function e(e,t){this._database=e,this._delegate=t}return e.prototype.val=function(){return(0,o.validateArgCount)("DataSnapshot.val",0,0,arguments.length),this._delegate.val()},e.prototype.exportVal=function(){return(0,o.validateArgCount)("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()},e.prototype.toJSON=function(){return(0,o.validateArgCount)("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()},e.prototype.exists=function(){return(0,o.validateArgCount)("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()},e.prototype.child=function(t){return(0,o.validateArgCount)("DataSnapshot.child",0,1,arguments.length),t=String(t),Vr("DataSnapshot.child","path",t,!1),new e(this._database,this._delegate.child(t))},e.prototype.hasChild=function(e){return(0,o.validateArgCount)("DataSnapshot.hasChild",1,1,arguments.length),Vr("DataSnapshot.hasChild","path",e,!1),this._delegate.hasChild(e)},e.prototype.getPriority=function(){return(0,o.validateArgCount)("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority},e.prototype.forEach=function(t){var n=this;return(0,o.validateArgCount)("DataSnapshot.forEach",1,1,arguments.length),(0,o.validateCallback)("DataSnapshot.forEach","action",t,!1),this._delegate.forEach(function(r){return t(new e(n._database,r))})},e.prototype.hasChildren=function(){return(0,o.validateArgCount)("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()},Object.defineProperty(e.prototype,"key",{get:function(){return this._delegate.key},enumerable:!1,configurable:!0}),e.prototype.numChildren=function(){return(0,o.validateArgCount)("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size},e.prototype.getRef=function(){return(0,o.validateArgCount)("DataSnapshot.ref",0,0,arguments.length),new Lo(this._database,this._delegate.ref)},Object.defineProperty(e.prototype,"ref",{get:function(){return this.getRef()},enumerable:!1,configurable:!0}),e}(),Ro=function(){function e(e,t){this.database=e,this._delegate=t}return e.prototype.on=function(t,n,r,i){var s,a=this;(0,o.validateArgCount)("Query.on",2,4,arguments.length),(0,o.validateCallback)("Query.on","callback",n,!1);var u=e.getCancelAndContextArgs_("Query.on",r,i),c=function(e,t){n.call(u.context,new Oo(a.database,e),t)};c.userCallback=n,c.context=u.context;var l=null===(s=u.cancel)||void 0===s?void 0:s.bind(u.context);switch(t){case"value":return Ki(this._delegate,c,l),n;case"child_added":return zi(this._delegate,c,l),n;case"child_removed":return $i(this._delegate,c,l),n;case"child_changed":return Gi(this._delegate,c,l),n;case"child_moved":return Qi(this._delegate,c,l),n;default:throw new Error((0,o.errorPrefix)("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}},e.prototype.off=function(e,t,n){if((0,o.validateArgCount)("Query.off",0,3,arguments.length),qr("Query.off",e,!0),(0,o.validateCallback)("Query.off","callback",t,!0),(0,o.validateContextObject)("Query.off","context",n,!0),t){var r=function(){};r.userCallback=t,r.context=n,Yi(this._delegate,e,r)}else Yi(this._delegate,e)},e.prototype.get=function(){var e=this;return function(e){return function(e,t){var n=function(e,t){var n=t._path,r=null;e.syncPointTree_.foreachOnPath(n,function(e,t){var i=Te(e,n);r=r||Hn(t,i)});var i=e.syncPointTree_.get(n);i?r=r||Hn(i,de()):(i=new qn,e.syncPointTree_=e.syncPointTree_.set(n,i));var o=null!=r,s=o?new Ht(r,!0,!1):null;return $t(Vn(i,t,ln(e.pendingWriteTree_,t._path),o?s.getNode():it.EMPTY_NODE,o).viewCache_)}(e.serverSyncTree_,t);return null!=n?Promise.resolve(n):e.server_.get(t).then(function(n){var r=st(n).withIndex(t._queryParams.getIndex()),i=Zn(e.serverSyncTree_,t._path,r);return Gr(e.eventQueue_,t._path,i),Promise.resolve(r)},function(n){return li(e,"get for query "+(0,o.stringify)(t)+" failed: "+n),Promise.reject(new Error(n))})}((e=(0,o.getModularInstance)(e))._repo,e).then(function(t){return new Pi(t,new Di(e._repo,e._path),e._queryParams.getIndex())})}(this._delegate).then(function(t){return new Oo(e.database,t)})},e.prototype.once=function(t,n,r,i){var s=this;(0,o.validateArgCount)("Query.once",1,4,arguments.length),(0,o.validateCallback)("Query.once","callback",n,!0);var a=e.getCancelAndContextArgs_("Query.once",r,i),u=new o.Deferred,c=function(e,t){var r=new Oo(s.database,e);n&&n.call(a.context,r,t),u.resolve(r)};c.userCallback=n,c.context=a.context;var l=function(e){a.cancel&&a.cancel.call(a.context,e),u.reject(e)};switch(t){case"value":Ki(this._delegate,c,l,{onlyOnce:!0});break;case"child_added":zi(this._delegate,c,l,{onlyOnce:!0});break;case"child_removed":$i(this._delegate,c,l,{onlyOnce:!0});break;case"child_changed":Gi(this._delegate,c,l,{onlyOnce:!0});break;case"child_moved":Qi(this._delegate,c,l,{onlyOnce:!0});break;default:throw new Error((0,o.errorPrefix)("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return u.promise},e.prototype.limitToFirst=function(t){return(0,o.validateArgCount)("Query.limitToFirst",1,1,arguments.length),new e(this.database,wo(this._delegate,ao(t)))},e.prototype.limitToLast=function(t){return(0,o.validateArgCount)("Query.limitToLast",1,1,arguments.length),new e(this.database,wo(this._delegate,co(t)))},e.prototype.orderByChild=function(t){return(0,o.validateArgCount)("Query.orderByChild",1,1,arguments.length),new e(this.database,wo(this._delegate,ho(t)))},e.prototype.orderByKey=function(){return(0,o.validateArgCount)("Query.orderByKey",0,0,arguments.length),new e(this.database,wo(this._delegate,po()))},e.prototype.orderByPriority=function(){return(0,o.validateArgCount)("Query.orderByPriority",0,0,arguments.length),new e(this.database,wo(this._delegate,vo()))},e.prototype.orderByValue=function(){return(0,o.validateArgCount)("Query.orderByValue",0,0,arguments.length),new e(this.database,wo(this._delegate,yo()))},e.prototype.startAt=function(t,n){return void 0===t&&(t=null),(0,o.validateArgCount)("Query.startAt",0,2,arguments.length),new e(this.database,wo(this._delegate,ro(t,n)))},e.prototype.startAfter=function(t,n){return void 0===t&&(t=null),(0,o.validateArgCount)("Query.startAfter",0,2,arguments.length),new e(this.database,wo(this._delegate,oo(t,n)))},e.prototype.endAt=function(t,n){return void 0===t&&(t=null),(0,o.validateArgCount)("Query.endAt",0,2,arguments.length),new e(this.database,wo(this._delegate,Ji(t,n)))},e.prototype.endBefore=function(t,n){return void 0===t&&(t=null),(0,o.validateArgCount)("Query.endBefore",0,2,arguments.length),new e(this.database,wo(this._delegate,to(t,n)))},e.prototype.equalTo=function(t,n){return(0,o.validateArgCount)("Query.equalTo",1,2,arguments.length),new e(this.database,wo(this._delegate,bo(t,n)))},e.prototype.toString=function(){return(0,o.validateArgCount)("Query.toString",0,0,arguments.length),this._delegate.toString()},e.prototype.toJSON=function(){return(0,o.validateArgCount)("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()},e.prototype.isEqual=function(t){if((0,o.validateArgCount)("Query.isEqual",1,1,arguments.length),!(t instanceof e)){var n="Query.isEqual failed: First argument must be an instance of firebase.database.Query.";throw new Error(n)}return this._delegate.isEqual(t._delegate)},e.getCancelAndContextArgs_=function(e,t,n){var r={cancel:void 0,context:void 0};if(t&&n)r.cancel=t,(0,o.validateCallback)(e,"cancel",r.cancel,!0),r.context=n,(0,o.validateContextObject)(e,"context",r.context,!0);else if(t)if("object"==typeof t&&null!==t)r.context=t;else{if("function"!=typeof t)throw new Error((0,o.errorPrefix)(e,"cancelOrContext")+" must either be a cancel callback or a context object.");r.cancel=t}return r},Object.defineProperty(e.prototype,"ref",{get:function(){return new Lo(this.database,new Di(this._delegate._repo,this._delegate._path))},enumerable:!1,configurable:!0}),e}(),Lo=function(e){function t(t,n){var r=e.call(this,t,new Si(n._repo,n._path,new Tt,!1))||this;return r.database=t,r._delegate=n,r}return(0,s.__extends)(t,e),t.prototype.getKey=function(){return(0,o.validateArgCount)("Reference.key",0,0,arguments.length),this._delegate.key},t.prototype.child=function(e){return(0,o.validateArgCount)("Reference.child",1,1,arguments.length),"number"==typeof e&&(e=String(e)),new t(this.database,Li(this._delegate,e))},t.prototype.getParent=function(){(0,o.validateArgCount)("Reference.parent",0,0,arguments.length);var e=this._delegate.parent;return e?new t(this.database,e):null},t.prototype.getRoot=function(){return(0,o.validateArgCount)("Reference.root",0,0,arguments.length),new t(this.database,this._delegate.root)},t.prototype.set=function(e,t){(0,o.validateArgCount)("Reference.set",1,2,arguments.length),(0,o.validateCallback)("Reference.set","onComplete",t,!0);var n=ji(this._delegate,e);return t&&n.then(function(){return t(null)},function(e){return t(e)}),n},t.prototype.update=function(e,t){if((0,o.validateArgCount)("Reference.update",1,2,arguments.length),Array.isArray(e)){for(var n={},r=0;r<e.length;++r)n[""+r]=e[r];e=n,S("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}Br("Reference.update",this._delegate._path),(0,o.validateCallback)("Reference.update","onComplete",t,!0);var i=Vi(this._delegate,e);return t&&i.then(function(){return t(null)},function(e){return t(e)}),i},t.prototype.setWithPriority=function(e,t,n){(0,o.validateArgCount)("Reference.setWithPriority",2,3,arguments.length),(0,o.validateCallback)("Reference.setWithPriority","onComplete",n,!0);var r=Ui(this._delegate,e,t);return n&&r.then(function(){return n(null)},function(e){return n(e)}),r},t.prototype.remove=function(e){(0,o.validateArgCount)("Reference.remove",0,1,arguments.length),(0,o.validateCallback)("Reference.remove","onComplete",e,!0);var t=Fi(this._delegate);return e&&t.then(function(){return e(null)},function(t){return e(t)}),t},t.prototype.transaction=function(e,t,n){var r=this;(0,o.validateArgCount)("Reference.transaction",1,3,arguments.length),(0,o.validateCallback)("Reference.transaction","transactionUpdate",e,!1),(0,o.validateCallback)("Reference.transaction","onComplete",t,!0),Wr("Reference.transaction","applyLocally",n,!0);var i=No(this._delegate,e,{applyLocally:n}).then(function(e){return new Po(e.committed,new Oo(r.database,e.snapshot))});return t&&i.then(function(e){return t(null,e.committed,e.snapshot)},function(e){return t(e,!1,null)}),i},t.prototype.setPriority=function(e,t){(0,o.validateArgCount)("Reference.setPriority",1,2,arguments.length),(0,o.validateCallback)("Reference.setPriority","onComplete",t,!0);var n=qi(this._delegate,e);return t&&n.then(function(){return t(null)},function(e){return t(e)}),n},t.prototype.push=function(e,n){var r=this;(0,o.validateArgCount)("Reference.push",0,2,arguments.length),(0,o.validateCallback)("Reference.push","onComplete",n,!0);var i=Mi(this._delegate,e),s=i.then(function(e){return new t(r.database,e)});n&&s.then(function(){return n(null)},function(e){return n(e)});var a=new t(this.database,i);return a.then=s.then.bind(s),a.catch=s.catch.bind(s,void 0),a},t.prototype.onDisconnect=function(){return Br("Reference.onDisconnect",this._delegate._path),new Do(new Ci(this._delegate._repo,this._delegate._path))},Object.defineProperty(t.prototype,"key",{get:function(){return this.getKey()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return this.getParent()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"root",{get:function(){return this.getRoot()},enumerable:!1,configurable:!0}),t}(Ro),Mo=function(){function e(e,t){var n=this;this._delegate=e,this.app=t,this.INTERNAL={delete:function(){return n._delegate._delete()}}}return e.prototype.useEmulator=function(e,t,n){void 0===n&&(n={}),function(e,t,n,r){void 0===r&&(r={}),(e=(0,o.getModularInstance)(e))._checkNotDeleted("useEmulator"),e._instanceStarted&&C("Cannot call useEmulator() after instance has already been initialized.");var i=e._repoInternal,s=void 0;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&C('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),s=new W(W.OWNER);else if(r.mockUserToken){var a=(0,o.createMockUserToken)(r.mockUserToken,e.app.options.projectId);s=new W(a)}!function(e,t,n,r){e.repoInfo_=new Q(t+":"+n,!1,e.repoInfo_.namespace,e.repoInfo_.webSocketOnly,e.repoInfo_.nodeAdmin,e.repoInfo_.persistenceKey,e.repoInfo_.includeNamespaceInQueryParams),r&&(e.authTokenProvider_=r)}(i,t,n,s)}(this._delegate,e,t,n)},e.prototype.ref=function(e){if((0,o.validateArgCount)("database.ref",0,1,arguments.length),e instanceof Lo){var t=Ri(this._delegate,e.toString());return new Lo(this,t)}return t=Oi(this._delegate,e),new Lo(this,t)},e.prototype.refFromURL=function(e){var t="database.refFromURL";(0,o.validateArgCount)(t,1,1,arguments.length);var n=Ri(this._delegate,e);return new Lo(this,n)},e.prototype.goOffline=function(){return(0,o.validateArgCount)("database.goOffline",0,0,arguments.length),Co(this._delegate)},e.prototype.goOnline=function(){return(0,o.validateArgCount)("database.goOnline",0,0,arguments.length),So(this._delegate)},e.ServerValue={TIMESTAMP:Ao,increment:function(e){return function(e){return{".sv":{increment:e}}}(e)}},e}(),Fo=Object.freeze({__proto__:null,forceLongPolling:function(){se.forceDisallow(),re.forceAllow()},forceWebSockets:function(){re.forceDisallow()},isWebSocketsAvailable:function(){return se.isAvailable()},setSecurityDebugCallback:function(e,t){e._delegate._repo.persistentConnection_.securityDebugCallback_=t},stats:function(e,t){!function(e,t){if(void 0===t&&(t=!1),"undefined"!=typeof console){var n;t?(e.statsListener_||(e.statsListener_=new Rt(e.stats_)),n=e.statsListener_.get()):n=e.stats_.get();var r=Object.keys(n).reduce(function(e,t){return Math.max(t.length,e)},0);M(n,function(e,t){for(var n=e,i=e.length;i<r+2;i++)n+=" ";console.log(n+t)})}}(e._delegate._repo,t)},statsIncrementCounter:function(e,t){!function(e,t){e.stats_.incrementCounter(t),e.statsReporter_.statsToReport_[t]=!0}(e._delegate._repo,t)},dataUpdateCount:function(e){return e._delegate._repo.dataUpdateCount},interceptServerData:function(e,t){return function(e,t){e.interceptServerDataCallback_=t}(e._delegate._repo,t)},initStandalone:function(e){var t=e.app,n=e.url,r=e.customAuthImpl,o=e.namespace,s=e.nodeAdmin,a=void 0!==s&&s;c(e.version);var u=new i.Provider("auth-internal",new i.ComponentContainer("database-standalone"));return u.setComponent(new i.Component("auth-internal",function(){return r},"PRIVATE")),{instance:new Mo(Io(t,u,void 0,n,a),t),namespace:o}}}),jo=Oe;Oe.prototype.simpleListen=function(e,t){this.sendRequest("q",{p:e},t)},Oe.prototype.echo=function(e,t){this.sendRequest("echo",{d:e},t)};var qo=Object.freeze({__proto__:null,DataConnection:jo,RealTimeConnection:ue,hijackHash:function(e){var t=Oe.prototype.put;return Oe.prototype.put=function(n,r,i,o){void 0!==o&&(o=e()),t.call(this,n,r,i,o)},function(){Oe.prototype.put=t}},ConnectionTarget:Q,queryIdentifier:function(e){return e._delegate._queryIdentifier},forceRestClient:function(e){!function(e){Eo=e}(e)}}),Uo=Mo.ServerValue;!function(t){c(t.SDK_VERSION);var n=t.INTERNAL.registerComponent(new i.Component("database",function(e,t){var n=t.instanceIdentifier,r=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal"),o=e.getProvider("app-check-internal");return new Mo(Io(r,i,o,n),r)},"PUBLIC").setServiceProps({Reference:Lo,Query:Ro,Database:Mo,DataSnapshot:Oo,enableLogging:T,INTERNAL:Fo,ServerValue:Uo,TEST_ACCESS:qo}).setMultipleInstances(!0));t.registerVersion("@firebase/database","0.10.9"),(0,o.isNodeSdk)()&&(e.exports=n)}(r.default)},300:(e,t,n)=>{"use strict";function r(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),i=0;for(t=0;t<n;t++)for(var o=arguments[t],s=0,a=o.length;s<a;s++,i++)r[i]=o[s];return r}var i;n.r(t),n.d(t,{LogLevel:()=>s,Logger:()=>h,setLogLevel:()=>f,setUserLogHandler:()=>d});var o=[],s=(()=>(function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(s||(s={})),s))(),a={debug:s.DEBUG,verbose:s.VERBOSE,info:s.INFO,warn:s.WARN,error:s.ERROR,silent:s.SILENT},u=s.INFO,c=((i={})[s.DEBUG]="log",i[s.VERBOSE]="log",i[s.INFO]="info",i[s.WARN]="warn",i[s.ERROR]="error",i),l=function(e,t){for(var n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i];if(!(t<e.logLevel)){var o=(new Date).toISOString(),s=c[t];if(!s)throw new Error("Attempted to log a message with an invalid logType (value: "+t+")");console[s].apply(console,r(["["+o+"]  "+e.name+":"],n))}},h=function(){function e(e){this.name=e,this._logLevel=u,this._logHandler=l,this._userLogHandler=null,o.push(this)}return Object.defineProperty(e.prototype,"logLevel",{get:function(){return this._logLevel},set:function(e){if(!(e in s))throw new TypeError('Invalid value "'+e+'" assigned to `logLevel`');this._logLevel=e},enumerable:!1,configurable:!0}),e.prototype.setLogLevel=function(e){this._logLevel="string"==typeof e?a[e]:e},Object.defineProperty(e.prototype,"logHandler",{get:function(){return this._logHandler},set:function(e){if("function"!=typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"userLogHandler",{get:function(){return this._userLogHandler},set:function(e){this._userLogHandler=e},enumerable:!1,configurable:!0}),e.prototype.debug=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.DEBUG],e)),this._logHandler.apply(this,r([this,s.DEBUG],e))},e.prototype.log=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.VERBOSE],e)),this._logHandler.apply(this,r([this,s.VERBOSE],e))},e.prototype.info=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.INFO],e)),this._logHandler.apply(this,r([this,s.INFO],e))},e.prototype.warn=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.WARN],e)),this._logHandler.apply(this,r([this,s.WARN],e))},e.prototype.error=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.ERROR],e)),this._logHandler.apply(this,r([this,s.ERROR],e))},e}();function f(e){o.forEach(function(t){t.setLogLevel(e)})}function d(e,t){for(var n=function(n){var r=null;t&&t.level&&(r=a[t.level]),n.userLogHandler=null===e?null:function(t,n){for(var i=[],o=2;o<arguments.length;o++)i[o-2]=arguments[o];var a=i.map(function(e){if(null==e)return null;if("string"==typeof e)return e;if("number"==typeof e||"boolean"==typeof e)return e.toString();if(e instanceof Error)return e.message;try{return JSON.stringify(e)}catch(t){return null}}).filter(function(e){return e}).join(" ");n>=(null!=r?r:t.logLevel)&&e({level:s[n].toLowerCase(),message:a,args:i,type:t.name})}},r=0,i=o;r<i.length;r++)n(i[r])}},685:(e,t,n)=>{"use strict";n.r(t),n.d(t,{CONSTANTS:()=>i,Deferred:()=>d,ErrorFactory:()=>D,FirebaseError:()=>N,MAX_VALUE_MILLIS:()=>ue,RANDOM_FACTOR:()=>ce,Sha1:()=>Y,areCookiesEnabled:()=>A,assert:()=>o,assertionError:()=>s,async:()=>J,base64:()=>u,base64Decode:()=>l,base64Encode:()=>c,calculateBackoffMillis:()=>le,contains:()=>V,createMockUserToken:()=>p,createSubscribe:()=>X,decode:()=>M,deepCopy:()=>h,deepEqual:()=>K,deepExtend:()=>f,errorPrefix:()=>ne,extractQuerystring:()=>$,getGlobal:()=>x,getModularInstance:()=>fe,getUA:()=>g,isAdmin:()=>U,isBrowser:()=>y,isBrowserExtension:()=>_,isElectron:()=>w,isEmpty:()=>H,isIE:()=>T,isIndexedDBAvailable:()=>C,isMobileCordova:()=>v,isNode:()=>m,isNodeSdk:()=>I,isReactNative:()=>b,isSafari:()=>k,isUWP:()=>E,isValidFormat:()=>q,isValidTimestamp:()=>F,issuedAtTime:()=>j,jsonEval:()=>R,map:()=>W,ordinal:()=>he,querystring:()=>G,querystringDecode:()=>Q,safeGet:()=>B,stringLength:()=>ae,stringToByteArray:()=>se,stringify:()=>L,validateArgCount:()=>te,validateCallback:()=>ie,validateContextObject:()=>oe,validateIndexedDBOpenable:()=>S,validateNamespace:()=>re});var r=n(762),i={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"},o=function(e,t){if(!e)throw s(t)},s=function(e){return new Error("Firebase Database ("+i.SDK_VERSION+") INTERNAL ASSERT FAILED: "+e)},a=function(e){for(var t=[],n=0,r=0;r<e.length;r++){var i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296==(64512&i)&&r+1<e.length&&56320==(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},u={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray:function(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<e.length;i+=3){var o=e[i],s=i+1<e.length,a=s?e[i+1]:0,u=i+2<e.length,c=u?e[i+2]:0,l=(15&a)<<2|c>>6,h=63&c;u||(h=64,s||(l=64)),r.push(n[o>>2],n[(3&o)<<4|a>>4],n[l],n[h])}return r.join("")},encodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(a(e),t)},decodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){for(var t=[],n=0,r=0;n<e.length;){var i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){var o=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&o)}else if(i>239&&i<365){var s=((7&i)<<18|(63&(o=e[n++]))<<12|(63&(a=e[n++]))<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(s>>10)),t[r++]=String.fromCharCode(56320+(1023&s))}else{o=e[n++];var a=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&o)<<6|63&a)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray:function(e,t){this.init_();for(var n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<e.length;){var o=n[e.charAt(i++)],s=i<e.length?n[e.charAt(i)]:0,a=++i<e.length?n[e.charAt(i)]:64,u=++i<e.length?n[e.charAt(i)]:64;if(++i,null==o||null==s||null==a||null==u)throw Error();r.push(o<<2|s>>4),64!==a&&(r.push(s<<4&240|a>>2),64!==u&&r.push(a<<6&192|u))}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}},c=function(e){var t=a(e);return u.encodeByteArray(t,!0)},l=function(e){try{return u.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function h(e){return f(void 0,e)}function f(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(var n in t)t.hasOwnProperty(n)&&"__proto__"!==n&&(e[n]=f(e[n],t[n]));return e}var d=function(){function e(){var e=this;this.reject=function(){},this.resolve=function(){},this.promise=new Promise(function(t,n){e.resolve=t,e.reject=n})}return e.prototype.wrapCallback=function(e){var t=this;return function(n,r){n?t.reject(n):t.resolve(r),"function"==typeof e&&(t.promise.catch(function(){}),1===e.length?e(n):e(n,r))}},e}();function p(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');var n=t||"demo-project",i=e.iat||0,o=e.sub||e.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");var s=(0,r.__assign)({iss:"https://securetoken.google.com/"+n,aud:n,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},e);return[u.encodeString(JSON.stringify({alg:"none",type:"JWT"}),!1),u.encodeString(JSON.stringify(s),!1),""].join(".")}function g(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function v(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(g())}function m(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(e){return!1}}function y(){return"object"==typeof self&&self.self===self}function _(){var e="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof e&&void 0!==e.id}function b(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function w(){return g().indexOf("Electron/")>=0}function T(){var e=g();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function E(){return g().indexOf("MSAppHost/")>=0}function I(){return!0===i.NODE_CLIENT||!0===i.NODE_ADMIN}function k(){return!m()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function C(){return"indexedDB"in self&&null!=indexedDB}function S(){return new Promise(function(e,t){try{var n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=function(){i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=function(){n=!1},i.onerror=function(){var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(o){t(o)}})}function A(){return!(!navigator||!navigator.cookieEnabled)}function x(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if("undefined"!=typeof global)return global;throw new Error("Unable to locate global object.")}var N=function(e){function t(n,r,i){var o=e.call(this,r)||this;return o.code=n,o.customData=i,o.name="FirebaseError",Object.setPrototypeOf(o,t.prototype),Error.captureStackTrace&&Error.captureStackTrace(o,D.prototype.create),o}return(0,r.__extends)(t,e),t}(Error),D=function(){function e(e,t,n){this.service=e,this.serviceName=t,this.errors=n}return e.prototype.create=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var r=t[0]||{},i=this.service+"/"+e,o=this.errors[e],s=o?P(o,r):"Error",a=this.serviceName+": "+s+" ("+i+").",u=new N(i,a,r);return u},e}();function P(e,t){return e.replace(O,function(e,n){var r=t[n];return null!=r?String(r):"<"+n+"?>"})}var O=/\{\$([^}]+)}/g;function R(e){return JSON.parse(e)}function L(e){return JSON.stringify(e)}var M=function(e){var t={},n={},r={},i="";try{var o=e.split(".");t=R(l(o[0])||""),n=R(l(o[1])||""),i=o[2],r=n.d||{},delete n.d}catch(s){}return{header:t,claims:n,data:r,signature:i}},F=function(e){var t=M(e).claims,n=Math.floor((new Date).getTime()/1e3),r=0,i=0;return"object"==typeof t&&(t.hasOwnProperty("nbf")?r=t.nbf:t.hasOwnProperty("iat")&&(r=t.iat),i=t.hasOwnProperty("exp")?t.exp:r+86400),!!n&&!!r&&!!i&&n>=r&&n<=i},j=function(e){var t=M(e).claims;return"object"==typeof t&&t.hasOwnProperty("iat")?t.iat:null},q=function(e){var t=M(e).claims;return!!t&&"object"==typeof t&&t.hasOwnProperty("iat")},U=function(e){var t=M(e).claims;return"object"==typeof t&&!0===t.admin};function V(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function B(e,t){return Object.prototype.hasOwnProperty.call(e,t)?e[t]:void 0}function H(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function W(e,t,n){var r={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=t.call(n,e[i],i,e));return r}function K(e,t){if(e===t)return!0;for(var n=Object.keys(e),r=Object.keys(t),i=0,o=n;i<o.length;i++){if(!r.includes(l=o[i]))return!1;var s=e[l],a=t[l];if(z(s)&&z(a)){if(!K(s,a))return!1}else if(s!==a)return!1}for(var u=0,c=r;u<c.length;u++){var l;if(!n.includes(l=c[u]))return!1}return!0}function z(e){return null!==e&&"object"==typeof e}function G(e){for(var t=[],n=function(e,n){Array.isArray(n)?n.forEach(function(n){t.push(encodeURIComponent(e)+"="+encodeURIComponent(n))}):t.push(encodeURIComponent(e)+"="+encodeURIComponent(n))},r=0,i=Object.entries(e);r<i.length;r++){var o=i[r];n(o[0],o[1])}return t.length?"&"+t.join("&"):""}function Q(e){var t={};return e.replace(/^\?/,"").split("&").forEach(function(e){if(e){var n=e.split("="),r=n[1];t[decodeURIComponent(n[0])]=decodeURIComponent(r)}}),t}function $(e){var t=e.indexOf("?");if(!t)return"";var n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}var Y=function(){function e(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(var e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}return e.prototype.reset=function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0},e.prototype.compress_=function(e,t){t||(t=0);var n=this.W_;if("string"==typeof e)for(var r=0;r<16;r++)n[r]=e.charCodeAt(t)<<24|e.charCodeAt(t+1)<<16|e.charCodeAt(t+2)<<8|e.charCodeAt(t+3),t+=4;else for(r=0;r<16;r++)n[r]=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3],t+=4;for(r=16;r<80;r++)n[r]=4294967295&((h=n[r-3]^n[r-8]^n[r-14]^n[r-16])<<1|h>>>31);var i,o,s=this.chain_[0],a=this.chain_[1],u=this.chain_[2],c=this.chain_[3],l=this.chain_[4];for(r=0;r<80;r++){r<40?r<20?(i=c^a&(u^c),o=1518500249):(i=a^u^c,o=1859775393):r<60?(i=a&u|c&(a|u),o=2400959708):(i=a^u^c,o=3395469782);var h=(s<<5|s>>>27)+i+l+o+n[r]&4294967295;l=c,c=u,u=4294967295&(a<<30|a>>>2),a=s,s=h}this.chain_[0]=this.chain_[0]+s&4294967295,this.chain_[1]=this.chain_[1]+a&4294967295,this.chain_[2]=this.chain_[2]+u&4294967295,this.chain_[3]=this.chain_[3]+c&4294967295,this.chain_[4]=this.chain_[4]+l&4294967295},e.prototype.update=function(e,t){if(null!=e){void 0===t&&(t=e.length);for(var n=t-this.blockSize,r=0,i=this.buf_,o=this.inbuf_;r<t;){if(0===o)for(;r<=n;)this.compress_(e,r),r+=this.blockSize;if("string"==typeof e){for(;r<t;)if(i[o]=e.charCodeAt(r),++r,++o===this.blockSize){this.compress_(i),o=0;break}}else for(;r<t;)if(i[o]=e[r],++r,++o===this.blockSize){this.compress_(i),o=0;break}}this.inbuf_=o,this.total_+=t}},e.prototype.digest=function(){var e=[],t=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(var n=this.blockSize-1;n>=56;n--)this.buf_[n]=255&t,t/=256;this.compress_(this.buf_);var r=0;for(n=0;n<5;n++)for(var i=24;i>=0;i-=8)e[r]=this.chain_[n]>>i&255,++r;return e},e}();function X(e,t){var n=new Z(e,t);return n.subscribe.bind(n)}var Z=function(){function e(e,t){var n=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(function(){e(n)}).catch(function(e){n.error(e)})}return e.prototype.next=function(e){this.forEachObserver(function(t){t.next(e)})},e.prototype.error=function(e){this.forEachObserver(function(t){t.error(e)}),this.close(e)},e.prototype.complete=function(){this.forEachObserver(function(e){e.complete()}),this.close()},e.prototype.subscribe=function(e,t,n){var r,i=this;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(e,t){if("object"!=typeof e||null===e)return!1;for(var n=0,r=["next","error","complete"];n<r.length;n++){var i=r[n];if(i in e&&"function"==typeof e[i])return!0}return!1}(e)?e:{next:e,error:t,complete:n}).next&&(r.next=ee),void 0===r.error&&(r.error=ee),void 0===r.complete&&(r.complete=ee);var o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(e){}}),this.observers.push(r),o},e.prototype.unsubscribeOne=function(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},e.prototype.forEachObserver=function(e){if(!this.finalized)for(var t=0;t<this.observers.length;t++)this.sendOne(t,e)},e.prototype.sendOne=function(e,t){var n=this;this.task.then(function(){if(void 0!==n.observers&&void 0!==n.observers[e])try{t(n.observers[e])}catch(r){"undefined"!=typeof console&&console.error&&console.error(r)}})},e.prototype.close=function(e){var t=this;this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then(function(){t.observers=void 0,t.onNoObservers=void 0}))},e}();function J(e,t){return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];Promise.resolve(!0).then(function(){e.apply(void 0,n)}).catch(function(e){t&&t(e)})}}function ee(){}var te=function(e,t,n,r){var i;if(r<t?i="at least "+t:r>n&&(i=0===n?"none":"no more than "+n),i)throw new Error(e+" failed: Was called with "+r+(1===r?" argument.":" arguments.")+" Expects "+i+".")};function ne(e,t){return e+" failed: "+t+" argument "}function re(e,t,n){if((!n||t)&&"string"!=typeof t)throw new Error(ne(e,"namespace")+"must be a valid firebase namespace.")}function ie(e,t,n,r){if((!r||n)&&"function"!=typeof n)throw new Error(ne(e,t)+"must be a valid function.")}function oe(e,t,n,r){if((!r||n)&&("object"!=typeof n||null===n))throw new Error(ne(e,t)+"must be a valid context object.")}var se=function(e){for(var t=[],n=0,r=0;r<e.length;r++){var i=e.charCodeAt(r);if(i>=55296&&i<=56319){var s=i-55296;r++,o(r<e.length,"Surrogate pair missing trail surrogate."),i=65536+(s<<10)+(e.charCodeAt(r)-56320)}i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):i<65536?(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},ae=function(e){for(var t=0,n=0;n<e.length;n++){var r=e.charCodeAt(n);r<128?t++:r<2048?t+=2:r>=55296&&r<=56319?(t+=4,n++):t+=3}return t},ue=144e5,ce=.5;function le(e,t,n){void 0===t&&(t=1e3),void 0===n&&(n=2);var r=t*Math.pow(n,e),i=Math.round(ce*r*(Math.random()-.5)*2);return Math.min(ue,r+i)}function he(e){return Number.isFinite(e)?e+function(e){var t=(e=Math.abs(e))%100;if(t>=10&&t<=20)return"th";var n=e%10;return 1===n?"st":2===n?"nd":3===n?"rd":"th"}(e):""+e}function fe(e){return e&&e._delegate?e._delegate:e}},676:function(e,t){!function(e){"use strict";function t(e){return Array.prototype.slice.call(e)}function n(e){return new Promise(function(t,n){e.onsuccess=function(){t(e.result)},e.onerror=function(){n(e.error)}})}function r(e,t,r){var i,o=new Promise(function(o,s){n(i=e[t].apply(e,r)).then(o,s)});return o.request=i,o}function i(e,t,n){var i=r(e,t,n);return i.then(function(e){if(e)return new l(e,i.request)})}function o(e,t,n){n.forEach(function(n){Object.defineProperty(e.prototype,n,{get:function(){return this[t][n]},set:function(e){this[t][n]=e}})})}function s(e,t,n,i){i.forEach(function(i){i in n.prototype&&(e.prototype[i]=function(){return r(this[t],i,arguments)})})}function a(e,t,n,r){r.forEach(function(r){r in n.prototype&&(e.prototype[r]=function(){return this[t][r].apply(this[t],arguments)})})}function u(e,t,n,r){r.forEach(function(r){r in n.prototype&&(e.prototype[r]=function(){return i(this[t],r,arguments)})})}function c(e){this._index=e}function l(e,t){this._cursor=e,this._request=t}function h(e){this._store=e}function f(e){this._tx=e,this.complete=new Promise(function(t,n){e.oncomplete=function(){t()},e.onerror=function(){n(e.error)},e.onabort=function(){n(e.error)}})}function d(e,t,n){this._db=e,this.oldVersion=t,this.transaction=new f(n)}function p(e){this._db=e}o(c,"_index",["name","keyPath","multiEntry","unique"]),s(c,"_index",IDBIndex,["get","getKey","getAll","getAllKeys","count"]),u(c,"_index",IDBIndex,["openCursor","openKeyCursor"]),o(l,"_cursor",["direction","key","primaryKey","value"]),s(l,"_cursor",IDBCursor,["update","delete"]),["advance","continue","continuePrimaryKey"].forEach(function(e){e in IDBCursor.prototype&&(l.prototype[e]=function(){var t=this,r=arguments;return Promise.resolve().then(function(){return t._cursor[e].apply(t._cursor,r),n(t._request).then(function(e){if(e)return new l(e,t._request)})})})}),h.prototype.createIndex=function(){return new c(this._store.createIndex.apply(this._store,arguments))},h.prototype.index=function(){return new c(this._store.index.apply(this._store,arguments))},o(h,"_store",["name","keyPath","indexNames","autoIncrement"]),s(h,"_store",IDBObjectStore,["put","add","delete","clear","get","getAll","getKey","getAllKeys","count"]),u(h,"_store",IDBObjectStore,["openCursor","openKeyCursor"]),a(h,"_store",IDBObjectStore,["deleteIndex"]),f.prototype.objectStore=function(){return new h(this._tx.objectStore.apply(this._tx,arguments))},o(f,"_tx",["objectStoreNames","mode"]),a(f,"_tx",IDBTransaction,["abort"]),d.prototype.createObjectStore=function(){return new h(this._db.createObjectStore.apply(this._db,arguments))},o(d,"_db",["name","version","objectStoreNames"]),a(d,"_db",IDBDatabase,["deleteObjectStore","close"]),p.prototype.transaction=function(){return new f(this._db.transaction.apply(this._db,arguments))},o(p,"_db",["name","version","objectStoreNames"]),a(p,"_db",IDBDatabase,["close"]),["openCursor","openKeyCursor"].forEach(function(e){[h,c].forEach(function(n){e in n.prototype&&(n.prototype[e.replace("open","iterate")]=function(){var n=t(arguments),r=n[n.length-1],i=this._store||this._index,o=i[e].apply(i,n.slice(0,-1));o.onsuccess=function(){r(o.result)}})})}),[c,h].forEach(function(e){e.prototype.getAll||(e.prototype.getAll=function(e,t){var n=this,r=[];return new Promise(function(i){n.iterateCursor(e,function(e){e?(r.push(e.value),void 0===t||r.length!=t?e.continue():i(r)):i(r)})})})}),e.openDb=function(e,t,n){var i=r(indexedDB,"open",[e,t]),o=i.request;return o&&(o.onupgradeneeded=function(e){n&&n(new d(o.result,e.oldVersion,o.transaction))}),i.then(function(e){return new p(e)})},e.deleteDb=function(e){return r(indexedDB,"deleteDatabase",[e])},Object.defineProperty(e,"__esModule",{value:!0})}(t)},704:function(e,t){var n;!function(t,n){"use strict";"object"==typeof e.exports?e.exports=t.document?n(t,!0):function(e){if(!e.document)throw new Error("jQuery requires a window with a document");return n(e)}:n(t)}("undefined"!=typeof window?window:this,function(r,i){"use strict";var o=[],s=Object.getPrototypeOf,a=o.slice,u=o.flat?function(e){return o.flat.call(e)}:function(e){return o.concat.apply([],e)},c=o.push,l=o.indexOf,h={},f=h.toString,d=h.hasOwnProperty,p=d.toString,g=p.call(Object),v={},m=function(e){return"function"==typeof e&&"number"!=typeof e.nodeType&&"function"!=typeof e.item},y=function(e){return null!=e&&e===e.window},_=r.document,b={type:!0,src:!0,nonce:!0,noModule:!0};function w(e,t,n){var r,i,o=(n=n||_).createElement("script");if(o.text=e,t)for(r in b)(i=t[r]||t.getAttribute&&t.getAttribute(r))&&o.setAttribute(r,i);n.head.appendChild(o).parentNode.removeChild(o)}function T(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?h[f.call(e)]||"object":typeof e}var E="3.6.0",I=function(e,t){return new I.fn.init(e,t)};function k(e){var t=!!e&&"length"in e&&e.length,n=T(e);return!m(e)&&!y(e)&&("array"===n||0===t||"number"==typeof t&&t>0&&t-1 in e)}I.fn=I.prototype={jquery:E,constructor:I,length:0,toArray:function(){return a.call(this)},get:function(e){return null==e?a.call(this):e<0?this[e+this.length]:this[e]},pushStack:function(e){var t=I.merge(this.constructor(),e);return t.prevObject=this,t},each:function(e){return I.each(this,e)},map:function(e){return this.pushStack(I.map(this,function(t,n){return e.call(t,n,t)}))},slice:function(){return this.pushStack(a.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},even:function(){return this.pushStack(I.grep(this,function(e,t){return(t+1)%2}))},odd:function(){return this.pushStack(I.grep(this,function(e,t){return t%2}))},eq:function(e){var t=this.length,n=+e+(e<0?t:0);return this.pushStack(n>=0&&n<t?[this[n]]:[])},end:function(){return this.prevObject||this.constructor()},push:c,sort:o.sort,splice:o.splice},I.extend=I.fn.extend=function(){var e,t,n,r,i,o,s=arguments[0]||{},a=1,u=arguments.length,c=!1;for("boolean"==typeof s&&(c=s,s=arguments[a]||{},a++),"object"==typeof s||m(s)||(s={}),a===u&&(s=this,a--);a<u;a++)if(null!=(e=arguments[a]))for(t in e)r=e[t],"__proto__"!==t&&s!==r&&(c&&r&&(I.isPlainObject(r)||(i=Array.isArray(r)))?(n=s[t],o=i&&!Array.isArray(n)?[]:i||I.isPlainObject(n)?n:{},i=!1,s[t]=I.extend(c,o,r)):void 0!==r&&(s[t]=r));return s},I.extend({expando:"jQuery"+(E+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isPlainObject:function(e){var t,n;return!(!e||"[object Object]"!==f.call(e)||(t=s(e))&&("function"!=typeof(n=d.call(t,"constructor")&&t.constructor)||p.call(n)!==g))},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},globalEval:function(e,t,n){w(e,{nonce:t&&t.nonce},n)},each:function(e,t){var n,r=0;if(k(e))for(n=e.length;r<n&&!1!==t.call(e[r],r,e[r]);r++);else for(r in e)if(!1===t.call(e[r],r,e[r]))break;return e},makeArray:function(e,t){var n=t||[];return null!=e&&(k(Object(e))?I.merge(n,"string"==typeof e?[e]:e):c.call(n,e)),n},inArray:function(e,t,n){return null==t?-1:l.call(t,e,n)},merge:function(e,t){for(var n=+t.length,r=0,i=e.length;r<n;r++)e[i++]=t[r];return e.length=i,e},grep:function(e,t,n){for(var r=[],i=0,o=e.length,s=!n;i<o;i++)!t(e[i],i)!==s&&r.push(e[i]);return r},map:function(e,t,n){var r,i,o=0,s=[];if(k(e))for(r=e.length;o<r;o++)null!=(i=t(e[o],o,n))&&s.push(i);else for(o in e)null!=(i=t(e[o],o,n))&&s.push(i);return u(s)},guid:1,support:v}),"function"==typeof Symbol&&(I.fn[Symbol.iterator]=o[Symbol.iterator]),I.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(e,t){h["[object "+t+"]"]=t.toLowerCase()});var C=function(e){var t,n,r,i,o,s,a,u,c,l,h,f,d,p,g,v,m,y,_,b="sizzle"+1*new Date,w=e.document,T=0,E=0,I=ue(),k=ue(),C=ue(),S=ue(),A=function(e,t){return e===t&&(h=!0),0},x={}.hasOwnProperty,N=[],D=N.pop,P=N.push,O=N.push,R=N.slice,L=function(e,t){for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1},M="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",F="[\\x20\\t\\r\\n\\f]",j="(?:\\\\[\\da-fA-F]{1,6}[\\x20\\t\\r\\n\\f]?|\\\\[^\\r\\n\\f]|[\\w-]|[^\0-\\x7f])+",q="\\[[\\x20\\t\\r\\n\\f]*("+j+")(?:"+F+"*([*^$|!~]?=)"+F+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+j+"))|)"+F+"*\\]",U=":("+j+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+q+")*)|.*)\\)|)",V=new RegExp(F+"+","g"),B=new RegExp("^[\\x20\\t\\r\\n\\f]+|((?:^|[^\\\\])(?:\\\\.)*)[\\x20\\t\\r\\n\\f]+$","g"),H=new RegExp("^[\\x20\\t\\r\\n\\f]*,[\\x20\\t\\r\\n\\f]*"),W=new RegExp("^[\\x20\\t\\r\\n\\f]*([>+~]|[\\x20\\t\\r\\n\\f])[\\x20\\t\\r\\n\\f]*"),K=new RegExp(F+"|>"),z=new RegExp(U),G=new RegExp("^"+j+"$"),Q={ID:new RegExp("^#("+j+")"),CLASS:new RegExp("^\\.("+j+")"),TAG:new RegExp("^("+j+"|[*])"),ATTR:new RegExp("^"+q),PSEUDO:new RegExp("^"+U),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\([\\x20\\t\\r\\n\\f]*(even|odd|(([+-]|)(\\d*)n|)[\\x20\\t\\r\\n\\f]*(?:([+-]|)[\\x20\\t\\r\\n\\f]*(\\d+)|))[\\x20\\t\\r\\n\\f]*\\)|)","i"),bool:new RegExp("^(?:"+M+")$","i"),needsContext:new RegExp("^[\\x20\\t\\r\\n\\f]*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\([\\x20\\t\\r\\n\\f]*((?:-\\d)?\\d*)[\\x20\\t\\r\\n\\f]*\\)|)(?=[^-]|$)","i")},$=/HTML$/i,Y=/^(?:input|select|textarea|button)$/i,X=/^h\d$/i,Z=/^[^{]+\{\s*\[native \w/,J=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,ee=/[+~]/,te=new RegExp("\\\\[\\da-fA-F]{1,6}[\\x20\\t\\r\\n\\f]?|\\\\([^\\r\\n\\f])","g"),ne=function(e,t){var n="0x"+e.slice(1)-65536;return t||(n<0?String.fromCharCode(n+65536):String.fromCharCode(n>>10|55296,1023&n|56320))},re=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,ie=function(e,t){return t?"\0"===e?"\ufffd":e.slice(0,-1)+"\\"+e.charCodeAt(e.length-1).toString(16)+" ":"\\"+e},oe=function(){f()},se=be(function(e){return!0===e.disabled&&"fieldset"===e.nodeName.toLowerCase()},{dir:"parentNode",next:"legend"});try{O.apply(N=R.call(w.childNodes),w.childNodes)}catch(ke){O={apply:N.length?function(e,t){P.apply(e,R.call(t))}:function(e,t){for(var n=e.length,r=0;e[n++]=t[r++];);e.length=n-1}}}function ae(e,t,r,i){var o,a,c,l,h,p,m,y=t&&t.ownerDocument,w=t?t.nodeType:9;if(r=r||[],"string"!=typeof e||!e||1!==w&&9!==w&&11!==w)return r;if(!i&&(f(t),t=t||d,g)){if(11!==w&&(h=J.exec(e)))if(o=h[1]){if(9===w){if(!(c=t.getElementById(o)))return r;if(c.id===o)return r.push(c),r}else if(y&&(c=y.getElementById(o))&&_(t,c)&&c.id===o)return r.push(c),r}else{if(h[2])return O.apply(r,t.getElementsByTagName(e)),r;if((o=h[3])&&n.getElementsByClassName&&t.getElementsByClassName)return O.apply(r,t.getElementsByClassName(o)),r}if(n.qsa&&!S[e+" "]&&(!v||!v.test(e))&&(1!==w||"object"!==t.nodeName.toLowerCase())){if(m=e,y=t,1===w&&(K.test(e)||W.test(e))){for((y=ee.test(e)&&me(t.parentNode)||t)===t&&n.scope||((l=t.getAttribute("id"))?l=l.replace(re,ie):t.setAttribute("id",l=b)),a=(p=s(e)).length;a--;)p[a]=(l?"#"+l:":scope")+" "+_e(p[a]);m=p.join(",")}try{return O.apply(r,y.querySelectorAll(m)),r}catch(T){S(e,!0)}finally{l===b&&t.removeAttribute("id")}}}return u(e.replace(B,"$1"),t,r,i)}function ue(){var e=[];return function t(n,i){return e.push(n+" ")>r.cacheLength&&delete t[e.shift()],t[n+" "]=i}}function ce(e){return e[b]=!0,e}function le(e){var t=d.createElement("fieldset");try{return!!e(t)}catch(ke){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function he(e,t){for(var n=e.split("|"),i=n.length;i--;)r.attrHandle[n[i]]=t}function fe(e,t){var n=t&&e,r=n&&1===e.nodeType&&1===t.nodeType&&e.sourceIndex-t.sourceIndex;if(r)return r;if(n)for(;n=n.nextSibling;)if(n===t)return-1;return e?1:-1}function de(e){return function(t){return"input"===t.nodeName.toLowerCase()&&t.type===e}}function pe(e){return function(t){var n=t.nodeName.toLowerCase();return("input"===n||"button"===n)&&t.type===e}}function ge(e){return function(t){return"form"in t?t.parentNode&&!1===t.disabled?"label"in t?"label"in t.parentNode?t.parentNode.disabled===e:t.disabled===e:t.isDisabled===e||t.isDisabled!==!e&&se(t)===e:t.disabled===e:"label"in t&&t.disabled===e}}function ve(e){return ce(function(t){return t=+t,ce(function(n,r){for(var i,o=e([],n.length,t),s=o.length;s--;)n[i=o[s]]&&(n[i]=!(r[i]=n[i]))})})}function me(e){return e&&void 0!==e.getElementsByTagName&&e}for(t in n=ae.support={},o=ae.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return!$.test(e&&e.namespaceURI||t&&t.nodeName||"HTML")},f=ae.setDocument=function(e){var t,i,s=e?e.ownerDocument||e:w;return s!=d&&9===s.nodeType&&s.documentElement?(p=(d=s).documentElement,g=!o(d),w!=d&&(i=d.defaultView)&&i.top!==i&&(i.addEventListener?i.addEventListener("unload",oe,!1):i.attachEvent&&i.attachEvent("onunload",oe)),n.scope=le(function(e){return p.appendChild(e).appendChild(d.createElement("div")),void 0!==e.querySelectorAll&&!e.querySelectorAll(":scope fieldset div").length}),n.attributes=le(function(e){return e.className="i",!e.getAttribute("className")}),n.getElementsByTagName=le(function(e){return e.appendChild(d.createComment("")),!e.getElementsByTagName("*").length}),n.getElementsByClassName=Z.test(d.getElementsByClassName),n.getById=le(function(e){return p.appendChild(e).id=b,!d.getElementsByName||!d.getElementsByName(b).length}),n.getById?(r.filter.ID=function(e){var t=e.replace(te,ne);return function(e){return e.getAttribute("id")===t}},r.find.ID=function(e,t){if(void 0!==t.getElementById&&g){var n=t.getElementById(e);return n?[n]:[]}}):(r.filter.ID=function(e){var t=e.replace(te,ne);return function(e){var n=void 0!==e.getAttributeNode&&e.getAttributeNode("id");return n&&n.value===t}},r.find.ID=function(e,t){if(void 0!==t.getElementById&&g){var n,r,i,o=t.getElementById(e);if(o){if((n=o.getAttributeNode("id"))&&n.value===e)return[o];for(i=t.getElementsByName(e),r=0;o=i[r++];)if((n=o.getAttributeNode("id"))&&n.value===e)return[o]}return[]}}),r.find.TAG=n.getElementsByTagName?function(e,t){return void 0!==t.getElementsByTagName?t.getElementsByTagName(e):n.qsa?t.querySelectorAll(e):void 0}:function(e,t){var n,r=[],i=0,o=t.getElementsByTagName(e);if("*"===e){for(;n=o[i++];)1===n.nodeType&&r.push(n);return r}return o},r.find.CLASS=n.getElementsByClassName&&function(e,t){if(void 0!==t.getElementsByClassName&&g)return t.getElementsByClassName(e)},m=[],v=[],(n.qsa=Z.test(d.querySelectorAll))&&(le(function(e){var t;p.appendChild(e).innerHTML="<a id='"+b+"'></a><select id='"+b+"-\r\\' msallowcapture=''><option selected=''></option></select>",e.querySelectorAll("[msallowcapture^='']").length&&v.push("[*^$]=[\\x20\\t\\r\\n\\f]*(?:''|\"\")"),e.querySelectorAll("[selected]").length||v.push("\\[[\\x20\\t\\r\\n\\f]*(?:value|"+M+")"),e.querySelectorAll("[id~="+b+"-]").length||v.push("~="),(t=d.createElement("input")).setAttribute("name",""),e.appendChild(t),e.querySelectorAll("[name='']").length||v.push("\\[[\\x20\\t\\r\\n\\f]*name[\\x20\\t\\r\\n\\f]*=[\\x20\\t\\r\\n\\f]*(?:''|\"\")"),e.querySelectorAll(":checked").length||v.push(":checked"),e.querySelectorAll("a#"+b+"+*").length||v.push(".#.+[+~]"),e.querySelectorAll("\\\f"),v.push("[\\r\\n\\f]")}),le(function(e){e.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var t=d.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),e.querySelectorAll("[name=d]").length&&v.push("name[\\x20\\t\\r\\n\\f]*[*^$|!~]?="),2!==e.querySelectorAll(":enabled").length&&v.push(":enabled",":disabled"),p.appendChild(e).disabled=!0,2!==e.querySelectorAll(":disabled").length&&v.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),v.push(",.*:")})),(n.matchesSelector=Z.test(y=p.matches||p.webkitMatchesSelector||p.mozMatchesSelector||p.oMatchesSelector||p.msMatchesSelector))&&le(function(e){n.disconnectedMatch=y.call(e,"*"),y.call(e,"[s!='']:x"),m.push("!=",U)}),v=v.length&&new RegExp(v.join("|")),m=m.length&&new RegExp(m.join("|")),t=Z.test(p.compareDocumentPosition),_=t||Z.test(p.contains)?function(e,t){var n=9===e.nodeType?e.documentElement:e,r=t&&t.parentNode;return e===r||!(!r||1!==r.nodeType||!(n.contains?n.contains(r):e.compareDocumentPosition&&16&e.compareDocumentPosition(r)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},A=t?function(e,t){if(e===t)return h=!0,0;var r=!e.compareDocumentPosition-!t.compareDocumentPosition;return r||(1&(r=(e.ownerDocument||e)==(t.ownerDocument||t)?e.compareDocumentPosition(t):1)||!n.sortDetached&&t.compareDocumentPosition(e)===r?e==d||e.ownerDocument==w&&_(w,e)?-1:t==d||t.ownerDocument==w&&_(w,t)?1:l?L(l,e)-L(l,t):0:4&r?-1:1)}:function(e,t){if(e===t)return h=!0,0;var n,r=0,i=e.parentNode,o=t.parentNode,s=[e],a=[t];if(!i||!o)return e==d?-1:t==d?1:i?-1:o?1:l?L(l,e)-L(l,t):0;if(i===o)return fe(e,t);for(n=e;n=n.parentNode;)s.unshift(n);for(n=t;n=n.parentNode;)a.unshift(n);for(;s[r]===a[r];)r++;return r?fe(s[r],a[r]):s[r]==w?-1:a[r]==w?1:0},d):d},ae.matches=function(e,t){return ae(e,null,null,t)},ae.matchesSelector=function(e,t){if(f(e),n.matchesSelector&&g&&!S[t+" "]&&(!m||!m.test(t))&&(!v||!v.test(t)))try{var r=y.call(e,t);if(r||n.disconnectedMatch||e.document&&11!==e.document.nodeType)return r}catch(ke){S(t,!0)}return ae(t,d,null,[e]).length>0},ae.contains=function(e,t){return(e.ownerDocument||e)!=d&&f(e),_(e,t)},ae.attr=function(e,t){(e.ownerDocument||e)!=d&&f(e);var i=r.attrHandle[t.toLowerCase()],o=i&&x.call(r.attrHandle,t.toLowerCase())?i(e,t,!g):void 0;return void 0!==o?o:n.attributes||!g?e.getAttribute(t):(o=e.getAttributeNode(t))&&o.specified?o.value:null},ae.escape=function(e){return(e+"").replace(re,ie)},ae.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},ae.uniqueSort=function(e){var t,r=[],i=0,o=0;if(h=!n.detectDuplicates,l=!n.sortStable&&e.slice(0),e.sort(A),h){for(;t=e[o++];)t===e[o]&&(i=r.push(o));for(;i--;)e.splice(r[i],1)}return l=null,e},i=ae.getText=function(e){var t,n="",r=0,o=e.nodeType;if(o){if(1===o||9===o||11===o){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=i(e)}else if(3===o||4===o)return e.nodeValue}else for(;t=e[r++];)n+=i(t);return n},(r=ae.selectors={cacheLength:50,createPseudo:ce,match:Q,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(te,ne),e[3]=(e[3]||e[4]||e[5]||"").replace(te,ne),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||ae.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&ae.error(e[0]),e},PSEUDO:function(e){var t,n=!e[6]&&e[2];return Q.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":n&&z.test(n)&&(t=s(n,!0))&&(t=n.indexOf(")",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(te,ne).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=I[e+" "];return t||(t=new RegExp("(^|[\\x20\\t\\r\\n\\f])"+e+"("+F+"|$)"))&&I(e,function(e){return t.test("string"==typeof e.className&&e.className||void 0!==e.getAttribute&&e.getAttribute("class")||"")})},ATTR:function(e,t,n){return function(r){var i=ae.attr(r,e);return null==i?"!="===t:!t||(i+="","="===t?i===n:"!="===t?i!==n:"^="===t?n&&0===i.indexOf(n):"*="===t?n&&i.indexOf(n)>-1:"$="===t?n&&i.slice(-n.length)===n:"~="===t?(" "+i.replace(V," ")+" ").indexOf(n)>-1:"|="===t&&(i===n||i.slice(0,n.length+1)===n+"-"))}},CHILD:function(e,t,n,r,i){var o="nth"!==e.slice(0,3),s="last"!==e.slice(-4),a="of-type"===t;return 1===r&&0===i?function(e){return!!e.parentNode}:function(t,n,u){var c,l,h,f,d,p,g=o!==s?"nextSibling":"previousSibling",v=t.parentNode,m=a&&t.nodeName.toLowerCase(),y=!u&&!a,_=!1;if(v){if(o){for(;g;){for(f=t;f=f[g];)if(a?f.nodeName.toLowerCase()===m:1===f.nodeType)return!1;p=g="only"===e&&!p&&"nextSibling"}return!0}if(p=[s?v.firstChild:v.lastChild],s&&y){for(_=(d=(c=(l=(h=(f=v)[b]||(f[b]={}))[f.uniqueID]||(h[f.uniqueID]={}))[e]||[])[0]===T&&c[1])&&c[2],f=d&&v.childNodes[d];f=++d&&f&&f[g]||(_=d=0)||p.pop();)if(1===f.nodeType&&++_&&f===t){l[e]=[T,d,_];break}}else if(y&&(_=d=(c=(l=(h=(f=t)[b]||(f[b]={}))[f.uniqueID]||(h[f.uniqueID]={}))[e]||[])[0]===T&&c[1]),!1===_)for(;(f=++d&&f&&f[g]||(_=d=0)||p.pop())&&((a?f.nodeName.toLowerCase()!==m:1!==f.nodeType)||!++_||(y&&((l=(h=f[b]||(f[b]={}))[f.uniqueID]||(h[f.uniqueID]={}))[e]=[T,_]),f!==t)););return(_-=i)===r||_%r==0&&_/r>=0}}},PSEUDO:function(e,t){var n,i=r.pseudos[e]||r.setFilters[e.toLowerCase()]||ae.error("unsupported pseudo: "+e);return i[b]?i(t):i.length>1?(n=[e,e,"",t],r.setFilters.hasOwnProperty(e.toLowerCase())?ce(function(e,n){for(var r,o=i(e,t),s=o.length;s--;)e[r=L(e,o[s])]=!(n[r]=o[s])}):function(e){return i(e,0,n)}):i}},pseudos:{not:ce(function(e){var t=[],n=[],r=a(e.replace(B,"$1"));return r[b]?ce(function(e,t,n,i){for(var o,s=r(e,null,i,[]),a=e.length;a--;)(o=s[a])&&(e[a]=!(t[a]=o))}):function(e,i,o){return t[0]=e,r(t,null,o,n),t[0]=null,!n.pop()}}),has:ce(function(e){return function(t){return ae(e,t).length>0}}),contains:ce(function(e){return e=e.replace(te,ne),function(t){return(t.textContent||i(t)).indexOf(e)>-1}}),lang:ce(function(e){return G.test(e||"")||ae.error("unsupported lang: "+e),e=e.replace(te,ne).toLowerCase(),function(t){var n;do{if(n=g?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return(n=n.toLowerCase())===e||0===n.indexOf(e+"-")}while((t=t.parentNode)&&1===t.nodeType);return!1}}),target:function(t){var n=e.location&&e.location.hash;return n&&n.slice(1)===t.id},root:function(e){return e===p},focus:function(e){return e===d.activeElement&&(!d.hasFocus||d.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:ge(!1),disabled:ge(!0),checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return!0===e.selected},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!r.pseudos.empty(e)},header:function(e){return X.test(e.nodeName)},input:function(e){return Y.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:ve(function(){return[0]}),last:ve(function(e,t){return[t-1]}),eq:ve(function(e,t,n){return[n<0?n+t:n]}),even:ve(function(e,t){for(var n=0;n<t;n+=2)e.push(n);return e}),odd:ve(function(e,t){for(var n=1;n<t;n+=2)e.push(n);return e}),lt:ve(function(e,t,n){for(var r=n<0?n+t:n>t?t:n;--r>=0;)e.push(r);return e}),gt:ve(function(e,t,n){for(var r=n<0?n+t:n;++r<t;)e.push(r);return e})}}).pseudos.nth=r.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})r.pseudos[t]=de(t);for(t in{submit:!0,reset:!0})r.pseudos[t]=pe(t);function ye(){}function _e(e){for(var t=0,n=e.length,r="";t<n;t++)r+=e[t].value;return r}function be(e,t,n){var r=t.dir,i=t.next,o=i||r,s=n&&"parentNode"===o,a=E++;return t.first?function(t,n,i){for(;t=t[r];)if(1===t.nodeType||s)return e(t,n,i);return!1}:function(t,n,u){var c,l,h,f=[T,a];if(u){for(;t=t[r];)if((1===t.nodeType||s)&&e(t,n,u))return!0}else for(;t=t[r];)if(1===t.nodeType||s)if(l=(h=t[b]||(t[b]={}))[t.uniqueID]||(h[t.uniqueID]={}),i&&i===t.nodeName.toLowerCase())t=t[r]||t;else{if((c=l[o])&&c[0]===T&&c[1]===a)return f[2]=c[2];if(l[o]=f,f[2]=e(t,n,u))return!0}return!1}}function we(e){return e.length>1?function(t,n,r){for(var i=e.length;i--;)if(!e[i](t,n,r))return!1;return!0}:e[0]}function Te(e,t,n,r,i){for(var o,s=[],a=0,u=e.length,c=null!=t;a<u;a++)(o=e[a])&&(n&&!n(o,r,i)||(s.push(o),c&&t.push(a)));return s}function Ee(e,t,n,r,i,o){return r&&!r[b]&&(r=Ee(r)),i&&!i[b]&&(i=Ee(i,o)),ce(function(o,s,a,u){var c,l,h,f=[],d=[],p=s.length,g=o||function(e,t,n){for(var r=0,i=t.length;r<i;r++)ae(e,t[r],n);return n}(t||"*",a.nodeType?[a]:a,[]),v=!e||!o&&t?g:Te(g,f,e,a,u),m=n?i||(o?e:p||r)?[]:s:v;if(n&&n(v,m,a,u),r)for(c=Te(m,d),r(c,[],a,u),l=c.length;l--;)(h=c[l])&&(m[d[l]]=!(v[d[l]]=h));if(o){if(i||e){if(i){for(c=[],l=m.length;l--;)(h=m[l])&&c.push(v[l]=h);i(null,m=[],c,u)}for(l=m.length;l--;)(h=m[l])&&(c=i?L(o,h):f[l])>-1&&(o[c]=!(s[c]=h))}}else m=Te(m===s?m.splice(p,m.length):m),i?i(null,s,m,u):O.apply(s,m)})}function Ie(e){for(var t,n,i,o=e.length,s=r.relative[e[0].type],a=s||r.relative[" "],u=s?1:0,l=be(function(e){return e===t},a,!0),h=be(function(e){return L(t,e)>-1},a,!0),f=[function(e,n,r){var i=!s&&(r||n!==c)||((t=n).nodeType?l(e,n,r):h(e,n,r));return t=null,i}];u<o;u++)if(n=r.relative[e[u].type])f=[be(we(f),n)];else{if((n=r.filter[e[u].type].apply(null,e[u].matches))[b]){for(i=++u;i<o&&!r.relative[e[i].type];i++);return Ee(u>1&&we(f),u>1&&_e(e.slice(0,u-1).concat({value:" "===e[u-2].type?"*":""})).replace(B,"$1"),n,u<i&&Ie(e.slice(u,i)),i<o&&Ie(e=e.slice(i)),i<o&&_e(e))}f.push(n)}return we(f)}return ye.prototype=r.filters=r.pseudos,r.setFilters=new ye,s=ae.tokenize=function(e,t){var n,i,o,s,a,u,c,l=k[e+" "];if(l)return t?0:l.slice(0);for(a=e,u=[],c=r.preFilter;a;){for(s in n&&!(i=H.exec(a))||(i&&(a=a.slice(i[0].length)||a),u.push(o=[])),n=!1,(i=W.exec(a))&&(n=i.shift(),o.push({value:n,type:i[0].replace(B," ")}),a=a.slice(n.length)),r.filter)!(i=Q[s].exec(a))||c[s]&&!(i=c[s](i))||(n=i.shift(),o.push({value:n,type:s,matches:i}),a=a.slice(n.length));if(!n)break}return t?a.length:a?ae.error(e):k(e,u).slice(0)},a=ae.compile=function(e,t){var n,i=[],o=[],a=C[e+" "];if(!a){for(t||(t=s(e)),n=t.length;n--;)(a=Ie(t[n]))[b]?i.push(a):o.push(a);(a=C(e,function(e,t){var n=t.length>0,i=e.length>0,o=function(o,s,a,u,l){var h,p,v,m=0,y="0",_=o&&[],b=[],w=c,E=o||i&&r.find.TAG("*",l),I=T+=null==w?1:Math.random()||.1,k=E.length;for(l&&(c=s==d||s||l);y!==k&&null!=(h=E[y]);y++){if(i&&h){for(p=0,s||h.ownerDocument==d||(f(h),a=!g);v=e[p++];)if(v(h,s||d,a)){u.push(h);break}l&&(T=I)}n&&((h=!v&&h)&&m--,o&&_.push(h))}if(m+=y,n&&y!==m){for(p=0;v=t[p++];)v(_,b,s,a);if(o){if(m>0)for(;y--;)_[y]||b[y]||(b[y]=D.call(u));b=Te(b)}O.apply(u,b),l&&!o&&b.length>0&&m+t.length>1&&ae.uniqueSort(u)}return l&&(T=I,c=w),_};return n?ce(o):o}(o,i))).selector=e}return a},u=ae.select=function(e,t,n,i){var o,u,c,l,h,f="function"==typeof e&&e,d=!i&&s(e=f.selector||e);if(n=n||[],1===d.length){if((u=d[0]=d[0].slice(0)).length>2&&"ID"===(c=u[0]).type&&9===t.nodeType&&g&&r.relative[u[1].type]){if(!(t=(r.find.ID(c.matches[0].replace(te,ne),t)||[])[0]))return n;f&&(t=t.parentNode),e=e.slice(u.shift().value.length)}for(o=Q.needsContext.test(e)?0:u.length;o--&&!r.relative[l=(c=u[o]).type];)if((h=r.find[l])&&(i=h(c.matches[0].replace(te,ne),ee.test(u[0].type)&&me(t.parentNode)||t))){if(u.splice(o,1),!(e=i.length&&_e(u)))return O.apply(n,i),n;break}}return(f||a(e,d))(i,t,!g,n,!t||ee.test(e)&&me(t.parentNode)||t),n},n.sortStable=b.split("").sort(A).join("")===b,n.detectDuplicates=!!h,f(),n.sortDetached=le(function(e){return 1&e.compareDocumentPosition(d.createElement("fieldset"))}),le(function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")})||he("type|href|height|width",function(e,t,n){if(!n)return e.getAttribute(t,"type"===t.toLowerCase()?1:2)}),n.attributes&&le(function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")})||he("value",function(e,t,n){if(!n&&"input"===e.nodeName.toLowerCase())return e.defaultValue}),le(function(e){return null==e.getAttribute("disabled")})||he(M,function(e,t,n){var r;if(!n)return!0===e[t]?t.toLowerCase():(r=e.getAttributeNode(t))&&r.specified?r.value:null}),ae}(r);I.find=C,I.expr=C.selectors,I.expr[":"]=I.expr.pseudos,I.uniqueSort=I.unique=C.uniqueSort,I.text=C.getText,I.isXMLDoc=C.isXML,I.contains=C.contains,I.escapeSelector=C.escape;var S=function(e,t,n){for(var r=[],i=void 0!==n;(e=e[t])&&9!==e.nodeType;)if(1===e.nodeType){if(i&&I(e).is(n))break;r.push(e)}return r},A=function(e,t){for(var n=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&n.push(e);return n},x=I.expr.match.needsContext;function N(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()}var D=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function P(e,t,n){return m(t)?I.grep(e,function(e,r){return!!t.call(e,r,e)!==n}):t.nodeType?I.grep(e,function(e){return e===t!==n}):"string"!=typeof t?I.grep(e,function(e){return l.call(t,e)>-1!==n}):I.filter(t,e,n)}I.filter=function(e,t,n){var r=t[0];return n&&(e=":not("+e+")"),1===t.length&&1===r.nodeType?I.find.matchesSelector(r,e)?[r]:[]:I.find.matches(e,I.grep(t,function(e){return 1===e.nodeType}))},I.fn.extend({find:function(e){var t,n,r=this.length,i=this;if("string"!=typeof e)return this.pushStack(I(e).filter(function(){for(t=0;t<r;t++)if(I.contains(i[t],this))return!0}));for(n=this.pushStack([]),t=0;t<r;t++)I.find(e,i[t],n);return r>1?I.uniqueSort(n):n},filter:function(e){return this.pushStack(P(this,e||[],!1))},not:function(e){return this.pushStack(P(this,e||[],!0))},is:function(e){return!!P(this,"string"==typeof e&&x.test(e)?I(e):e||[],!1).length}});var O,R=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/;(I.fn.init=function(e,t,n){var r,i;if(!e)return this;if(n=n||O,"string"==typeof e){if(!(r="<"===e[0]&&">"===e[e.length-1]&&e.length>=3?[null,e,null]:R.exec(e))||!r[1]&&t)return!t||t.jquery?(t||n).find(e):this.constructor(t).find(e);if(r[1]){if(I.merge(this,I.parseHTML(r[1],(t=t instanceof I?t[0]:t)&&t.nodeType?t.ownerDocument||t:_,!0)),D.test(r[1])&&I.isPlainObject(t))for(r in t)m(this[r])?this[r](t[r]):this.attr(r,t[r]);return this}return(i=_.getElementById(r[2]))&&(this[0]=i,this.length=1),this}return e.nodeType?(this[0]=e,this.length=1,this):m(e)?void 0!==n.ready?n.ready(e):e(I):I.makeArray(e,this)}).prototype=I.fn,O=I(_);var L=/^(?:parents|prev(?:Until|All))/,M={children:!0,contents:!0,next:!0,prev:!0};function F(e,t){for(;(e=e[t])&&1!==e.nodeType;);return e}I.fn.extend({has:function(e){var t=I(e,this),n=t.length;return this.filter(function(){for(var e=0;e<n;e++)if(I.contains(this,t[e]))return!0})},closest:function(e,t){var n,r=0,i=this.length,o=[],s="string"!=typeof e&&I(e);if(!x.test(e))for(;r<i;r++)for(n=this[r];n&&n!==t;n=n.parentNode)if(n.nodeType<11&&(s?s.index(n)>-1:1===n.nodeType&&I.find.matchesSelector(n,e))){o.push(n);break}return this.pushStack(o.length>1?I.uniqueSort(o):o)},index:function(e){return e?"string"==typeof e?l.call(I(e),this[0]):l.call(this,e.jquery?e[0]:e):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(I.uniqueSort(I.merge(this.get(),I(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),I.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return S(e,"parentNode")},parentsUntil:function(e,t,n){return S(e,"parentNode",n)},next:function(e){return F(e,"nextSibling")},prev:function(e){return F(e,"previousSibling")},nextAll:function(e){return S(e,"nextSibling")},prevAll:function(e){return S(e,"previousSibling")},nextUntil:function(e,t,n){return S(e,"nextSibling",n)},prevUntil:function(e,t,n){return S(e,"previousSibling",n)},siblings:function(e){return A((e.parentNode||{}).firstChild,e)},children:function(e){return A(e.firstChild)},contents:function(e){return null!=e.contentDocument&&s(e.contentDocument)?e.contentDocument:(N(e,"template")&&(e=e.content||e),I.merge([],e.childNodes))}},function(e,t){I.fn[e]=function(n,r){var i=I.map(this,t,n);return"Until"!==e.slice(-5)&&(r=n),r&&"string"==typeof r&&(i=I.filter(r,i)),this.length>1&&(M[e]||I.uniqueSort(i),L.test(e)&&i.reverse()),this.pushStack(i)}});var j=/[^\x20\t\r\n\f]+/g;function q(e){return e}function U(e){throw e}function V(e,t,n,r){var i;try{e&&m(i=e.promise)?i.call(e).done(t).fail(n):e&&m(i=e.then)?i.call(e,t,n):t.apply(void 0,[e].slice(r))}catch(e){n.apply(void 0,[e])}}I.Callbacks=function(e){e="string"==typeof e?function(e){var t={};return I.each(e.match(j)||[],function(e,n){t[n]=!0}),t}(e):I.extend({},e);var t,n,r,i,o=[],s=[],a=-1,u=function(){for(i=i||e.once,r=t=!0;s.length;a=-1)for(n=s.shift();++a<o.length;)!1===o[a].apply(n[0],n[1])&&e.stopOnFalse&&(a=o.length,n=!1);e.memory||(n=!1),t=!1,i&&(o=n?[]:"")},c={add:function(){return o&&(n&&!t&&(a=o.length-1,s.push(n)),function t(n){I.each(n,function(n,r){m(r)?e.unique&&c.has(r)||o.push(r):r&&r.length&&"string"!==T(r)&&t(r)})}(arguments),n&&!t&&u()),this},remove:function(){return I.each(arguments,function(e,t){for(var n;(n=I.inArray(t,o,n))>-1;)o.splice(n,1),n<=a&&a--}),this},has:function(e){return e?I.inArray(e,o)>-1:o.length>0},empty:function(){return o&&(o=[]),this},disable:function(){return i=s=[],o=n="",this},disabled:function(){return!o},lock:function(){return i=s=[],n||t||(o=n=""),this},locked:function(){return!!i},fireWith:function(e,n){return i||(n=[e,(n=n||[]).slice?n.slice():n],s.push(n),t||u()),this},fire:function(){return c.fireWith(this,arguments),this},fired:function(){return!!r}};return c},I.extend({Deferred:function(e){var t=[["notify","progress",I.Callbacks("memory"),I.Callbacks("memory"),2],["resolve","done",I.Callbacks("once memory"),I.Callbacks("once memory"),0,"resolved"],["reject","fail",I.Callbacks("once memory"),I.Callbacks("once memory"),1,"rejected"]],n="pending",i={state:function(){return n},always:function(){return o.done(arguments).fail(arguments),this},catch:function(e){return i.then(null,e)},pipe:function(){var e=arguments;return I.Deferred(function(n){I.each(t,function(t,r){var i=m(e[r[4]])&&e[r[4]];o[r[1]](function(){var e=i&&i.apply(this,arguments);e&&m(e.promise)?e.promise().progress(n.notify).done(n.resolve).fail(n.reject):n[r[0]+"With"](this,i?[e]:arguments)})}),e=null}).promise()},then:function(e,n,i){var o=0;function s(e,t,n,i){return function(){var a=this,u=arguments,c=function(){var r,c;if(!(e<o)){if((r=n.apply(a,u))===t.promise())throw new TypeError("Thenable self-resolution");m(c=r&&("object"==typeof r||"function"==typeof r)&&r.then)?i?c.call(r,s(o,t,q,i),s(o,t,U,i)):(o++,c.call(r,s(o,t,q,i),s(o,t,U,i),s(o,t,q,t.notifyWith))):(n!==q&&(a=void 0,u=[r]),(i||t.resolveWith)(a,u))}},l=i?c:function(){try{c()}catch(r){I.Deferred.exceptionHook&&I.Deferred.exceptionHook(r,l.stackTrace),e+1>=o&&(n!==U&&(a=void 0,u=[r]),t.rejectWith(a,u))}};e?l():(I.Deferred.getStackHook&&(l.stackTrace=I.Deferred.getStackHook()),r.setTimeout(l))}}return I.Deferred(function(r){t[0][3].add(s(0,r,m(i)?i:q,r.notifyWith)),t[1][3].add(s(0,r,m(e)?e:q)),t[2][3].add(s(0,r,m(n)?n:U))}).promise()},promise:function(e){return null!=e?I.extend(e,i):i}},o={};return I.each(t,function(e,r){var s=r[2],a=r[5];i[r[1]]=s.add,a&&s.add(function(){n=a},t[3-e][2].disable,t[3-e][3].disable,t[0][2].lock,t[0][3].lock),s.add(r[3].fire),o[r[0]]=function(){return o[r[0]+"With"](this===o?void 0:this,arguments),this},o[r[0]+"With"]=s.fireWith}),i.promise(o),e&&e.call(o,o),o},when:function(e){var t=arguments.length,n=t,r=Array(n),i=a.call(arguments),o=I.Deferred(),s=function(e){return function(n){r[e]=this,i[e]=arguments.length>1?a.call(arguments):n,--t||o.resolveWith(r,i)}};if(t<=1&&(V(e,o.done(s(n)).resolve,o.reject,!t),"pending"===o.state()||m(i[n]&&i[n].then)))return o.then();for(;n--;)V(i[n],s(n),o.reject);return o.promise()}});var B=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;I.Deferred.exceptionHook=function(e,t){r.console&&r.console.warn&&e&&B.test(e.name)&&r.console.warn("jQuery.Deferred exception: "+e.message,e.stack,t)},I.readyException=function(e){r.setTimeout(function(){throw e})};var H=I.Deferred();function W(){_.removeEventListener("DOMContentLoaded",W),r.removeEventListener("load",W),I.ready()}I.fn.ready=function(e){return H.then(e).catch(function(e){I.readyException(e)}),this},I.extend({isReady:!1,readyWait:1,ready:function(e){(!0===e?--I.readyWait:I.isReady)||(I.isReady=!0,!0!==e&&--I.readyWait>0||H.resolveWith(_,[I]))}}),I.ready.then=H.then,"complete"===_.readyState||"loading"!==_.readyState&&!_.documentElement.doScroll?r.setTimeout(I.ready):(_.addEventListener("DOMContentLoaded",W),r.addEventListener("load",W));var K=function(e,t,n,r,i,o,s){var a=0,u=e.length,c=null==n;if("object"===T(n))for(a in i=!0,n)K(e,t,a,n[a],!0,o,s);else if(void 0!==r&&(i=!0,m(r)||(s=!0),c&&(s?(t.call(e,r),t=null):(c=t,t=function(e,t,n){return c.call(I(e),n)})),t))for(;a<u;a++)t(e[a],n,s?r:r.call(e[a],a,t(e[a],n)));return i?e:c?t.call(e):u?t(e[0],n):o},z=/^-ms-/,G=/-([a-z])/g;function Q(e,t){return t.toUpperCase()}function $(e){return e.replace(z,"ms-").replace(G,Q)}var Y=function(e){return 1===e.nodeType||9===e.nodeType||!+e.nodeType};function X(){this.expando=I.expando+X.uid++}X.uid=1,X.prototype={cache:function(e){var t=e[this.expando];return t||(t={},Y(e)&&(e.nodeType?e[this.expando]=t:Object.defineProperty(e,this.expando,{value:t,configurable:!0}))),t},set:function(e,t,n){var r,i=this.cache(e);if("string"==typeof t)i[$(t)]=n;else for(r in t)i[$(r)]=t[r];return i},get:function(e,t){return void 0===t?this.cache(e):e[this.expando]&&e[this.expando][$(t)]},access:function(e,t,n){return void 0===t||t&&"string"==typeof t&&void 0===n?this.get(e,t):(this.set(e,t,n),void 0!==n?n:t)},remove:function(e,t){var n,r=e[this.expando];if(void 0!==r){if(void 0!==t){n=(t=Array.isArray(t)?t.map($):(t=$(t))in r?[t]:t.match(j)||[]).length;for(;n--;)delete r[t[n]]}(void 0===t||I.isEmptyObject(r))&&(e.nodeType?e[this.expando]=void 0:delete e[this.expando])}},hasData:function(e){var t=e[this.expando];return void 0!==t&&!I.isEmptyObject(t)}};var Z=new X,J=new X,ee=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,te=/[A-Z]/g;function ne(e,t,n){var r;if(void 0===n&&1===e.nodeType)if(r="data-"+t.replace(te,"-$&").toLowerCase(),"string"==typeof(n=e.getAttribute(r))){try{n=function(e){return"true"===e||"false"!==e&&("null"===e?null:e===+e+""?+e:ee.test(e)?JSON.parse(e):e)}(n)}catch(i){}J.set(e,t,n)}else n=void 0;return n}I.extend({hasData:function(e){return J.hasData(e)||Z.hasData(e)},data:function(e,t,n){return J.access(e,t,n)},removeData:function(e,t){J.remove(e,t)},_data:function(e,t,n){return Z.access(e,t,n)},_removeData:function(e,t){Z.remove(e,t)}}),I.fn.extend({data:function(e,t){var n,r,i,o=this[0],s=o&&o.attributes;if(void 0===e){if(this.length&&(i=J.get(o),1===o.nodeType&&!Z.get(o,"hasDataAttrs"))){for(n=s.length;n--;)s[n]&&0===(r=s[n].name).indexOf("data-")&&(r=$(r.slice(5)),ne(o,r,i[r]));Z.set(o,"hasDataAttrs",!0)}return i}return"object"==typeof e?this.each(function(){J.set(this,e)}):K(this,function(t){var n;if(o&&void 0===t)return void 0!==(n=J.get(o,e))||void 0!==(n=ne(o,e))?n:void 0;this.each(function(){J.set(this,e,t)})},null,t,arguments.length>1,null,!0)},removeData:function(e){return this.each(function(){J.remove(this,e)})}}),I.extend({queue:function(e,t,n){var r;if(e)return r=Z.get(e,t=(t||"fx")+"queue"),n&&(!r||Array.isArray(n)?r=Z.access(e,t,I.makeArray(n)):r.push(n)),r||[]},dequeue:function(e,t){var n=I.queue(e,t=t||"fx"),r=n.length,i=n.shift(),o=I._queueHooks(e,t);"inprogress"===i&&(i=n.shift(),r--),i&&("fx"===t&&n.unshift("inprogress"),delete o.stop,i.call(e,function(){I.dequeue(e,t)},o)),!r&&o&&o.empty.fire()},_queueHooks:function(e,t){var n=t+"queueHooks";return Z.get(e,n)||Z.access(e,n,{empty:I.Callbacks("once memory").add(function(){Z.remove(e,[t+"queue",n])})})}}),I.fn.extend({queue:function(e,t){var n=2;return"string"!=typeof e&&(t=e,e="fx",n--),arguments.length<n?I.queue(this[0],e):void 0===t?this:this.each(function(){var n=I.queue(this,e,t);I._queueHooks(this,e),"fx"===e&&"inprogress"!==n[0]&&I.dequeue(this,e)})},dequeue:function(e){return this.each(function(){I.dequeue(this,e)})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var n,r=1,i=I.Deferred(),o=this,s=this.length,a=function(){--r||i.resolveWith(o,[o])};for("string"!=typeof e&&(t=e,e=void 0),e=e||"fx";s--;)(n=Z.get(o[s],e+"queueHooks"))&&n.empty&&(r++,n.empty.add(a));return a(),i.promise(t)}});var re=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,ie=new RegExp("^(?:([+-])=|)("+re+")([a-z%]*)$","i"),oe=["Top","Right","Bottom","Left"],se=_.documentElement,ae=function(e){return I.contains(e.ownerDocument,e)},ue={composed:!0};se.getRootNode&&(ae=function(e){return I.contains(e.ownerDocument,e)||e.getRootNode(ue)===e.ownerDocument});var ce=function(e,t){return"none"===(e=t||e).style.display||""===e.style.display&&ae(e)&&"none"===I.css(e,"display")};function le(e,t,n,r){var i,o,s=20,a=r?function(){return r.cur()}:function(){return I.css(e,t,"")},u=a(),c=n&&n[3]||(I.cssNumber[t]?"":"px"),l=e.nodeType&&(I.cssNumber[t]||"px"!==c&&+u)&&ie.exec(I.css(e,t));if(l&&l[3]!==c){for(c=c||l[3],l=+(u/=2)||1;s--;)I.style(e,t,l+c),(1-o)*(1-(o=a()/u||.5))<=0&&(s=0),l/=o;I.style(e,t,(l*=2)+c),n=n||[]}return n&&(l=+l||+u||0,i=n[1]?l+(n[1]+1)*n[2]:+n[2],r&&(r.unit=c,r.start=l,r.end=i)),i}var he={};function fe(e){var t,n=e.ownerDocument,r=e.nodeName,i=he[r];return i||(t=n.body.appendChild(n.createElement(r)),i=I.css(t,"display"),t.parentNode.removeChild(t),"none"===i&&(i="block"),he[r]=i,i)}function de(e,t){for(var n,r,i=[],o=0,s=e.length;o<s;o++)(r=e[o]).style&&(n=r.style.display,t?("none"===n&&(i[o]=Z.get(r,"display")||null,i[o]||(r.style.display="")),""===r.style.display&&ce(r)&&(i[o]=fe(r))):"none"!==n&&(i[o]="none",Z.set(r,"display",n)));for(o=0;o<s;o++)null!=i[o]&&(e[o].style.display=i[o]);return e}I.fn.extend({show:function(){return de(this,!0)},hide:function(){return de(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each(function(){ce(this)?I(this).show():I(this).hide()})}});var pe,ge,ve=/^(?:checkbox|radio)$/i,me=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,ye=/^$|^module$|\/(?:java|ecma)script/i;pe=_.createDocumentFragment().appendChild(_.createElement("div")),(ge=_.createElement("input")).setAttribute("type","radio"),ge.setAttribute("checked","checked"),ge.setAttribute("name","t"),pe.appendChild(ge),v.checkClone=pe.cloneNode(!0).cloneNode(!0).lastChild.checked,pe.innerHTML="<textarea>x</textarea>",v.noCloneChecked=!!pe.cloneNode(!0).lastChild.defaultValue,pe.innerHTML="<option></option>",v.option=!!pe.lastChild;var _e={thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};function be(e,t){var n;return n=void 0!==e.getElementsByTagName?e.getElementsByTagName(t||"*"):void 0!==e.querySelectorAll?e.querySelectorAll(t||"*"):[],void 0===t||t&&N(e,t)?I.merge([e],n):n}function we(e,t){for(var n=0,r=e.length;n<r;n++)Z.set(e[n],"globalEval",!t||Z.get(t[n],"globalEval"))}_e.tbody=_e.tfoot=_e.colgroup=_e.caption=_e.thead,_e.th=_e.td,v.option||(_e.optgroup=_e.option=[1,"<select multiple='multiple'>","</select>"]);var Te=/<|&#?\w+;/;function Ee(e,t,n,r,i){for(var o,s,a,u,c,l,h=t.createDocumentFragment(),f=[],d=0,p=e.length;d<p;d++)if((o=e[d])||0===o)if("object"===T(o))I.merge(f,o.nodeType?[o]:o);else if(Te.test(o)){for(s=s||h.appendChild(t.createElement("div")),a=(me.exec(o)||["",""])[1].toLowerCase(),s.innerHTML=(u=_e[a]||_e._default)[1]+I.htmlPrefilter(o)+u[2],l=u[0];l--;)s=s.lastChild;I.merge(f,s.childNodes),(s=h.firstChild).textContent=""}else f.push(t.createTextNode(o));for(h.textContent="",d=0;o=f[d++];)if(r&&I.inArray(o,r)>-1)i&&i.push(o);else if(c=ae(o),s=be(h.appendChild(o),"script"),c&&we(s),n)for(l=0;o=s[l++];)ye.test(o.type||"")&&n.push(o);return h}var Ie=/^([^.]*)(?:\.(.+)|)/;function ke(){return!0}function Ce(){return!1}function Se(e,t){return e===function(){try{return _.activeElement}catch(e){}}()==("focus"===t)}function Ae(e,t,n,r,i,o){var s,a;if("object"==typeof t){for(a in"string"!=typeof n&&(r=r||n,n=void 0),t)Ae(e,a,n,r,t[a],o);return e}if(null==r&&null==i?(i=n,r=n=void 0):null==i&&("string"==typeof n?(i=r,r=void 0):(i=r,r=n,n=void 0)),!1===i)i=Ce;else if(!i)return e;return 1===o&&(s=i,(i=function(e){return I().off(e),s.apply(this,arguments)}).guid=s.guid||(s.guid=I.guid++)),e.each(function(){I.event.add(this,t,i,r,n)})}function xe(e,t,n){n?(Z.set(e,t,!1),I.event.add(e,t,{namespace:!1,handler:function(e){var r,i,o=Z.get(this,t);if(1&e.isTrigger&&this[t]){if(o.length)(I.event.special[t]||{}).delegateType&&e.stopPropagation();else if(o=a.call(arguments),Z.set(this,t,o),r=n(this,t),this[t](),o!==(i=Z.get(this,t))||r?Z.set(this,t,!1):i={},o!==i)return e.stopImmediatePropagation(),e.preventDefault(),i&&i.value}else o.length&&(Z.set(this,t,{value:I.event.trigger(I.extend(o[0],I.Event.prototype),o.slice(1),this)}),e.stopImmediatePropagation())}})):void 0===Z.get(e,t)&&I.event.add(e,t,ke)}I.event={global:{},add:function(e,t,n,r,i){var o,s,a,u,c,l,h,f,d,p,g,v=Z.get(e);if(Y(e))for(n.handler&&(n=(o=n).handler,i=o.selector),i&&I.find.matchesSelector(se,i),n.guid||(n.guid=I.guid++),(u=v.events)||(u=v.events=Object.create(null)),(s=v.handle)||(s=v.handle=function(t){return void 0!==I&&I.event.triggered!==t.type?I.event.dispatch.apply(e,arguments):void 0}),c=(t=(t||"").match(j)||[""]).length;c--;)d=g=(a=Ie.exec(t[c])||[])[1],p=(a[2]||"").split(".").sort(),d&&(h=I.event.special[d]||{},h=I.event.special[d=(i?h.delegateType:h.bindType)||d]||{},l=I.extend({type:d,origType:g,data:r,handler:n,guid:n.guid,selector:i,needsContext:i&&I.expr.match.needsContext.test(i),namespace:p.join(".")},o),(f=u[d])||((f=u[d]=[]).delegateCount=0,h.setup&&!1!==h.setup.call(e,r,p,s)||e.addEventListener&&e.addEventListener(d,s)),h.add&&(h.add.call(e,l),l.handler.guid||(l.handler.guid=n.guid)),i?f.splice(f.delegateCount++,0,l):f.push(l),I.event.global[d]=!0)},remove:function(e,t,n,r,i){var o,s,a,u,c,l,h,f,d,p,g,v=Z.hasData(e)&&Z.get(e);if(v&&(u=v.events)){for(c=(t=(t||"").match(j)||[""]).length;c--;)if(d=g=(a=Ie.exec(t[c])||[])[1],p=(a[2]||"").split(".").sort(),d){for(h=I.event.special[d]||{},f=u[d=(r?h.delegateType:h.bindType)||d]||[],a=a[2]&&new RegExp("(^|\\.)"+p.join("\\.(?:.*\\.|)")+"(\\.|$)"),s=o=f.length;o--;)l=f[o],!i&&g!==l.origType||n&&n.guid!==l.guid||a&&!a.test(l.namespace)||r&&r!==l.selector&&("**"!==r||!l.selector)||(f.splice(o,1),l.selector&&f.delegateCount--,h.remove&&h.remove.call(e,l));s&&!f.length&&(h.teardown&&!1!==h.teardown.call(e,p,v.handle)||I.removeEvent(e,d,v.handle),delete u[d])}else for(d in u)I.event.remove(e,d+t[c],n,r,!0);I.isEmptyObject(u)&&Z.remove(e,"handle events")}},dispatch:function(e){var t,n,r,i,o,s,a=new Array(arguments.length),u=I.event.fix(e),c=(Z.get(this,"events")||Object.create(null))[u.type]||[],l=I.event.special[u.type]||{};for(a[0]=u,t=1;t<arguments.length;t++)a[t]=arguments[t];if(u.delegateTarget=this,!l.preDispatch||!1!==l.preDispatch.call(this,u)){for(s=I.event.handlers.call(this,u,c),t=0;(i=s[t++])&&!u.isPropagationStopped();)for(u.currentTarget=i.elem,n=0;(o=i.handlers[n++])&&!u.isImmediatePropagationStopped();)u.rnamespace&&!1!==o.namespace&&!u.rnamespace.test(o.namespace)||(u.handleObj=o,u.data=o.data,void 0!==(r=((I.event.special[o.origType]||{}).handle||o.handler).apply(i.elem,a))&&!1===(u.result=r)&&(u.preventDefault(),u.stopPropagation()));return l.postDispatch&&l.postDispatch.call(this,u),u.result}},handlers:function(e,t){var n,r,i,o,s,a=[],u=t.delegateCount,c=e.target;if(u&&c.nodeType&&!("click"===e.type&&e.button>=1))for(;c!==this;c=c.parentNode||this)if(1===c.nodeType&&("click"!==e.type||!0!==c.disabled)){for(o=[],s={},n=0;n<u;n++)void 0===s[i=(r=t[n]).selector+" "]&&(s[i]=r.needsContext?I(i,this).index(c)>-1:I.find(i,this,null,[c]).length),s[i]&&o.push(r);o.length&&a.push({elem:c,handlers:o})}return c=this,u<t.length&&a.push({elem:c,handlers:t.slice(u)}),a},addProp:function(e,t){Object.defineProperty(I.Event.prototype,e,{enumerable:!0,configurable:!0,get:m(t)?function(){if(this.originalEvent)return t(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[e]},set:function(t){Object.defineProperty(this,e,{enumerable:!0,configurable:!0,writable:!0,value:t})}})},fix:function(e){return e[I.expando]?e:new I.Event(e)},special:{load:{noBubble:!0},click:{setup:function(e){var t=this||e;return ve.test(t.type)&&t.click&&N(t,"input")&&xe(t,"click",ke),!1},trigger:function(e){var t=this||e;return ve.test(t.type)&&t.click&&N(t,"input")&&xe(t,"click"),!0},_default:function(e){var t=e.target;return ve.test(t.type)&&t.click&&N(t,"input")&&Z.get(t,"click")||N(t,"a")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}}},I.removeEvent=function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n)},I.Event=function(e,t){if(!(this instanceof I.Event))return new I.Event(e,t);e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&!1===e.returnValue?ke:Ce,this.target=e.target&&3===e.target.nodeType?e.target.parentNode:e.target,this.currentTarget=e.currentTarget,this.relatedTarget=e.relatedTarget):this.type=e,t&&I.extend(this,t),this.timeStamp=e&&e.timeStamp||Date.now(),this[I.expando]=!0},I.Event.prototype={constructor:I.Event,isDefaultPrevented:Ce,isPropagationStopped:Ce,isImmediatePropagationStopped:Ce,isSimulated:!1,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=ke,e&&!this.isSimulated&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=ke,e&&!this.isSimulated&&e.stopPropagation()},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=ke,e&&!this.isSimulated&&e.stopImmediatePropagation(),this.stopPropagation()}},I.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:!0},I.event.addProp),I.each({focus:"focusin",blur:"focusout"},function(e,t){I.event.special[e]={setup:function(){return xe(this,e,Se),!1},trigger:function(){return xe(this,e),!0},_default:function(){return!0},delegateType:t}}),I.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(e,t){I.event.special[e]={delegateType:t,bindType:t,handle:function(e){var n,r=this,i=e.relatedTarget,o=e.handleObj;return i&&(i===r||I.contains(r,i))||(e.type=o.origType,n=o.handler.apply(this,arguments),e.type=t),n}}}),I.fn.extend({on:function(e,t,n,r){return Ae(this,e,t,n,r)},one:function(e,t,n,r){return Ae(this,e,t,n,r,1)},off:function(e,t,n){var r,i;if(e&&e.preventDefault&&e.handleObj)return r=e.handleObj,I(e.delegateTarget).off(r.namespace?r.origType+"."+r.namespace:r.origType,r.selector,r.handler),this;if("object"==typeof e){for(i in e)this.off(i,t,e[i]);return this}return!1!==t&&"function"!=typeof t||(n=t,t=void 0),!1===n&&(n=Ce),this.each(function(){I.event.remove(this,e,n,t)})}});var Ne=/<script|<style|<link/i,De=/checked\s*(?:[^=]|=\s*.checked.)/i,Pe=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;function Oe(e,t){return N(e,"table")&&N(11!==t.nodeType?t:t.firstChild,"tr")&&I(e).children("tbody")[0]||e}function Re(e){return e.type=(null!==e.getAttribute("type"))+"/"+e.type,e}function Le(e){return"true/"===(e.type||"").slice(0,5)?e.type=e.type.slice(5):e.removeAttribute("type"),e}function Me(e,t){var n,r,i,o,s,a;if(1===t.nodeType){if(Z.hasData(e)&&(a=Z.get(e).events))for(i in Z.remove(t,"handle events"),a)for(n=0,r=a[i].length;n<r;n++)I.event.add(t,i,a[i][n]);J.hasData(e)&&(o=J.access(e),s=I.extend({},o),J.set(t,s))}}function Fe(e,t){var n=t.nodeName.toLowerCase();"input"===n&&ve.test(e.type)?t.checked=e.checked:"input"!==n&&"textarea"!==n||(t.defaultValue=e.defaultValue)}function je(e,t,n,r){t=u(t);var i,o,s,a,c,l,h=0,f=e.length,d=f-1,p=t[0],g=m(p);if(g||f>1&&"string"==typeof p&&!v.checkClone&&De.test(p))return e.each(function(i){var o=e.eq(i);g&&(t[0]=p.call(this,i,o.html())),je(o,t,n,r)});if(f&&(o=(i=Ee(t,e[0].ownerDocument,!1,e,r)).firstChild,1===i.childNodes.length&&(i=o),o||r)){for(a=(s=I.map(be(i,"script"),Re)).length;h<f;h++)c=i,h!==d&&(c=I.clone(c,!0,!0),a&&I.merge(s,be(c,"script"))),n.call(e[h],c,h);if(a)for(l=s[s.length-1].ownerDocument,I.map(s,Le),h=0;h<a;h++)ye.test((c=s[h]).type||"")&&!Z.access(c,"globalEval")&&I.contains(l,c)&&(c.src&&"module"!==(c.type||"").toLowerCase()?I._evalUrl&&!c.noModule&&I._evalUrl(c.src,{nonce:c.nonce||c.getAttribute("nonce")},l):w(c.textContent.replace(Pe,""),c,l))}return e}function qe(e,t,n){for(var r,i=t?I.filter(t,e):e,o=0;null!=(r=i[o]);o++)n||1!==r.nodeType||I.cleanData(be(r)),r.parentNode&&(n&&ae(r)&&we(be(r,"script")),r.parentNode.removeChild(r));return e}I.extend({htmlPrefilter:function(e){return e},clone:function(e,t,n){var r,i,o,s,a=e.cloneNode(!0),u=ae(e);if(!(v.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||I.isXMLDoc(e)))for(s=be(a),r=0,i=(o=be(e)).length;r<i;r++)Fe(o[r],s[r]);if(t)if(n)for(o=o||be(e),s=s||be(a),r=0,i=o.length;r<i;r++)Me(o[r],s[r]);else Me(e,a);return(s=be(a,"script")).length>0&&we(s,!u&&be(e,"script")),a},cleanData:function(e){for(var t,n,r,i=I.event.special,o=0;void 0!==(n=e[o]);o++)if(Y(n)){if(t=n[Z.expando]){if(t.events)for(r in t.events)i[r]?I.event.remove(n,r):I.removeEvent(n,r,t.handle);n[Z.expando]=void 0}n[J.expando]&&(n[J.expando]=void 0)}}}),I.fn.extend({detach:function(e){return qe(this,e,!0)},remove:function(e){return qe(this,e)},text:function(e){return K(this,function(e){return void 0===e?I.text(this):this.empty().each(function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=e)})},null,e,arguments.length)},append:function(){return je(this,arguments,function(e){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||Oe(this,e).appendChild(e)})},prepend:function(){return je(this,arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=Oe(this,e);t.insertBefore(e,t.firstChild)}})},before:function(){return je(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return je(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},empty:function(){for(var e,t=0;null!=(e=this[t]);t++)1===e.nodeType&&(I.cleanData(be(e,!1)),e.textContent="");return this},clone:function(e,t){return e=null!=e&&e,t=null==t?e:t,this.map(function(){return I.clone(this,e,t)})},html:function(e){return K(this,function(e){var t=this[0]||{},n=0,r=this.length;if(void 0===e&&1===t.nodeType)return t.innerHTML;if("string"==typeof e&&!Ne.test(e)&&!_e[(me.exec(e)||["",""])[1].toLowerCase()]){e=I.htmlPrefilter(e);try{for(;n<r;n++)1===(t=this[n]||{}).nodeType&&(I.cleanData(be(t,!1)),t.innerHTML=e);t=0}catch(i){}}t&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(){var e=[];return je(this,arguments,function(t){var n=this.parentNode;I.inArray(this,e)<0&&(I.cleanData(be(this)),n&&n.replaceChild(t,this))},e)}}),I.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){I.fn[e]=function(e){for(var n,r=[],i=I(e),o=i.length-1,s=0;s<=o;s++)n=s===o?this:this.clone(!0),I(i[s])[t](n),c.apply(r,n.get());return this.pushStack(r)}});var Ue=new RegExp("^("+re+")(?!px)[a-z%]+$","i"),Ve=function(e){var t=e.ownerDocument.defaultView;return t&&t.opener||(t=r),t.getComputedStyle(e)},Be=function(e,t,n){var r,i,o={};for(i in t)o[i]=e.style[i],e.style[i]=t[i];for(i in r=n.call(e),t)e.style[i]=o[i];return r},He=new RegExp(oe.join("|"),"i");function We(e,t,n){var r,i,o,s,a=e.style;return(n=n||Ve(e))&&(""!==(s=n.getPropertyValue(t)||n[t])||ae(e)||(s=I.style(e,t)),!v.pixelBoxStyles()&&Ue.test(s)&&He.test(t)&&(r=a.width,i=a.minWidth,o=a.maxWidth,a.minWidth=a.maxWidth=a.width=s,s=n.width,a.width=r,a.minWidth=i,a.maxWidth=o)),void 0!==s?s+"":s}function Ke(e,t){return{get:function(){if(!e())return(this.get=t).apply(this,arguments);delete this.get}}}!function(){function e(){if(l){c.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",l.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",se.appendChild(c).appendChild(l);var e=r.getComputedStyle(l);n="1%"!==e.top,u=12===t(e.marginLeft),l.style.right="60%",s=36===t(e.right),i=36===t(e.width),l.style.position="absolute",o=12===t(l.offsetWidth/3),se.removeChild(c),l=null}}function t(e){return Math.round(parseFloat(e))}var n,i,o,s,a,u,c=_.createElement("div"),l=_.createElement("div");l.style&&(l.style.backgroundClip="content-box",l.cloneNode(!0).style.backgroundClip="",v.clearCloneStyle="content-box"===l.style.backgroundClip,I.extend(v,{boxSizingReliable:function(){return e(),i},pixelBoxStyles:function(){return e(),s},pixelPosition:function(){return e(),n},reliableMarginLeft:function(){return e(),u},scrollboxSize:function(){return e(),o},reliableTrDimensions:function(){var e,t,n,i;return null==a&&(e=_.createElement("table"),t=_.createElement("tr"),n=_.createElement("div"),e.style.cssText="position:absolute;left:-11111px;border-collapse:separate",t.style.cssText="border:1px solid",t.style.height="1px",n.style.height="9px",n.style.display="block",se.appendChild(e).appendChild(t).appendChild(n),i=r.getComputedStyle(t),a=parseInt(i.height,10)+parseInt(i.borderTopWidth,10)+parseInt(i.borderBottomWidth,10)===t.offsetHeight,se.removeChild(e)),a}}))}();var ze=["Webkit","Moz","ms"],Ge=_.createElement("div").style,Qe={};function $e(e){return I.cssProps[e]||Qe[e]||(e in Ge?e:Qe[e]=function(e){for(var t=e[0].toUpperCase()+e.slice(1),n=ze.length;n--;)if((e=ze[n]+t)in Ge)return e}(e)||e)}var Ye=/^(none|table(?!-c[ea]).+)/,Xe=/^--/,Ze={position:"absolute",visibility:"hidden",display:"block"},Je={letterSpacing:"0",fontWeight:"400"};function et(e,t,n){var r=ie.exec(t);return r?Math.max(0,r[2]-(n||0))+(r[3]||"px"):t}function tt(e,t,n,r,i,o){var s="width"===t?1:0,a=0,u=0;if(n===(r?"border":"content"))return 0;for(;s<4;s+=2)"margin"===n&&(u+=I.css(e,n+oe[s],!0,i)),r?("content"===n&&(u-=I.css(e,"padding"+oe[s],!0,i)),"margin"!==n&&(u-=I.css(e,"border"+oe[s]+"Width",!0,i))):(u+=I.css(e,"padding"+oe[s],!0,i),"padding"!==n?u+=I.css(e,"border"+oe[s]+"Width",!0,i):a+=I.css(e,"border"+oe[s]+"Width",!0,i));return!r&&o>=0&&(u+=Math.max(0,Math.ceil(e["offset"+t[0].toUpperCase()+t.slice(1)]-o-u-a-.5))||0),u}function nt(e,t,n){var r=Ve(e),i=(!v.boxSizingReliable()||n)&&"border-box"===I.css(e,"boxSizing",!1,r),o=i,s=We(e,t,r),a="offset"+t[0].toUpperCase()+t.slice(1);if(Ue.test(s)){if(!n)return s;s="auto"}return(!v.boxSizingReliable()&&i||!v.reliableTrDimensions()&&N(e,"tr")||"auto"===s||!parseFloat(s)&&"inline"===I.css(e,"display",!1,r))&&e.getClientRects().length&&(i="border-box"===I.css(e,"boxSizing",!1,r),(o=a in e)&&(s=e[a])),(s=parseFloat(s)||0)+tt(e,t,n||(i?"border":"content"),o,r,s)+"px"}function rt(e,t,n,r,i){return new rt.prototype.init(e,t,n,r,i)}I.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=We(e,"opacity");return""===n?"1":n}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{},style:function(e,t,n,r){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var i,o,s,a=$(t),u=Xe.test(t),c=e.style;if(u||(t=$e(a)),s=I.cssHooks[t]||I.cssHooks[a],void 0===n)return s&&"get"in s&&void 0!==(i=s.get(e,!1,r))?i:c[t];"string"==(o=typeof n)&&(i=ie.exec(n))&&i[1]&&(n=le(e,t,i),o="number"),null!=n&&n==n&&("number"!==o||u||(n+=i&&i[3]||(I.cssNumber[a]?"":"px")),v.clearCloneStyle||""!==n||0!==t.indexOf("background")||(c[t]="inherit"),s&&"set"in s&&void 0===(n=s.set(e,n,r))||(u?c.setProperty(t,n):c[t]=n))}},css:function(e,t,n,r){var i,o,s,a=$(t);return Xe.test(t)||(t=$e(a)),(s=I.cssHooks[t]||I.cssHooks[a])&&"get"in s&&(i=s.get(e,!0,n)),void 0===i&&(i=We(e,t,r)),"normal"===i&&t in Je&&(i=Je[t]),""===n||n?(o=parseFloat(i),!0===n||isFinite(o)?o||0:i):i}}),I.each(["height","width"],function(e,t){I.cssHooks[t]={get:function(e,n,r){if(n)return!Ye.test(I.css(e,"display"))||e.getClientRects().length&&e.getBoundingClientRect().width?nt(e,t,r):Be(e,Ze,function(){return nt(e,t,r)})},set:function(e,n,r){var i,o=Ve(e),s=!v.scrollboxSize()&&"absolute"===o.position,a=(s||r)&&"border-box"===I.css(e,"boxSizing",!1,o),u=r?tt(e,t,r,a,o):0;return a&&s&&(u-=Math.ceil(e["offset"+t[0].toUpperCase()+t.slice(1)]-parseFloat(o[t])-tt(e,t,"border",!1,o)-.5)),u&&(i=ie.exec(n))&&"px"!==(i[3]||"px")&&(e.style[t]=n,n=I.css(e,t)),et(0,n,u)}}}),I.cssHooks.marginLeft=Ke(v.reliableMarginLeft,function(e,t){if(t)return(parseFloat(We(e,"marginLeft"))||e.getBoundingClientRect().left-Be(e,{marginLeft:0},function(){return e.getBoundingClientRect().left}))+"px"}),I.each({margin:"",padding:"",border:"Width"},function(e,t){I.cssHooks[e+t]={expand:function(n){for(var r=0,i={},o="string"==typeof n?n.split(" "):[n];r<4;r++)i[e+oe[r]+t]=o[r]||o[r-2]||o[0];return i}},"margin"!==e&&(I.cssHooks[e+t].set=et)}),I.fn.extend({css:function(e,t){return K(this,function(e,t,n){var r,i,o={},s=0;if(Array.isArray(t)){for(r=Ve(e),i=t.length;s<i;s++)o[t[s]]=I.css(e,t[s],!1,r);return o}return void 0!==n?I.style(e,t,n):I.css(e,t)},e,t,arguments.length>1)}}),I.Tween=rt,(rt.prototype={constructor:rt,init:function(e,t,n,r,i,o){this.elem=e,this.prop=n,this.easing=i||I.easing._default,this.options=t,this.start=this.now=this.cur(),this.end=r,this.unit=o||(I.cssNumber[n]?"":"px")},cur:function(){var e=rt.propHooks[this.prop];return e&&e.get?e.get(this):rt.propHooks._default.get(this)},run:function(e){var t,n=rt.propHooks[this.prop];return this.pos=t=this.options.duration?I.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):rt.propHooks._default.set(this),this}}).init.prototype=rt.prototype,(rt.propHooks={_default:{get:function(e){var t;return 1!==e.elem.nodeType||null!=e.elem[e.prop]&&null==e.elem.style[e.prop]?e.elem[e.prop]:(t=I.css(e.elem,e.prop,""))&&"auto"!==t?t:0},set:function(e){I.fx.step[e.prop]?I.fx.step[e.prop](e):1!==e.elem.nodeType||!I.cssHooks[e.prop]&&null==e.elem.style[$e(e.prop)]?e.elem[e.prop]=e.now:I.style(e.elem,e.prop,e.now+e.unit)}}}).scrollTop=rt.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},I.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2},_default:"swing"},I.fx=rt.prototype.init,I.fx.step={};var it,ot,st=/^(?:toggle|show|hide)$/,at=/queueHooks$/;function ut(){ot&&(!1===_.hidden&&r.requestAnimationFrame?r.requestAnimationFrame(ut):r.setTimeout(ut,I.fx.interval),I.fx.tick())}function ct(){return r.setTimeout(function(){it=void 0}),it=Date.now()}function lt(e,t){var n,r=0,i={height:e};for(t=t?1:0;r<4;r+=2-t)i["margin"+(n=oe[r])]=i["padding"+n]=e;return t&&(i.opacity=i.width=e),i}function ht(e,t,n){for(var r,i=(ft.tweeners[t]||[]).concat(ft.tweeners["*"]),o=0,s=i.length;o<s;o++)if(r=i[o].call(n,t,e))return r}function ft(e,t,n){var r,i,o=0,s=ft.prefilters.length,a=I.Deferred().always(function(){delete u.elem}),u=function(){if(i)return!1;for(var t=it||ct(),n=Math.max(0,c.startTime+c.duration-t),r=1-(n/c.duration||0),o=0,s=c.tweens.length;o<s;o++)c.tweens[o].run(r);return a.notifyWith(e,[c,r,n]),r<1&&s?n:(s||a.notifyWith(e,[c,1,0]),a.resolveWith(e,[c]),!1)},c=a.promise({elem:e,props:I.extend({},t),opts:I.extend(!0,{specialEasing:{},easing:I.easing._default},n),originalProperties:t,originalOptions:n,startTime:it||ct(),duration:n.duration,tweens:[],createTween:function(t,n){var r=I.Tween(e,c.opts,t,n,c.opts.specialEasing[t]||c.opts.easing);return c.tweens.push(r),r},stop:function(t){var n=0,r=t?c.tweens.length:0;if(i)return this;for(i=!0;n<r;n++)c.tweens[n].run(1);return t?(a.notifyWith(e,[c,1,0]),a.resolveWith(e,[c,t])):a.rejectWith(e,[c,t]),this}}),l=c.props;for(function(e,t){var n,r,i,o,s;for(n in e)if(i=t[r=$(n)],o=e[n],Array.isArray(o)&&(i=o[1],o=e[n]=o[0]),n!==r&&(e[r]=o,delete e[n]),(s=I.cssHooks[r])&&"expand"in s)for(n in o=s.expand(o),delete e[r],o)n in e||(e[n]=o[n],t[n]=i);else t[r]=i}(l,c.opts.specialEasing);o<s;o++)if(r=ft.prefilters[o].call(c,e,l,c.opts))return m(r.stop)&&(I._queueHooks(c.elem,c.opts.queue).stop=r.stop.bind(r)),r;return I.map(l,ht,c),m(c.opts.start)&&c.opts.start.call(e,c),c.progress(c.opts.progress).done(c.opts.done,c.opts.complete).fail(c.opts.fail).always(c.opts.always),I.fx.timer(I.extend(u,{elem:e,anim:c,queue:c.opts.queue})),c}I.Animation=I.extend(ft,{tweeners:{"*":[function(e,t){var n=this.createTween(e,t);return le(n.elem,e,ie.exec(t),n),n}]},tweener:function(e,t){m(e)?(t=e,e=["*"]):e=e.match(j);for(var n,r=0,i=e.length;r<i;r++)(ft.tweeners[n=e[r]]=ft.tweeners[n]||[]).unshift(t)},prefilters:[function(e,t,n){var r,i,o,s,a,u,c,l,h="width"in t||"height"in t,f=this,d={},p=e.style,g=e.nodeType&&ce(e),v=Z.get(e,"fxshow");for(r in n.queue||(null==(s=I._queueHooks(e,"fx")).unqueued&&(s.unqueued=0,a=s.empty.fire,s.empty.fire=function(){s.unqueued||a()}),s.unqueued++,f.always(function(){f.always(function(){s.unqueued--,I.queue(e,"fx").length||s.empty.fire()})})),t)if(st.test(i=t[r])){if(delete t[r],o=o||"toggle"===i,i===(g?"hide":"show")){if("show"!==i||!v||void 0===v[r])continue;g=!0}d[r]=v&&v[r]||I.style(e,r)}if((u=!I.isEmptyObject(t))||!I.isEmptyObject(d))for(r in h&&1===e.nodeType&&(n.overflow=[p.overflow,p.overflowX,p.overflowY],null==(c=v&&v.display)&&(c=Z.get(e,"display")),"none"===(l=I.css(e,"display"))&&(c?l=c:(de([e],!0),c=e.style.display||c,l=I.css(e,"display"),de([e]))),("inline"===l||"inline-block"===l&&null!=c)&&"none"===I.css(e,"float")&&(u||(f.done(function(){p.display=c}),null==c&&(c="none"===(l=p.display)?"":l)),p.display="inline-block")),n.overflow&&(p.overflow="hidden",f.always(function(){p.overflow=n.overflow[0],p.overflowX=n.overflow[1],p.overflowY=n.overflow[2]})),u=!1,d)u||(v?"hidden"in v&&(g=v.hidden):v=Z.access(e,"fxshow",{display:c}),o&&(v.hidden=!g),g&&de([e],!0),f.done(function(){for(r in g||de([e]),Z.remove(e,"fxshow"),d)I.style(e,r,d[r])})),u=ht(g?v[r]:0,r,f),r in v||(v[r]=u.start,g&&(u.end=u.start,u.start=0))}],prefilter:function(e,t){t?ft.prefilters.unshift(e):ft.prefilters.push(e)}}),I.speed=function(e,t,n){var r=e&&"object"==typeof e?I.extend({},e):{complete:n||!n&&t||m(e)&&e,duration:e,easing:n&&t||t&&!m(t)&&t};return I.fx.off?r.duration=0:"number"!=typeof r.duration&&(r.duration=r.duration in I.fx.speeds?I.fx.speeds[r.duration]:I.fx.speeds._default),null!=r.queue&&!0!==r.queue||(r.queue="fx"),r.old=r.complete,r.complete=function(){m(r.old)&&r.old.call(this),r.queue&&I.dequeue(this,r.queue)},r},I.fn.extend({fadeTo:function(e,t,n,r){return this.filter(ce).css("opacity",0).show().end().animate({opacity:t},e,n,r)},animate:function(e,t,n,r){var i=I.isEmptyObject(e),o=I.speed(t,n,r),s=function(){var t=ft(this,I.extend({},e),o);(i||Z.get(this,"finish"))&&t.stop(!0)};return s.finish=s,i||!1===o.queue?this.each(s):this.queue(o.queue,s)},stop:function(e,t,n){var r=function(e){var t=e.stop;delete e.stop,t(n)};return"string"!=typeof e&&(n=t,t=e,e=void 0),t&&this.queue(e||"fx",[]),this.each(function(){var t=!0,i=null!=e&&e+"queueHooks",o=I.timers,s=Z.get(this);if(i)s[i]&&s[i].stop&&r(s[i]);else for(i in s)s[i]&&s[i].stop&&at.test(i)&&r(s[i]);for(i=o.length;i--;)o[i].elem!==this||null!=e&&o[i].queue!==e||(o[i].anim.stop(n),t=!1,o.splice(i,1));!t&&n||I.dequeue(this,e)})},finish:function(e){return!1!==e&&(e=e||"fx"),this.each(function(){var t,n=Z.get(this),r=n[e+"queue"],i=n[e+"queueHooks"],o=I.timers,s=r?r.length:0;for(n.finish=!0,I.queue(this,e,[]),i&&i.stop&&i.stop.call(this,!0),t=o.length;t--;)o[t].elem===this&&o[t].queue===e&&(o[t].anim.stop(!0),o.splice(t,1));for(t=0;t<s;t++)r[t]&&r[t].finish&&r[t].finish.call(this);delete n.finish})}}),I.each(["toggle","show","hide"],function(e,t){var n=I.fn[t];I.fn[t]=function(e,r,i){return null==e||"boolean"==typeof e?n.apply(this,arguments):this.animate(lt(t,!0),e,r,i)}}),I.each({slideDown:lt("show"),slideUp:lt("hide"),slideToggle:lt("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,t){I.fn[e]=function(e,n,r){return this.animate(t,e,n,r)}}),I.timers=[],I.fx.tick=function(){var e,t=0,n=I.timers;for(it=Date.now();t<n.length;t++)(e=n[t])()||n[t]!==e||n.splice(t--,1);n.length||I.fx.stop(),it=void 0},I.fx.timer=function(e){I.timers.push(e),I.fx.start()},I.fx.interval=13,I.fx.start=function(){ot||(ot=!0,ut())},I.fx.stop=function(){ot=null},I.fx.speeds={slow:600,fast:200,_default:400},I.fn.delay=function(e,t){return e=I.fx&&I.fx.speeds[e]||e,this.queue(t=t||"fx",function(t,n){var i=r.setTimeout(t,e);n.stop=function(){r.clearTimeout(i)}})},function(){var e=_.createElement("input"),t=_.createElement("select").appendChild(_.createElement("option"));e.type="checkbox",v.checkOn=""!==e.value,v.optSelected=t.selected,(e=_.createElement("input")).value="t",e.type="radio",v.radioValue="t"===e.value}();var dt,pt=I.expr.attrHandle;I.fn.extend({attr:function(e,t){return K(this,I.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each(function(){I.removeAttr(this,e)})}}),I.extend({attr:function(e,t,n){var r,i,o=e.nodeType;if(3!==o&&8!==o&&2!==o)return void 0===e.getAttribute?I.prop(e,t,n):(1===o&&I.isXMLDoc(e)||(i=I.attrHooks[t.toLowerCase()]||(I.expr.match.bool.test(t)?dt:void 0)),void 0!==n?null===n?void I.removeAttr(e,t):i&&"set"in i&&void 0!==(r=i.set(e,n,t))?r:(e.setAttribute(t,n+""),n):i&&"get"in i&&null!==(r=i.get(e,t))?r:null==(r=I.find.attr(e,t))?void 0:r)},attrHooks:{type:{set:function(e,t){if(!v.radioValue&&"radio"===t&&N(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}}},removeAttr:function(e,t){var n,r=0,i=t&&t.match(j);if(i&&1===e.nodeType)for(;n=i[r++];)e.removeAttribute(n)}}),dt={set:function(e,t,n){return!1===t?I.removeAttr(e,n):e.setAttribute(n,n),n}},I.each(I.expr.match.bool.source.match(/\w+/g),function(e,t){var n=pt[t]||I.find.attr;pt[t]=function(e,t,r){var i,o,s=t.toLowerCase();return r||(o=pt[s],pt[s]=i,i=null!=n(e,t,r)?s:null,pt[s]=o),i}});var gt=/^(?:input|select|textarea|button)$/i,vt=/^(?:a|area)$/i;function mt(e){return(e.match(j)||[]).join(" ")}function yt(e){return e.getAttribute&&e.getAttribute("class")||""}function _t(e){return Array.isArray(e)?e:"string"==typeof e&&e.match(j)||[]}I.fn.extend({prop:function(e,t){return K(this,I.prop,e,t,arguments.length>1)},removeProp:function(e){return this.each(function(){delete this[I.propFix[e]||e]})}}),I.extend({prop:function(e,t,n){var r,i,o=e.nodeType;if(3!==o&&8!==o&&2!==o)return 1===o&&I.isXMLDoc(e)||(i=I.propHooks[t=I.propFix[t]||t]),void 0!==n?i&&"set"in i&&void 0!==(r=i.set(e,n,t))?r:e[t]=n:i&&"get"in i&&null!==(r=i.get(e,t))?r:e[t]},propHooks:{tabIndex:{get:function(e){var t=I.find.attr(e,"tabindex");return t?parseInt(t,10):gt.test(e.nodeName)||vt.test(e.nodeName)&&e.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),v.optSelected||(I.propHooks.selected={get:function(e){return null},set:function(e){}}),I.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){I.propFix[this.toLowerCase()]=this}),I.fn.extend({addClass:function(e){var t,n,r,i,o,s,a,u=0;if(m(e))return this.each(function(t){I(this).addClass(e.call(this,t,yt(this)))});if((t=_t(e)).length)for(;n=this[u++];)if(i=yt(n),r=1===n.nodeType&&" "+mt(i)+" "){for(s=0;o=t[s++];)r.indexOf(" "+o+" ")<0&&(r+=o+" ");i!==(a=mt(r))&&n.setAttribute("class",a)}return this},removeClass:function(e){var t,n,r,i,o,s,a,u=0;if(m(e))return this.each(function(t){I(this).removeClass(e.call(this,t,yt(this)))});if(!arguments.length)return this.attr("class","");if((t=_t(e)).length)for(;n=this[u++];)if(i=yt(n),r=1===n.nodeType&&" "+mt(i)+" "){for(s=0;o=t[s++];)for(;r.indexOf(" "+o+" ")>-1;)r=r.replace(" "+o+" "," ");i!==(a=mt(r))&&n.setAttribute("class",a)}return this},toggleClass:function(e,t){var n=typeof e,r="string"===n||Array.isArray(e);return"boolean"==typeof t&&r?t?this.addClass(e):this.removeClass(e):m(e)?this.each(function(n){I(this).toggleClass(e.call(this,n,yt(this),t),t)}):this.each(function(){var t,i,o,s;if(r)for(i=0,o=I(this),s=_t(e);t=s[i++];)o.hasClass(t)?o.removeClass(t):o.addClass(t);else void 0!==e&&"boolean"!==n||((t=yt(this))&&Z.set(this,"__className__",t),this.setAttribute&&this.setAttribute("class",t||!1===e?"":Z.get(this,"__className__")||""))})},hasClass:function(e){var t,n,r=0;for(t=" "+e+" ";n=this[r++];)if(1===n.nodeType&&(" "+mt(yt(n))+" ").indexOf(t)>-1)return!0;return!1}});var bt=/\r/g;I.fn.extend({val:function(e){var t,n,r,i=this[0];return arguments.length?(r=m(e),this.each(function(n){var i;1===this.nodeType&&(null==(i=r?e.call(this,n,I(this).val()):e)?i="":"number"==typeof i?i+="":Array.isArray(i)&&(i=I.map(i,function(e){return null==e?"":e+""})),(t=I.valHooks[this.type]||I.valHooks[this.nodeName.toLowerCase()])&&"set"in t&&void 0!==t.set(this,i,"value")||(this.value=i))})):i?(t=I.valHooks[i.type]||I.valHooks[i.nodeName.toLowerCase()])&&"get"in t&&void 0!==(n=t.get(i,"value"))?n:"string"==typeof(n=i.value)?n.replace(bt,""):null==n?"":n:void 0}}),I.extend({valHooks:{option:{get:function(e){var t=I.find.attr(e,"value");return null!=t?t:mt(I.text(e))}},select:{get:function(e){var t,n,r,i=e.options,o=e.selectedIndex,s="select-one"===e.type,a=s?null:[],u=s?o+1:i.length;for(r=o<0?u:s?o:0;r<u;r++)if(((n=i[r]).selected||r===o)&&!n.disabled&&(!n.parentNode.disabled||!N(n.parentNode,"optgroup"))){if(t=I(n).val(),s)return t;a.push(t)}return a},set:function(e,t){for(var n,r,i=e.options,o=I.makeArray(t),s=i.length;s--;)((r=i[s]).selected=I.inArray(I.valHooks.option.get(r),o)>-1)&&(n=!0);return n||(e.selectedIndex=-1),o}}}}),I.each(["radio","checkbox"],function(){I.valHooks[this]={set:function(e,t){if(Array.isArray(t))return e.checked=I.inArray(I(e).val(),t)>-1}},v.checkOn||(I.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})}),v.focusin="onfocusin"in r;var wt=/^(?:focusinfocus|focusoutblur)$/,Tt=function(e){e.stopPropagation()};I.extend(I.event,{trigger:function(e,t,n,i){var o,s,a,u,c,l,h,f,p=[n||_],g=d.call(e,"type")?e.type:e,v=d.call(e,"namespace")?e.namespace.split("."):[];if(s=f=a=n=n||_,3!==n.nodeType&&8!==n.nodeType&&!wt.test(g+I.event.triggered)&&(g.indexOf(".")>-1&&(v=g.split("."),g=v.shift(),v.sort()),c=g.indexOf(":")<0&&"on"+g,(e=e[I.expando]?e:new I.Event(g,"object"==typeof e&&e)).isTrigger=i?2:3,e.namespace=v.join("."),e.rnamespace=e.namespace?new RegExp("(^|\\.)"+v.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,e.result=void 0,e.target||(e.target=n),t=null==t?[e]:I.makeArray(t,[e]),h=I.event.special[g]||{},i||!h.trigger||!1!==h.trigger.apply(n,t))){if(!i&&!h.noBubble&&!y(n)){for(wt.test((u=h.delegateType||g)+g)||(s=s.parentNode);s;s=s.parentNode)p.push(s),a=s;a===(n.ownerDocument||_)&&p.push(a.defaultView||a.parentWindow||r)}for(o=0;(s=p[o++])&&!e.isPropagationStopped();)f=s,e.type=o>1?u:h.bindType||g,(l=(Z.get(s,"events")||Object.create(null))[e.type]&&Z.get(s,"handle"))&&l.apply(s,t),(l=c&&s[c])&&l.apply&&Y(s)&&(e.result=l.apply(s,t),!1===e.result&&e.preventDefault());return e.type=g,i||e.isDefaultPrevented()||h._default&&!1!==h._default.apply(p.pop(),t)||!Y(n)||c&&m(n[g])&&!y(n)&&((a=n[c])&&(n[c]=null),I.event.triggered=g,e.isPropagationStopped()&&f.addEventListener(g,Tt),n[g](),e.isPropagationStopped()&&f.removeEventListener(g,Tt),I.event.triggered=void 0,a&&(n[c]=a)),e.result}},simulate:function(e,t,n){var r=I.extend(new I.Event,n,{type:e,isSimulated:!0});I.event.trigger(r,null,t)}}),I.fn.extend({trigger:function(e,t){return this.each(function(){I.event.trigger(e,t,this)})},triggerHandler:function(e,t){var n=this[0];if(n)return I.event.trigger(e,t,n,!0)}}),v.focusin||I.each({focus:"focusin",blur:"focusout"},function(e,t){var n=function(e){I.event.simulate(t,e.target,I.event.fix(e))};I.event.special[t]={setup:function(){var r=this.ownerDocument||this.document||this,i=Z.access(r,t);i||r.addEventListener(e,n,!0),Z.access(r,t,(i||0)+1)},teardown:function(){var r=this.ownerDocument||this.document||this,i=Z.access(r,t)-1;i?Z.access(r,t,i):(r.removeEventListener(e,n,!0),Z.remove(r,t))}}});var Et=r.location,It={guid:Date.now()},kt=/\?/;I.parseXML=function(e){var t,n;if(!e||"string"!=typeof e)return null;try{t=(new r.DOMParser).parseFromString(e,"text/xml")}catch(i){}return n=t&&t.getElementsByTagName("parsererror")[0],t&&!n||I.error("Invalid XML: "+(n?I.map(n.childNodes,function(e){return e.textContent}).join("\n"):e)),t};var Ct=/\[\]$/,St=/\r?\n/g,At=/^(?:submit|button|image|reset|file)$/i,xt=/^(?:input|select|textarea|keygen)/i;function Nt(e,t,n,r){var i;if(Array.isArray(t))I.each(t,function(t,i){n||Ct.test(e)?r(e,i):Nt(e+"["+("object"==typeof i&&null!=i?t:"")+"]",i,n,r)});else if(n||"object"!==T(t))r(e,t);else for(i in t)Nt(e+"["+i+"]",t[i],n,r)}I.param=function(e,t){var n,r=[],i=function(e,t){var n=m(t)?t():t;r[r.length]=encodeURIComponent(e)+"="+encodeURIComponent(null==n?"":n)};if(null==e)return"";if(Array.isArray(e)||e.jquery&&!I.isPlainObject(e))I.each(e,function(){i(this.name,this.value)});else for(n in e)Nt(n,e[n],t,i);return r.join("&")},I.fn.extend({serialize:function(){return I.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=I.prop(this,"elements");return e?I.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!I(this).is(":disabled")&&xt.test(this.nodeName)&&!At.test(e)&&(this.checked||!ve.test(e))}).map(function(e,t){var n=I(this).val();return null==n?null:Array.isArray(n)?I.map(n,function(e){return{name:t.name,value:e.replace(St,"\r\n")}}):{name:t.name,value:n.replace(St,"\r\n")}}).get()}});var Dt=/%20/g,Pt=/#.*$/,Ot=/([?&])_=[^&]*/,Rt=/^(.*?):[ \t]*([^\r\n]*)$/gm,Lt=/^(?:GET|HEAD)$/,Mt=/^\/\//,Ft={},jt={},qt="*/".concat("*"),Ut=_.createElement("a");function Vt(e){return function(t,n){"string"!=typeof t&&(n=t,t="*");var r,i=0,o=t.toLowerCase().match(j)||[];if(m(n))for(;r=o[i++];)"+"===r[0]?(r=r.slice(1)||"*",(e[r]=e[r]||[]).unshift(n)):(e[r]=e[r]||[]).push(n)}}function Bt(e,t,n,r){var i={},o=e===jt;function s(a){var u;return i[a]=!0,I.each(e[a]||[],function(e,a){var c=a(t,n,r);return"string"!=typeof c||o||i[c]?o?!(u=c):void 0:(t.dataTypes.unshift(c),s(c),!1)}),u}return s(t.dataTypes[0])||!i["*"]&&s("*")}function Ht(e,t){var n,r,i=I.ajaxSettings.flatOptions||{};for(n in t)void 0!==t[n]&&((i[n]?e:r||(r={}))[n]=t[n]);return r&&I.extend(!0,e,r),e}Ut.href=Et.href,I.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Et.href,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(Et.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":qt,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":I.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?Ht(Ht(e,I.ajaxSettings),t):Ht(I.ajaxSettings,e)},ajaxPrefilter:Vt(Ft),ajaxTransport:Vt(jt),ajax:function(e,t){"object"==typeof e&&(t=e,e=void 0);var n,i,o,s,a,u,c,l,h,f,d=I.ajaxSetup({},t=t||{}),p=d.context||d,g=d.context&&(p.nodeType||p.jquery)?I(p):I.event,v=I.Deferred(),m=I.Callbacks("once memory"),y=d.statusCode||{},b={},w={},T="canceled",E={readyState:0,getResponseHeader:function(e){var t;if(c){if(!s)for(s={};t=Rt.exec(o);)s[t[1].toLowerCase()+" "]=(s[t[1].toLowerCase()+" "]||[]).concat(t[2]);t=s[e.toLowerCase()+" "]}return null==t?null:t.join(", ")},getAllResponseHeaders:function(){return c?o:null},setRequestHeader:function(e,t){return null==c&&(e=w[e.toLowerCase()]=w[e.toLowerCase()]||e,b[e]=t),this},overrideMimeType:function(e){return null==c&&(d.mimeType=e),this},statusCode:function(e){var t;if(e)if(c)E.always(e[E.status]);else for(t in e)y[t]=[y[t],e[t]];return this},abort:function(e){var t=e||T;return n&&n.abort(t),k(0,t),this}};if(v.promise(E),d.url=((e||d.url||Et.href)+"").replace(Mt,Et.protocol+"//"),d.type=t.method||t.type||d.method||d.type,d.dataTypes=(d.dataType||"*").toLowerCase().match(j)||[""],null==d.crossDomain){u=_.createElement("a");try{u.href=d.url,u.href=u.href,d.crossDomain=Ut.protocol+"//"+Ut.host!=u.protocol+"//"+u.host}catch(C){d.crossDomain=!0}}if(d.data&&d.processData&&"string"!=typeof d.data&&(d.data=I.param(d.data,d.traditional)),Bt(Ft,d,t,E),c)return E;for(h in(l=I.event&&d.global)&&0==I.active++&&I.event.trigger("ajaxStart"),d.type=d.type.toUpperCase(),d.hasContent=!Lt.test(d.type),i=d.url.replace(Pt,""),d.hasContent?d.data&&d.processData&&0===(d.contentType||"").indexOf("application/x-www-form-urlencoded")&&(d.data=d.data.replace(Dt,"+")):(f=d.url.slice(i.length),d.data&&(d.processData||"string"==typeof d.data)&&(i+=(kt.test(i)?"&":"?")+d.data,delete d.data),!1===d.cache&&(i=i.replace(Ot,"$1"),f=(kt.test(i)?"&":"?")+"_="+It.guid+++f),d.url=i+f),d.ifModified&&(I.lastModified[i]&&E.setRequestHeader("If-Modified-Since",I.lastModified[i]),I.etag[i]&&E.setRequestHeader("If-None-Match",I.etag[i])),(d.data&&d.hasContent&&!1!==d.contentType||t.contentType)&&E.setRequestHeader("Content-Type",d.contentType),E.setRequestHeader("Accept",d.dataTypes[0]&&d.accepts[d.dataTypes[0]]?d.accepts[d.dataTypes[0]]+("*"!==d.dataTypes[0]?", "+qt+"; q=0.01":""):d.accepts["*"]),d.headers)E.setRequestHeader(h,d.headers[h]);if(d.beforeSend&&(!1===d.beforeSend.call(p,E,d)||c))return E.abort();if(T="abort",m.add(d.complete),E.done(d.success),E.fail(d.error),n=Bt(jt,d,t,E)){if(E.readyState=1,l&&g.trigger("ajaxSend",[E,d]),c)return E;d.async&&d.timeout>0&&(a=r.setTimeout(function(){E.abort("timeout")},d.timeout));try{c=!1,n.send(b,k)}catch(C){if(c)throw C;k(-1,C)}}else k(-1,"No Transport");function k(e,t,s,u){var h,f,_,b,w,T=t;c||(c=!0,a&&r.clearTimeout(a),n=void 0,o=u||"",E.readyState=e>0?4:0,h=e>=200&&e<300||304===e,s&&(b=function(e,t,n){for(var r,i,o,s,a=e.contents,u=e.dataTypes;"*"===u[0];)u.shift(),void 0===r&&(r=e.mimeType||t.getResponseHeader("Content-Type"));if(r)for(i in a)if(a[i]&&a[i].test(r)){u.unshift(i);break}if(u[0]in n)o=u[0];else{for(i in n){if(!u[0]||e.converters[i+" "+u[0]]){o=i;break}s||(s=i)}o=o||s}if(o)return o!==u[0]&&u.unshift(o),n[o]}(d,E,s)),!h&&I.inArray("script",d.dataTypes)>-1&&I.inArray("json",d.dataTypes)<0&&(d.converters["text script"]=function(){}),b=function(e,t,n,r){var i,o,s,a,u,c={},l=e.dataTypes.slice();if(l[1])for(s in e.converters)c[s.toLowerCase()]=e.converters[s];for(o=l.shift();o;)if(e.responseFields[o]&&(n[e.responseFields[o]]=t),!u&&r&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),u=o,o=l.shift())if("*"===o)o=u;else if("*"!==u&&u!==o){if(!(s=c[u+" "+o]||c["* "+o]))for(i in c)if((a=i.split(" "))[1]===o&&(s=c[u+" "+a[0]]||c["* "+a[0]])){!0===s?s=c[i]:!0!==c[i]&&(o=a[0],l.unshift(a[1]));break}if(!0!==s)if(s&&e.throws)t=s(t);else try{t=s(t)}catch(C){return{state:"parsererror",error:s?C:"No conversion from "+u+" to "+o}}}return{state:"success",data:t}}(d,b,E,h),h?(d.ifModified&&((w=E.getResponseHeader("Last-Modified"))&&(I.lastModified[i]=w),(w=E.getResponseHeader("etag"))&&(I.etag[i]=w)),204===e||"HEAD"===d.type?T="nocontent":304===e?T="notmodified":(T=b.state,f=b.data,h=!(_=b.error))):(_=T,!e&&T||(T="error",e<0&&(e=0))),E.status=e,E.statusText=(t||T)+"",h?v.resolveWith(p,[f,T,E]):v.rejectWith(p,[E,T,_]),E.statusCode(y),y=void 0,l&&g.trigger(h?"ajaxSuccess":"ajaxError",[E,d,h?f:_]),m.fireWith(p,[E,T]),l&&(g.trigger("ajaxComplete",[E,d]),--I.active||I.event.trigger("ajaxStop")))}return E},getJSON:function(e,t,n){return I.get(e,t,n,"json")},getScript:function(e,t){return I.get(e,void 0,t,"script")}}),I.each(["get","post"],function(e,t){I[t]=function(e,n,r,i){return m(n)&&(i=i||r,r=n,n=void 0),I.ajax(I.extend({url:e,type:t,dataType:i,data:n,success:r},I.isPlainObject(e)&&e))}}),I.ajaxPrefilter(function(e){var t;for(t in e.headers)"content-type"===t.toLowerCase()&&(e.contentType=e.headers[t]||"")}),I._evalUrl=function(e,t,n){return I.ajax({url:e,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(e){I.globalEval(e,t,n)}})},I.fn.extend({wrapAll:function(e){var t;return this[0]&&(m(e)&&(e=e.call(this[0])),t=I(e,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){for(var e=this;e.firstElementChild;)e=e.firstElementChild;return e}).append(this)),this},wrapInner:function(e){return m(e)?this.each(function(t){I(this).wrapInner(e.call(this,t))}):this.each(function(){var t=I(this),n=t.contents();n.length?n.wrapAll(e):t.append(e)})},wrap:function(e){var t=m(e);return this.each(function(n){I(this).wrapAll(t?e.call(this,n):e)})},unwrap:function(e){return this.parent(e).not("body").each(function(){I(this).replaceWith(this.childNodes)}),this}}),I.expr.pseudos.hidden=function(e){return!I.expr.pseudos.visible(e)},I.expr.pseudos.visible=function(e){return!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)},I.ajaxSettings.xhr=function(){try{return new r.XMLHttpRequest}catch(e){}};var Wt={0:200,1223:204},Kt=I.ajaxSettings.xhr();v.cors=!!Kt&&"withCredentials"in Kt,v.ajax=Kt=!!Kt,I.ajaxTransport(function(e){var t,n;if(v.cors||Kt&&!e.crossDomain)return{send:function(i,o){var s,a=e.xhr();if(a.open(e.type,e.url,e.async,e.username,e.password),e.xhrFields)for(s in e.xhrFields)a[s]=e.xhrFields[s];for(s in e.mimeType&&a.overrideMimeType&&a.overrideMimeType(e.mimeType),e.crossDomain||i["X-Requested-With"]||(i["X-Requested-With"]="XMLHttpRequest"),i)a.setRequestHeader(s,i[s]);t=function(e){return function(){t&&(t=n=a.onload=a.onerror=a.onabort=a.ontimeout=a.onreadystatechange=null,"abort"===e?a.abort():"error"===e?"number"!=typeof a.status?o(0,"error"):o(a.status,a.statusText):o(Wt[a.status]||a.status,a.statusText,"text"!==(a.responseType||"text")||"string"!=typeof a.responseText?{binary:a.response}:{text:a.responseText},a.getAllResponseHeaders()))}},a.onload=t(),n=a.onerror=a.ontimeout=t("error"),void 0!==a.onabort?a.onabort=n:a.onreadystatechange=function(){4===a.readyState&&r.setTimeout(function(){t&&n()})},t=t("abort");try{a.send(e.hasContent&&e.data||null)}catch(u){if(t)throw u}},abort:function(){t&&t()}}}),I.ajaxPrefilter(function(e){e.crossDomain&&(e.contents.script=!1)}),I.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(e){return I.globalEval(e),e}}}),I.ajaxPrefilter("script",function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type="GET")}),I.ajaxTransport("script",function(e){var t,n;if(e.crossDomain||e.scriptAttrs)return{send:function(r,i){t=I("<script>").attr(e.scriptAttrs||{}).prop({charset:e.scriptCharset,src:e.url}).on("load error",n=function(e){t.remove(),n=null,e&&i("error"===e.type?404:200,e.type)}),_.head.appendChild(t[0])},abort:function(){n&&n()}}});var zt,Gt=[],Qt=/(=)\?(?=&|$)|\?\?/;I.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=Gt.pop()||I.expando+"_"+It.guid++;return this[e]=!0,e}}),I.ajaxPrefilter("json jsonp",function(e,t,n){var i,o,s,a=!1!==e.jsonp&&(Qt.test(e.url)?"url":"string"==typeof e.data&&0===(e.contentType||"").indexOf("application/x-www-form-urlencoded")&&Qt.test(e.data)&&"data");if(a||"jsonp"===e.dataTypes[0])return i=e.jsonpCallback=m(e.jsonpCallback)?e.jsonpCallback():e.jsonpCallback,a?e[a]=e[a].replace(Qt,"$1"+i):!1!==e.jsonp&&(e.url+=(kt.test(e.url)?"&":"?")+e.jsonp+"="+i),e.converters["script json"]=function(){return s||I.error(i+" was not called"),s[0]},e.dataTypes[0]="json",o=r[i],r[i]=function(){s=arguments},n.always(function(){void 0===o?I(r).removeProp(i):r[i]=o,e[i]&&(e.jsonpCallback=t.jsonpCallback,Gt.push(i)),s&&m(o)&&o(s[0]),s=o=void 0}),"script"}),v.createHTMLDocument=((zt=_.implementation.createHTMLDocument("").body).innerHTML="<form></form><form></form>",2===zt.childNodes.length),I.parseHTML=function(e,t,n){return"string"!=typeof e?[]:("boolean"==typeof t&&(n=t,t=!1),t||(v.createHTMLDocument?((r=(t=_.implementation.createHTMLDocument("")).createElement("base")).href=_.location.href,t.head.appendChild(r)):t=_),o=!n&&[],(i=D.exec(e))?[t.createElement(i[1])]:(i=Ee([e],t,o),o&&o.length&&I(o).remove(),I.merge([],i.childNodes)));var r,i,o},I.fn.load=function(e,t,n){var r,i,o,s=this,a=e.indexOf(" ");return a>-1&&(r=mt(e.slice(a)),e=e.slice(0,a)),m(t)?(n=t,t=void 0):t&&"object"==typeof t&&(i="POST"),s.length>0&&I.ajax({url:e,type:i||"GET",dataType:"html",data:t}).done(function(e){o=arguments,s.html(r?I("<div>").append(I.parseHTML(e)).find(r):e)}).always(n&&function(e,t){s.each(function(){n.apply(this,o||[e.responseText,t,e])})}),this},I.expr.pseudos.animated=function(e){return I.grep(I.timers,function(t){return e===t.elem}).length},I.offset={setOffset:function(e,t,n){var r,i,o,s,a,u,c=I.css(e,"position"),l=I(e),h={};"static"===c&&(e.style.position="relative"),a=l.offset(),o=I.css(e,"top"),u=I.css(e,"left"),("absolute"===c||"fixed"===c)&&(o+u).indexOf("auto")>-1?(s=(r=l.position()).top,i=r.left):(s=parseFloat(o)||0,i=parseFloat(u)||0),m(t)&&(t=t.call(e,n,I.extend({},a))),null!=t.top&&(h.top=t.top-a.top+s),null!=t.left&&(h.left=t.left-a.left+i),"using"in t?t.using.call(e,h):l.css(h)}},I.fn.extend({offset:function(e){if(arguments.length)return void 0===e?this:this.each(function(t){I.offset.setOffset(this,e,t)});var t,n,r=this[0];return r?r.getClientRects().length?{top:(t=r.getBoundingClientRect()).top+(n=r.ownerDocument.defaultView).pageYOffset,left:t.left+n.pageXOffset}:{top:0,left:0}:void 0},position:function(){if(this[0]){var e,t,n,r=this[0],i={top:0,left:0};if("fixed"===I.css(r,"position"))t=r.getBoundingClientRect();else{for(t=this.offset(),n=r.ownerDocument,e=r.offsetParent||n.documentElement;e&&(e===n.body||e===n.documentElement)&&"static"===I.css(e,"position");)e=e.parentNode;e&&e!==r&&1===e.nodeType&&((i=I(e).offset()).top+=I.css(e,"borderTopWidth",!0),i.left+=I.css(e,"borderLeftWidth",!0))}return{top:t.top-i.top-I.css(r,"marginTop",!0),left:t.left-i.left-I.css(r,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var e=this.offsetParent;e&&"static"===I.css(e,"position");)e=e.offsetParent;return e||se})}}),I.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,t){var n="pageYOffset"===t;I.fn[e]=function(r){return K(this,function(e,r,i){var o;if(y(e)?o=e:9===e.nodeType&&(o=e.defaultView),void 0===i)return o?o[t]:e[r];o?o.scrollTo(n?o.pageXOffset:i,n?i:o.pageYOffset):e[r]=i},e,r,arguments.length)}}),I.each(["top","left"],function(e,t){I.cssHooks[t]=Ke(v.pixelPosition,function(e,n){if(n)return n=We(e,t),Ue.test(n)?I(e).position()[t]+"px":n})}),I.each({Height:"height",Width:"width"},function(e,t){I.each({padding:"inner"+e,content:t,"":"outer"+e},function(n,r){I.fn[r]=function(i,o){var s=arguments.length&&(n||"boolean"!=typeof i),a=n||(!0===i||!0===o?"margin":"border");return K(this,function(t,n,i){var o;return y(t)?0===r.indexOf("outer")?t["inner"+e]:t.document.documentElement["client"+e]:9===t.nodeType?(o=t.documentElement,Math.max(t.body["scroll"+e],o["scroll"+e],t.body["offset"+e],o["offset"+e],o["client"+e])):void 0===i?I.css(t,n,a):I.style(t,n,i,a)},t,s?i:void 0,s)}})}),I.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){I.fn[t]=function(e){return this.on(t,e)}}),I.fn.extend({bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,n,r){return this.on(t,e,n,r)},undelegate:function(e,t,n){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",n)},hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)}}),I.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(e,t){I.fn[t]=function(e,n){return arguments.length>0?this.on(t,null,e,n):this.trigger(t)}});var $t=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;I.proxy=function(e,t){var n,r,i;if("string"==typeof t&&(n=e[t],t=e,e=n),m(e))return r=a.call(arguments,2),(i=function(){return e.apply(t||this,r.concat(a.call(arguments)))}).guid=e.guid=e.guid||I.guid++,i},I.holdReady=function(e){e?I.readyWait++:I.ready(!0)},I.isArray=Array.isArray,I.parseJSON=JSON.parse,I.nodeName=N,I.isFunction=m,I.isWindow=y,I.camelCase=$,I.type=T,I.now=Date.now,I.isNumeric=function(e){var t=I.type(e);return("number"===t||"string"===t)&&!isNaN(e-parseFloat(e))},I.trim=function(e){return null==e?"":(e+"").replace($t,"")},void 0===(n=(function(){return I}).apply(t,[]))||(e.exports=n);var Yt=r.jQuery,Xt=r.$;return I.noConflict=function(e){return r.$===I&&(r.$=Xt),e&&r.jQuery===I&&(r.jQuery=Yt),I},void 0===i&&(r.jQuery=r.$=I),I})},277:()=>{"use strict";!function(e){const t=e.performance;function n(e){t&&t.mark&&t.mark(e)}function r(e,n){t&&t.measure&&t.measure(e,n)}n("Zone");const i=e.__Zone_symbol_prefix||"__zone_symbol__";function o(e){return i+e}const s=!0===e[o("forceDuplicateZoneCheck")];if(e.Zone){if(s||"function"!=typeof e.Zone.__symbol__)throw new Error("Zone already loaded.");return e.Zone}let a=(()=>{class t{constructor(e,t){this._parent=e,this._name=t?t.name||"unnamed":"<root>",this._properties=t&&t.properties||{},this._zoneDelegate=new c(this,this._parent&&this._parent._zoneDelegate,t)}static assertZonePatched(){if(e.Promise!==x.ZoneAwarePromise)throw new Error("Zone.js has detected that ZoneAwarePromise `(window|global).Promise` has been overwritten.\nMost likely cause is that a Promise polyfill has been loaded after Zone.js (Polyfilling Promise api is not necessary when zone.js is loaded. If you must load one, do so before loading zone.js.)")}static get root(){let e=t.current;for(;e.parent;)e=e.parent;return e}static get current(){return D.zone}static get currentTask(){return P}static __load_patch(i,o,a=!1){if(x.hasOwnProperty(i)){if(!a&&s)throw Error("Already loaded patch: "+i)}else if(!e["__Zone_disable_"+i]){const s="Zone:"+i;n(s),x[i]=o(e,t,N),r(s,s)}}get parent(){return this._parent}get name(){return this._name}get(e){const t=this.getZoneWith(e);if(t)return t._properties[e]}getZoneWith(e){let t=this;for(;t;){if(t._properties.hasOwnProperty(e))return t;t=t._parent}return null}fork(e){if(!e)throw new Error("ZoneSpec required!");return this._zoneDelegate.fork(this,e)}wrap(e,t){if("function"!=typeof e)throw new Error("Expecting function got: "+e);const n=this._zoneDelegate.intercept(this,e,t),r=this;return function(){return r.runGuarded(n,this,arguments,t)}}run(e,t,n,r){D={parent:D,zone:this};try{return this._zoneDelegate.invoke(this,e,t,n,r)}finally{D=D.parent}}runGuarded(e,t=null,n,r){D={parent:D,zone:this};try{try{return this._zoneDelegate.invoke(this,e,t,n,r)}catch(i){if(this._zoneDelegate.handleError(this,i))throw i}}finally{D=D.parent}}runTask(e,t,n){if(e.zone!=this)throw new Error("A task can only be run in the zone of creation! (Creation: "+(e.zone||_).name+"; Execution: "+this.name+")");if(e.state===b&&(e.type===A||e.type===S))return;const r=e.state!=E;r&&e._transitionTo(E,T),e.runCount++;const i=P;P=e,D={parent:D,zone:this};try{e.type==S&&e.data&&!e.data.isPeriodic&&(e.cancelFn=void 0);try{return this._zoneDelegate.invokeTask(this,e,t,n)}catch(o){if(this._zoneDelegate.handleError(this,o))throw o}}finally{e.state!==b&&e.state!==k&&(e.type==A||e.data&&e.data.isPeriodic?r&&e._transitionTo(T,E):(e.runCount=0,this._updateTaskCount(e,-1),r&&e._transitionTo(b,E,b))),D=D.parent,P=i}}scheduleTask(e){if(e.zone&&e.zone!==this){let t=this;for(;t;){if(t===e.zone)throw Error(`can not reschedule task to ${this.name} which is descendants of the original zone ${e.zone.name}`);t=t.parent}}e._transitionTo(w,b);const t=[];e._zoneDelegates=t,e._zone=this;try{e=this._zoneDelegate.scheduleTask(this,e)}catch(n){throw e._transitionTo(k,w,b),this._zoneDelegate.handleError(this,n),n}return e._zoneDelegates===t&&this._updateTaskCount(e,1),e.state==w&&e._transitionTo(T,w),e}scheduleMicroTask(e,t,n,r){return this.scheduleTask(new l(C,e,t,n,r,void 0))}scheduleMacroTask(e,t,n,r,i){return this.scheduleTask(new l(S,e,t,n,r,i))}scheduleEventTask(e,t,n,r,i){return this.scheduleTask(new l(A,e,t,n,r,i))}cancelTask(e){if(e.zone!=this)throw new Error("A task can only be cancelled in the zone of creation! (Creation: "+(e.zone||_).name+"; Execution: "+this.name+")");e._transitionTo(I,T,E);try{this._zoneDelegate.cancelTask(this,e)}catch(t){throw e._transitionTo(k,I),this._zoneDelegate.handleError(this,t),t}return this._updateTaskCount(e,-1),e._transitionTo(b,I),e.runCount=0,e}_updateTaskCount(e,t){const n=e._zoneDelegates;-1==t&&(e._zoneDelegates=null);for(let r=0;r<n.length;r++)n[r]._updateTaskCount(e.type,t)}}return t.__symbol__=o,t})();const u={name:"",onHasTask:(e,t,n,r)=>e.hasTask(n,r),onScheduleTask:(e,t,n,r)=>e.scheduleTask(n,r),onInvokeTask:(e,t,n,r,i,o)=>e.invokeTask(n,r,i,o),onCancelTask:(e,t,n,r)=>e.cancelTask(n,r)};class c{constructor(e,t,n){this._taskCounts={microTask:0,macroTask:0,eventTask:0},this.zone=e,this._parentDelegate=t,this._forkZS=n&&(n&&n.onFork?n:t._forkZS),this._forkDlgt=n&&(n.onFork?t:t._forkDlgt),this._forkCurrZone=n&&(n.onFork?this.zone:t._forkCurrZone),this._interceptZS=n&&(n.onIntercept?n:t._interceptZS),this._interceptDlgt=n&&(n.onIntercept?t:t._interceptDlgt),this._interceptCurrZone=n&&(n.onIntercept?this.zone:t._interceptCurrZone),this._invokeZS=n&&(n.onInvoke?n:t._invokeZS),this._invokeDlgt=n&&(n.onInvoke?t:t._invokeDlgt),this._invokeCurrZone=n&&(n.onInvoke?this.zone:t._invokeCurrZone),this._handleErrorZS=n&&(n.onHandleError?n:t._handleErrorZS),this._handleErrorDlgt=n&&(n.onHandleError?t:t._handleErrorDlgt),this._handleErrorCurrZone=n&&(n.onHandleError?this.zone:t._handleErrorCurrZone),this._scheduleTaskZS=n&&(n.onScheduleTask?n:t._scheduleTaskZS),this._scheduleTaskDlgt=n&&(n.onScheduleTask?t:t._scheduleTaskDlgt),this._scheduleTaskCurrZone=n&&(n.onScheduleTask?this.zone:t._scheduleTaskCurrZone),this._invokeTaskZS=n&&(n.onInvokeTask?n:t._invokeTaskZS),this._invokeTaskDlgt=n&&(n.onInvokeTask?t:t._invokeTaskDlgt),this._invokeTaskCurrZone=n&&(n.onInvokeTask?this.zone:t._invokeTaskCurrZone),this._cancelTaskZS=n&&(n.onCancelTask?n:t._cancelTaskZS),this._cancelTaskDlgt=n&&(n.onCancelTask?t:t._cancelTaskDlgt),this._cancelTaskCurrZone=n&&(n.onCancelTask?this.zone:t._cancelTaskCurrZone),this._hasTaskZS=null,this._hasTaskDlgt=null,this._hasTaskDlgtOwner=null,this._hasTaskCurrZone=null;const r=n&&n.onHasTask;(r||t&&t._hasTaskZS)&&(this._hasTaskZS=r?n:u,this._hasTaskDlgt=t,this._hasTaskDlgtOwner=this,this._hasTaskCurrZone=e,n.onScheduleTask||(this._scheduleTaskZS=u,this._scheduleTaskDlgt=t,this._scheduleTaskCurrZone=this.zone),n.onInvokeTask||(this._invokeTaskZS=u,this._invokeTaskDlgt=t,this._invokeTaskCurrZone=this.zone),n.onCancelTask||(this._cancelTaskZS=u,this._cancelTaskDlgt=t,this._cancelTaskCurrZone=this.zone))}fork(e,t){return this._forkZS?this._forkZS.onFork(this._forkDlgt,this.zone,e,t):new a(e,t)}intercept(e,t,n){return this._interceptZS?this._interceptZS.onIntercept(this._interceptDlgt,this._interceptCurrZone,e,t,n):t}invoke(e,t,n,r,i){return this._invokeZS?this._invokeZS.onInvoke(this._invokeDlgt,this._invokeCurrZone,e,t,n,r,i):t.apply(n,r)}handleError(e,t){return!this._handleErrorZS||this._handleErrorZS.onHandleError(this._handleErrorDlgt,this._handleErrorCurrZone,e,t)}scheduleTask(e,t){let n=t;if(this._scheduleTaskZS)this._hasTaskZS&&n._zoneDelegates.push(this._hasTaskDlgtOwner),n=this._scheduleTaskZS.onScheduleTask(this._scheduleTaskDlgt,this._scheduleTaskCurrZone,e,t),n||(n=t);else if(t.scheduleFn)t.scheduleFn(t);else{if(t.type!=C)throw new Error("Task is missing scheduleFn.");m(t)}return n}invokeTask(e,t,n,r){return this._invokeTaskZS?this._invokeTaskZS.onInvokeTask(this._invokeTaskDlgt,this._invokeTaskCurrZone,e,t,n,r):t.callback.apply(n,r)}cancelTask(e,t){let n;if(this._cancelTaskZS)n=this._cancelTaskZS.onCancelTask(this._cancelTaskDlgt,this._cancelTaskCurrZone,e,t);else{if(!t.cancelFn)throw Error("Task is not cancelable");n=t.cancelFn(t)}return n}hasTask(e,t){try{this._hasTaskZS&&this._hasTaskZS.onHasTask(this._hasTaskDlgt,this._hasTaskCurrZone,e,t)}catch(n){this.handleError(e,n)}}_updateTaskCount(e,t){const n=this._taskCounts,r=n[e],i=n[e]=r+t;if(i<0)throw new Error("More tasks executed then were scheduled.");0!=r&&0!=i||this.hasTask(this.zone,{microTask:n.microTask>0,macroTask:n.macroTask>0,eventTask:n.eventTask>0,change:e})}}class l{constructor(t,n,r,i,o,s){if(this._zone=null,this.runCount=0,this._zoneDelegates=null,this._state="notScheduled",this.type=t,this.source=n,this.data=i,this.scheduleFn=o,this.cancelFn=s,!r)throw new Error("callback is not defined");this.callback=r;const a=this;this.invoke=t===A&&i&&i.useG?l.invokeTask:function(){return l.invokeTask.call(e,a,this,arguments)}}static invokeTask(e,t,n){e||(e=this),O++;try{return e.runCount++,e.zone.runTask(e,t,n)}finally{1==O&&y(),O--}}get zone(){return this._zone}get state(){return this._state}cancelScheduleRequest(){this._transitionTo(b,w)}_transitionTo(e,t,n){if(this._state!==t&&this._state!==n)throw new Error(`${this.type} '${this.source}': can not transition to '${e}', expecting state '${t}'${n?" or '"+n+"'":""}, was '${this._state}'.`);this._state=e,e==b&&(this._zoneDelegates=null)}toString(){return this.data&&void 0!==this.data.handleId?this.data.handleId.toString():Object.prototype.toString.call(this)}toJSON(){return{type:this.type,state:this.state,source:this.source,zone:this.zone.name,runCount:this.runCount}}}const h=o("setTimeout"),f=o("Promise"),d=o("then");let p,g=[],v=!1;function m(t){if(0===O&&0===g.length)if(p||e[f]&&(p=e[f].resolve(0)),p){let e=p[d];e||(e=p.then),e.call(p,y)}else e[h](y,0);t&&g.push(t)}function y(){if(!v){for(v=!0;g.length;){const t=g;g=[];for(let n=0;n<t.length;n++){const r=t[n];try{r.zone.runTask(r,null,null)}catch(e){N.onUnhandledError(e)}}}N.microtaskDrainDone(),v=!1}}const _={name:"NO ZONE"},b="notScheduled",w="scheduling",T="scheduled",E="running",I="canceling",k="unknown",C="microTask",S="macroTask",A="eventTask",x={},N={symbol:o,currentZoneFrame:()=>D,onUnhandledError:R,microtaskDrainDone:R,scheduleMicroTask:m,showUncaughtError:()=>!a[o("ignoreConsoleErrorUncaughtError")],patchEventTarget:()=>[],patchOnProperties:R,patchMethod:()=>R,bindArguments:()=>[],patchThen:()=>R,patchMacroTask:()=>R,patchEventPrototype:()=>R,isIEOrEdge:()=>!1,getGlobalObjects:()=>{},ObjectDefineProperty:()=>R,ObjectGetOwnPropertyDescriptor:()=>{},ObjectCreate:()=>{},ArraySlice:()=>[],patchClass:()=>R,wrapWithCurrentZone:()=>R,filterProperties:()=>[],attachOriginToPatched:()=>R,_redefineProperty:()=>R,patchCallbacks:()=>R};let D={parent:null,zone:new a(null,null)},P=null,O=0;function R(){}r("Zone","Zone"),e.Zone=a}("undefined"!=typeof window&&window||"undefined"!=typeof self&&self||global);const e=Object.getOwnPropertyDescriptor,t=Object.defineProperty,n=Object.getPrototypeOf,r=Object.create,i=Array.prototype.slice,o="addEventListener",s="removeEventListener",a=Zone.__symbol__(o),u=Zone.__symbol__(s),c="true",l="false",h=Zone.__symbol__("");function f(e,t){return Zone.current.wrap(e,t)}function d(e,t,n,r,i){return Zone.current.scheduleMacroTask(e,t,n,r,i)}const p=Zone.__symbol__,g="undefined"!=typeof window,v=g?window:void 0,m=g&&v||"object"==typeof self&&self||global,y=[null];function _(e,t){for(let n=e.length-1;n>=0;n--)"function"==typeof e[n]&&(e[n]=f(e[n],t+"_"+n));return e}function b(e){return!e||!1!==e.writable&&!("function"==typeof e.get&&void 0===e.set)}const w="undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope,T=!("nw"in m)&&void 0!==m.process&&"[object process]"==={}.toString.call(m.process),E=!T&&!w&&!(!g||!v.HTMLElement),I=void 0!==m.process&&"[object process]"==={}.toString.call(m.process)&&!w&&!(!g||!v.HTMLElement),k={},C=function(e){if(!(e=e||m.event))return;let t=k[e.type];t||(t=k[e.type]=p("ON_PROPERTY"+e.type));const n=this||e.target||m,r=n[t];let i;if(E&&n===v&&"error"===e.type){const t=e;i=r&&r.call(this,t.message,t.filename,t.lineno,t.colno,t.error),!0===i&&e.preventDefault()}else i=r&&r.apply(this,arguments),null==i||i||e.preventDefault();return i};function S(n,r,i){let o=e(n,r);if(!o&&i&&e(i,r)&&(o={enumerable:!0,configurable:!0}),!o||!o.configurable)return;const s=p("on"+r+"patched");if(n.hasOwnProperty(s)&&n[s])return;delete o.writable,delete o.value;const a=o.get,u=o.set,c=r.substr(2);let l=k[c];l||(l=k[c]=p("ON_PROPERTY"+c)),o.set=function(e){let t=this;t||n!==m||(t=m),t&&(t[l]&&t.removeEventListener(c,C),u&&u.apply(t,y),"function"==typeof e?(t[l]=e,t.addEventListener(c,C,!1)):t[l]=null)},o.get=function(){let e=this;if(e||n!==m||(e=m),!e)return null;const t=e[l];if(t)return t;if(a){let t=a&&a.call(this);if(t)return o.set.call(this,t),"function"==typeof e.removeAttribute&&e.removeAttribute(r),t}return null},t(n,r,o),n[s]=!0}function A(e,t,n){if(t)for(let r=0;r<t.length;r++)S(e,"on"+t[r],n);else{const t=[];for(const n in e)"on"==n.substr(0,2)&&t.push(n);for(let r=0;r<t.length;r++)S(e,t[r],n)}}const x=p("originalInstance");function N(e){const n=m[e];if(!n)return;m[p(e)]=n,m[e]=function(){const t=_(arguments,e);switch(t.length){case 0:this[x]=new n;break;case 1:this[x]=new n(t[0]);break;case 2:this[x]=new n(t[0],t[1]);break;case 3:this[x]=new n(t[0],t[1],t[2]);break;case 4:this[x]=new n(t[0],t[1],t[2],t[3]);break;default:throw new Error("Arg list too long.")}},O(m[e],n);const r=new n(function(){});let i;for(i in r)"XMLHttpRequest"===e&&"responseBlob"===i||function(n){"function"==typeof r[n]?m[e].prototype[n]=function(){return this[x][n].apply(this[x],arguments)}:t(m[e].prototype,n,{set:function(t){"function"==typeof t?(this[x][n]=f(t,e+"."+n),O(this[x][n],t)):this[x][n]=t},get:function(){return this[x][n]}})}(i);for(i in n)"prototype"!==i&&n.hasOwnProperty(i)&&(m[e][i]=n[i])}function D(t,r,i){let o=t;for(;o&&!o.hasOwnProperty(r);)o=n(o);!o&&t[r]&&(o=t);const s=p(r);let a=null;if(o&&(!(a=o[s])||!o.hasOwnProperty(s))&&(a=o[s]=o[r],b(o&&e(o,r)))){const e=i(a,s,r);o[r]=function(){return e(this,arguments)},O(o[r],a)}return a}function P(e,t,n){let r=null;function i(e){const t=e.data;return t.args[t.cbIdx]=function(){e.invoke.apply(this,arguments)},r.apply(t.target,t.args),e}r=D(e,t,e=>function(t,r){const o=n(t,r);return o.cbIdx>=0&&"function"==typeof r[o.cbIdx]?d(o.name,r[o.cbIdx],o,i):e.apply(t,r)})}function O(e,t){e[p("OriginalDelegate")]=t}let R=!1,L=!1;function M(){try{const e=v.navigator.userAgent;if(-1!==e.indexOf("MSIE ")||-1!==e.indexOf("Trident/"))return!0}catch(e){}return!1}function F(){if(R)return L;R=!0;try{const e=v.navigator.userAgent;-1===e.indexOf("MSIE ")&&-1===e.indexOf("Trident/")&&-1===e.indexOf("Edge/")||(L=!0)}catch(e){}return L}Zone.__load_patch("ZoneAwarePromise",(e,t,n)=>{const r=Object.getOwnPropertyDescriptor,i=Object.defineProperty,o=n.symbol,s=[],a=!0===e[o("DISABLE_WRAPPING_UNCAUGHT_PROMISE_REJECTION")],u=o("Promise"),c=o("then");n.onUnhandledError=e=>{if(n.showUncaughtError()){const t=e&&e.rejection;t?console.error("Unhandled Promise rejection:",t instanceof Error?t.message:t,"; Zone:",e.zone.name,"; Task:",e.task&&e.task.source,"; Value:",t,t instanceof Error?t.stack:void 0):console.error(e)}},n.microtaskDrainDone=()=>{for(;s.length;){const t=s.shift();try{t.zone.runGuarded(()=>{if(t.throwOriginal)throw t.rejection;throw t})}catch(e){h(e)}}};const l=o("unhandledPromiseRejectionHandler");function h(e){n.onUnhandledError(e);try{const n=t[l];"function"==typeof n&&n.call(this,e)}catch(r){}}function f(e){return e&&e.then}function d(e){return e}function p(e){return N.reject(e)}const g=o("state"),v=o("value"),m=o("finally"),y=o("parentPromiseValue"),_=o("parentPromiseState"),b=null,w=!0,T=!1;function E(e,t){return n=>{try{k(e,t,n)}catch(r){k(e,!1,r)}}}const I=o("currentTaskTrace");function k(e,r,o){const u=function(){let e=!1;return function(t){return function(){e||(e=!0,t.apply(null,arguments))}}}();if(e===o)throw new TypeError("Promise resolved with itself");if(e[g]===b){let h=null;try{"object"!=typeof o&&"function"!=typeof o||(h=o&&o.then)}catch(l){return u(()=>{k(e,!1,l)})(),e}if(r!==T&&o instanceof N&&o.hasOwnProperty(g)&&o.hasOwnProperty(v)&&o[g]!==b)S(o),k(e,o[g],o[v]);else if(r!==T&&"function"==typeof h)try{h.call(o,u(E(e,r)),u(E(e,!1)))}catch(l){u(()=>{k(e,!1,l)})()}else{e[g]=r;const u=e[v];if(e[v]=o,e[m]===m&&r===w&&(e[g]=e[_],e[v]=e[y]),r===T&&o instanceof Error){const e=t.currentTask&&t.currentTask.data&&t.currentTask.data.__creationTrace__;e&&i(o,I,{configurable:!0,enumerable:!1,writable:!0,value:e})}for(let t=0;t<u.length;)A(e,u[t++],u[t++],u[t++],u[t++]);if(0==u.length&&r==T){e[g]=0;let r=o;try{throw new Error("Uncaught (in promise): "+((c=o)&&c.toString===Object.prototype.toString?(c.constructor&&c.constructor.name||"")+": "+JSON.stringify(c):c?c.toString():Object.prototype.toString.call(c))+(o&&o.stack?"\n"+o.stack:""))}catch(l){r=l}a&&(r.throwOriginal=!0),r.rejection=o,r.promise=e,r.zone=t.current,r.task=t.currentTask,s.push(r),n.scheduleMicroTask()}}}var c;return e}const C=o("rejectionHandledHandler");function S(e){if(0===e[g]){try{const n=t[C];n&&"function"==typeof n&&n.call(this,{rejection:e[v],promise:e})}catch(n){}e[g]=T;for(let t=0;t<s.length;t++)e===s[t].promise&&s.splice(t,1)}}function A(e,t,n,r,i){S(e);const o=e[g],s=o?"function"==typeof r?r:d:"function"==typeof i?i:p;t.scheduleMicroTask("Promise.then",()=>{try{const r=e[v],i=!!n&&m===n[m];i&&(n[y]=r,n[_]=o);const a=t.run(s,void 0,i&&s!==p&&s!==d?[]:[r]);k(n,!0,a)}catch(r){k(n,!1,r)}},n)}const x=function(){};class N{static toString(){return"function ZoneAwarePromise() { [native code] }"}static resolve(e){return k(new this(null),w,e)}static reject(e){return k(new this(null),T,e)}static race(e){let t,n,r=new this((e,r)=>{t=e,n=r});function i(e){t(e)}function o(e){n(e)}for(let s of e)f(s)||(s=this.resolve(s)),s.then(i,o);return r}static all(e){return N.allWithCallback(e)}static allSettled(e){return(this&&this.prototype instanceof N?this:N).allWithCallback(e,{thenCallback:e=>({status:"fulfilled",value:e}),errorCallback:e=>({status:"rejected",reason:e})})}static allWithCallback(e,t){let n,r,i=new this((e,t)=>{n=e,r=t}),o=2,s=0;const a=[];for(let c of e){f(c)||(c=this.resolve(c));const e=s;try{c.then(r=>{a[e]=t?t.thenCallback(r):r,o--,0===o&&n(a)},i=>{t?(a[e]=t.errorCallback(i),o--,0===o&&n(a)):r(i)})}catch(u){r(u)}o++,s++}return o-=2,0===o&&n(a),i}constructor(e){const t=this;if(!(t instanceof N))throw new Error("Must be an instanceof Promise.");t[g]=b,t[v]=[];try{e&&e(E(t,w),E(t,T))}catch(n){k(t,!1,n)}}get[Symbol.toStringTag](){return"Promise"}get[Symbol.species](){return N}then(e,n){let r=this.constructor[Symbol.species];r&&"function"==typeof r||(r=this.constructor||N);const i=new r(x),o=t.current;return this[g]==b?this[v].push(o,i,e,n):A(this,o,i,e,n),i}catch(e){return this.then(null,e)}finally(e){let n=this.constructor[Symbol.species];n&&"function"==typeof n||(n=N);const r=new n(x);r[m]=m;const i=t.current;return this[g]==b?this[v].push(i,r,e,e):A(this,i,r,e,e),r}}N.resolve=N.resolve,N.reject=N.reject,N.race=N.race,N.all=N.all;const P=e[u]=e.Promise;e.Promise=N;const O=o("thenPatched");function R(e){const t=e.prototype,n=r(t,"then");if(n&&(!1===n.writable||!n.configurable))return;const i=t.then;t[c]=i,e.prototype.then=function(e,t){return new N((e,t)=>{i.call(this,e,t)}).then(e,t)},e[O]=!0}return n.patchThen=R,P&&(R(P),D(e,"fetch",e=>{return t=e,function(e,n){let r=t.apply(e,n);if(r instanceof N)return r;let i=r.constructor;return i[O]||R(i),r};var t})),Promise[t.__symbol__("uncaughtPromiseErrors")]=s,N}),Zone.__load_patch("toString",e=>{const t=Function.prototype.toString,n=p("OriginalDelegate"),r=p("Promise"),i=p("Error"),o=function(){if("function"==typeof this){const o=this[n];if(o)return"function"==typeof o?t.call(o):Object.prototype.toString.call(o);if(this===Promise){const n=e[r];if(n)return t.call(n)}if(this===Error){const n=e[i];if(n)return t.call(n)}}return t.call(this)};o[n]=t,Function.prototype.toString=o;const s=Object.prototype.toString;Object.prototype.toString=function(){return"function"==typeof Promise&&this instanceof Promise?"[object Promise]":s.call(this)}});let j=!1;if("undefined"!=typeof window)try{const e=Object.defineProperty({},"passive",{get:function(){j=!0}});window.addEventListener("test",e,e),window.removeEventListener("test",e,e)}catch(he){j=!1}const q={useG:!0},U={},V={},B=new RegExp("^"+h+"(\\w+)(true|false)$"),H=p("propagationStopped");function W(e,t){const n=(t?t(e):e)+l,r=(t?t(e):e)+c,i=h+n,o=h+r;U[e]={},U[e].false=i,U[e].true=o}function K(e,t,r){const i=r&&r.add||o,a=r&&r.rm||s,u=r&&r.listeners||"eventListeners",f=r&&r.rmAll||"removeAllListeners",d=p(i),g="."+i+":",v=function(e,t,n){if(e.isRemoved)return;const r=e.callback;"object"==typeof r&&r.handleEvent&&(e.callback=e=>r.handleEvent(e),e.originalDelegate=r),e.invoke(e,t,[n]);const i=e.options;i&&"object"==typeof i&&i.once&&t[a].call(t,n.type,e.originalDelegate?e.originalDelegate:e.callback,i)},m=function(t){if(!(t=t||e.event))return;const n=this||t.target||e,r=n[U[t.type].false];if(r)if(1===r.length)v(r[0],n,t);else{const e=r.slice();for(let r=0;r<e.length&&(!t||!0!==t[H]);r++)v(e[r],n,t)}},y=function(t){if(!(t=t||e.event))return;const n=this||t.target||e,r=n[U[t.type].true];if(r)if(1===r.length)v(r[0],n,t);else{const e=r.slice();for(let r=0;r<e.length&&(!t||!0!==t[H]);r++)v(e[r],n,t)}};function _(t,r){if(!t)return!1;let o=!0;r&&void 0!==r.useG&&(o=r.useG);const s=r&&r.vh;let v=!0;r&&void 0!==r.chkDup&&(v=r.chkDup);let _=!1;r&&void 0!==r.rt&&(_=r.rt);let b=t;for(;b&&!b.hasOwnProperty(i);)b=n(b);if(!b&&t[i]&&(b=t),!b)return!1;if(b[d])return!1;const w=r&&r.eventNameToString,E={},I=b[d]=b[i],k=b[p(a)]=b[a],C=b[p(u)]=b[u],S=b[p(f)]=b[f];let A;function x(e,t){return!j&&"object"==typeof e&&e?!!e.capture:j&&t?"boolean"==typeof e?{capture:e,passive:!0}:e?"object"==typeof e&&!1!==e.passive?Object.assign(Object.assign({},e),{passive:!0}):e:{passive:!0}:e}r&&r.prepend&&(A=b[p(r.prepend)]=b[r.prepend]);const N=o?function(e){if(!E.isExisting)return I.call(E.target,E.eventName,E.capture?y:m,E.options)}:function(e){return I.call(E.target,E.eventName,e.invoke,E.options)},D=o?function(e){if(!e.isRemoved){const t=U[e.eventName];let n;t&&(n=t[e.capture?c:l]);const r=n&&e.target[n];if(r)for(let i=0;i<r.length;i++)if(r[i]===e){r.splice(i,1),e.isRemoved=!0,0===r.length&&(e.allRemoved=!0,e.target[n]=null);break}}if(e.allRemoved)return k.call(e.target,e.eventName,e.capture?y:m,e.options)}:function(e){return k.call(e.target,e.eventName,e.invoke,e.options)},P=r&&r.diff?r.diff:function(e,t){const n=typeof t;return"function"===n&&e.callback===t||"object"===n&&e.originalDelegate===t},R=Zone[p("UNPATCHED_EVENTS")],L=e[p("PASSIVE_EVENTS")],M=function(t,n,i,a,u=!1,h=!1){return function(){const f=this||e;let d=arguments[0];r&&r.transferEventName&&(d=r.transferEventName(d));let p=arguments[1];if(!p)return t.apply(this,arguments);if(T&&"uncaughtException"===d)return t.apply(this,arguments);let g=!1;if("function"!=typeof p){if(!p.handleEvent)return t.apply(this,arguments);g=!0}if(s&&!s(t,p,f,arguments))return;const m=j&&!!L&&-1!==L.indexOf(d),y=x(arguments[2],m);if(R)for(let e=0;e<R.length;e++)if(d===R[e])return m?t.call(f,d,p,y):t.apply(this,arguments);const _=!!y&&("boolean"==typeof y||y.capture),b=!(!y||"object"!=typeof y)&&y.once,I=Zone.current;let k=U[d];k||(W(d,w),k=U[d]);const C=k[_?c:l];let S,A=f[C],N=!1;if(A){if(N=!0,v)for(let e=0;e<A.length;e++)if(P(A[e],p))return}else A=f[C]=[];const D=f.constructor.name,O=V[D];O&&(S=O[d]),S||(S=D+n+(w?w(d):d)),E.options=y,b&&(E.options.once=!1),E.target=f,E.capture=_,E.eventName=d,E.isExisting=N;const M=o?q:void 0;M&&(M.taskData=E);const F=I.scheduleEventTask(S,p,M,i,a);return E.target=null,M&&(M.taskData=null),b&&(y.once=!0),(j||"boolean"!=typeof F.options)&&(F.options=y),F.target=f,F.capture=_,F.eventName=d,g&&(F.originalDelegate=p),h?A.unshift(F):A.push(F),u?f:void 0}};return b[i]=M(I,g,N,D,_),A&&(b.prependListener=M(A,".prependListener:",function(e){return A.call(E.target,E.eventName,e.invoke,E.options)},D,_,!0)),b[a]=function(){const t=this||e;let n=arguments[0];r&&r.transferEventName&&(n=r.transferEventName(n));const i=arguments[2],o=!!i&&("boolean"==typeof i||i.capture),a=arguments[1];if(!a)return k.apply(this,arguments);if(s&&!s(k,a,t,arguments))return;const u=U[n];let f;u&&(f=u[o?c:l]);const d=f&&t[f];if(d)for(let e=0;e<d.length;e++){const r=d[e];if(P(r,a))return d.splice(e,1),r.isRemoved=!0,0===d.length&&(r.allRemoved=!0,t[f]=null,"string"==typeof n)&&(t[h+"ON_PROPERTY"+n]=null),r.zone.cancelTask(r),_?t:void 0}return k.apply(this,arguments)},b[u]=function(){const t=this||e;let n=arguments[0];r&&r.transferEventName&&(n=r.transferEventName(n));const i=[],o=z(t,w?w(n):n);for(let e=0;e<o.length;e++){const t=o[e];i.push(t.originalDelegate?t.originalDelegate:t.callback)}return i},b[f]=function(){const t=this||e;let n=arguments[0];if(n){r&&r.transferEventName&&(n=r.transferEventName(n));const e=U[n];if(e){const r=t[e.false],i=t[e.true];if(r){const e=r.slice();for(let t=0;t<e.length;t++){const r=e[t];this[a].call(this,n,r.originalDelegate?r.originalDelegate:r.callback,r.options)}}if(i){const e=i.slice();for(let t=0;t<e.length;t++){const r=e[t];this[a].call(this,n,r.originalDelegate?r.originalDelegate:r.callback,r.options)}}}}else{const e=Object.keys(t);for(let t=0;t<e.length;t++){const n=B.exec(e[t]);let r=n&&n[1];r&&"removeListener"!==r&&this[f].call(this,r)}this[f].call(this,"removeListener")}if(_)return this},O(b[i],I),O(b[a],k),S&&O(b[f],S),C&&O(b[u],C),!0}let b=[];for(let n=0;n<t.length;n++)b[n]=_(t[n],r);return b}function z(e,t){if(!t){const n=[];for(let r in e){const i=B.exec(r);let o=i&&i[1];if(o&&(!t||o===t)){const t=e[r];if(t)for(let e=0;e<t.length;e++)n.push(t[e])}}return n}let n=U[t];n||(W(t),n=U[t]);const r=e[n.false],i=e[n.true];return r?i?r.concat(i):r.slice():i?i.slice():[]}function G(e,t){const n=e.Event;n&&n.prototype&&t.patchMethod(n.prototype,"stopImmediatePropagation",e=>function(t,n){t[H]=!0,e&&e.apply(t,n)})}function Q(e,t,n,r,i){const o=Zone.__symbol__(r);if(t[o])return;const s=t[o]=t[r];t[r]=function(o,a,u){return a&&a.prototype&&i.forEach(function(t){const i=`${n}.${r}::`+t,o=a.prototype;if(o.hasOwnProperty(t)){const n=e.ObjectGetOwnPropertyDescriptor(o,t);n&&n.value?(n.value=e.wrapWithCurrentZone(n.value,i),e._redefineProperty(a.prototype,t,n)):o[t]&&(o[t]=e.wrapWithCurrentZone(o[t],i))}else o[t]&&(o[t]=e.wrapWithCurrentZone(o[t],i))}),s.call(t,o,a,u)},e.attachOriginToPatched(t[r],s)}const $=["absolutedeviceorientation","afterinput","afterprint","appinstalled","beforeinstallprompt","beforeprint","beforeunload","devicelight","devicemotion","deviceorientation","deviceorientationabsolute","deviceproximity","hashchange","languagechange","message","mozbeforepaint","offline","online","paint","pageshow","pagehide","popstate","rejectionhandled","storage","unhandledrejection","unload","userproximity","vrdisplayconnected","vrdisplaydisconnected","vrdisplaypresentchange"],Y=["encrypted","waitingforkey","msneedkey","mozinterruptbegin","mozinterruptend"],X=["load"],Z=["blur","error","focus","load","resize","scroll","messageerror"],J=["bounce","finish","start"],ee=["loadstart","progress","abort","error","load","progress","timeout","loadend","readystatechange"],te=["upgradeneeded","complete","abort","success","error","blocked","versionchange","close"],ne=["close","error","open","message"],re=["error","message"],ie=["abort","animationcancel","animationend","animationiteration","auxclick","beforeinput","blur","cancel","canplay","canplaythrough","change","compositionstart","compositionupdate","compositionend","cuechange","click","close","contextmenu","curechange","dblclick","drag","dragend","dragenter","dragexit","dragleave","dragover","drop","durationchange","emptied","ended","error","focus","focusin","focusout","gotpointercapture","input","invalid","keydown","keypress","keyup","load","loadstart","loadeddata","loadedmetadata","lostpointercapture","mousedown","mouseenter","mouseleave","mousemove","mouseout","mouseover","mouseup","mousewheel","orientationchange","pause","play","playing","pointercancel","pointerdown","pointerenter","pointerleave","pointerlockchange","mozpointerlockchange","webkitpointerlockerchange","pointerlockerror","mozpointerlockerror","webkitpointerlockerror","pointermove","pointout","pointerover","pointerup","progress","ratechange","reset","resize","scroll","seeked","seeking","select","selectionchange","selectstart","show","sort","stalled","submit","suspend","timeupdate","volumechange","touchcancel","touchmove","touchstart","touchend","transitioncancel","transitionend","waiting","wheel"].concat(["webglcontextrestored","webglcontextlost","webglcontextcreationerror"],["autocomplete","autocompleteerror"],["toggle"],["afterscriptexecute","beforescriptexecute","DOMContentLoaded","freeze","fullscreenchange","mozfullscreenchange","webkitfullscreenchange","msfullscreenchange","fullscreenerror","mozfullscreenerror","webkitfullscreenerror","msfullscreenerror","readystatechange","visibilitychange","resume"],$,["beforecopy","beforecut","beforepaste","copy","cut","paste","dragstart","loadend","animationstart","search","transitionrun","transitionstart","webkitanimationend","webkitanimationiteration","webkitanimationstart","webkittransitionend"],["activate","afterupdate","ariarequest","beforeactivate","beforedeactivate","beforeeditfocus","beforeupdate","cellchange","controlselect","dataavailable","datasetchanged","datasetcomplete","errorupdate","filterchange","layoutcomplete","losecapture","move","moveend","movestart","propertychange","resizeend","resizestart","rowenter","rowexit","rowsdelete","rowsinserted","command","compassneedscalibration","deactivate","help","mscontentzoom","msmanipulationstatechanged","msgesturechange","msgesturedoubletap","msgestureend","msgesturehold","msgesturestart","msgesturetap","msgotpointercapture","msinertiastart","mslostpointercapture","mspointercancel","mspointerdown","mspointerenter","mspointerhover","mspointerleave","mspointermove","mspointerout","mspointerover","mspointerup","pointerout","mssitemodejumplistitemremoved","msthumbnailclick","stop","storagecommit"]);function oe(e,t,n){if(!n||0===n.length)return t;const r=n.filter(t=>t.target===e);if(!r||0===r.length)return t;const i=r[0].ignoreProperties;return t.filter(e=>-1===i.indexOf(e))}function se(e,t,n,r){e&&A(e,oe(e,t,n),r)}function ae(e,t){if(T&&!I)return;if(Zone[e.symbol("patchEvents")])return;const r="undefined"!=typeof WebSocket,i=t.__Zone_ignore_on_properties;if(E){const e=window,t=M()?[{target:e,ignoreProperties:["error"]}]:[];se(e,ie.concat(["messageerror"]),i?i.concat(t):i,n(e)),se(Document.prototype,ie,i),void 0!==e.SVGElement&&se(e.SVGElement.prototype,ie,i),se(Element.prototype,ie,i),se(HTMLElement.prototype,ie,i),se(HTMLMediaElement.prototype,Y,i),se(HTMLFrameSetElement.prototype,$.concat(Z),i),se(HTMLBodyElement.prototype,$.concat(Z),i),se(HTMLFrameElement.prototype,X,i),se(HTMLIFrameElement.prototype,X,i);const r=e.HTMLMarqueeElement;r&&se(r.prototype,J,i);const o=e.Worker;o&&se(o.prototype,re,i)}const o=t.XMLHttpRequest;o&&se(o.prototype,ee,i);const s=t.XMLHttpRequestEventTarget;s&&se(s&&s.prototype,ee,i),"undefined"!=typeof IDBIndex&&(se(IDBIndex.prototype,te,i),se(IDBRequest.prototype,te,i),se(IDBOpenDBRequest.prototype,te,i),se(IDBDatabase.prototype,te,i),se(IDBTransaction.prototype,te,i),se(IDBCursor.prototype,te,i)),r&&se(WebSocket.prototype,ne,i)}Zone.__load_patch("util",(n,a,u)=>{u.patchOnProperties=A,u.patchMethod=D,u.bindArguments=_,u.patchMacroTask=P;const d=a.__symbol__("BLACK_LISTED_EVENTS"),p=a.__symbol__("UNPATCHED_EVENTS");n[p]&&(n[d]=n[p]),n[d]&&(a[d]=a[p]=n[d]),u.patchEventPrototype=G,u.patchEventTarget=K,u.isIEOrEdge=F,u.ObjectDefineProperty=t,u.ObjectGetOwnPropertyDescriptor=e,u.ObjectCreate=r,u.ArraySlice=i,u.patchClass=N,u.wrapWithCurrentZone=f,u.filterProperties=oe,u.attachOriginToPatched=O,u._redefineProperty=Object.defineProperty,u.patchCallbacks=Q,u.getGlobalObjects=()=>({globalSources:V,zoneSymbolEventNames:U,eventNames:ie,isBrowser:E,isMix:I,isNode:T,TRUE_STR:c,FALSE_STR:l,ZONE_SYMBOL_PREFIX:h,ADD_EVENT_LISTENER_STR:o,REMOVE_EVENT_LISTENER_STR:s})});const ue=p("zoneTask");function ce(e,t,n,r){let i=null,o=null;n+=r;const s={};function a(t){const n=t.data;return n.args[0]=function(){return t.invoke.apply(this,arguments)},n.handleId=i.apply(e,n.args),t}function u(t){return o.call(e,t.data.handleId)}i=D(e,t+=r,n=>function(i,o){if("function"==typeof o[0]){const e={isPeriodic:"Interval"===r,delay:"Timeout"===r||"Interval"===r?o[1]||0:void 0,args:o},n=o[0];o[0]=function(){try{return n.apply(this,arguments)}finally{e.isPeriodic||("number"==typeof e.handleId?delete s[e.handleId]:e.handleId&&(e.handleId[ue]=null))}};const i=d(t,o[0],e,a,u);if(!i)return i;const c=i.data.handleId;return"number"==typeof c?s[c]=i:c&&(c[ue]=i),c&&c.ref&&c.unref&&"function"==typeof c.ref&&"function"==typeof c.unref&&(i.ref=c.ref.bind(c),i.unref=c.unref.bind(c)),"number"==typeof c||c?c:i}return n.apply(e,o)}),o=D(e,n,t=>function(n,r){const i=r[0];let o;"number"==typeof i?o=s[i]:(o=i&&i[ue],o||(o=i)),o&&"string"==typeof o.type?"notScheduled"!==o.state&&(o.cancelFn&&o.data.isPeriodic||0===o.runCount)&&("number"==typeof i?delete s[i]:i&&(i[ue]=null),o.zone.cancelTask(o)):t.apply(e,r)})}function le(e,t){if(Zone[t.symbol("patchEventTarget")])return;const{eventNames:n,zoneSymbolEventNames:r,TRUE_STR:i,FALSE_STR:o,ZONE_SYMBOL_PREFIX:s}=t.getGlobalObjects();for(let u=0;u<n.length;u++){const e=n[u],t=s+(e+o),a=s+(e+i);r[e]={},r[e][o]=t,r[e][i]=a}const a=e.EventTarget;return a&&a.prototype?(t.patchEventTarget(e,[a&&a.prototype]),!0):void 0}Zone.__load_patch("legacy",e=>{const t=e[Zone.__symbol__("legacyPatch")];t&&t()}),Zone.__load_patch("queueMicrotask",(e,t,n)=>{n.patchMethod(e,"queueMicrotask",e=>function(e,n){t.current.scheduleMicroTask("queueMicrotask",n[0])})}),Zone.__load_patch("timers",e=>{const t="set",n="clear";ce(e,t,n,"Timeout"),ce(e,t,n,"Interval"),ce(e,t,n,"Immediate")}),Zone.__load_patch("requestAnimationFrame",e=>{ce(e,"request","cancel","AnimationFrame"),ce(e,"mozRequest","mozCancel","AnimationFrame"),ce(e,"webkitRequest","webkitCancel","AnimationFrame")}),Zone.__load_patch("blocking",(e,t)=>{const n=["alert","prompt","confirm"];for(let r=0;r<n.length;r++)D(e,n[r],(n,r,i)=>function(r,o){return t.current.run(n,e,o,i)})}),Zone.__load_patch("EventTarget",(e,t,n)=>{!function(e,t){t.patchEventPrototype(e,t)}(e,n),le(e,n);const r=e.XMLHttpRequestEventTarget;r&&r.prototype&&n.patchEventTarget(e,[r.prototype])}),Zone.__load_patch("MutationObserver",(e,t,n)=>{N("MutationObserver"),N("WebKitMutationObserver")}),Zone.__load_patch("IntersectionObserver",(e,t,n)=>{N("IntersectionObserver")}),Zone.__load_patch("FileReader",(e,t,n)=>{N("FileReader")}),Zone.__load_patch("on_property",(e,t,n)=>{ae(n,e)}),Zone.__load_patch("customElements",(e,t,n)=>{!function(e,t){const{isBrowser:n,isMix:r}=t.getGlobalObjects();(n||r)&&e.customElements&&"customElements"in e&&t.patchCallbacks(t,e.customElements,"customElements","define",["connectedCallback","disconnectedCallback","adoptedCallback","attributeChangedCallback"])}(e,n)}),Zone.__load_patch("XHR",(e,t)=>{!function(e){const l=e.XMLHttpRequest;if(!l)return;const h=l.prototype;let f=h[a],g=h[u];if(!f){const t=e.XMLHttpRequestEventTarget;if(t){const e=t.prototype;f=e[a],g=e[u]}}const v="readystatechange",m="scheduled";function y(e){const r=e.data,s=r.target;s[o]=!1,s[c]=!1;const l=s[i];f||(f=s[a],g=s[u]),l&&g.call(s,v,l);const h=s[i]=()=>{if(s.readyState===s.DONE)if(!r.aborted&&s[o]&&e.state===m){const n=s[t.__symbol__("loadfalse")];if(0!==s.status&&n&&n.length>0){const i=e.invoke;e.invoke=function(){const n=s[t.__symbol__("loadfalse")];for(let t=0;t<n.length;t++)n[t]===e&&n.splice(t,1);r.aborted||e.state!==m||i.call(e)},n.push(e)}else e.invoke()}else r.aborted||!1!==s[o]||(s[c]=!0)};return f.call(s,v,h),s[n]||(s[n]=e),I.apply(s,r.args),s[o]=!0,e}function _(){}function b(e){const t=e.data;return t.aborted=!0,k.apply(t.target,t.args)}const w=D(h,"open",()=>function(e,t){return e[r]=0==t[2],e[s]=t[1],w.apply(e,t)}),T=p("fetchTaskAborting"),E=p("fetchTaskScheduling"),I=D(h,"send",()=>function(e,n){if(!0===t.current[E])return I.apply(e,n);if(e[r])return I.apply(e,n);{const t={target:e,url:e[s],isPeriodic:!1,args:n,aborted:!1},r=d("XMLHttpRequest.send",_,t,y,b);e&&!0===e[c]&&!t.aborted&&r.state===m&&r.invoke()}}),k=D(h,"abort",()=>function(e,r){const i=e[n];if(i&&"string"==typeof i.type){if(null==i.cancelFn||i.data&&i.data.aborted)return;i.zone.cancelTask(i)}else if(!0===t.current[T])return k.apply(e,r)})}(e);const n=p("xhrTask"),r=p("xhrSync"),i=p("xhrListener"),o=p("xhrScheduled"),s=p("xhrURL"),c=p("xhrErrorBeforeScheduled")}),Zone.__load_patch("geolocation",t=>{t.navigator&&t.navigator.geolocation&&function(t,n){const r=t.constructor.name;for(let i=0;i<n.length;i++){const o=n[i],s=t[o];if(s){if(!b(e(t,o)))continue;t[o]=(e=>{const t=function(){return e.apply(this,_(arguments,r+"."+o))};return O(t,e),t})(s)}}}(t.navigator.geolocation,["getCurrentPosition","watchPosition"])}),Zone.__load_patch("PromiseRejectionEvent",(e,t)=>{function n(t){return function(n){z(e,t).forEach(r=>{const i=e.PromiseRejectionEvent;if(i){const e=new i(t,{promise:n.promise,reason:n.rejection});r.invoke(e)}})}}e.PromiseRejectionEvent&&(t[p("unhandledPromiseRejectionHandler")]=n("unhandledrejection"),t[p("rejectionHandledHandler")]=n("rejectionhandled"))})},440:(e,t,n)=>{"use strict";var r={};n.r(r),n.d(r,{afterMain:()=>E,afterRead:()=>b,afterWrite:()=>C,applyStyles:()=>O,arrow:()=>Z,auto:()=>u,basePlacements:()=>c,beforeMain:()=>w,beforeRead:()=>y,beforeWrite:()=>I,bottom:()=>o,clippingParents:()=>f,computeStyles:()=>te,createPopper:()=>Pe,createPopperBase:()=>De,createPopperLite:()=>Oe,detectOverflow:()=>me,end:()=>h,eventListeners:()=>re,flip:()=>ye,hide:()=>we,left:()=>a,main:()=>T,modifierPhases:()=>S,offset:()=>Te,placements:()=>m,popper:()=>p,popperGenerator:()=>Ne,popperOffsets:()=>Ee,preventOverflow:()=>Ie,read:()=>_,reference:()=>g,right:()=>s,start:()=>l,top:()=>i,variationPlacements:()=>v,viewport:()=>d,write:()=>k}),n(704);var i="top",o="bottom",s="right",a="left",u="auto",c=[i,o,s,a],l="start",h="end",f="clippingParents",d="viewport",p="popper",g="reference",v=c.reduce(function(e,t){return e.concat([t+"-"+l,t+"-"+h])},[]),m=[].concat(c,[u]).reduce(function(e,t){return e.concat([t,t+"-"+l,t+"-"+h])},[]),y="beforeRead",_="read",b="afterRead",w="beforeMain",T="main",E="afterMain",I="beforeWrite",k="write",C="afterWrite",S=[y,_,b,w,T,E,I,k,C];function A(e){return e?(e.nodeName||"").toLowerCase():null}function x(e){if(null==e)return window;if("[object Window]"!==e.toString()){var t=e.ownerDocument;return t&&t.defaultView||window}return e}function N(e){return e instanceof x(e).Element||e instanceof Element}function D(e){return e instanceof x(e).HTMLElement||e instanceof HTMLElement}function P(e){return"undefined"!=typeof ShadowRoot&&(e instanceof x(e).ShadowRoot||e instanceof ShadowRoot)}const O={name:"applyStyles",enabled:!0,phase:"write",fn:function(e){var t=e.state;Object.keys(t.elements).forEach(function(e){var n=t.styles[e]||{},r=t.attributes[e]||{},i=t.elements[e];D(i)&&A(i)&&(Object.assign(i.style,n),Object.keys(r).forEach(function(e){var t=r[e];!1===t?i.removeAttribute(e):i.setAttribute(e,!0===t?"":t)}))})},effect:function(e){var t=e.state,n={popper:{position:t.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(t.elements.popper.style,n.popper),t.styles=n,t.elements.arrow&&Object.assign(t.elements.arrow.style,n.arrow),function(){Object.keys(t.elements).forEach(function(e){var r=t.elements[e],i=t.attributes[e]||{},o=Object.keys(t.styles.hasOwnProperty(e)?t.styles[e]:n[e]).reduce(function(e,t){return e[t]="",e},{});D(r)&&A(r)&&(Object.assign(r.style,o),Object.keys(i).forEach(function(e){r.removeAttribute(e)}))})}},requires:["computeStyles"]};function R(e){return e.split("-")[0]}var L=Math.round;function M(e,t){void 0===t&&(t=!1);var n=e.getBoundingClientRect(),r=1,i=1;return D(e)&&t&&(r=n.width/e.offsetWidth||1,i=n.height/e.offsetHeight||1),{width:L(n.width/r),height:L(n.height/i),top:L(n.top/i),right:L(n.right/r),bottom:L(n.bottom/i),left:L(n.left/r),x:L(n.left/r),y:L(n.top/i)}}function F(e){var t=M(e),n=e.offsetWidth,r=e.offsetHeight;return Math.abs(t.width-n)<=1&&(n=t.width),Math.abs(t.height-r)<=1&&(r=t.height),{x:e.offsetLeft,y:e.offsetTop,width:n,height:r}}function j(e,t){var n=t.getRootNode&&t.getRootNode();if(e.contains(t))return!0;if(n&&P(n)){var r=t;do{if(r&&e.isSameNode(r))return!0;r=r.parentNode||r.host}while(r)}return!1}function q(e){return x(e).getComputedStyle(e)}function U(e){return["table","td","th"].indexOf(A(e))>=0}function V(e){return((N(e)?e.ownerDocument:e.document)||window.document).documentElement}function B(e){return"html"===A(e)?e:e.assignedSlot||e.parentNode||(P(e)?e.host:null)||V(e)}function H(e){return D(e)&&"fixed"!==q(e).position?e.offsetParent:null}function W(e){for(var t=x(e),n=H(e);n&&U(n)&&"static"===q(n).position;)n=H(n);return n&&("html"===A(n)||"body"===A(n)&&"static"===q(n).position)?t:n||function(e){var t=-1!==navigator.userAgent.toLowerCase().indexOf("firefox");if(-1!==navigator.userAgent.indexOf("Trident")&&D(e)&&"fixed"===q(e).position)return null;for(var n=B(e);D(n)&&["html","body"].indexOf(A(n))<0;){var r=q(n);if("none"!==r.transform||"none"!==r.perspective||"paint"===r.contain||-1!==["transform","perspective"].indexOf(r.willChange)||t&&"filter"===r.willChange||t&&r.filter&&"none"!==r.filter)return n;n=n.parentNode}return null}(e)||t}function K(e){return["top","bottom"].indexOf(e)>=0?"x":"y"}var z=Math.max,G=Math.min,Q=Math.round;function $(e,t,n){return z(e,G(t,n))}function Y(e){return Object.assign({},{top:0,right:0,bottom:0,left:0},e)}function X(e,t){return t.reduce(function(t,n){return t[n]=e,t},{})}const Z={name:"arrow",enabled:!0,phase:"main",fn:function(e){var t,n=e.state,r=e.name,u=e.options,l=n.elements.arrow,h=n.modifiersData.popperOffsets,f=R(n.placement),d=K(f),p=[a,s].indexOf(f)>=0?"height":"width";if(l&&h){var g=function(e,t){return Y("number"!=typeof(e="function"==typeof e?e(Object.assign({},t.rects,{placement:t.placement})):e)?e:X(e,c))}(u.padding,n),v=F(l),m="y"===d?i:a,y="y"===d?o:s,_=n.rects.reference[p]+n.rects.reference[d]-h[d]-n.rects.popper[p],b=h[d]-n.rects.reference[d],w=W(l),T=w?"y"===d?w.clientHeight||0:w.clientWidth||0:0,E=T/2-v[p]/2+(_/2-b/2),I=$(g[m],E,T-v[p]-g[y]);n.modifiersData[r]=((t={})[d]=I,t.centerOffset=I-E,t)}},effect:function(e){var t=e.state,n=e.options.element,r=void 0===n?"[data-popper-arrow]":n;null!=r&&("string"!=typeof r||(r=t.elements.popper.querySelector(r)))&&j(t.elements.popper,r)&&(t.elements.arrow=r)},requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};var J={top:"auto",right:"auto",bottom:"auto",left:"auto"};function ee(e){var t,n=e.popper,r=e.popperRect,u=e.placement,c=e.offsets,l=e.position,h=e.gpuAcceleration,f=e.adaptive,d=e.roundOffsets,p=!0===d?function(e){var t=e.y,n=window.devicePixelRatio||1;return{x:Q(Q(e.x*n)/n)||0,y:Q(Q(t*n)/n)||0}}(c):"function"==typeof d?d(c):c,g=p.x,v=void 0===g?0:g,m=p.y,y=void 0===m?0:m,_=c.hasOwnProperty("x"),b=c.hasOwnProperty("y"),w=a,T=i,E=window;if(f){var I=W(n),k="clientHeight",C="clientWidth";I===x(n)&&"static"!==q(I=V(n)).position&&(k="scrollHeight",C="scrollWidth"),I=I,u===i&&(T=o,y-=I[k]-r.height,y*=h?1:-1),u===a&&(w=s,v-=I[C]-r.width,v*=h?1:-1)}var S,A=Object.assign({position:l},f&&J);return Object.assign({},A,h?((S={})[T]=b?"0":"",S[w]=_?"0":"",S.transform=(E.devicePixelRatio||1)<2?"translate("+v+"px, "+y+"px)":"translate3d("+v+"px, "+y+"px, 0)",S):((t={})[T]=b?y+"px":"",t[w]=_?v+"px":"",t.transform="",t))}const te={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:function(e){var t=e.state,n=e.options,r=n.gpuAcceleration,i=void 0===r||r,o=n.adaptive,s=void 0===o||o,a=n.roundOffsets,u=void 0===a||a,c={placement:R(t.placement),popper:t.elements.popper,popperRect:t.rects.popper,gpuAcceleration:i};null!=t.modifiersData.popperOffsets&&(t.styles.popper=Object.assign({},t.styles.popper,ee(Object.assign({},c,{offsets:t.modifiersData.popperOffsets,position:t.options.strategy,adaptive:s,roundOffsets:u})))),null!=t.modifiersData.arrow&&(t.styles.arrow=Object.assign({},t.styles.arrow,ee(Object.assign({},c,{offsets:t.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:u})))),t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-placement":t.placement})},data:{}};var ne={passive:!0};const re={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:function(e){var t=e.state,n=e.instance,r=e.options,i=r.scroll,o=void 0===i||i,s=r.resize,a=void 0===s||s,u=x(t.elements.popper),c=[].concat(t.scrollParents.reference,t.scrollParents.popper);return o&&c.forEach(function(e){e.addEventListener("scroll",n.update,ne)}),a&&u.addEventListener("resize",n.update,ne),function(){o&&c.forEach(function(e){e.removeEventListener("scroll",n.update,ne)}),a&&u.removeEventListener("resize",n.update,ne)}},data:{}};var ie={left:"right",right:"left",bottom:"top",top:"bottom"};function oe(e){return e.replace(/left|right|bottom|top/g,function(e){return ie[e]})}var se={start:"end",end:"start"};function ae(e){return e.replace(/start|end/g,function(e){return se[e]})}function ue(e){var t=x(e);return{scrollLeft:t.pageXOffset,scrollTop:t.pageYOffset}}function ce(e){return M(V(e)).left+ue(e).scrollLeft}function le(e){var t=q(e);return/auto|scroll|overlay|hidden/.test(t.overflow+t.overflowY+t.overflowX)}function he(e){return["html","body","#document"].indexOf(A(e))>=0?e.ownerDocument.body:D(e)&&le(e)?e:he(B(e))}function fe(e,t){var n;void 0===t&&(t=[]);var r=he(e),i=r===(null==(n=e.ownerDocument)?void 0:n.body),o=x(r),s=i?[o].concat(o.visualViewport||[],le(r)?r:[]):r,a=t.concat(s);return i?a:a.concat(fe(B(s)))}function de(e){return Object.assign({},e,{left:e.x,top:e.y,right:e.x+e.width,bottom:e.y+e.height})}function pe(e,t){return t===d?de(function(e){var t=x(e),n=V(e),r=t.visualViewport,i=n.clientWidth,o=n.clientHeight,s=0,a=0;return r&&(i=r.width,o=r.height,/^((?!chrome|android).)*safari/i.test(navigator.userAgent)||(s=r.offsetLeft,a=r.offsetTop)),{width:i,height:o,x:s+ce(e),y:a}}(e)):D(t)?function(e){var t=M(e);return t.top=t.top+e.clientTop,t.left=t.left+e.clientLeft,t.bottom=t.top+e.clientHeight,t.right=t.left+e.clientWidth,t.width=e.clientWidth,t.height=e.clientHeight,t.x=t.left,t.y=t.top,t}(t):de(function(e){var t,n=V(e),r=ue(e),i=null==(t=e.ownerDocument)?void 0:t.body,o=z(n.scrollWidth,n.clientWidth,i?i.scrollWidth:0,i?i.clientWidth:0),s=z(n.scrollHeight,n.clientHeight,i?i.scrollHeight:0,i?i.clientHeight:0),a=-r.scrollLeft+ce(e),u=-r.scrollTop;return"rtl"===q(i||n).direction&&(a+=z(n.clientWidth,i?i.clientWidth:0)-o),{width:o,height:s,x:a,y:u}}(V(e)))}function ge(e){return e.split("-")[1]}function ve(e){var t,n=e.reference,r=e.element,u=e.placement,c=u?R(u):null,f=u?ge(u):null,d=n.x+n.width/2-r.width/2,p=n.y+n.height/2-r.height/2;switch(c){case i:t={x:d,y:n.y-r.height};break;case o:t={x:d,y:n.y+n.height};break;case s:t={x:n.x+n.width,y:p};break;case a:t={x:n.x-r.width,y:p};break;default:t={x:n.x,y:n.y}}var g=c?K(c):null;if(null!=g){var v="y"===g?"height":"width";switch(f){case l:t[g]=t[g]-(n[v]/2-r[v]/2);break;case h:t[g]=t[g]+(n[v]/2-r[v]/2)}}return t}function me(e,t){void 0===t&&(t={});var n=t.placement,r=void 0===n?e.placement:n,a=t.boundary,u=void 0===a?f:a,l=t.rootBoundary,h=void 0===l?d:l,v=t.elementContext,m=void 0===v?p:v,y=t.altBoundary,_=void 0!==y&&y,b=t.padding,w=void 0===b?0:b,T=Y("number"!=typeof w?w:X(w,c)),E=e.elements.reference,I=e.rects.popper,k=e.elements[_?m===p?g:p:m],C=function(e,t,n){var r="clippingParents"===t?function(e){var t=fe(B(e)),n=["absolute","fixed"].indexOf(q(e).position)>=0&&D(e)?W(e):e;return N(n)?t.filter(function(e){return N(e)&&j(e,n)&&"body"!==A(e)}):[]}(e):[].concat(t),i=[].concat(r,[n]),o=i.reduce(function(t,n){var r=pe(e,n);return t.top=z(r.top,t.top),t.right=G(r.right,t.right),t.bottom=G(r.bottom,t.bottom),t.left=z(r.left,t.left),t},pe(e,i[0]));return o.width=o.right-o.left,o.height=o.bottom-o.top,o.x=o.left,o.y=o.top,o}(N(k)?k:k.contextElement||V(e.elements.popper),u,h),S=M(E),x=ve({reference:S,element:I,strategy:"absolute",placement:r}),P=de(Object.assign({},I,x)),O=m===p?P:S,R={top:C.top-O.top+T.top,bottom:O.bottom-C.bottom+T.bottom,left:C.left-O.left+T.left,right:O.right-C.right+T.right},L=e.modifiersData.offset;if(m===p&&L){var F=L[r];Object.keys(R).forEach(function(e){var t=[s,o].indexOf(e)>=0?1:-1,n=[i,o].indexOf(e)>=0?"y":"x";R[e]+=F[n]*t})}return R}const ye={name:"flip",enabled:!0,phase:"main",fn:function(e){var t=e.state,n=e.options,r=e.name;if(!t.modifiersData[r]._skip){for(var h=n.mainAxis,f=void 0===h||h,d=n.altAxis,p=void 0===d||d,g=n.fallbackPlacements,y=n.padding,_=n.boundary,b=n.rootBoundary,w=n.altBoundary,T=n.flipVariations,E=void 0===T||T,I=n.allowedAutoPlacements,k=t.options.placement,C=R(k),S=g||(C!==k&&E?function(e){if(R(e)===u)return[];var t=oe(e);return[ae(e),t,ae(t)]}(k):[oe(k)]),A=[k].concat(S).reduce(function(e,n){return e.concat(R(n)===u?function(e,t){void 0===t&&(t={});var n=t.boundary,r=t.rootBoundary,i=t.padding,o=t.flipVariations,s=t.allowedAutoPlacements,a=void 0===s?m:s,u=ge(t.placement),l=u?o?v:v.filter(function(e){return ge(e)===u}):c,h=l.filter(function(e){return a.indexOf(e)>=0});0===h.length&&(h=l);var f=h.reduce(function(t,o){return t[o]=me(e,{placement:o,boundary:n,rootBoundary:r,padding:i})[R(o)],t},{});return Object.keys(f).sort(function(e,t){return f[e]-f[t]})}(t,{placement:n,boundary:_,rootBoundary:b,padding:y,flipVariations:E,allowedAutoPlacements:I}):n)},[]),x=t.rects.reference,N=t.rects.popper,D=new Map,P=!0,O=A[0],L=0;L<A.length;L++){var M=A[L],F=R(M),j=ge(M)===l,q=[i,o].indexOf(F)>=0,U=q?"width":"height",V=me(t,{placement:M,boundary:_,rootBoundary:b,altBoundary:w,padding:y}),B=q?j?s:a:j?o:i;x[U]>N[U]&&(B=oe(B));var H=oe(B),W=[];if(f&&W.push(V[F]<=0),p&&W.push(V[B]<=0,V[H]<=0),W.every(function(e){return e})){O=M,P=!1;break}D.set(M,W)}if(P)for(var K=function(e){var t=A.find(function(t){var n=D.get(t);if(n)return n.slice(0,e).every(function(e){return e})});if(t)return O=t,"break"},z=E?3:1;z>0&&"break"!==K(z);z--);t.placement!==O&&(t.modifiersData[r]._skip=!0,t.placement=O,t.reset=!0)}},requiresIfExists:["offset"],data:{_skip:!1}};function _e(e,t,n){return void 0===n&&(n={x:0,y:0}),{top:e.top-t.height-n.y,right:e.right-t.width+n.x,bottom:e.bottom-t.height+n.y,left:e.left-t.width-n.x}}function be(e){return[i,s,o,a].some(function(t){return e[t]>=0})}const we={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:function(e){var t=e.state,n=e.name,r=t.rects.reference,i=t.rects.popper,o=t.modifiersData.preventOverflow,s=me(t,{elementContext:"reference"}),a=me(t,{altBoundary:!0}),u=_e(s,r),c=_e(a,i,o),l=be(u),h=be(c);t.modifiersData[n]={referenceClippingOffsets:u,popperEscapeOffsets:c,isReferenceHidden:l,hasPopperEscaped:h},t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-reference-hidden":l,"data-popper-escaped":h})}},Te={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:function(e){var t=e.state,n=e.name,r=e.options.offset,o=void 0===r?[0,0]:r,u=m.reduce(function(e,n){return e[n]=function(e,t,n){var r=R(e),o=[a,i].indexOf(r)>=0?-1:1,u="function"==typeof n?n(Object.assign({},t,{placement:e})):n,c=u[0],l=u[1];return c=c||0,l=(l||0)*o,[a,s].indexOf(r)>=0?{x:l,y:c}:{x:c,y:l}}(n,t.rects,o),e},{}),c=u[t.placement],l=c.y;null!=t.modifiersData.popperOffsets&&(t.modifiersData.popperOffsets.x+=c.x,t.modifiersData.popperOffsets.y+=l),t.modifiersData[n]=u}},Ee={name:"popperOffsets",enabled:!0,phase:"read",fn:function(e){var t=e.state;t.modifiersData[e.name]=ve({reference:t.rects.reference,element:t.rects.popper,strategy:"absolute",placement:t.placement})},data:{}},Ie={name:"preventOverflow",enabled:!0,phase:"main",fn:function(e){var t=e.state,n=e.options,r=e.name,u=n.mainAxis,c=void 0===u||u,h=n.altAxis,f=void 0!==h&&h,d=n.tether,p=void 0===d||d,g=n.tetherOffset,v=void 0===g?0:g,m=me(t,{boundary:n.boundary,rootBoundary:n.rootBoundary,padding:n.padding,altBoundary:n.altBoundary}),y=R(t.placement),_=ge(t.placement),b=!_,w=K(y),T="x"===w?"y":"x",E=t.modifiersData.popperOffsets,I=t.rects.reference,k=t.rects.popper,C="function"==typeof v?v(Object.assign({},t.rects,{placement:t.placement})):v,S={x:0,y:0};if(E){if(c||f){var A="y"===w?i:a,x="y"===w?o:s,N="y"===w?"height":"width",D=E[w],P=E[w]+m[A],O=E[w]-m[x],L=p?-k[N]/2:0,M=_===l?I[N]:k[N],j=_===l?-k[N]:-I[N],q=t.elements.arrow,U=p&&q?F(q):{width:0,height:0},V=t.modifiersData["arrow#persistent"]?t.modifiersData["arrow#persistent"].padding:{top:0,right:0,bottom:0,left:0},B=V[A],H=V[x],Q=$(0,I[N],U[N]),Y=b?I[N]/2-L-Q-B-C:M-Q-B-C,X=b?-I[N]/2+L+Q+H+C:j+Q+H+C,Z=t.elements.arrow&&W(t.elements.arrow),J=t.modifiersData.offset?t.modifiersData.offset[t.placement][w]:0,ee=E[w]+Y-J-(Z?"y"===w?Z.clientTop||0:Z.clientLeft||0:0),te=E[w]+X-J;if(c){var ne=$(p?G(P,ee):P,D,p?z(O,te):O);E[w]=ne,S[w]=ne-D}if(f){var re=E[T],ie=re+m["x"===w?i:a],oe=re-m["x"===w?o:s],se=$(p?G(ie,ee):ie,re,p?z(oe,te):oe);E[T]=se,S[T]=se-re}}t.modifiersData[r]=S}},requiresIfExists:["offset"]};function ke(e,t,n){void 0===n&&(n=!1);var r,i,o=D(t),s=D(t)&&function(e){var t=e.getBoundingClientRect();return 1!==(t.width/e.offsetWidth||1)||1!==(t.height/e.offsetHeight||1)}(t),a=V(t),u=M(e,s),c={scrollLeft:0,scrollTop:0},l={x:0,y:0};return(o||!o&&!n)&&(("body"!==A(t)||le(a))&&(c=(r=t)!==x(r)&&D(r)?{scrollLeft:(i=r).scrollLeft,scrollTop:i.scrollTop}:ue(r)),D(t)?((l=M(t,!0)).x+=t.clientLeft,l.y+=t.clientTop):a&&(l.x=ce(a))),{x:u.left+c.scrollLeft-l.x,y:u.top+c.scrollTop-l.y,width:u.width,height:u.height}}function Ce(e){var t=new Map,n=new Set,r=[];function i(e){n.add(e.name),[].concat(e.requires||[],e.requiresIfExists||[]).forEach(function(e){if(!n.has(e)){var r=t.get(e);r&&i(r)}}),r.push(e)}return e.forEach(function(e){t.set(e.name,e)}),e.forEach(function(e){n.has(e.name)||i(e)}),r}function Se(e){var t;return function(){return t||(t=new Promise(function(n){Promise.resolve().then(function(){t=void 0,n(e())})})),t}}var Ae={placement:"bottom",modifiers:[],strategy:"absolute"};function xe(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return!t.some(function(e){return!(e&&"function"==typeof e.getBoundingClientRect)})}function Ne(e){void 0===e&&(e={});var t=e.defaultModifiers,n=void 0===t?[]:t,r=e.defaultOptions,i=void 0===r?Ae:r;return function(e,t,r){void 0===r&&(r=i);var o={placement:"bottom",orderedModifiers:[],options:Object.assign({},Ae,i),modifiersData:{},elements:{reference:e,popper:t},attributes:{},styles:{}},s=[],a=!1,u={state:o,setOptions:function(r){c(),o.options=Object.assign({},i,o.options,r),o.scrollParents={reference:N(e)?fe(e):e.contextElement?fe(e.contextElement):[],popper:fe(t)};var a,l,h=function(e){var t=Ce(e);return S.reduce(function(e,n){return e.concat(t.filter(function(e){return e.phase===n}))},[])}((a=[].concat(n,o.options.modifiers),l=a.reduce(function(e,t){var n=e[t.name];return e[t.name]=n?Object.assign({},n,t,{options:Object.assign({},n.options,t.options),data:Object.assign({},n.data,t.data)}):t,e},{}),Object.keys(l).map(function(e){return l[e]})));return o.orderedModifiers=h.filter(function(e){return e.enabled}),o.orderedModifiers.forEach(function(e){var t=e.options,n=e.effect;if("function"==typeof n){var r=n({state:o,name:e.name,instance:u,options:void 0===t?{}:t});s.push(r||function(){})}}),u.update()},forceUpdate:function(){if(!a){var e=o.elements,t=e.reference,n=e.popper;if(xe(t,n)){o.rects={reference:ke(t,W(n),"fixed"===o.options.strategy),popper:F(n)},o.reset=!1,o.placement=o.options.placement,o.orderedModifiers.forEach(function(e){return o.modifiersData[e.name]=Object.assign({},e.data)});for(var r=0;r<o.orderedModifiers.length;r++)if(!0!==o.reset){var i=o.orderedModifiers[r],s=i.fn,c=i.options;"function"==typeof s&&(o=s({state:o,options:void 0===c?{}:c,name:i.name,instance:u})||o)}else o.reset=!1,r=-1}}},update:Se(function(){return new Promise(function(e){u.forceUpdate(),e(o)})}),destroy:function(){c(),a=!0}};if(!xe(e,t))return u;function c(){s.forEach(function(e){return e()}),s=[]}return u.setOptions(r).then(function(e){!a&&r.onFirstUpdate&&r.onFirstUpdate(e)}),u}}var De=Ne(),Pe=Ne({defaultModifiers:[re,Ee,te,O,Te,ye,Ie,Z,we]}),Oe=Ne({defaultModifiers:[re,Ee,te,O]});const Re="transitionend",Le=e=>{let t=e.getAttribute("data-bs-target");if(!t||"#"===t){let n=e.getAttribute("href");if(!n||!n.includes("#")&&!n.startsWith("."))return null;n.includes("#")&&!n.startsWith("#")&&(n=`#${n.split("#")[1]}`),t=n&&"#"!==n?n.trim():null}return t},Me=e=>{const t=Le(e);return t&&document.querySelector(t)?t:null},Fe=e=>{const t=Le(e);return t?document.querySelector(t):null},je=e=>{e.dispatchEvent(new Event(Re))},qe=e=>!(!e||"object"!=typeof e)&&(void 0!==e.jquery&&(e=e[0]),void 0!==e.nodeType),Ue=e=>qe(e)?e.jquery?e[0]:e:"string"==typeof e&&e.length>0?document.querySelector(e):null,Ve=(e,t,n)=>{Object.keys(n).forEach(r=>{const i=n[r],o=t[r],s=o&&qe(o)?"element":null==(a=o)?`${a}`:{}.toString.call(a).match(/\s([a-z]+)/i)[1].toLowerCase();var a;if(!new RegExp(i).test(s))throw new TypeError(`${e.toUpperCase()}: Option "${r}" provided type "${s}" but expected type "${i}".`)})},Be=e=>!(!qe(e)||0===e.getClientRects().length)&&"visible"===getComputedStyle(e).getPropertyValue("visibility"),He=e=>!e||e.nodeType!==Node.ELEMENT_NODE||!!e.classList.contains("disabled")||(void 0!==e.disabled?e.disabled:e.hasAttribute("disabled")&&"false"!==e.getAttribute("disabled")),We=e=>{if(!document.documentElement.attachShadow)return null;if("function"==typeof e.getRootNode){const t=e.getRootNode();return t instanceof ShadowRoot?t:null}return e instanceof ShadowRoot?e:e.parentNode?We(e.parentNode):null},Ke=()=>{},ze=()=>{const{jQuery:e}=window;return e&&!document.body.hasAttribute("data-bs-no-jquery")?e:null},Ge=[],Qe=()=>"rtl"===document.documentElement.dir,$e=e=>{var t;t=()=>{const t=ze();if(t){const n=e.NAME,r=t.fn[n];t.fn[n]=e.jQueryInterface,t.fn[n].Constructor=e,t.fn[n].noConflict=()=>(t.fn[n]=r,e.jQueryInterface)}},"loading"===document.readyState?(Ge.length||document.addEventListener("DOMContentLoaded",()=>{Ge.forEach(e=>e())}),Ge.push(t)):t()},Ye=e=>{"function"==typeof e&&e()},Xe=(e,t,n=!0)=>{if(!n)return void Ye(e);const r=(e=>{if(!e)return 0;let{transitionDuration:t,transitionDelay:n}=window.getComputedStyle(e);const r=Number.parseFloat(t),i=Number.parseFloat(n);return r||i?(t=t.split(",")[0],n=n.split(",")[0],1e3*(Number.parseFloat(t)+Number.parseFloat(n))):0})(t)+5;let i=!1;const o=({target:n})=>{n===t&&(i=!0,t.removeEventListener(Re,o),Ye(e))};t.addEventListener(Re,o),setTimeout(()=>{i||je(t)},r)},Ze=(e,t,n,r)=>{let i=e.indexOf(t);if(-1===i)return e[!n&&r?e.length-1:0];const o=e.length;return i+=n?1:-1,r&&(i=(i+o)%o),e[Math.max(0,Math.min(i,o-1))]},Je=/[^.]*(?=\..*)\.|.*/,et=/\..*/,tt=/::\d+$/,nt={};let rt=1;const it={mouseenter:"mouseover",mouseleave:"mouseout"},ot=/^(mouseenter|mouseleave)/i,st=new Set(["click","dblclick","mouseup","mousedown","contextmenu","mousewheel","DOMMouseScroll","mouseover","mouseout","mousemove","selectstart","selectend","keydown","keypress","keyup","orientationchange","touchstart","touchmove","touchend","touchcancel","pointerdown","pointermove","pointerup","pointerleave","pointercancel","gesturestart","gesturechange","gestureend","focus","blur","change","reset","select","submit","focusin","focusout","load","unload","beforeunload","resize","move","DOMContentLoaded","readystatechange","error","abort","scroll"]);function at(e,t){return t&&`${t}::${rt++}`||e.uidEvent||rt++}function ut(e){const t=at(e);return e.uidEvent=t,nt[t]=nt[t]||{},nt[t]}function ct(e,t,n=null){const r=Object.keys(e);for(let i=0,o=r.length;i<o;i++){const o=e[r[i]];if(o.originalHandler===t&&o.delegationSelector===n)return o}return null}function lt(e,t,n){const r="string"==typeof t,i=r?n:t;let o=dt(e);return st.has(o)||(o=e),[r,i,o]}function ht(e,t,n,r,i){if("string"!=typeof t||!e)return;if(n||(n=r,r=null),ot.test(t)){const e=e=>function(t){if(!t.relatedTarget||t.relatedTarget!==t.delegateTarget&&!t.delegateTarget.contains(t.relatedTarget))return e.call(this,t)};r?r=e(r):n=e(n)}const[o,s,a]=lt(t,n,r),u=ut(e),c=u[a]||(u[a]={}),l=ct(c,s,o?n:null);if(l)return void(l.oneOff=l.oneOff&&i);const h=at(s,t.replace(Je,"")),f=o?function(e,t,n){return function r(i){const o=e.querySelectorAll(t);for(let{target:s}=i;s&&s!==this;s=s.parentNode)for(let a=o.length;a--;)if(o[a]===s)return i.delegateTarget=s,r.oneOff&&pt.off(e,i.type,t,n),n.apply(s,[i]);return null}}(e,n,r):function(e,t){return function n(r){return r.delegateTarget=e,n.oneOff&&pt.off(e,r.type,t),t.apply(e,[r])}}(e,n);f.delegationSelector=o?n:null,f.originalHandler=s,f.oneOff=i,f.uidEvent=h,c[h]=f,e.addEventListener(a,f,o)}function ft(e,t,n,r,i){const o=ct(t[n],r,i);o&&(e.removeEventListener(n,o,Boolean(i)),delete t[n][o.uidEvent])}function dt(e){return e=e.replace(et,""),it[e]||e}const pt={on(e,t,n,r){ht(e,t,n,r,!1)},one(e,t,n,r){ht(e,t,n,r,!0)},off(e,t,n,r){if("string"!=typeof t||!e)return;const[i,o,s]=lt(t,n,r),a=s!==t,u=ut(e),c=t.startsWith(".");if(void 0!==o){if(!u||!u[s])return;return void ft(e,u,s,o,i?n:null)}c&&Object.keys(u).forEach(n=>{!function(e,t,n,r){const i=t[n]||{};Object.keys(i).forEach(o=>{if(o.includes(r)){const r=i[o];ft(e,t,n,r.originalHandler,r.delegationSelector)}})}(e,u,n,t.slice(1))});const l=u[s]||{};Object.keys(l).forEach(n=>{const r=n.replace(tt,"");if(!a||t.includes(r)){const t=l[n];ft(e,u,s,t.originalHandler,t.delegationSelector)}})},trigger(e,t,n){if("string"!=typeof t||!e)return null;const r=ze(),i=dt(t),o=t!==i,s=st.has(i);let a,u=!0,c=!0,l=!1,h=null;return o&&r&&(a=r.Event(t,n),r(e).trigger(a),u=!a.isPropagationStopped(),c=!a.isImmediatePropagationStopped(),l=a.isDefaultPrevented()),s?(h=document.createEvent("HTMLEvents"),h.initEvent(i,u,!0)):h=new CustomEvent(t,{bubbles:u,cancelable:!0}),void 0!==n&&Object.keys(n).forEach(e=>{Object.defineProperty(h,e,{get:()=>n[e]})}),l&&h.preventDefault(),c&&e.dispatchEvent(h),h.defaultPrevented&&void 0!==a&&a.preventDefault(),h}},gt=new Map;var vt={set(e,t,n){gt.has(e)||gt.set(e,new Map);const r=gt.get(e);r.has(t)||0===r.size?r.set(t,n):console.error(`Bootstrap doesn't allow more than one instance per element. Bound instance: ${Array.from(r.keys())[0]}.`)},get:(e,t)=>gt.has(e)&&gt.get(e).get(t)||null,remove(e,t){if(!gt.has(e))return;const n=gt.get(e);n.delete(t),0===n.size&&gt.delete(e)}};class mt{constructor(e){(e=Ue(e))&&(this._element=e,vt.set(this._element,this.constructor.DATA_KEY,this))}dispose(){vt.remove(this._element,this.constructor.DATA_KEY),pt.off(this._element,this.constructor.EVENT_KEY),Object.getOwnPropertyNames(this).forEach(e=>{this[e]=null})}_queueCallback(e,t,n=!0){Xe(e,t,n)}static getInstance(e){return vt.get(Ue(e),this.DATA_KEY)}static getOrCreateInstance(e,t={}){return this.getInstance(e)||new this(e,"object"==typeof t?t:null)}static get VERSION(){return"5.1.0"}static get NAME(){throw new Error('You have to implement the static method "NAME", for each component!')}static get DATA_KEY(){return`bs.${this.NAME}`}static get EVENT_KEY(){return`.${this.DATA_KEY}`}}const yt=(e,t="hide")=>{const n=e.NAME;pt.on(document,`click.dismiss${e.EVENT_KEY}`,`[data-bs-dismiss="${n}"]`,function(r){if(["A","AREA"].includes(this.tagName)&&r.preventDefault(),He(this))return;const i=Fe(this)||this.closest(`.${n}`);e.getOrCreateInstance(i)[t]()})};class _t extends mt{static get NAME(){return"alert"}close(){if(pt.trigger(this._element,"close.bs.alert").defaultPrevented)return;this._element.classList.remove("show");const e=this._element.classList.contains("fade");this._queueCallback(()=>this._destroyElement(),this._element,e)}_destroyElement(){this._element.remove(),pt.trigger(this._element,"closed.bs.alert"),this.dispose()}static jQueryInterface(e){return this.each(function(){const t=_t.getOrCreateInstance(this);if("string"==typeof e){if(void 0===t[e]||e.startsWith("_")||"constructor"===e)throw new TypeError(`No method named "${e}"`);t[e](this)}})}}yt(_t,"close"),$e(_t);const bt='[data-bs-toggle="button"]';class wt extends mt{static get NAME(){return"button"}toggle(){this._element.setAttribute("aria-pressed",this._element.classList.toggle("active"))}static jQueryInterface(e){return this.each(function(){const t=wt.getOrCreateInstance(this);"toggle"===e&&t[e]()})}}function Tt(e){return"true"===e||"false"!==e&&(e===Number(e).toString()?Number(e):""===e||"null"===e?null:e)}function Et(e){return e.replace(/[A-Z]/g,e=>`-${e.toLowerCase()}`)}pt.on(document,"click.bs.button.data-api",bt,e=>{e.preventDefault();const t=e.target.closest(bt);wt.getOrCreateInstance(t).toggle()}),$e(wt);const It={setDataAttribute(e,t,n){e.setAttribute(`data-bs-${Et(t)}`,n)},removeDataAttribute(e,t){e.removeAttribute(`data-bs-${Et(t)}`)},getDataAttributes(e){if(!e)return{};const t={};return Object.keys(e.dataset).filter(e=>e.startsWith("bs")).forEach(n=>{let r=n.replace(/^bs/,"");r=r.charAt(0).toLowerCase()+r.slice(1,r.length),t[r]=Tt(e.dataset[n])}),t},getDataAttribute:(e,t)=>Tt(e.getAttribute(`data-bs-${Et(t)}`)),offset(e){const t=e.getBoundingClientRect();return{top:t.top+window.pageYOffset,left:t.left+window.pageXOffset}},position:e=>({top:e.offsetTop,left:e.offsetLeft})},kt={find:(e,t=document.documentElement)=>[].concat(...Element.prototype.querySelectorAll.call(t,e)),findOne:(e,t=document.documentElement)=>Element.prototype.querySelector.call(t,e),children:(e,t)=>[].concat(...e.children).filter(e=>e.matches(t)),parents(e,t){const n=[];let r=e.parentNode;for(;r&&r.nodeType===Node.ELEMENT_NODE&&3!==r.nodeType;)r.matches(t)&&n.push(r),r=r.parentNode;return n},prev(e,t){let n=e.previousElementSibling;for(;n;){if(n.matches(t))return[n];n=n.previousElementSibling}return[]},next(e,t){let n=e.nextElementSibling;for(;n;){if(n.matches(t))return[n];n=n.nextElementSibling}return[]},focusableChildren(e){const t=["a","button","input","textarea","select","details","[tabindex]",'[contenteditable="true"]'].map(e=>`${e}:not([tabindex^="-"])`).join(", ");return this.find(t,e).filter(e=>!He(e)&&Be(e))}},Ct="carousel",St={interval:5e3,keyboard:!0,slide:!1,pause:"hover",wrap:!0,touch:!0},At={interval:"(number|boolean)",keyboard:"boolean",slide:"(boolean|string)",pause:"(string|boolean)",wrap:"boolean",touch:"boolean"},xt="next",Nt="prev",Dt="left",Pt="right",Ot={ArrowLeft:Pt,ArrowRight:Dt},Rt="slid.bs.carousel",Lt="active",Mt=".active.carousel-item",Ft="touch";class jt extends mt{constructor(e,t){super(e),this._items=null,this._interval=null,this._activeElement=null,this._isPaused=!1,this._isSliding=!1,this.touchTimeout=null,this.touchStartX=0,this.touchDeltaX=0,this._config=this._getConfig(t),this._indicatorsElement=kt.findOne(".carousel-indicators",this._element),this._touchSupported="ontouchstart"in document.documentElement||navigator.maxTouchPoints>0,this._pointerEvent=Boolean(window.PointerEvent),this._addEventListeners()}static get Default(){return St}static get NAME(){return Ct}next(){this._slide(xt)}nextWhenVisible(){!document.hidden&&Be(this._element)&&this.next()}prev(){this._slide(Nt)}pause(e){e||(this._isPaused=!0),kt.findOne(".carousel-item-next, .carousel-item-prev",this._element)&&(je(this._element),this.cycle(!0)),clearInterval(this._interval),this._interval=null}cycle(e){e||(this._isPaused=!1),this._interval&&(clearInterval(this._interval),this._interval=null),this._config&&this._config.interval&&!this._isPaused&&(this._updateInterval(),this._interval=setInterval((document.visibilityState?this.nextWhenVisible:this.next).bind(this),this._config.interval))}to(e){this._activeElement=kt.findOne(Mt,this._element);const t=this._getItemIndex(this._activeElement);if(!(e>this._items.length-1||e<0)){if(!this._isSliding)return t===e?(this.pause(),void this.cycle()):void this._slide(e>t?xt:Nt,this._items[e]);pt.one(this._element,Rt,()=>this.to(e))}}_getConfig(e){return e={...St,...It.getDataAttributes(this._element),..."object"==typeof e?e:{}},Ve(Ct,e,At),e}_handleSwipe(){const e=Math.abs(this.touchDeltaX);if(e<=40)return;const t=e/this.touchDeltaX;this.touchDeltaX=0,t&&this._slide(t>0?Pt:Dt)}_addEventListeners(){this._config.keyboard&&pt.on(this._element,"keydown.bs.carousel",e=>this._keydown(e)),"hover"===this._config.pause&&(pt.on(this._element,"mouseenter.bs.carousel",e=>this.pause(e)),pt.on(this._element,"mouseleave.bs.carousel",e=>this.cycle(e))),this._config.touch&&this._touchSupported&&this._addTouchEventListeners()}_addTouchEventListeners(){const e=e=>{!this._pointerEvent||"pen"!==e.pointerType&&e.pointerType!==Ft?this._pointerEvent||(this.touchStartX=e.touches[0].clientX):this.touchStartX=e.clientX},t=e=>{this.touchDeltaX=e.touches&&e.touches.length>1?0:e.touches[0].clientX-this.touchStartX},n=e=>{!this._pointerEvent||"pen"!==e.pointerType&&e.pointerType!==Ft||(this.touchDeltaX=e.clientX-this.touchStartX),this._handleSwipe(),"hover"===this._config.pause&&(this.pause(),this.touchTimeout&&clearTimeout(this.touchTimeout),this.touchTimeout=setTimeout(e=>this.cycle(e),500+this._config.interval))};kt.find(".carousel-item img",this._element).forEach(e=>{pt.on(e,"dragstart.bs.carousel",e=>e.preventDefault())}),this._pointerEvent?(pt.on(this._element,"pointerdown.bs.carousel",t=>e(t)),pt.on(this._element,"pointerup.bs.carousel",e=>n(e)),this._element.classList.add("pointer-event")):(pt.on(this._element,"touchstart.bs.carousel",t=>e(t)),pt.on(this._element,"touchmove.bs.carousel",e=>t(e)),pt.on(this._element,"touchend.bs.carousel",e=>n(e)))}_keydown(e){if(/input|textarea/i.test(e.target.tagName))return;const t=Ot[e.key];t&&(e.preventDefault(),this._slide(t))}_getItemIndex(e){return this._items=e&&e.parentNode?kt.find(".carousel-item",e.parentNode):[],this._items.indexOf(e)}_getItemByOrder(e,t){return Ze(this._items,t,e===xt,this._config.wrap)}_triggerSlideEvent(e,t){const n=this._getItemIndex(e),r=this._getItemIndex(kt.findOne(Mt,this._element));return pt.trigger(this._element,"slide.bs.carousel",{relatedTarget:e,direction:t,from:r,to:n})}_setActiveIndicatorElement(e){if(this._indicatorsElement){const t=kt.findOne(".active",this._indicatorsElement);t.classList.remove(Lt),t.removeAttribute("aria-current");const n=kt.find("[data-bs-target]",this._indicatorsElement);for(let r=0;r<n.length;r++)if(Number.parseInt(n[r].getAttribute("data-bs-slide-to"),10)===this._getItemIndex(e)){n[r].classList.add(Lt),n[r].setAttribute("aria-current","true");break}}}_updateInterval(){const e=this._activeElement||kt.findOne(Mt,this._element);if(!e)return;const t=Number.parseInt(e.getAttribute("data-bs-interval"),10);t?(this._config.defaultInterval=this._config.defaultInterval||this._config.interval,this._config.interval=t):this._config.interval=this._config.defaultInterval||this._config.interval}_slide(e,t){const n=this._directionToOrder(e),r=kt.findOne(Mt,this._element),i=this._getItemIndex(r),o=t||this._getItemByOrder(n,r),s=this._getItemIndex(o),a=Boolean(this._interval),u=n===xt,c=u?"carousel-item-start":"carousel-item-end",l=u?"carousel-item-next":"carousel-item-prev",h=this._orderToDirection(n);if(o&&o.classList.contains(Lt))return void(this._isSliding=!1);if(this._isSliding)return;if(this._triggerSlideEvent(o,h).defaultPrevented)return;if(!r||!o)return;this._isSliding=!0,a&&this.pause(),this._setActiveIndicatorElement(o),this._activeElement=o;const f=()=>{pt.trigger(this._element,Rt,{relatedTarget:o,direction:h,from:i,to:s})};this._element.classList.contains("slide")?(o.classList.add(l),r.classList.add(c),o.classList.add(c),this._queueCallback(()=>{o.classList.remove(c,l),o.classList.add(Lt),r.classList.remove(Lt,l,c),this._isSliding=!1,setTimeout(f,0)},r,!0)):(r.classList.remove(Lt),o.classList.add(Lt),this._isSliding=!1,f()),a&&this.cycle()}_directionToOrder(e){return[Pt,Dt].includes(e)?Qe()?e===Dt?Nt:xt:e===Dt?xt:Nt:e}_orderToDirection(e){return[xt,Nt].includes(e)?Qe()?e===Nt?Dt:Pt:e===Nt?Pt:Dt:e}static carouselInterface(e,t){const n=jt.getOrCreateInstance(e,t);let{_config:r}=n;"object"==typeof t&&(r={...r,...t});const i="string"==typeof t?t:r.slide;if("number"==typeof t)n.to(t);else if("string"==typeof i){if(void 0===n[i])throw new TypeError(`No method named "${i}"`);n[i]()}else r.interval&&r.ride&&(n.pause(),n.cycle())}static jQueryInterface(e){return this.each(function(){jt.carouselInterface(this,e)})}static dataApiClickHandler(e){const t=Fe(this);if(!t||!t.classList.contains("carousel"))return;const n={...It.getDataAttributes(t),...It.getDataAttributes(this)},r=this.getAttribute("data-bs-slide-to");r&&(n.interval=!1),jt.carouselInterface(t,n),r&&jt.getInstance(t).to(r),e.preventDefault()}}pt.on(document,"click.bs.carousel.data-api","[data-bs-slide], [data-bs-slide-to]",jt.dataApiClickHandler),pt.on(window,"load.bs.carousel.data-api",()=>{const e=kt.find('[data-bs-ride="carousel"]');for(let t=0,n=e.length;t<n;t++)jt.carouselInterface(e[t],jt.getInstance(e[t]))}),$e(jt);const qt="collapse",Ut={toggle:!0,parent:null},Vt={toggle:"boolean",parent:"(null|element)"},Bt="show",Ht="collapse",Wt="collapsing",Kt="collapsed",zt='[data-bs-toggle="collapse"]';class Gt extends mt{constructor(e,t){super(e),this._isTransitioning=!1,this._config=this._getConfig(t),this._triggerArray=[];const n=kt.find(zt);for(let r=0,i=n.length;r<i;r++){const e=n[r],t=Me(e),i=kt.find(t).filter(e=>e===this._element);null!==t&&i.length&&(this._selector=t,this._triggerArray.push(e))}this._initializeChildren(),this._config.parent||this._addAriaAndCollapsedClass(this._triggerArray,this._isShown()),this._config.toggle&&this.toggle()}static get Default(){return Ut}static get NAME(){return qt}toggle(){this._isShown()?this.hide():this.show()}show(){if(this._isTransitioning||this._isShown())return;let e,t=[];if(this._config.parent){const e=kt.find(".collapse .collapse",this._config.parent);t=kt.find(".show, .collapsing",this._config.parent).filter(t=>!e.includes(t))}const n=kt.findOne(this._selector);if(t.length){const r=t.find(e=>n!==e);if(e=r?Gt.getInstance(r):null,e&&e._isTransitioning)return}if(pt.trigger(this._element,"show.bs.collapse").defaultPrevented)return;t.forEach(t=>{n!==t&&Gt.getOrCreateInstance(t,{toggle:!1}).hide(),e||vt.set(t,"bs.collapse",null)});const r=this._getDimension();this._element.classList.remove(Ht),this._element.classList.add(Wt),this._element.style[r]=0,this._addAriaAndCollapsedClass(this._triggerArray,!0),this._isTransitioning=!0;const i=`scroll${r[0].toUpperCase()+r.slice(1)}`;this._queueCallback(()=>{this._isTransitioning=!1,this._element.classList.remove(Wt),this._element.classList.add(Ht,Bt),this._element.style[r]="",pt.trigger(this._element,"shown.bs.collapse")},this._element,!0),this._element.style[r]=`${this._element[i]}px`}hide(){if(this._isTransitioning||!this._isShown())return;if(pt.trigger(this._element,"hide.bs.collapse").defaultPrevented)return;const e=this._getDimension();this._element.style[e]=`${this._element.getBoundingClientRect()[e]}px`,this._element.classList.add(Wt),this._element.classList.remove(Ht,Bt);const t=this._triggerArray.length;for(let n=0;n<t;n++){const e=this._triggerArray[n],t=Fe(e);t&&!this._isShown(t)&&this._addAriaAndCollapsedClass([e],!1)}this._isTransitioning=!0,this._element.style[e]="",this._queueCallback(()=>{this._isTransitioning=!1,this._element.classList.remove(Wt),this._element.classList.add(Ht),pt.trigger(this._element,"hidden.bs.collapse")},this._element,!0)}_isShown(e=this._element){return e.classList.contains(Bt)}_getConfig(e){return(e={...Ut,...It.getDataAttributes(this._element),...e}).toggle=Boolean(e.toggle),e.parent=Ue(e.parent),Ve(qt,e,Vt),e}_getDimension(){return this._element.classList.contains("collapse-horizontal")?"width":"height"}_initializeChildren(){if(!this._config.parent)return;const e=kt.find(".collapse .collapse",this._config.parent);kt.find(zt,this._config.parent).filter(t=>!e.includes(t)).forEach(e=>{const t=Fe(e);t&&this._addAriaAndCollapsedClass([e],this._isShown(t))})}_addAriaAndCollapsedClass(e,t){e.length&&e.forEach(e=>{t?e.classList.remove(Kt):e.classList.add(Kt),e.setAttribute("aria-expanded",t)})}static jQueryInterface(e){return this.each(function(){const t={};"string"==typeof e&&/show|hide/.test(e)&&(t.toggle=!1);const n=Gt.getOrCreateInstance(this,t);if("string"==typeof e){if(void 0===n[e])throw new TypeError(`No method named "${e}"`);n[e]()}})}}pt.on(document,"click.bs.collapse.data-api",zt,function(e){("A"===e.target.tagName||e.delegateTarget&&"A"===e.delegateTarget.tagName)&&e.preventDefault();const t=Me(this);kt.find(t).forEach(e=>{Gt.getOrCreateInstance(e,{toggle:!1}).toggle()})}),$e(Gt);const Qt="dropdown",$t="Escape",Yt="Space",Xt="ArrowUp",Zt="ArrowDown",Jt=new RegExp("ArrowUp|ArrowDown|Escape"),en="click.bs.dropdown.data-api",tn="keydown.bs.dropdown.data-api",nn="show",rn='[data-bs-toggle="dropdown"]',on=".dropdown-menu",sn=Qe()?"top-end":"top-start",an=Qe()?"top-start":"top-end",un=Qe()?"bottom-end":"bottom-start",cn=Qe()?"bottom-start":"bottom-end",ln=Qe()?"left-start":"right-start",hn=Qe()?"right-start":"left-start",fn={offset:[0,2],boundary:"clippingParents",reference:"toggle",display:"dynamic",popperConfig:null,autoClose:!0},dn={offset:"(array|string|function)",boundary:"(string|element)",reference:"(string|element|object)",display:"string",popperConfig:"(null|object|function)",autoClose:"(boolean|string)"};class pn extends mt{constructor(e,t){super(e),this._popper=null,this._config=this._getConfig(t),this._menu=this._getMenuElement(),this._inNavbar=this._detectNavbar()}static get Default(){return fn}static get DefaultType(){return dn}static get NAME(){return Qt}toggle(){return this._isShown()?this.hide():this.show()}show(){if(He(this._element)||this._isShown(this._menu))return;const e={relatedTarget:this._element};if(pt.trigger(this._element,"show.bs.dropdown",e).defaultPrevented)return;const t=pn.getParentFromElement(this._element);this._inNavbar?It.setDataAttribute(this._menu,"popper","none"):this._createPopper(t),"ontouchstart"in document.documentElement&&!t.closest(".navbar-nav")&&[].concat(...document.body.children).forEach(e=>pt.on(e,"mouseover",Ke)),this._element.focus(),this._element.setAttribute("aria-expanded",!0),this._menu.classList.add(nn),this._element.classList.add(nn),pt.trigger(this._element,"shown.bs.dropdown",e)}hide(){!He(this._element)&&this._isShown(this._menu)&&this._completeHide({relatedTarget:this._element})}dispose(){this._popper&&this._popper.destroy(),super.dispose()}update(){this._inNavbar=this._detectNavbar(),this._popper&&this._popper.update()}_completeHide(e){pt.trigger(this._element,"hide.bs.dropdown",e).defaultPrevented||("ontouchstart"in document.documentElement&&[].concat(...document.body.children).forEach(e=>pt.off(e,"mouseover",Ke)),this._popper&&this._popper.destroy(),this._menu.classList.remove(nn),this._element.classList.remove(nn),this._element.setAttribute("aria-expanded","false"),It.removeDataAttribute(this._menu,"popper"),pt.trigger(this._element,"hidden.bs.dropdown",e))}_getConfig(e){if(e={...this.constructor.Default,...It.getDataAttributes(this._element),...e},Ve(Qt,e,this.constructor.DefaultType),"object"==typeof e.reference&&!qe(e.reference)&&"function"!=typeof e.reference.getBoundingClientRect)throw new TypeError(`${Qt.toUpperCase()}: Option "reference" provided type "object" without a required "getBoundingClientRect" method.`);return e}_createPopper(e){if(void 0===r)throw new TypeError("Bootstrap's dropdowns require Popper (https://popper.js.org)");let t=this._element;"parent"===this._config.reference?t=e:qe(this._config.reference)?t=Ue(this._config.reference):"object"==typeof this._config.reference&&(t=this._config.reference);const n=this._getPopperConfig(),i=n.modifiers.find(e=>"applyStyles"===e.name&&!1===e.enabled);this._popper=Pe(t,this._menu,n),i&&It.setDataAttribute(this._menu,"popper","static")}_isShown(e=this._element){return e.classList.contains(nn)}_getMenuElement(){return kt.next(this._element,on)[0]}_getPlacement(){const e=this._element.parentNode;if(e.classList.contains("dropend"))return ln;if(e.classList.contains("dropstart"))return hn;const t="end"===getComputedStyle(this._menu).getPropertyValue("--bs-position").trim();return e.classList.contains("dropup")?t?an:sn:t?cn:un}_detectNavbar(){return null!==this._element.closest(".navbar")}_getOffset(){const{offset:e}=this._config;return"string"==typeof e?e.split(",").map(e=>Number.parseInt(e,10)):"function"==typeof e?t=>e(t,this._element):e}_getPopperConfig(){const e={placement:this._getPlacement(),modifiers:[{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"offset",options:{offset:this._getOffset()}}]};return"static"===this._config.display&&(e.modifiers=[{name:"applyStyles",enabled:!1}]),{...e,..."function"==typeof this._config.popperConfig?this._config.popperConfig(e):this._config.popperConfig}}_selectMenuItem({key:e,target:t}){const n=kt.find(".dropdown-menu .dropdown-item:not(.disabled):not(:disabled)",this._menu).filter(Be);n.length&&Ze(n,t,e===Zt,!n.includes(t)).focus()}static jQueryInterface(e){return this.each(function(){const t=pn.getOrCreateInstance(this,e);if("string"==typeof e){if(void 0===t[e])throw new TypeError(`No method named "${e}"`);t[e]()}})}static clearMenus(e){if(e&&(2===e.button||"keyup"===e.type&&"Tab"!==e.key))return;const t=kt.find(rn);for(let n=0,r=t.length;n<r;n++){const r=pn.getInstance(t[n]);if(!r||!1===r._config.autoClose)continue;if(!r._isShown())continue;const i={relatedTarget:r._element};if(e){const t=e.composedPath(),n=t.includes(r._menu);if(t.includes(r._element)||"inside"===r._config.autoClose&&!n||"outside"===r._config.autoClose&&n)continue;if(r._menu.contains(e.target)&&("keyup"===e.type&&"Tab"===e.key||/input|select|option|textarea|form/i.test(e.target.tagName)))continue;"click"===e.type&&(i.clickEvent=e)}r._completeHide(i)}}static getParentFromElement(e){return Fe(e)||e.parentNode}static dataApiKeydownHandler(e){if(/input|textarea/i.test(e.target.tagName)?e.key===Yt||e.key!==$t&&(e.key!==Zt&&e.key!==Xt||e.target.closest(on)):!Jt.test(e.key))return;const t=this.classList.contains(nn);if(!t&&e.key===$t)return;if(e.preventDefault(),e.stopPropagation(),He(this))return;const n=this.matches(rn)?this:kt.prev(this,rn)[0],r=pn.getOrCreateInstance(n);if(e.key!==$t)return e.key===Xt||e.key===Zt?(t||r.show(),void r._selectMenuItem(e)):void(t&&e.key!==Yt||pn.clearMenus());r.hide()}}pt.on(document,tn,rn,pn.dataApiKeydownHandler),pt.on(document,tn,on,pn.dataApiKeydownHandler),pt.on(document,en,pn.clearMenus),pt.on(document,"keyup.bs.dropdown.data-api",pn.clearMenus),pt.on(document,en,rn,function(e){e.preventDefault(),pn.getOrCreateInstance(this).toggle()}),$e(pn);const gn=".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",vn=".sticky-top";class mn{constructor(){this._element=document.body}getWidth(){const e=document.documentElement.clientWidth;return Math.abs(window.innerWidth-e)}hide(){const e=this.getWidth();this._disableOverFlow(),this._setElementAttributes(this._element,"paddingRight",t=>t+e),this._setElementAttributes(gn,"paddingRight",t=>t+e),this._setElementAttributes(vn,"marginRight",t=>t-e)}_disableOverFlow(){this._saveInitialAttribute(this._element,"overflow"),this._element.style.overflow="hidden"}_setElementAttributes(e,t,n){const r=this.getWidth();this._applyManipulationCallback(e,e=>{if(e!==this._element&&window.innerWidth>e.clientWidth+r)return;this._saveInitialAttribute(e,t);const i=window.getComputedStyle(e)[t];e.style[t]=`${n(Number.parseFloat(i))}px`})}reset(){this._resetElementAttributes(this._element,"overflow"),this._resetElementAttributes(this._element,"paddingRight"),this._resetElementAttributes(gn,"paddingRight"),this._resetElementAttributes(vn,"marginRight")}_saveInitialAttribute(e,t){const n=e.style[t];n&&It.setDataAttribute(e,t,n)}_resetElementAttributes(e,t){this._applyManipulationCallback(e,e=>{const n=It.getDataAttribute(e,t);void 0===n?e.style.removeProperty(t):(It.removeDataAttribute(e,t),e.style[t]=n)})}_applyManipulationCallback(e,t){qe(e)?t(e):kt.find(e,this._element).forEach(t)}isOverflowing(){return this.getWidth()>0}}const yn={className:"modal-backdrop",isVisible:!0,isAnimated:!1,rootElement:"body",clickCallback:null},_n={className:"string",isVisible:"boolean",isAnimated:"boolean",rootElement:"(element|string)",clickCallback:"(function|null)"},bn="show",wn="mousedown.bs.backdrop";class Tn{constructor(e){this._config=this._getConfig(e),this._isAppended=!1,this._element=null}show(e){this._config.isVisible?(this._append(),this._config.isAnimated&&this._getElement(),this._getElement().classList.add(bn),this._emulateAnimation(()=>{Ye(e)})):Ye(e)}hide(e){this._config.isVisible?(this._getElement().classList.remove(bn),this._emulateAnimation(()=>{this.dispose(),Ye(e)})):Ye(e)}_getElement(){if(!this._element){const e=document.createElement("div");e.className=this._config.className,this._config.isAnimated&&e.classList.add("fade"),this._element=e}return this._element}_getConfig(e){return(e={...yn,..."object"==typeof e?e:{}}).rootElement=Ue(e.rootElement),Ve("backdrop",e,_n),e}_append(){this._isAppended||(this._config.rootElement.append(this._getElement()),pt.on(this._getElement(),wn,()=>{Ye(this._config.clickCallback)}),this._isAppended=!0)}dispose(){this._isAppended&&(pt.off(this._element,wn),this._element.remove(),this._isAppended=!1)}_emulateAnimation(e){Xe(e,this._getElement(),this._config.isAnimated)}}const En={trapElement:null,autofocus:!0},In={trapElement:"element",autofocus:"boolean"},kn=".bs.focustrap",Cn="backward";class Sn{constructor(e){this._config=this._getConfig(e),this._isActive=!1,this._lastTabNavDirection=null}activate(){const{trapElement:e,autofocus:t}=this._config;this._isActive||(t&&e.focus(),pt.off(document,kn),pt.on(document,"focusin.bs.focustrap",e=>this._handleFocusin(e)),pt.on(document,"keydown.tab.bs.focustrap",e=>this._handleKeydown(e)),this._isActive=!0)}deactivate(){this._isActive&&(this._isActive=!1,pt.off(document,kn))}_handleFocusin(e){const{target:t}=e,{trapElement:n}=this._config;if(t===document||t===n||n.contains(t))return;const r=kt.focusableChildren(n);0===r.length?n.focus():this._lastTabNavDirection===Cn?r[r.length-1].focus():r[0].focus()}_handleKeydown(e){"Tab"===e.key&&(this._lastTabNavDirection=e.shiftKey?Cn:"forward")}_getConfig(e){return e={...En,..."object"==typeof e?e:{}},Ve("focustrap",e,In),e}}const An="modal",xn="Escape",Nn={backdrop:!0,keyboard:!0,focus:!0},Dn={backdrop:"(boolean|string)",keyboard:"boolean",focus:"boolean"},Pn="hidden.bs.modal",On="show.bs.modal",Rn="resize.bs.modal",Ln="click.dismiss.bs.modal",Mn="keydown.dismiss.bs.modal",Fn="mousedown.dismiss.bs.modal",jn="modal-open",qn="show",Un="modal-static";class Vn extends mt{constructor(e,t){super(e),this._config=this._getConfig(t),this._dialog=kt.findOne(".modal-dialog",this._element),this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._isShown=!1,this._ignoreBackdropClick=!1,this._isTransitioning=!1,this._scrollBar=new mn}static get Default(){return Nn}static get NAME(){return An}toggle(e){return this._isShown?this.hide():this.show(e)}show(e){this._isShown||this._isTransitioning||pt.trigger(this._element,On,{relatedTarget:e}).defaultPrevented||(this._isShown=!0,this._isAnimated()&&(this._isTransitioning=!0),this._scrollBar.hide(),document.body.classList.add(jn),this._adjustDialog(),this._setEscapeEvent(),this._setResizeEvent(),pt.on(this._dialog,Fn,()=>{pt.one(this._element,"mouseup.dismiss.bs.modal",e=>{e.target===this._element&&(this._ignoreBackdropClick=!0)})}),this._showBackdrop(()=>this._showElement(e)))}hide(){if(!this._isShown||this._isTransitioning)return;if(pt.trigger(this._element,"hide.bs.modal").defaultPrevented)return;this._isShown=!1;const e=this._isAnimated();e&&(this._isTransitioning=!0),this._setEscapeEvent(),this._setResizeEvent(),this._focustrap.deactivate(),this._element.classList.remove(qn),pt.off(this._element,Ln),pt.off(this._dialog,Fn),this._queueCallback(()=>this._hideModal(),this._element,e)}dispose(){[window,this._dialog].forEach(e=>pt.off(e,".bs.modal")),this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}handleUpdate(){this._adjustDialog()}_initializeBackDrop(){return new Tn({isVisible:Boolean(this._config.backdrop),isAnimated:this._isAnimated()})}_initializeFocusTrap(){return new Sn({trapElement:this._element})}_getConfig(e){return e={...Nn,...It.getDataAttributes(this._element),..."object"==typeof e?e:{}},Ve(An,e,Dn),e}_showElement(e){const t=this._isAnimated(),n=kt.findOne(".modal-body",this._dialog);this._element.parentNode&&this._element.parentNode.nodeType===Node.ELEMENT_NODE||document.body.append(this._element),this._element.style.display="block",this._element.removeAttribute("aria-hidden"),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.scrollTop=0,n&&(n.scrollTop=0),this._element.classList.add(qn),this._queueCallback(()=>{this._config.focus&&this._focustrap.activate(),this._isTransitioning=!1,pt.trigger(this._element,"shown.bs.modal",{relatedTarget:e})},this._dialog,t)}_setEscapeEvent(){this._isShown?pt.on(this._element,Mn,e=>{this._config.keyboard&&e.key===xn?(e.preventDefault(),this.hide()):this._config.keyboard||e.key!==xn||this._triggerBackdropTransition()}):pt.off(this._element,Mn)}_setResizeEvent(){this._isShown?pt.on(window,Rn,()=>this._adjustDialog()):pt.off(window,Rn)}_hideModal(){this._element.style.display="none",this._element.setAttribute("aria-hidden",!0),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._isTransitioning=!1,this._backdrop.hide(()=>{document.body.classList.remove(jn),this._resetAdjustments(),this._scrollBar.reset(),pt.trigger(this._element,Pn)})}_showBackdrop(e){pt.on(this._element,Ln,e=>{this._ignoreBackdropClick?this._ignoreBackdropClick=!1:e.target===e.currentTarget&&(!0===this._config.backdrop?this.hide():"static"===this._config.backdrop&&this._triggerBackdropTransition())}),this._backdrop.show(e)}_isAnimated(){return this._element.classList.contains("fade")}_triggerBackdropTransition(){if(pt.trigger(this._element,"hidePrevented.bs.modal").defaultPrevented)return;const{classList:e,scrollHeight:t,style:n}=this._element,r=t>document.documentElement.clientHeight;!r&&"hidden"===n.overflowY||e.contains(Un)||(r||(n.overflowY="hidden"),e.add(Un),this._queueCallback(()=>{e.remove(Un),r||this._queueCallback(()=>{n.overflowY=""},this._dialog)},this._dialog),this._element.focus())}_adjustDialog(){const e=this._element.scrollHeight>document.documentElement.clientHeight,t=this._scrollBar.getWidth(),n=t>0;(!n&&e&&!Qe()||n&&!e&&Qe())&&(this._element.style.paddingLeft=`${t}px`),(n&&!e&&!Qe()||!n&&e&&Qe())&&(this._element.style.paddingRight=`${t}px`)}_resetAdjustments(){this._element.style.paddingLeft="",this._element.style.paddingRight=""}static jQueryInterface(e,t){return this.each(function(){const n=Vn.getOrCreateInstance(this,e);if("string"==typeof e){if(void 0===n[e])throw new TypeError(`No method named "${e}"`);n[e](t)}})}}pt.on(document,"click.bs.modal.data-api",'[data-bs-toggle="modal"]',function(e){const t=Fe(this);["A","AREA"].includes(this.tagName)&&e.preventDefault(),pt.one(t,On,e=>{e.defaultPrevented||pt.one(t,Pn,()=>{Be(this)&&this.focus()})}),Vn.getOrCreateInstance(t).toggle(this)}),yt(Vn),$e(Vn);const Bn="offcanvas",Hn={backdrop:!0,keyboard:!0,scroll:!1},Wn={backdrop:"boolean",keyboard:"boolean",scroll:"boolean"},Kn="show",zn=".offcanvas.show",Gn="hidden.bs.offcanvas";class Qn extends mt{constructor(e,t){super(e),this._config=this._getConfig(t),this._isShown=!1,this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._addEventListeners()}static get NAME(){return Bn}static get Default(){return Hn}toggle(e){return this._isShown?this.hide():this.show(e)}show(e){this._isShown||pt.trigger(this._element,"show.bs.offcanvas",{relatedTarget:e}).defaultPrevented||(this._isShown=!0,this._element.style.visibility="visible",this._backdrop.show(),this._config.scroll||(new mn).hide(),this._element.removeAttribute("aria-hidden"),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.classList.add(Kn),this._queueCallback(()=>{this._config.scroll||this._focustrap.activate(),pt.trigger(this._element,"shown.bs.offcanvas",{relatedTarget:e})},this._element,!0))}hide(){this._isShown&&(pt.trigger(this._element,"hide.bs.offcanvas").defaultPrevented||(this._focustrap.deactivate(),this._element.blur(),this._isShown=!1,this._element.classList.remove(Kn),this._backdrop.hide(),this._queueCallback(()=>{this._element.setAttribute("aria-hidden",!0),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._element.style.visibility="hidden",this._config.scroll||(new mn).reset(),pt.trigger(this._element,Gn)},this._element,!0)))}dispose(){this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}_getConfig(e){return e={...Hn,...It.getDataAttributes(this._element),..."object"==typeof e?e:{}},Ve(Bn,e,Wn),e}_initializeBackDrop(){return new Tn({className:"offcanvas-backdrop",isVisible:this._config.backdrop,isAnimated:!0,rootElement:this._element.parentNode,clickCallback:()=>this.hide()})}_initializeFocusTrap(){return new Sn({trapElement:this._element})}_addEventListeners(){pt.on(this._element,"keydown.dismiss.bs.offcanvas",e=>{this._config.keyboard&&"Escape"===e.key&&this.hide()})}static jQueryInterface(e){return this.each(function(){const t=Qn.getOrCreateInstance(this,e);if("string"==typeof e){if(void 0===t[e]||e.startsWith("_")||"constructor"===e)throw new TypeError(`No method named "${e}"`);t[e](this)}})}}pt.on(document,"click.bs.offcanvas.data-api",'[data-bs-toggle="offcanvas"]',function(e){const t=Fe(this);if(["A","AREA"].includes(this.tagName)&&e.preventDefault(),He(this))return;pt.one(t,Gn,()=>{Be(this)&&this.focus()});const n=kt.findOne(zn);n&&n!==t&&Qn.getInstance(n).hide(),Qn.getOrCreateInstance(t).toggle(this)}),pt.on(window,"load.bs.offcanvas.data-api",()=>kt.find(zn).forEach(e=>Qn.getOrCreateInstance(e).show())),yt(Qn),$e(Qn);const $n=new Set(["background","cite","href","itemtype","longdesc","poster","src","xlink:href"]),Yn=/^(?:(?:https?|mailto|ftp|tel|file):|[^#&/:?]*(?:[#/?]|$))/i,Xn=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[\d+/a-z]+=*$/i,Zn=(e,t)=>{const n=e.nodeName.toLowerCase();if(t.includes(n))return!$n.has(n)||Boolean(Yn.test(e.nodeValue)||Xn.test(e.nodeValue));const r=t.filter(e=>e instanceof RegExp);for(let i=0,o=r.length;i<o;i++)if(r[i].test(n))return!0;return!1};function Jn(e,t,n){if(!e.length)return e;if(n&&"function"==typeof n)return n(e);const r=(new window.DOMParser).parseFromString(e,"text/html"),i=Object.keys(t),o=[].concat(...r.body.querySelectorAll("*"));for(let s=0,a=o.length;s<a;s++){const e=o[s],n=e.nodeName.toLowerCase();if(!i.includes(n)){e.remove();continue}const r=[].concat(...e.attributes),a=[].concat(t["*"]||[],t[n]||[]);r.forEach(t=>{Zn(t,a)||e.removeAttribute(t.nodeName)})}return r.body.innerHTML}const er="tooltip",tr=new Set(["sanitize","allowList","sanitizeFn"]),nr={animation:"boolean",template:"string",title:"(string|element|function)",trigger:"string",delay:"(number|object)",html:"boolean",selector:"(string|boolean)",placement:"(string|function)",offset:"(array|string|function)",container:"(string|element|boolean)",fallbackPlacements:"array",boundary:"(string|element)",customClass:"(string|function)",sanitize:"boolean",sanitizeFn:"(null|function)",allowList:"object",popperConfig:"(null|object|function)"},rr={AUTO:"auto",TOP:"top",RIGHT:Qe()?"left":"right",BOTTOM:"bottom",LEFT:Qe()?"right":"left"},ir={animation:!0,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,selector:!1,placement:"top",offset:[0,0],container:!1,fallbackPlacements:["top","right","bottom","left"],boundary:"clippingParents",customClass:"",sanitize:!0,sanitizeFn:null,allowList:{"*":["class","dir","id","lang","role",/^aria-[\w-]*$/i],a:["target","href","title","rel"],area:[],b:[],br:[],col:[],code:[],div:[],em:[],hr:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],i:[],img:["src","srcset","alt","title","width","height"],li:[],ol:[],p:[],pre:[],s:[],small:[],span:[],sub:[],sup:[],strong:[],u:[],ul:[]},popperConfig:null},or={HIDE:"hide.bs.tooltip",HIDDEN:"hidden.bs.tooltip",SHOW:"show.bs.tooltip",SHOWN:"shown.bs.tooltip",INSERTED:"inserted.bs.tooltip",CLICK:"click.bs.tooltip",FOCUSIN:"focusin.bs.tooltip",FOCUSOUT:"focusout.bs.tooltip",MOUSEENTER:"mouseenter.bs.tooltip",MOUSELEAVE:"mouseleave.bs.tooltip"},sr="fade",ar="show",ur="show",cr="out",lr=".modal",hr="hide.bs.modal",fr="hover",dr="focus";class pr extends mt{constructor(e,t){if(void 0===r)throw new TypeError("Bootstrap's tooltips require Popper (https://popper.js.org)");super(e),this._isEnabled=!0,this._timeout=0,this._hoverState="",this._activeTrigger={},this._popper=null,this._config=this._getConfig(t),this.tip=null,this._setListeners()}static get Default(){return ir}static get NAME(){return er}static get Event(){return or}static get DefaultType(){return nr}enable(){this._isEnabled=!0}disable(){this._isEnabled=!1}toggleEnabled(){this._isEnabled=!this._isEnabled}toggle(e){if(this._isEnabled)if(e){const t=this._initializeOnDelegatedTarget(e);t._activeTrigger.click=!t._activeTrigger.click,t._isWithActiveTrigger()?t._enter(null,t):t._leave(null,t)}else{if(this.getTipElement().classList.contains(ar))return void this._leave(null,this);this._enter(null,this)}}dispose(){clearTimeout(this._timeout),pt.off(this._element.closest(lr),hr,this._hideModalHandler),this.tip&&this.tip.remove(),this._popper&&this._popper.destroy(),super.dispose()}show(){if("none"===this._element.style.display)throw new Error("Please use show on visible elements");if(!this.isWithContent()||!this._isEnabled)return;const e=pt.trigger(this._element,this.constructor.Event.SHOW),t=We(this._element),n=null===t?this._element.ownerDocument.documentElement.contains(this._element):t.contains(this._element);if(e.defaultPrevented||!n)return;const r=this.getTipElement(),i=(e=>{do{e+=Math.floor(1e6*Math.random())}while(document.getElementById(e));return e})(this.constructor.NAME);r.setAttribute("id",i),this._element.setAttribute("aria-describedby",i),this._config.animation&&r.classList.add(sr);const o="function"==typeof this._config.placement?this._config.placement.call(this,r,this._element):this._config.placement,s=this._getAttachment(o);this._addAttachmentClass(s);const{container:a}=this._config;vt.set(r,this.constructor.DATA_KEY,this),this._element.ownerDocument.documentElement.contains(this.tip)||(a.append(r),pt.trigger(this._element,this.constructor.Event.INSERTED)),this._popper?this._popper.update():this._popper=Pe(this._element,r,this._getPopperConfig(s)),r.classList.add(ar);const u=this._resolvePossibleFunction(this._config.customClass);u&&r.classList.add(...u.split(" ")),"ontouchstart"in document.documentElement&&[].concat(...document.body.children).forEach(e=>{pt.on(e,"mouseover",Ke)});const c=this.tip.classList.contains(sr);this._queueCallback(()=>{const e=this._hoverState;this._hoverState=null,pt.trigger(this._element,this.constructor.Event.SHOWN),e===cr&&this._leave(null,this)},this.tip,c)}hide(){if(!this._popper)return;const e=this.getTipElement();if(pt.trigger(this._element,this.constructor.Event.HIDE).defaultPrevented)return;e.classList.remove(ar),"ontouchstart"in document.documentElement&&[].concat(...document.body.children).forEach(e=>pt.off(e,"mouseover",Ke)),this._activeTrigger.click=!1,this._activeTrigger.focus=!1,this._activeTrigger.hover=!1;const t=this.tip.classList.contains(sr);this._queueCallback(()=>{this._isWithActiveTrigger()||(this._hoverState!==ur&&e.remove(),this._cleanTipClass(),this._element.removeAttribute("aria-describedby"),pt.trigger(this._element,this.constructor.Event.HIDDEN),this._popper&&(this._popper.destroy(),this._popper=null))},this.tip,t),this._hoverState=""}update(){null!==this._popper&&this._popper.update()}isWithContent(){return Boolean(this.getTitle())}getTipElement(){if(this.tip)return this.tip;const e=document.createElement("div");e.innerHTML=this._config.template;const t=e.children[0];return this.setContent(t),t.classList.remove(sr,ar),this.tip=t,this.tip}setContent(e){this._sanitizeAndSetContent(e,this.getTitle(),".tooltip-inner")}_sanitizeAndSetContent(e,t,n){const r=kt.findOne(n,e);t||!r?this.setElementContent(r,t):r.remove()}setElementContent(e,t){if(null!==e)return qe(t)?(t=Ue(t),void(this._config.html?t.parentNode!==e&&(e.innerHTML="",e.append(t)):e.textContent=t.textContent)):void(this._config.html?(this._config.sanitize&&(t=Jn(t,this._config.allowList,this._config.sanitizeFn)),e.innerHTML=t):e.textContent=t)}getTitle(){const e=this._element.getAttribute("data-bs-original-title")||this._config.title;return this._resolvePossibleFunction(e)}updateAttachment(e){return"right"===e?"end":"left"===e?"start":e}_initializeOnDelegatedTarget(e,t){return t||this.constructor.getOrCreateInstance(e.delegateTarget,this._getDelegateConfig())}_getOffset(){const{offset:e}=this._config;return"string"==typeof e?e.split(",").map(e=>Number.parseInt(e,10)):"function"==typeof e?t=>e(t,this._element):e}_resolvePossibleFunction(e){return"function"==typeof e?e.call(this._element):e}_getPopperConfig(e){const t={placement:e,modifiers:[{name:"flip",options:{fallbackPlacements:this._config.fallbackPlacements}},{name:"offset",options:{offset:this._getOffset()}},{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"arrow",options:{element:`.${this.constructor.NAME}-arrow`}},{name:"onChange",enabled:!0,phase:"afterWrite",fn:e=>this._handlePopperPlacementChange(e)}],onFirstUpdate:e=>{e.options.placement!==e.placement&&this._handlePopperPlacementChange(e)}};return{...t,..."function"==typeof this._config.popperConfig?this._config.popperConfig(t):this._config.popperConfig}}_addAttachmentClass(e){this.getTipElement().classList.add(`${this._getBasicClassPrefix()}-${this.updateAttachment(e)}`)}_getAttachment(e){return rr[e.toUpperCase()]}_setListeners(){this._config.trigger.split(" ").forEach(e=>{if("click"===e)pt.on(this._element,this.constructor.Event.CLICK,this._config.selector,e=>this.toggle(e));else if("manual"!==e){const t=e===fr?this.constructor.Event.MOUSELEAVE:this.constructor.Event.FOCUSOUT;pt.on(this._element,e===fr?this.constructor.Event.MOUSEENTER:this.constructor.Event.FOCUSIN,this._config.selector,e=>this._enter(e)),pt.on(this._element,t,this._config.selector,e=>this._leave(e))}}),this._hideModalHandler=()=>{this._element&&this.hide()},pt.on(this._element.closest(lr),hr,this._hideModalHandler),this._config.selector?this._config={...this._config,trigger:"manual",selector:""}:this._fixTitle()}_fixTitle(){const e=this._element.getAttribute("title"),t=typeof this._element.getAttribute("data-bs-original-title");(e||"string"!==t)&&(this._element.setAttribute("data-bs-original-title",e||""),!e||this._element.getAttribute("aria-label")||this._element.textContent||this._element.setAttribute("aria-label",e),this._element.setAttribute("title",""))}_enter(e,t){t=this._initializeOnDelegatedTarget(e,t),e&&(t._activeTrigger["focusin"===e.type?dr:fr]=!0),t.getTipElement().classList.contains(ar)||t._hoverState===ur?t._hoverState=ur:(clearTimeout(t._timeout),t._hoverState=ur,t._config.delay&&t._config.delay.show?t._timeout=setTimeout(()=>{t._hoverState===ur&&t.show()},t._config.delay.show):t.show())}_leave(e,t){t=this._initializeOnDelegatedTarget(e,t),e&&(t._activeTrigger["focusout"===e.type?dr:fr]=t._element.contains(e.relatedTarget)),t._isWithActiveTrigger()||(clearTimeout(t._timeout),t._hoverState=cr,t._config.delay&&t._config.delay.hide?t._timeout=setTimeout(()=>{t._hoverState===cr&&t.hide()},t._config.delay.hide):t.hide())}_isWithActiveTrigger(){for(const e in this._activeTrigger)if(this._activeTrigger[e])return!0;return!1}_getConfig(e){const t=It.getDataAttributes(this._element);return Object.keys(t).forEach(e=>{tr.has(e)&&delete t[e]}),(e={...this.constructor.Default,...t,..."object"==typeof e&&e?e:{}}).container=!1===e.container?document.body:Ue(e.container),"number"==typeof e.delay&&(e.delay={show:e.delay,hide:e.delay}),"number"==typeof e.title&&(e.title=e.title.toString()),"number"==typeof e.content&&(e.content=e.content.toString()),Ve(er,e,this.constructor.DefaultType),e.sanitize&&(e.template=Jn(e.template,e.allowList,e.sanitizeFn)),e}_getDelegateConfig(){const e={};for(const t in this._config)this.constructor.Default[t]!==this._config[t]&&(e[t]=this._config[t]);return e}_cleanTipClass(){const e=this.getTipElement(),t=new RegExp(`(^|\\s)${this._getBasicClassPrefix()}\\S+`,"g"),n=e.getAttribute("class").match(t);null!==n&&n.length>0&&n.map(e=>e.trim()).forEach(t=>e.classList.remove(t))}_getBasicClassPrefix(){return"bs-tooltip"}_handlePopperPlacementChange(e){const{state:t}=e;t&&(this.tip=t.elements.popper,this._cleanTipClass(),this._addAttachmentClass(this._getAttachment(t.placement)))}static jQueryInterface(e){return this.each(function(){const t=pr.getOrCreateInstance(this,e);if("string"==typeof e){if(void 0===t[e])throw new TypeError(`No method named "${e}"`);t[e]()}})}}$e(pr);const gr={...pr.Default,placement:"right",offset:[0,8],trigger:"click",content:"",template:'<div class="popover" role="tooltip"><div class="popover-arrow"></div><h3 class="popover-header"></h3><div class="popover-body"></div></div>'},vr={...pr.DefaultType,content:"(string|element|function)"},mr={HIDE:"hide.bs.popover",HIDDEN:"hidden.bs.popover",SHOW:"show.bs.popover",SHOWN:"shown.bs.popover",INSERTED:"inserted.bs.popover",CLICK:"click.bs.popover",FOCUSIN:"focusin.bs.popover",FOCUSOUT:"focusout.bs.popover",MOUSEENTER:"mouseenter.bs.popover",MOUSELEAVE:"mouseleave.bs.popover"};class yr extends pr{static get Default(){return gr}static get NAME(){return"popover"}static get Event(){return mr}static get DefaultType(){return vr}isWithContent(){return this.getTitle()||this._getContent()}setContent(e){this._sanitizeAndSetContent(e,this.getTitle(),".popover-header"),this._sanitizeAndSetContent(e,this._getContent(),".popover-body")}_getContent(){return this._resolvePossibleFunction(this._config.content)}_getBasicClassPrefix(){return"bs-popover"}static jQueryInterface(e){return this.each(function(){const t=yr.getOrCreateInstance(this,e);if("string"==typeof e){if(void 0===t[e])throw new TypeError(`No method named "${e}"`);t[e]()}})}}$e(yr);const _r="scrollspy",br={offset:10,method:"auto",target:""},wr={offset:"number",method:"string",target:"(string|element)"},Tr="active",Er=".nav-link, .list-group-item, .dropdown-item",Ir="position";class kr extends mt{constructor(e,t){super(e),this._scrollElement="BODY"===this._element.tagName?window:this._element,this._config=this._getConfig(t),this._offsets=[],this._targets=[],this._activeTarget=null,this._scrollHeight=0,pt.on(this._scrollElement,"scroll.bs.scrollspy",()=>this._process()),this.refresh(),this._process()}static get Default(){return br}static get NAME(){return _r}refresh(){const e="auto"===this._config.method?this._scrollElement===this._scrollElement.window?"offset":Ir:this._config.method,t=e===Ir?this._getScrollTop():0;this._offsets=[],this._targets=[],this._scrollHeight=this._getScrollHeight(),kt.find(Er,this._config.target).map(n=>{const r=Me(n),i=r?kt.findOne(r):null;if(i){const n=i.getBoundingClientRect();if(n.width||n.height)return[It[e](i).top+t,r]}return null}).filter(e=>e).sort((e,t)=>e[0]-t[0]).forEach(e=>{this._offsets.push(e[0]),this._targets.push(e[1])})}dispose(){pt.off(this._scrollElement,".bs.scrollspy"),super.dispose()}_getConfig(e){return(e={...br,...It.getDataAttributes(this._element),..."object"==typeof e&&e?e:{}}).target=Ue(e.target)||document.documentElement,Ve(_r,e,wr),e}_getScrollTop(){return this._scrollElement===window?this._scrollElement.pageYOffset:this._scrollElement.scrollTop}_getScrollHeight(){return this._scrollElement.scrollHeight||Math.max(document.body.scrollHeight,document.documentElement.scrollHeight)}_getOffsetHeight(){return this._scrollElement===window?window.innerHeight:this._scrollElement.getBoundingClientRect().height}_process(){const e=this._getScrollTop()+this._config.offset,t=this._getScrollHeight(),n=this._config.offset+t-this._getOffsetHeight();if(this._scrollHeight!==t&&this.refresh(),e>=n){const e=this._targets[this._targets.length-1];this._activeTarget!==e&&this._activate(e)}else{if(this._activeTarget&&e<this._offsets[0]&&this._offsets[0]>0)return this._activeTarget=null,void this._clear();for(let t=this._offsets.length;t--;)this._activeTarget!==this._targets[t]&&e>=this._offsets[t]&&(void 0===this._offsets[t+1]||e<this._offsets[t+1])&&this._activate(this._targets[t])}}_activate(e){this._activeTarget=e,this._clear();const t=Er.split(",").map(t=>`${t}[data-bs-target="${e}"],${t}[href="${e}"]`),n=kt.findOne(t.join(","),this._config.target);n.classList.add(Tr),n.classList.contains("dropdown-item")?kt.findOne(".dropdown-toggle",n.closest(".dropdown")).classList.add(Tr):kt.parents(n,".nav, .list-group").forEach(e=>{kt.prev(e,".nav-link, .list-group-item").forEach(e=>e.classList.add(Tr)),kt.prev(e,".nav-item").forEach(e=>{kt.children(e,".nav-link").forEach(e=>e.classList.add(Tr))})}),pt.trigger(this._scrollElement,"activate.bs.scrollspy",{relatedTarget:e})}_clear(){kt.find(Er,this._config.target).filter(e=>e.classList.contains(Tr)).forEach(e=>e.classList.remove(Tr))}static jQueryInterface(e){return this.each(function(){const t=kr.getOrCreateInstance(this,e);if("string"==typeof e){if(void 0===t[e])throw new TypeError(`No method named "${e}"`);t[e]()}})}}pt.on(window,"load.bs.scrollspy.data-api",()=>{kt.find('[data-bs-spy="scroll"]').forEach(e=>new kr(e))}),$e(kr);const Cr="active",Sr="fade",Ar="show",xr=".active",Nr=":scope > li > .active";class Dr extends mt{static get NAME(){return"tab"}show(){if(this._element.parentNode&&this._element.parentNode.nodeType===Node.ELEMENT_NODE&&this._element.classList.contains(Cr))return;let e;const t=Fe(this._element),n=this._element.closest(".nav, .list-group");n&&(e=kt.find("UL"===n.nodeName||"OL"===n.nodeName?Nr:xr,n),e=e[e.length-1]);const r=e?pt.trigger(e,"hide.bs.tab",{relatedTarget:this._element}):null;if(pt.trigger(this._element,"show.bs.tab",{relatedTarget:e}).defaultPrevented||null!==r&&r.defaultPrevented)return;this._activate(this._element,n);const i=()=>{pt.trigger(e,"hidden.bs.tab",{relatedTarget:this._element}),pt.trigger(this._element,"shown.bs.tab",{relatedTarget:e})};t?this._activate(t,t.parentNode,i):i()}_activate(e,t,n){const r=(!t||"UL"!==t.nodeName&&"OL"!==t.nodeName?kt.children(t,xr):kt.find(Nr,t))[0],i=n&&r&&r.classList.contains(Sr),o=()=>this._transitionComplete(e,r,n);r&&i?(r.classList.remove(Ar),this._queueCallback(o,e,!0)):o()}_transitionComplete(e,t,n){if(t){t.classList.remove(Cr);const e=kt.findOne(":scope > .dropdown-menu .active",t.parentNode);e&&e.classList.remove(Cr),"tab"===t.getAttribute("role")&&t.setAttribute("aria-selected",!1)}e.classList.add(Cr),"tab"===e.getAttribute("role")&&e.setAttribute("aria-selected",!0),e.classList.contains(Sr)&&e.classList.add(Ar);let r=e.parentNode;if(r&&"LI"===r.nodeName&&(r=r.parentNode),r&&r.classList.contains("dropdown-menu")){const t=e.closest(".dropdown");t&&kt.find(".dropdown-toggle",t).forEach(e=>e.classList.add(Cr)),e.setAttribute("aria-expanded",!0)}n&&n()}static jQueryInterface(e){return this.each(function(){const t=Dr.getOrCreateInstance(this);if("string"==typeof e){if(void 0===t[e])throw new TypeError(`No method named "${e}"`);t[e]()}})}}pt.on(document,"click.bs.tab.data-api",'[data-bs-toggle="tab"], [data-bs-toggle="pill"], [data-bs-toggle="list"]',function(e){["A","AREA"].includes(this.tagName)&&e.preventDefault(),He(this)||Dr.getOrCreateInstance(this).show()}),$e(Dr);const Pr="toast",Or="hide",Rr="show",Lr="showing",Mr={animation:"boolean",autohide:"boolean",delay:"number"},Fr={animation:!0,autohide:!0,delay:5e3};class jr extends mt{constructor(e,t){super(e),this._config=this._getConfig(t),this._timeout=null,this._hasMouseInteraction=!1,this._hasKeyboardInteraction=!1,this._setListeners()}static get DefaultType(){return Mr}static get Default(){return Fr}static get NAME(){return Pr}show(){pt.trigger(this._element,"show.bs.toast").defaultPrevented||(this._clearTimeout(),this._config.animation&&this._element.classList.add("fade"),this._element.classList.remove(Or),this._element.classList.add(Rr),this._element.classList.add(Lr),this._queueCallback(()=>{this._element.classList.remove(Lr),pt.trigger(this._element,"shown.bs.toast"),this._maybeScheduleHide()},this._element,this._config.animation))}hide(){this._element.classList.contains(Rr)&&(pt.trigger(this._element,"hide.bs.toast").defaultPrevented||(this._element.classList.add(Lr),this._queueCallback(()=>{this._element.classList.add(Or),this._element.classList.remove(Lr),this._element.classList.remove(Rr),pt.trigger(this._element,"hidden.bs.toast")},this._element,this._config.animation)))}dispose(){this._clearTimeout(),this._element.classList.contains(Rr)&&this._element.classList.remove(Rr),super.dispose()}_getConfig(e){return e={...Fr,...It.getDataAttributes(this._element),..."object"==typeof e&&e?e:{}},Ve(Pr,e,this.constructor.DefaultType),e}_maybeScheduleHide(){this._config.autohide&&(this._hasMouseInteraction||this._hasKeyboardInteraction||(this._timeout=setTimeout(()=>{this.hide()},this._config.delay)))}_onInteraction(e,t){switch(e.type){case"mouseover":case"mouseout":this._hasMouseInteraction=t;break;case"focusin":case"focusout":this._hasKeyboardInteraction=t}if(t)return void this._clearTimeout();const n=e.relatedTarget;this._element===n||this._element.contains(n)||this._maybeScheduleHide()}_setListeners(){pt.on(this._element,"mouseover.bs.toast",e=>this._onInteraction(e,!0)),pt.on(this._element,"mouseout.bs.toast",e=>this._onInteraction(e,!1)),pt.on(this._element,"focusin.bs.toast",e=>this._onInteraction(e,!0)),pt.on(this._element,"focusout.bs.toast",e=>this._onInteraction(e,!1))}_clearTimeout(){clearTimeout(this._timeout),this._timeout=null}static jQueryInterface(e){return this.each(function(){const t=jr.getOrCreateInstance(this,e);if("string"==typeof e){if(void 0===t[e])throw new TypeError(`No method named "${e}"`);t[e](this)}})}}yt(jr),$e(jr),n(277);var qr=n(759);(function(){var e,t="function"==typeof Object.defineProperties?Object.defineProperty:function(e,t,n){e!=Array.prototype&&e!=Object.prototype&&(e[t]=n.value)},n=function(e){e=["object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global,e];for(var t=0;t<e.length;++t){var n=e[t];if(n&&n.Math==Math)return n}return globalThis}(this);function r(e){var t=0;return function(){return t<e.length?{done:!1,value:e[t++]}:{done:!0}}}function i(e){var t="undefined"!=typeof Symbol&&Symbol.iterator&&e[Symbol.iterator];return t?t.call(e):{next:r(e)}}!function(e,r){if(r){var i=n;e=e.split(".");for(var o=0;o<e.length-1;o++){var s=e[o];s in i||(i[s]={}),i=i[s]}(r=r(o=i[e=e[e.length-1]]))!=o&&null!=r&&t(i,e,{configurable:!0,writable:!0,value:r})}}("Promise",function(e){function t(e){this.b=0,this.c=void 0,this.a=[];var t=this.f();try{e(t.resolve,t.reject)}catch(n){t.reject(n)}}function r(){this.a=null}function o(e){return e instanceof t?e:new t(function(t){t(e)})}if(e)return e;r.prototype.b=function(e){if(null==this.a){this.a=[];var t=this;this.c(function(){t.g()})}this.a.push(e)};var s=n.setTimeout;r.prototype.c=function(e){s(e,0)},r.prototype.g=function(){for(;this.a&&this.a.length;){var e=this.a;this.a=[];for(var t=0;t<e.length;++t){var n=e[t];e[t]=null;try{n()}catch(Xr){this.f(Xr)}}}this.a=null},r.prototype.f=function(e){this.c(function(){throw e})},t.prototype.f=function(){function e(e){return function(r){n||(n=!0,e.call(t,r))}}var t=this,n=!1;return{resolve:e(this.m),reject:e(this.g)}},t.prototype.m=function(e){if(e===this)this.g(new TypeError("A Promise cannot resolve to itself"));else if(e instanceof t)this.s(e);else{e:switch(typeof e){case"object":var n=null!=e;break e;case"function":n=!0;break e;default:n=!1}n?this.v(e):this.h(e)}},t.prototype.v=function(e){var t=void 0;try{t=e.then}catch(n){return void this.g(n)}"function"==typeof t?this.u(t,e):this.h(e)},t.prototype.g=function(e){this.i(2,e)},t.prototype.h=function(e){this.i(1,e)},t.prototype.i=function(e,t){if(0!=this.b)throw Error("Cannot settle("+e+", "+t+"): Promise already settled in state"+this.b);this.b=e,this.c=t,this.l()},t.prototype.l=function(){if(null!=this.a){for(var e=0;e<this.a.length;++e)a.b(this.a[e]);this.a=null}};var a=new r;return t.prototype.s=function(e){var t=this.f();e.Ra(t.resolve,t.reject)},t.prototype.u=function(e,t){var n=this.f();try{e.call(t,n.resolve,n.reject)}catch(Xr){n.reject(Xr)}},t.prototype.then=function(e,n){function r(e,t){return"function"==typeof e?function(t){try{i(e(t))}catch(pa){o(pa)}}:t}var i,o,s=new t(function(e,t){i=e,o=t});return this.Ra(r(e,i),r(n,o)),s},t.prototype.catch=function(e){return this.then(void 0,e)},t.prototype.Ra=function(e,t){function n(){switch(r.b){case 1:e(r.c);break;case 2:t(r.c);break;default:throw Error("Unexpected state: "+r.b)}}var r=this;null==this.a?a.b(n):this.a.push(n)},t.resolve=o,t.reject=function(e){return new t(function(t,n){n(e)})},t.race=function(e){return new t(function(t,n){for(var r=i(e),s=r.next();!s.done;s=r.next())o(s.value).Ra(t,n)})},t.all=function(e){var n=i(e),r=n.next();return r.done?o([]):new t(function(e,t){function i(t){return function(n){s[t]=n,0==--a&&e(s)}}var s=[],a=0;do{s.push(void 0),a++,o(r.value).Ra(i(s.length-1),t),r=n.next()}while(!r.done)})},t});var o=o||{},s=this||self,a=/^[\w+/_-]+[=]{0,2}$/,u=null;function c(e){return(e=e.querySelector&&e.querySelector("script[nonce]"))&&(e=e.nonce||e.getAttribute("nonce"))&&a.test(e)?e:""}function l(){}function h(e){var t=typeof e;return"object"!=t?t:e?Array.isArray(e)?"array":t:"null"}function f(e){var t=h(e);return"array"==t||"object"==t&&"number"==typeof e.length}function d(e){return"function"==h(e)}function p(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}function g(e){return Object.prototype.hasOwnProperty.call(e,v)&&e[v]||(e[v]=++m)}var v="closure_uid_"+(1e9*Math.random()>>>0),m=0;function y(e,t,n){return e.call.apply(e.bind,arguments)}function _(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function b(e,t,n){return(b=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?y:_).apply(null,arguments)}function w(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}var T=Date.now;function E(e,t){function n(){}n.prototype=t.prototype,e.bb=t.prototype,e.prototype=new n,e.prototype.constructor=e}function I(e){return e}function k(e,t,n){this.code=A+e,this.message=t||x[e]||"",this.a=n||null}function C(e){var t=e&&e.code;return t?new k(t.substring(A.length),e.message,e.serverResponse):null}E(k,Error),k.prototype.w=function(){var e={code:this.code,message:this.message};return this.a&&(e.serverResponse=this.a),e},k.prototype.toJSON=function(){return this.w()};var S,A="auth/",x={"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","expired-action-code":"The action code has expired. ","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal error has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal error has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal error has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network error (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal error has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled."},N={ld:{Ua:"https://staging-identitytoolkit.sandbox.googleapis.com/identitytoolkit/v3/relyingparty/",$a:"https://staging-securetoken.sandbox.googleapis.com/v1/token",Xa:"https://staging-identitytoolkit.sandbox.googleapis.com/v2/",id:"b"},sd:{Ua:"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",$a:"https://securetoken.googleapis.com/v1/token",Xa:"https://identitytoolkit.googleapis.com/v2/",id:"p"},ud:{Ua:"https://staging-www.sandbox.googleapis.com/identitytoolkit/v3/relyingparty/",$a:"https://staging-securetoken.sandbox.googleapis.com/v1/token",Xa:"https://staging-identitytoolkit.sandbox.googleapis.com/v2/",id:"s"},vd:{Ua:"https://www-googleapis-test.sandbox.google.com/identitytoolkit/v3/relyingparty/",$a:"https://test-securetoken.sandbox.googleapis.com/v1/token",Xa:"https://test-identitytoolkit.sandbox.googleapis.com/v2/",id:"t"}};function D(e){for(var t in N)if(N[t].id===e)return{firebaseEndpoint:(e=N[t]).Ua,secureTokenEndpoint:e.$a,identityPlatformEndpoint:e.Xa};return null}function P(e){if(!e)return!1;try{return!!e.$goog_Thenable}catch(t){return!1}}function O(e){if(Error.captureStackTrace)Error.captureStackTrace(this,O);else{var t=Error().stack;t&&(this.stack=t)}e&&(this.message=String(e))}function R(e,t){for(var n="",r=(e=e.split("%s")).length-1,i=0;i<r;i++)n+=e[i]+(i<t.length?t[i]:"%s");O.call(this,n+e[r])}function L(e,t){throw new R("Failure"+(e?": "+e:""),Array.prototype.slice.call(arguments,1))}function M(e,t){this.c=e,this.f=t,this.b=0,this.a=null}function F(e,t){e.f(t),100>e.b&&(e.b++,t.next=e.a,e.a=t)}function j(){this.b=this.a=null}S=D("__EID__")?"__EID__":void 0,E(O,Error),O.prototype.name="CustomError",E(R,O),R.prototype.name="AssertionError",M.prototype.get=function(){if(0<this.b){this.b--;var e=this.a;this.a=e.next,e.next=null}else e=this.c();return e};var q=new M(function(){return new V},function(e){e.reset()});function U(){var e=mt,t=null;return e.a&&(t=e.a,e.a=e.a.next,e.a||(e.b=null),t.next=null),t}function V(){this.next=this.b=this.a=null}j.prototype.add=function(e,t){var n=q.get();n.set(e,t),this.b?this.b.next=n:this.a=n,this.b=n},V.prototype.set=function(e,t){this.a=e,this.b=t,this.next=null},V.prototype.reset=function(){this.next=this.b=this.a=null};var B=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if("string"==typeof e)return"string"!=typeof t||1!=t.length?-1:e.indexOf(t,0);for(var n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1},H=Array.prototype.forEach?function(e,t,n){Array.prototype.forEach.call(e,t,n)}:function(e,t,n){for(var r=e.length,i="string"==typeof e?e.split(""):e,o=0;o<r;o++)o in i&&t.call(n,i[o],o,e)},W=Array.prototype.filter?function(e,t){return Array.prototype.filter.call(e,t,void 0)}:function(e,t){for(var n=e.length,r=[],i=0,o="string"==typeof e?e.split(""):e,s=0;s<n;s++)if(s in o){var a=o[s];t.call(void 0,a,s,e)&&(r[i++]=a)}return r},K=Array.prototype.map?function(e,t){return Array.prototype.map.call(e,t,void 0)}:function(e,t){for(var n=e.length,r=Array(n),i="string"==typeof e?e.split(""):e,o=0;o<n;o++)o in i&&(r[o]=t.call(void 0,i[o],o,e));return r},z=Array.prototype.some?function(e,t){return Array.prototype.some.call(e,t,void 0)}:function(e,t){for(var n=e.length,r="string"==typeof e?e.split(""):e,i=0;i<n;i++)if(i in r&&t.call(void 0,r[i],i,e))return!0;return!1};function G(e,t){return 0<=B(e,t)}function Q(e,t){var n;return(n=0<=(t=B(e,t)))&&Array.prototype.splice.call(e,t,1),n}function $(e,t){!function(e,t){for(var n="string"==typeof e?e.split(""):e,r=e.length-1;0<=r;--r)r in n&&t.call(void 0,n[r],r,e)}(e,function(n,r){t.call(void 0,n,r,e)&&Array.prototype.splice.call(e,r,1)})}function Y(e){return Array.prototype.concat.apply([],arguments)}function X(e){var t=e.length;if(0<t){for(var n=Array(t),r=0;r<t;r++)n[r]=e[r];return n}return[]}var Z,J=String.prototype.trim?function(e){return e.trim()}:function(e){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(e)[1]},ee=/&/g,te=/</g,ne=/>/g,re=/"/g,ie=/'/g,oe=/\x00/g,se=/[\x00&<>"']/;function ae(e,t){return-1!=e.indexOf(t)}function ue(e,t){return e<t?-1:e>t?1:0}e:{var ce=s.navigator;if(ce){var le=ce.userAgent;if(le){Z=le;break e}}Z=""}function he(e){return ae(Z,e)}function fe(e,t){for(var n in e)t.call(void 0,e[n],n,e)}function de(e){for(var t in e)return!1;return!0}function pe(e){var t,n={};for(t in e)n[t]=e[t];return n}var ge="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ve(e,t){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])e[n]=r[n];for(var o=0;o<ge.length;o++)n=ge[o],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function me(e,t){e:{try{var n=e&&e.ownerDocument,r=n&&(n.defaultView||n.parentWindow);if((r=r||s).Element&&r.Location){var i=r;break e}}catch(a){}i=null}if(i&&void 0!==i[t]&&(!e||!(e instanceof i[t])&&(e instanceof i.Location||e instanceof i.Element))){if(p(e))try{var o=e.constructor.displayName||e.constructor.name||Object.prototype.toString.call(e)}catch(a){o="<object could not be stringified>"}else o=void 0===e?"undefined":null===e?"null":typeof e;L("Argument is not a %s (or a non-Element, non-Location mock); got: %s",t,o)}}function ye(e,t){this.a=e===Te&&t||"",this.b=we}function _e(e){return e instanceof ye&&e.constructor===ye&&e.b===we?e.a:(L("expected object of type Const, got '"+e+"'"),"type_error:Const")}ye.prototype.ta=!0,ye.prototype.sa=function(){return this.a},ye.prototype.toString=function(){return"Const{"+this.a+"}"};var be,we={},Te={};function Ee(){if(void 0===be){var e=null,t=s.trustedTypes;if(t&&t.createPolicy){try{e=t.createPolicy("goog#html",{createHTML:I,createScript:I,createScriptURL:I})}catch(n){s.console&&s.console.error(n.message)}be=e}else be=e}return be}function Ie(e,t){this.a=t===xe?e:""}function ke(e){return e instanceof Ie&&e.constructor===Ie?e.a:(L("expected object of type TrustedResourceUrl, got '"+e+"' of type "+h(e)),"type_error:TrustedResourceUrl")}function Ce(e,t){var n=_e(e);if(!Ae.test(n))throw Error("Invalid TrustedResourceUrl format: "+n);return function(e){var t=Ee();return new Ie(e=t?t.createScriptURL(e):e,xe)}(e=n.replace(Se,function(e,r){if(!Object.prototype.hasOwnProperty.call(t,r))throw Error('Found marker, "'+r+'", in format string, "'+n+'", but no valid label mapping found in args: '+JSON.stringify(t));return(e=t[r])instanceof ye?_e(e):encodeURIComponent(String(e))}))}Ie.prototype.ta=!0,Ie.prototype.sa=function(){return this.a.toString()},Ie.prototype.toString=function(){return"TrustedResourceUrl{"+this.a+"}"};var Se=/%{(\w+)}/g,Ae=/^((https:)?\/\/[0-9a-z.:[\]-]+\/|\/[^/\\]|[^:/\\%]+\/|[^:/\\%]*[?#]|about:blank#)/i,xe={};function Ne(e,t){this.a=t===Fe?e:""}function De(e){return e instanceof Ne&&e.constructor===Ne?e.a:(L("expected object of type SafeUrl, got '"+e+"' of type "+h(e)),"type_error:SafeUrl")}Ne.prototype.ta=!0,Ne.prototype.sa=function(){return this.a.toString()},Ne.prototype.toString=function(){return"SafeUrl{"+this.a+"}"};var Pe=/^(?:audio\/(?:3gpp2|3gpp|aac|L16|midi|mp3|mp4|mpeg|oga|ogg|opus|x-m4a|x-matroska|x-wav|wav|webm)|font\/\w+|image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp|x-icon)|text\/csv|video\/(?:mpeg|mp4|ogg|webm|quicktime|x-matroska))(?:;\w+=(?:\w+|"[\w;,= ]+"))*$/i,Oe=/^data:(.*);base64,[a-z0-9+\/]+=*$/i,Re=/^(?:(?:https?|mailto|ftp):|[^:/?#]*(?:[/?#]|$))/i;function Le(e){if(e instanceof Ne)return e;if(e="object"==typeof e&&e.ta?e.sa():String(e),Re.test(e))e=new Ne(e,Fe);else{var t=(e=(e=String(e)).replace(/(%0A|%0D)/g,"")).match(Oe);e=t&&Pe.test(t[1])?new Ne(e,Fe):null}return e}function Me(e){return e instanceof Ne?e:(e="object"==typeof e&&e.ta?e.sa():String(e),Re.test(e)||(e="about:invalid#zClosurez"),new Ne(e,Fe))}var Fe={},je=new Ne("about:invalid#zClosurez",Fe);function qe(e,t,n){this.a=n===Ue?e:""}qe.prototype.ta=!0,qe.prototype.sa=function(){return this.a.toString()},qe.prototype.toString=function(){return"SafeHtml{"+this.a+"}"};var Ue={};function Ve(e,t,n,r){return e=e instanceof Ne?e:Me(e),t=t||s,n=n instanceof ye?_e(n):n||"",t.open(De(e),n,r,void 0)}function Be(e,t){for(var n=e.split("%s"),r="",i=Array.prototype.slice.call(arguments,1);i.length&&1<n.length;)r+=n.shift()+i.shift();return r+n.join("%s")}function He(e){return se.test(e)&&(-1!=e.indexOf("&")&&(e=e.replace(ee,"&amp;")),-1!=e.indexOf("<")&&(e=e.replace(te,"&lt;")),-1!=e.indexOf(">")&&(e=e.replace(ne,"&gt;")),-1!=e.indexOf('"')&&(e=e.replace(re,"&quot;")),-1!=e.indexOf("'")&&(e=e.replace(ie,"&#39;")),-1!=e.indexOf("\0")&&(e=e.replace(oe,"&#0;"))),e}function We(e){return We[" "](e),e}We[" "]=l;var Ke,ze,Ge=he("Opera"),Qe=he("Trident")||he("MSIE"),$e=he("Edge"),Ye=$e||Qe,Xe=he("Gecko")&&!(ae(Z.toLowerCase(),"webkit")&&!he("Edge"))&&!(he("Trident")||he("MSIE"))&&!he("Edge"),Ze=ae(Z.toLowerCase(),"webkit")&&!he("Edge");function Je(){var e=s.document;return e?e.documentMode:void 0}e:{var et="",tt=(ze=Z,Xe?/rv:([^\);]+)(\)|;)/.exec(ze):$e?/Edge\/([\d\.]+)/.exec(ze):Qe?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(ze):Ze?/WebKit\/(\S+)/.exec(ze):Ge?/(?:Version)[ \/]?(\S+)/.exec(ze):void 0);if(tt&&(et=tt?tt[1]:""),Qe){var nt=Je();if(null!=nt&&nt>parseFloat(et)){Ke=String(nt);break e}}Ke=et}var rt={};function it(e){return function(e,t){var n=rt;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t()}(e,function(){for(var t=0,n=J(String(Ke)).split("."),r=J(String(e)).split("."),i=Math.max(n.length,r.length),o=0;0==t&&o<i;o++){var s=n[o]||"",a=r[o]||"";do{if(s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],0==s[0].length&&0==a[0].length)break;t=ue(0==s[1].length?0:parseInt(s[1],10),0==a[1].length?0:parseInt(a[1],10))||ue(0==s[2].length,0==a[2].length)||ue(s[2],a[2]),s=s[3],a=a[3]}while(0==t)}return 0<=t})}var ot=s.document&&Qe&&(Je()||parseInt(Ke,10))||void 0;try{new self.OffscreenCanvas(0,0).getContext("2d")}catch(ze){}var st=!Qe||9<=Number(ot);function at(e){var t=document;return"string"==typeof e?t.getElementById(e):e}function ut(e,t){fe(t,function(t,n){t&&"object"==typeof t&&t.ta&&(t=t.sa()),"style"==n?e.style.cssText=t:"class"==n?e.className=t:"for"==n?e.htmlFor=t:ht.hasOwnProperty(n)?e.setAttribute(ht[n],t):0==n.lastIndexOf("aria-",0)||0==n.lastIndexOf("data-",0)?e.setAttribute(n,t):e[n]=t})}var ct,lt,ht={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",frameborder:"frameBorder",height:"height",maxlength:"maxLength",nonce:"nonce",role:"role",rowspan:"rowSpan",type:"type",usemap:"useMap",valign:"vAlign",width:"width"};function ft(e,t,n){function r(n){n&&t.appendChild("string"==typeof n?e.createTextNode(n):n)}for(var i=2;i<n.length;i++){var o=n[i];if(!f(o)||p(o)&&0<o.nodeType)r(o);else{e:{if(o&&"number"==typeof o.length){if(p(o)){var s="function"==typeof o.item||"string"==typeof o.item;break e}if(d(o)){s="function"==typeof o.item;break e}}s=!1}H(s?X(o):o,r)}}}function dt(e,t){return t=String(t),"application/xhtml+xml"===e.contentType&&(t=t.toLowerCase()),e.createElement(t)}function pt(e){s.setTimeout(function(){throw e},0)}function gt(e,t){lt||function(){if(s.Promise&&s.Promise.resolve){var e=s.Promise.resolve(void 0);lt=function(){e.then(yt)}}else lt=function(){var e=yt;!d(s.setImmediate)||s.Window&&s.Window.prototype&&!he("Edge")&&s.Window.prototype.setImmediate==s.setImmediate?(ct||(ct=function(){var e=s.MessageChannel;if(void 0===e&&"undefined"!=typeof window&&window.postMessage&&window.addEventListener&&!he("Presto")&&(e=function(){var e=dt(document,"IFRAME");e.style.display="none",document.documentElement.appendChild(e);var t=e.contentWindow;(e=t.document).open(),e.close();var n="callImmediate"+Math.random(),r="file:"==t.location.protocol?"*":t.location.protocol+"//"+t.location.host;e=b(function(e){"*"!=r&&e.origin!=r||e.data!=n||this.port1.onmessage()},this),t.addEventListener("message",e,!1),this.port1={},this.port2={postMessage:function(){t.postMessage(n,r)}}}),void 0!==e&&!he("Trident")&&!he("MSIE")){var t=new e,n={},r=n;return t.port1.onmessage=function(){if(void 0!==n.next){var e=(n=n.next).Hb;n.Hb=null,e()}},function(e){r.next={Hb:e},r=r.next,t.port2.postMessage(0)}}return function(e){s.setTimeout(e,0)}}()),ct(e)):s.setImmediate(e)}}(),vt||(lt(),vt=!0),mt.add(e,t)}var vt=!1,mt=new j;function yt(){for(var e;e=U();){try{e.a.call(e.b)}catch(t){pt(t)}F(q,e)}vt=!1}function _t(e,t){if(this.a=bt,this.i=void 0,this.f=this.b=this.c=null,this.g=this.h=!1,e!=l)try{var n=this;e.call(t,function(e){Ot(n,wt,e)},function(e){if(!(e instanceof Ut))try{if(e instanceof Error)throw e;throw Error("Promise rejected.")}catch(ly){}Ot(n,Tt,e)})}catch(r){Ot(this,Tt,r)}}var bt=0,wt=2,Tt=3;function Et(){this.next=this.f=this.b=this.g=this.a=null,this.c=!1}Et.prototype.reset=function(){this.f=this.b=this.g=this.a=null,this.c=!1};var It=new M(function(){return new Et},function(e){e.reset()});function kt(e,t,n){var r=It.get();return r.g=e,r.b=t,r.f=n,r}function Ct(e){if(e instanceof _t)return e;var t=new _t(l);return Ot(t,wt,e),t}function St(e){return new _t(function(t,n){n(e)})}function At(e,t,n){Rt(e,t,n,null)||gt(w(t,e))}function xt(e){return new _t(function(t){var n=e.length,r=[];if(n)for(var i=function(e,i,o){n--,r[e]=i?{Qb:!0,value:o}:{Qb:!1,reason:o},0==n&&t(r)},o=0;o<e.length;o++)At(e[o],w(i,o,!0),w(i,o,!1));else t(r)})}function Nt(e,t){if(e.a==bt)if(e.c){var n=e.c;if(n.b){for(var r=0,i=null,o=null,s=n.b;s&&(s.c||(r++,s.a==e&&(i=s),!(i&&1<r)));s=s.next)i||(o=s);i&&(n.a==bt&&1==r?Nt(n,t):(o?((r=o).next==n.f&&(n.f=r),r.next=r.next.next):Mt(n),Ft(n,i,Tt,t)))}e.c=null}else Ot(e,Tt,t)}function Dt(e,t){e.b||e.a!=wt&&e.a!=Tt||Lt(e),e.f?e.f.next=t:e.b=t,e.f=t}function Pt(e,t,n,r){var i=kt(null,null,null);return i.a=new _t(function(e,o){i.g=t?function(n){try{var i=t.call(r,n);e(i)}catch(Xr){o(Xr)}}:e,i.b=n?function(t){try{var i=n.call(r,t);void 0===i&&t instanceof Ut?o(t):e(i)}catch(Xr){o(Xr)}}:o}),i.a.c=e,Dt(e,i),i.a}function Ot(e,t,n){e.a==bt&&(e===n&&(t=Tt,n=new TypeError("Promise cannot resolve to itself")),e.a=1,Rt(n,e.$c,e.ad,e)||(e.i=n,e.a=t,e.c=null,Lt(e),t!=Tt||n instanceof Ut||function(e,t){e.g=!0,gt(function(){e.g&&qt.call(null,t)})}(e,n)))}function Rt(e,t,n,r){if(e instanceof _t)return Dt(e,kt(t||l,n||null,r)),!0;if(P(e))return e.then(t,n,r),!0;if(p(e))try{var i=e.then;if(d(i))return function(e,t,n,r,i){function o(e){s||(s=!0,r.call(i,e))}var s=!1;try{t.call(e,function(e){s||(s=!0,n.call(i,e))},o)}catch(a){o(a)}}(e,i,t,n,r),!0}catch(o){return n.call(r,o),!0}return!1}function Lt(e){e.h||(e.h=!0,gt(e.gc,e))}function Mt(e){var t=null;return e.b&&(e.b=(t=e.b).next,t.next=null),e.b||(e.f=null),t}function Ft(e,t,n,r){if(n==Tt&&t.b&&!t.c)for(;e&&e.g;e=e.c)e.g=!1;if(t.a)t.a.c=null,jt(t,n,r);else try{t.c?t.g.call(t.f):jt(t,n,r)}catch(ly){qt.call(null,ly)}F(It,t)}function jt(e,t,n){t==wt?e.g.call(e.f,n):e.b&&e.b.call(e.f,n)}_t.prototype.then=function(e,t,n){return Pt(this,d(e)?e:null,d(t)?t:null,n)},_t.prototype.$goog_Thenable=!0,(e=_t.prototype).oa=function(e,t){return(e=kt(e,e,t)).c=!0,Dt(this,e),this},e.o=function(e,t){return Pt(this,null,e,t)},e.cancel=function(e){if(this.a==bt){var t=new Ut(e);gt(function(){Nt(this,t)},this)}},e.$c=function(e){this.a=bt,Ot(this,wt,e)},e.ad=function(e){this.a=bt,Ot(this,Tt,e)},e.gc=function(){for(var e;e=Mt(this);)Ft(this,e,this.a,this.i);this.h=!1};var qt=pt;function Ut(e){O.call(this,e)}function Vt(){0!=Bt&&(Ht[g(this)]=this),this.ya=this.ya,this.pa=this.pa}E(Ut,O),Ut.prototype.name="cancel";var Bt=0,Ht={};function Wt(e){if(!e.ya&&(e.ya=!0,e.Da(),0!=Bt)){var t=g(e);if(0!=Bt&&e.pa&&0<e.pa.length)throw Error(e+" did not empty its onDisposeCallbacks queue. This probably means it overrode dispose() or disposeInternal() without calling the superclass' method.");delete Ht[t]}}Vt.prototype.ya=!1,Vt.prototype.Da=function(){if(this.pa)for(;this.pa.length;)this.pa.shift()()};var Kt=Object.freeze||function(e){return e},zt=!Qe||9<=Number(ot),Gt=Qe&&!it("9"),Qt=function(){if(!s.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{s.addEventListener("test",l,t),s.removeEventListener("test",l,t)}catch(n){}return e}();function $t(e,t){this.type=e,this.b=this.target=t,this.defaultPrevented=!1}function Yt(e,t){if($t.call(this,e?e.type:""),this.relatedTarget=this.b=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.a=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.b=t,t=e.relatedTarget){if(Xe){e:{try{We(t.nodeName);var i=!0;break e}catch(o){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"==typeof e.pointerType?e.pointerType:Xt[e.pointerType]||"",this.a=e,e.defaultPrevented&&this.preventDefault()}}$t.prototype.preventDefault=function(){this.defaultPrevented=!0},E(Yt,$t);var Xt=Kt({2:"touch",3:"pen",4:"mouse"});Yt.prototype.preventDefault=function(){Yt.bb.preventDefault.call(this);var e=this.a;if(e.preventDefault)e.preventDefault();else if(e.returnValue=!1,Gt)try{(e.ctrlKey||112<=e.keyCode&&123>=e.keyCode)&&(e.keyCode=-1)}catch(t){}},Yt.prototype.g=function(){return this.a};var Zt="closure_listenable_"+(1e6*Math.random()|0),Jt=0;function en(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.Wa=i,this.key=++Jt,this.wa=this.Qa=!1}function tn(e){e.wa=!0,e.listener=null,e.proxy=null,e.src=null,e.Wa=null}function nn(e){this.src=e,this.a={},this.b=0}function rn(e,t){var n=t.type;n in e.a&&Q(e.a[n],t)&&(tn(t),0==e.a[n].length&&(delete e.a[n],e.b--))}function on(e,t,n,r){for(var i=0;i<e.length;++i){var o=e[i];if(!o.wa&&o.listener==t&&o.capture==!!n&&o.Wa==r)return i}return-1}nn.prototype.add=function(e,t,n,r,i){var o=e.toString();(e=this.a[o])||(e=this.a[o]=[],this.b++);var s=on(e,t,r,i);return-1<s?(t=e[s],n||(t.Qa=!1)):((t=new en(t,this.src,o,!!r,i)).Qa=n,e.push(t)),t};var sn="closure_lm_"+(1e6*Math.random()|0),an={};function un(e,t,n,r,i){if(r&&r.once)ln(e,t,n,r,i);else if(Array.isArray(t))for(var o=0;o<t.length;o++)un(e,t[o],n,r,i);else n=_n(n),e&&e[Zt]?wn(e,t,n,p(r)?!!r.capture:!!r,i):cn(e,t,n,!1,r,i)}function cn(e,t,n,r,i,o){if(!t)throw Error("Invalid event type");var s=p(i)?!!i.capture:!!i,a=mn(e);if(a||(e[sn]=a=new nn(e)),!(n=a.add(t,n,r,s,o)).proxy)if(r=function(){var e=vn,t=zt?function(n){return e.call(t.src,t.listener,n)}:function(n){if(!(n=e.call(t.src,t.listener,n)))return n};return t}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)Qt||(i=s),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(dn(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}}function ln(e,t,n,r,i){if(Array.isArray(t))for(var o=0;o<t.length;o++)ln(e,t[o],n,r,i);else n=_n(n),e&&e[Zt]?Tn(e,t,n,p(r)?!!r.capture:!!r,i):cn(e,t,n,!0,r,i)}function hn(e,t,n,r,i){if(Array.isArray(t))for(var o=0;o<t.length;o++)hn(e,t[o],n,r,i);else r=p(r)?!!r.capture:!!r,n=_n(n),e&&e[Zt]?(e=e.v,(t=String(t).toString())in e.a&&-1<(n=on(o=e.a[t],n,r,i))&&(tn(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete e.a[t],e.b--))):e&&(e=mn(e))&&(t=e.a[t.toString()],e=-1,t&&(e=on(t,n,r,i)),(n=-1<e?t[e]:null)&&fn(n))}function fn(e){if("number"!=typeof e&&e&&!e.wa){var t=e.src;if(t&&t[Zt])rn(t.v,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(dn(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=mn(t))?(rn(n,e),0==n.b&&(n.src=null,t[sn]=null)):tn(e)}}}function dn(e){return e in an?an[e]:an[e]="on"+e}function pn(e,t,n,r){var i=!0;if((e=mn(e))&&(t=e.a[t.toString()]))for(t=t.concat(),e=0;e<t.length;e++){var o=t[e];o&&o.capture==n&&!o.wa&&(o=gn(o,r),i=i&&!1!==o)}return i}function gn(e,t){var n=e.listener,r=e.Wa||e.src;return e.Qa&&fn(e),n.call(r,t)}function vn(e,t){if(e.wa)return!0;if(!zt){if(!t)e:{t=["window","event"];for(var n=s,r=0;r<t.length;r++)if(null==(n=n[t[r]])){t=null;break e}t=n}if(t=new Yt(r=t,this),n=!0,!(0>r.keyCode||null!=r.returnValue)){e:{var i=!1;if(0==r.keyCode)try{r.keyCode=-1;break e}catch(a){i=!0}(i||null==r.returnValue)&&(r.returnValue=!0)}for(r=[],i=t.b;i;i=i.parentNode)r.push(i);for(e=e.type,i=r.length-1;0<=i;i--){t.b=r[i];var o=pn(r[i],e,!0,t);n=n&&o}for(i=0;i<r.length;i++)t.b=r[i],o=pn(r[i],e,!1,t),n=n&&o}return n}return gn(e,new Yt(t,this))}function mn(e){return(e=e[sn])instanceof nn?e:null}var yn="__closure_events_fn_"+(1e9*Math.random()>>>0);function _n(e){return d(e)?e:(e[yn]||(e[yn]=function(t){return e.handleEvent(t)}),e[yn])}function bn(){Vt.call(this),this.v=new nn(this),this.bc=this,this.hb=null}function wn(e,t,n,r,i){e.v.add(String(t),n,!1,r,i)}function Tn(e,t,n,r,i){e.v.add(String(t),n,!0,r,i)}function En(e,t,n,r){if(!(t=e.v.a[String(t)]))return!0;t=t.concat();for(var i=!0,o=0;o<t.length;++o){var s=t[o];if(s&&!s.wa&&s.capture==n){var a=s.listener,u=s.Wa||s.src;s.Qa&&rn(e.v,s),i=!1!==a.call(u,r)&&i}}return i&&!r.defaultPrevented}function In(e,t,n){if(d(e))n&&(e=b(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=b(e.handleEvent,e)}return 2147483647<Number(t)?-1:s.setTimeout(e,t||0)}function kn(e){var t=null;return new _t(function(n,r){-1==(t=In(function(){n(void 0)},e))&&r(Error("Failed to schedule timer."))}).o(function(e){throw s.clearTimeout(t),e})}function Cn(e){if(e.X&&"function"==typeof e.X)return e.X();if("string"==typeof e)return e.split("");if(f(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}function Sn(e){if(e.Y&&"function"==typeof e.Y)return e.Y();if(!e.X||"function"!=typeof e.X){if(f(e)||"string"==typeof e){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}for(var r in t=[],n=0,e)t[n++]=r;return t}}function An(e,t){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(e)if(e instanceof An)for(n=e.Y(),r=0;r<n.length;r++)this.set(n[r],e.get(n[r]));else for(r in e)this.set(r,e[r])}function xn(e){if(e.c!=e.a.length){for(var t=0,n=0;t<e.a.length;){var r=e.a[t];Nn(e.b,r)&&(e.a[n++]=r),t++}e.a.length=n}if(e.c!=e.a.length){var i={};for(n=t=0;t<e.a.length;)Nn(i,r=e.a[t])||(e.a[n++]=r,i[r]=1),t++;e.a.length=n}}function Nn(e,t){return Object.prototype.hasOwnProperty.call(e,t)}E(bn,Vt),bn.prototype[Zt]=!0,bn.prototype.addEventListener=function(e,t,n,r){un(this,e,t,n,r)},bn.prototype.removeEventListener=function(e,t,n,r){hn(this,e,t,n,r)},bn.prototype.dispatchEvent=function(e){var t,n=this.hb;if(n)for(t=[];n;n=n.hb)t.push(n);n=this.bc;var r=e.type||e;if("string"==typeof e)e=new $t(e,n);else if(e instanceof $t)e.target=e.target||n;else{var i=e;ve(e=new $t(r,n),i)}if(i=!0,t)for(var o=t.length-1;0<=o;o--){var s=e.b=t[o];i=En(s,r,!0,e)&&i}if(i=En(s=e.b=n,r,!0,e)&&i,i=En(s,r,!1,e)&&i,t)for(o=0;o<t.length;o++)i=En(s=e.b=t[o],r,!1,e)&&i;return i},bn.prototype.Da=function(){if(bn.bb.Da.call(this),this.v){var e,t=this.v;for(e in t.a){for(var n=t.a[e],r=0;r<n.length;r++)tn(n[r]);delete t.a[e],t.b--}}this.hb=null},(e=An.prototype).X=function(){xn(this);for(var e=[],t=0;t<this.a.length;t++)e.push(this.b[this.a[t]]);return e},e.Y=function(){return xn(this),this.a.concat()},e.clear=function(){this.b={},this.c=this.a.length=0},e.get=function(e,t){return Nn(this.b,e)?this.b[e]:t},e.set=function(e,t){Nn(this.b,e)||(this.c++,this.a.push(e)),this.b[e]=t},e.forEach=function(e,t){for(var n=this.Y(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);e.call(t,o,i,this)}};var Dn=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Pn(e,t){var n;this.a=this.l=this.c="",this.g=null,this.h=this.f="",this.i=!1,e instanceof Pn?(this.i=void 0!==t?t:e.i,On(this,e.c),this.l=e.l,this.a=e.a,Rn(this,e.g),this.f=e.f,Ln(this,er(e.b)),this.h=e.h):e&&(n=String(e).match(Dn))?(this.i=!!t,On(this,n[1]||"",!0),this.l=Un(n[2]||""),this.a=Un(n[3]||"",!0),Rn(this,n[4]),this.f=Un(n[5]||"",!0),Ln(this,n[6]||"",!0),this.h=Un(n[7]||"")):(this.i=!!t,this.b=new Qn(null,this.i))}function On(e,t,n){e.c=n?Un(t,!0):t,e.c&&(e.c=e.c.replace(/:$/,""))}function Rn(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.g=t}else e.g=null}function Ln(e,t,n){t instanceof Qn?(e.b=t,function(e,t){t&&!e.f&&($n(e),e.c=null,e.a.forEach(function(e,t){var n=t.toLowerCase();t!=n&&(Xn(this,t),Jn(this,n,e))},e)),e.f=t}(e.b,e.i)):(n||(t=Vn(t,zn)),e.b=new Qn(t,e.i))}function Mn(e,t,n){e.b.set(t,n)}function Fn(e,t){return e.b.get(t)}function jn(e){return e instanceof Pn?new Pn(e):new Pn(e,void 0)}function qn(e,t,n,r){var i=new Pn(null,void 0);return e&&On(i,e),t&&(i.a=t),n&&Rn(i,n),r&&(i.f=r),i}function Un(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function Vn(e,t,n){return"string"==typeof e?(e=encodeURI(e).replace(t,Bn),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function Bn(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}Pn.prototype.toString=function(){var e=[],t=this.c;t&&e.push(Vn(t,Hn,!0),":");var n=this.a;return(n||"file"==t)&&(e.push("//"),(t=this.l)&&e.push(Vn(t,Hn,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.g)&&e.push(":",String(n))),(n=this.f)&&(this.a&&"/"!=n.charAt(0)&&e.push("/"),e.push(Vn(n,"/"==n.charAt(0)?Kn:Wn,!0))),(n=this.b.toString())&&e.push("?",n),(n=this.h)&&e.push("#",Vn(n,Gn)),e.join("")},Pn.prototype.resolve=function(e){var t=new Pn(this),n=!!e.c;n?On(t,e.c):n=!!e.l,n?t.l=e.l:n=!!e.a,n?t.a=e.a:n=null!=e.g;var r=e.f;if(n)Rn(t,e.g);else if(n=!!e.f){if("/"!=r.charAt(0))if(this.a&&!this.f)r="/"+r;else{var i=t.f.lastIndexOf("/");-1!=i&&(r=t.f.substr(0,i+1)+r)}if(".."==(i=r)||"."==i)r="";else if(ae(i,"./")||ae(i,"/.")){r=0==i.lastIndexOf("/",0),i=i.split("/");for(var o=[],s=0;s<i.length;){var a=i[s++];"."==a?r&&s==i.length&&o.push(""):".."==a?((1<o.length||1==o.length&&""!=o[0])&&o.pop(),r&&s==i.length&&o.push("")):(o.push(a),r=!0)}r=o.join("/")}else r=i}return n?t.f=r:n=""!==e.b.toString(),n?Ln(t,er(e.b)):n=!!e.h,n&&(t.h=e.h),t};var Hn=/[#\/\?@]/g,Wn=/[#\?:]/g,Kn=/[#\?]/g,zn=/[#\?@]/g,Gn=/#/g;function Qn(e,t){this.b=this.a=null,this.c=e||null,this.f=!!t}function $n(e){e.a||(e.a=new An,e.b=0,e.c&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var o=e[n].substring(0,r);i=e[n].substring(r+1)}else o=e[n];t(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.c,function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)}))}function Yn(e){var t=Sn(e);if(void 0===t)throw Error("Keys are undefined");var n=new Qn(null,void 0);e=Cn(e);for(var r=0;r<t.length;r++){var i=t[r],o=e[r];Array.isArray(o)?Jn(n,i,o):n.add(i,o)}return n}function Xn(e,t){$n(e),t=tr(e,t),Nn(e.a.b,t)&&(e.c=null,e.b-=e.a.get(t).length,Nn((e=e.a).b,t)&&(delete e.b[t],e.c--,e.a.length>2*e.c&&xn(e)))}function Zn(e,t){return $n(e),t=tr(e,t),Nn(e.a.b,t)}function Jn(e,t,n){Xn(e,t),0<n.length&&(e.c=null,e.a.set(tr(e,t),X(n)),e.b+=n.length)}function er(e){var t=new Qn;return t.c=e.c,e.a&&(t.a=new An(e.a),t.b=e.b),t}function tr(e,t){return t=String(t),e.f&&(t=t.toLowerCase()),t}function nr(e){var t=[];return ir(new rr,e,t),t.join("")}function rr(){}function ir(e,t,n){if(null==t)n.push("null");else{if("object"==typeof t){if(Array.isArray(t)){var r=t;t=r.length,n.push("[");for(var i="",o=0;o<t;o++)n.push(i),ir(e,r[o],n),i=",";return void n.push("]")}if(!(t instanceof String||t instanceof Number||t instanceof Boolean)){for(r in n.push("{"),i="",t)Object.prototype.hasOwnProperty.call(t,r)&&"function"!=typeof(o=t[r])&&(n.push(i),ar(r,n),n.push(":"),ir(e,o,n),i=",");return void n.push("}")}t=t.valueOf()}switch(typeof t){case"string":ar(t,n);break;case"number":n.push(isFinite(t)&&!isNaN(t)?String(t):"null");break;case"boolean":n.push(String(t));break;case"function":n.push("null");break;default:throw Error("Unknown type: "+typeof t)}}}(e=Qn.prototype).add=function(e,t){$n(this),this.c=null,e=tr(this,e);var n=this.a.get(e);return n||this.a.set(e,n=[]),n.push(t),this.b+=1,this},e.clear=function(){this.a=this.c=null,this.b=0},e.forEach=function(e,t){$n(this),this.a.forEach(function(n,r){H(n,function(n){e.call(t,n,r,this)},this)},this)},e.Y=function(){$n(this);for(var e=this.a.X(),t=this.a.Y(),n=[],r=0;r<t.length;r++)for(var i=e[r],o=0;o<i.length;o++)n.push(t[r]);return n},e.X=function(e){$n(this);var t=[];if("string"==typeof e)Zn(this,e)&&(t=Y(t,this.a.get(tr(this,e))));else{e=this.a.X();for(var n=0;n<e.length;n++)t=Y(t,e[n])}return t},e.set=function(e,t){return $n(this),this.c=null,Zn(this,e=tr(this,e))&&(this.b-=this.a.get(e).length),this.a.set(e,[t]),this.b+=1,this},e.get=function(e,t){return e&&0<(e=this.X(e)).length?String(e[0]):t},e.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var e=[],t=this.a.Y(),n=0;n<t.length;n++){var r=t[n],i=encodeURIComponent(String(r));r=this.X(r);for(var o=0;o<r.length;o++){var s=i;""!==r[o]&&(s+="="+encodeURIComponent(String(r[o]))),e.push(s)}}return this.c=e.join("&")};var or={'"':'\\"',"\\":"\\\\","/":"\\/","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\v":"\\u000b"},sr=/\uffff/.test("\uffff")?/[\\"\x00-\x1f\x7f-\uffff]/g:/[\\"\x00-\x1f\x7f-\xff]/g;function ar(e,t){t.push('"',e.replace(sr,function(e){var t=or[e];return t||(t="\\u"+(65536|e.charCodeAt(0)).toString(16).substr(1),or[e]=t),t}),'"')}function ur(){var e=Ar();return Qe&&!!ot&&11==ot||/Edge\/\d+/.test(e)}function cr(){return s.window&&s.window.location.href||self&&self.location&&self.location.href||""}function lr(e,t){t=t||s.window;var n="about:blank";e&&(n=De(Le(e)||je)),t.location.href=n}function hr(e,t){var n,r=[];for(n in e)n in t?typeof e[n]!=typeof t[n]?r.push(n):"object"==typeof e[n]&&null!=e[n]&&null!=t[n]?0<hr(e[n],t[n]).length&&r.push(n):e[n]!==t[n]&&r.push(n):r.push(n);for(n in t)n in e||r.push(n);return r}function fr(e){return!!((e=(e||Ar()).toLowerCase()).match(/android/)||e.match(/webos/)||e.match(/iphone|ipad|ipod/)||e.match(/blackberry/)||e.match(/windows phone/)||e.match(/iemobile/))}function dr(e){e=e||s.window;try{e.close()}catch(t){}}function pr(e,t,n){var r=Math.floor(1e9*Math.random()).toString();t=t||500,n=n||600;var i=(window.screen.availHeight-n)/2,o=(window.screen.availWidth-t)/2;for(s in t={width:t,height:n,top:0<i?i:0,left:0<o?o:0,location:!0,resizable:!0,statusbar:!0,toolbar:!1},n=Ar().toLowerCase(),r&&(t.target=r,ae(n,"crios/")&&(t.target="_blank")),kr(Ar())==Er&&(e=e||"http://localhost",t.scrollbars=!0),n=e||"",(e=t)||(e={}),r=window,t=n instanceof Ne?n:Le(void 0!==n.href?n.href:String(n))||je,n=e.target||n.target,i=[],e)switch(s){case"width":case"height":case"top":case"left":i.push(s+"="+e[s]);break;case"target":case"noopener":case"noreferrer":break;default:i.push(s+"="+(e[s]?1:0))}var s=i.join(",");if((he("iPhone")&&!he("iPod")&&!he("iPad")||he("iPad")||he("iPod"))&&r.navigator&&r.navigator.standalone&&n&&"_self"!=n?(me(s=dt(document,"A"),"HTMLAnchorElement"),t=t instanceof Ne?t:Me(t),s.href=De(t),s.setAttribute("target",n),e.noreferrer&&s.setAttribute("rel","noreferrer"),(e=document.createEvent("MouseEvent")).initMouseEvent("click",!0,!0,r,1),s.dispatchEvent(e),s={}):e.noreferrer?(s=Ve("",r,n,s),e=De(t),s&&(Ye&&ae(e,";")&&(e="'"+e.replace(/'/g,"%27")+"'"),s.opener=null,e='<meta name="referrer" content="no-referrer"><meta http-equiv="refresh" content="0; url='+He(e)+'">',e=new qe(e=(r=Ee())?r.createHTML(e):e,null,Ue),r=s.document)&&(r.write(function(e){return e instanceof qe&&e.constructor===qe?e.a:(L("expected object of type SafeHtml, got '"+e+"' of type "+h(e)),"type_error:SafeHtml")}(e)),r.close())):(s=Ve(t,r,n,s))&&e.noopener&&(s.opener=null),s)try{s.focus()}catch(a){}return s}var gr=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,vr=/^[^@]+@[^@]+$/;function mr(){var e=null;return new _t(function(t){"complete"==s.document.readyState?t():(e=function(){t()},ln(window,"load",e))}).o(function(t){throw hn(window,"load",e),t})}function yr(e){return e=e||Ar(),!("file:"!==Or()&&"ionic:"!==Or()||!e.toLowerCase().match(/iphone|ipad|ipod|android/))}function _r(){var e=s.window;try{return!(!e||e==e.top)}catch(t){return!1}}function br(){return void 0!==s.WorkerGlobalScope&&"function"==typeof s.importScripts}function wr(){return qr.default.INTERNAL.hasOwnProperty("reactNative")?"ReactNative":qr.default.INTERNAL.hasOwnProperty("node")?"Node":br()?"Worker":"Browser"}function Tr(){var e=wr();return"ReactNative"===e||"Node"===e}var Er="Firefox",Ir="Chrome";function kr(e){var t=e.toLowerCase();return ae(t,"opera/")||ae(t,"opr/")||ae(t,"opios/")?"Opera":ae(t,"iemobile")?"IEMobile":ae(t,"msie")||ae(t,"trident/")?"IE":ae(t,"edge/")?"Edge":ae(t,"firefox/")?Er:ae(t,"silk/")?"Silk":ae(t,"blackberry")?"Blackberry":ae(t,"webos")?"Webos":!ae(t,"safari/")||ae(t,"chrome/")||ae(t,"crios/")||ae(t,"android")?!ae(t,"chrome/")&&!ae(t,"crios/")||ae(t,"edge/")?ae(t,"android")?"Android":(e=e.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/))&&2==e.length?e[1]:"Other":Ir:"Safari"}var Cr={md:"FirebaseCore-web",od:"FirebaseUI-web"};function Sr(e,t){t=t||[];var n,r=[],i={};for(n in Cr)i[Cr[n]]=!0;for(n=0;n<t.length;n++)void 0!==i[t[n]]&&(delete i[t[n]],r.push(t[n]));return r.sort(),(t=r).length||(t=["FirebaseCore-web"]),"Browser"===(r=wr())?r=kr(i=Ar()):"Worker"===r&&(r=kr(i=Ar())+"-"+r),r+"/JsCore/"+e+"/"+t.join(",")}function Ar(){return s.navigator&&s.navigator.userAgent||""}function xr(e,t){e=e.split("."),t=t||s;for(var n=0;n<e.length&&"object"==typeof t&&null!=t;n++)t=t[e[n]];return n!=e.length&&(t=void 0),t}function Nr(){try{var e=s.localStorage,t=jr();if(e)return e.setItem(t,"1"),e.removeItem(t),!ur()||!!s.indexedDB}catch(n){return br()&&!!s.indexedDB}return!1}function Dr(){return(Pr()||"chrome-extension:"===Or()||yr())&&!Tr()&&Nr()&&!br()}function Pr(){return"http:"===Or()||"https:"===Or()}function Or(){return s.location&&s.location.protocol||null}function Rr(e){return!fr(e=e||Ar())&&kr(e)!=Er}function Lr(e){return void 0===e?null:nr(e)}function Mr(e){var t,n={};for(t in e)e.hasOwnProperty(t)&&null!=e[t]&&(n[t]=e[t]);return n}function Fr(e){if(null!==e)return JSON.parse(e)}function jr(e){return e||Math.floor(1e9*Math.random()).toString()}function Ur(e){return"Safari"!=kr(e=e||Ar())&&!e.toLowerCase().match(/iphone|ipad|ipod/)}function Vr(){var e=s.___jsl;if(e&&e.H)for(var t in e.H)if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=e.H[t].L.concat(),e.CP)for(var n=0;n<e.CP.length;n++)e.CP[n]=null}function Br(e,t){if(e>t)throw Error("Short delay should be less than long delay!");this.a=e,this.c=t,e=Ar(),t=wr(),this.b=fr(e)||"ReactNative"===t}function Hr(){var e=s.document;return!e||void 0===e.visibilityState||"visible"==e.visibilityState}function Wr(e){try{var t=new Date(parseInt(e,10));if(!isNaN(t.getTime())&&!/[^0-9]/.test(e))return t.toUTCString()}catch(n){}return null}function Kr(){return!(!xr("fireauth.oauthhelper",s)&&!xr("fireauth.iframe",s))}Br.prototype.get=function(){var e=s.navigator;return!e||"boolean"!=typeof e.onLine||!Pr()&&"chrome-extension:"!==Or()&&void 0===e.connection||e.onLine?this.b?this.c:this.a:Math.min(5e3,this.a)};var zr,Gr={};function Qr(e){Gr[e]||(Gr[e]=!0,"undefined"!=typeof console&&"function"==typeof console.warn&&console.warn(e))}try{var $r={};Object.defineProperty($r,"abcd",{configurable:!0,enumerable:!0,value:1}),Object.defineProperty($r,"abcd",{configurable:!0,enumerable:!0,value:2}),zr=2==$r.abcd}catch(ze){zr=!1}function Yr(e,t,n){zr?Object.defineProperty(e,t,{configurable:!0,enumerable:!0,value:n}):e[t]=n}function Zr(e,t){if(t)for(var n in t)t.hasOwnProperty(n)&&Yr(e,n,t[n])}function Jr(e){var t={};return Zr(t,e),t}function ei(e){var t=e;if("object"==typeof e&&null!=e)for(var n in t="length"in e?[]:{},e)Yr(t,n,ei(e[n]));return t}function ti(e){var t=e&&(e[si]?"phone":null);if(!(t&&e&&e[oi]))throw new k("internal-error","Internal assert: invalid MultiFactorInfo object");Yr(this,"uid",e[oi]),Yr(this,"displayName",e[ri]||null);var n=null;e[ii]&&(n=new Date(e[ii]).toUTCString()),Yr(this,"enrollmentTime",n),Yr(this,"factorId",t)}function ni(e){try{var t=new ai(e)}catch(n){t=null}return t}ti.prototype.w=function(){return{uid:this.uid,displayName:this.displayName,factorId:this.factorId,enrollmentTime:this.enrollmentTime}};var ri="displayName",ii="enrolledAt",oi="mfaEnrollmentId",si="phoneInfo";function ai(e){ti.call(this,e),Yr(this,"phoneNumber",e[si])}function ui(e){var t={},n=e[fi],r=e[pi],i=e[gi];if(e=ni(e[di]),!i||i!=li&&i!=hi&&!n||i==hi&&!r||i==ci&&!e)throw Error("Invalid checkActionCode response!");i==hi?(t[mi]=n||null,t[_i]=n||null,t[vi]=r):(t[mi]=r||null,t[_i]=r||null,t[vi]=n||null),t[yi]=e||null,Yr(this,wi,i),Yr(this,bi,ei(t))}E(ai,ti),ai.prototype.w=function(){var e=ai.bb.w.call(this);return e.phoneNumber=this.phoneNumber,e};var ci="REVERT_SECOND_FACTOR_ADDITION",li="EMAIL_SIGNIN",hi="VERIFY_AND_CHANGE_EMAIL",fi="email",di="mfaInfo",pi="newEmail",gi="requestType",vi="email",mi="fromEmail",yi="multiFactorInfo",_i="previousEmail",bi="data",wi="operation";function Ti(e){var t=Fn(e=jn(e),Ei)||null,n=Fn(e,Ii)||null,r=Fn(e,Si)||null;if(r=r&&xi[r]||null,!t||!n||!r)throw new k("argument-error",Ei+", "+Ii+"and "+Si+" are required in a valid action code URL.");Zr(this,{apiKey:t,operation:r,code:n,continueUrl:Fn(e,ki)||null,languageCode:Fn(e,Ci)||null,tenantId:Fn(e,Ai)||null})}var Ei="apiKey",Ii="oobCode",ki="continueUrl",Ci="languageCode",Si="mode",Ai="tenantId",xi={recoverEmail:"RECOVER_EMAIL",resetPassword:"PASSWORD_RESET",revertSecondFactorAddition:ci,signIn:li,verifyAndChangeEmail:hi,verifyEmail:"VERIFY_EMAIL"};function Ni(e){try{return new Ti(e)}catch(t){return null}}function Di(e){var t=e[Mi];if(void 0===t)throw new k("missing-continue-uri");if("string"!=typeof t||"string"==typeof t&&!t.length)throw new k("invalid-continue-uri");this.h=t,this.b=this.a=null,this.g=!1;var n=e[Pi];if(n&&"object"==typeof n){t=n[qi];var r=n[Fi];if(n=n[ji],"string"==typeof t&&t.length){if(this.a=t,void 0!==r&&"boolean"!=typeof r)throw new k("argument-error",Fi+" property must be a boolean when specified.");if(this.g=!!r,void 0!==n&&("string"!=typeof n||"string"==typeof n&&!n.length))throw new k("argument-error",ji+" property must be a non empty string when specified.");this.b=n||null}else{if(void 0!==t)throw new k("argument-error",qi+" property must be a non empty string when specified.");if(void 0!==r||void 0!==n)throw new k("missing-android-pkg-name")}}else if(void 0!==n)throw new k("argument-error",Pi+" property must be a non null object when specified.");if(this.f=null,(t=e[Li])&&"object"==typeof t){if("string"==typeof(t=t[Ui])&&t.length)this.f=t;else if(void 0!==t)throw new k("argument-error",Ui+" property must be a non empty string when specified.")}else if(void 0!==t)throw new k("argument-error",Li+" property must be a non null object when specified.");if(void 0!==(t=e[Ri])&&"boolean"!=typeof t)throw new k("argument-error",Ri+" property must be a boolean when specified.");if(this.c=!!t,void 0!==(e=e[Oi])&&("string"!=typeof e||"string"==typeof e&&!e.length))throw new k("argument-error",Oi+" property must be a non empty string when specified.");this.i=e||null}var Pi="android",Oi="dynamicLinkDomain",Ri="handleCodeInApp",Li="iOS",Mi="url",Fi="installApp",ji="minimumVersion",qi="packageName",Ui="bundleId";function Vi(e){var t={};for(var n in t.continueUrl=e.h,t.canHandleCodeInApp=e.c,(t.androidPackageName=e.a)&&(t.androidMinimumVersion=e.b,t.androidInstallApp=e.g),t.iOSBundleId=e.f,t.dynamicLinkDomain=e.i,t)null===t[n]&&delete t[n];return t}var Bi=null;function Hi(e){var t=Ki(e);if(!(t&&t.sub&&t.iss&&t.aud&&t.exp))throw Error("Invalid JWT");this.h=e,this.a=t.exp,this.i=t.sub,e=Date.now()/1e3,this.g=t.iat||(e>this.a?this.a:e),this.b=t.provider_id||t.firebase&&t.firebase.sign_in_provider||null,this.f=t.firebase&&t.firebase.tenant||null,this.c=!!t.is_anonymous||"anonymous"==this.b}function Wi(e){try{return new Hi(e)}catch(t){return null}}function Ki(e){if(!e)return null;if(3!=(e=e.split(".")).length)return null;for(var t=(4-(e=e[1]).length%4)%4,n=0;n<t;n++)e+=".";try{var r=function(e){var t=[];return function(e,t){function n(t){for(;r<e.length;){var n=e.charAt(r++),i=Bi[n];if(null!=i)return i;if(!/^[\s\xa0]*$/.test(n))throw Error("Unknown base64 encoding at char: "+n)}return t}!function(){if(!Bi){Bi={};for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),t=["+/=","+/","-_=","-_.","-_"],n=0;5>n;n++)for(var r=e.concat(t[n].split("")),i=0;i<r.length;i++){var o=r[i];void 0===Bi[o]&&(Bi[o]=i)}}}();for(var r=0;;){var i=n(-1),o=n(0),s=n(64),a=n(64);if(64===a&&-1===i)break;t(i<<2|o>>4),64!=s&&(t(o<<4&240|s>>2),64!=a&&t(s<<6&192|a))}}(e,function(e){t.push(e)}),t}(e);for(e=[],n=t=0;t<r.length;){var i=r[t++];if(128>i)e[n++]=String.fromCharCode(i);else if(191<i&&224>i){var o=r[t++];e[n++]=String.fromCharCode((31&i)<<6|63&o)}else if(239<i&&365>i){o=r[t++];var s=r[t++],a=((7&i)<<18|(63&o)<<12|(63&s)<<6|63&r[t++])-65536;e[n++]=String.fromCharCode(55296+(a>>10)),e[n++]=String.fromCharCode(56320+(1023&a))}else o=r[t++],s=r[t++],e[n++]=String.fromCharCode((15&i)<<12|(63&o)<<6|63&s)}return JSON.parse(e.join(""))}catch(Xr){}return null}Hi.prototype.T=function(){return this.f},Hi.prototype.l=function(){return this.c},Hi.prototype.toString=function(){return this.h};var zi="oauth_consumer_key oauth_nonce oauth_signature oauth_signature_method oauth_timestamp oauth_token oauth_version".split(" "),Gi=["client_id","response_type","scope","redirect_uri","state"],Qi={nd:{Ja:"locale",va:700,ua:600,fa:"facebook.com",Ya:Gi},pd:{Ja:null,va:500,ua:750,fa:"github.com",Ya:Gi},qd:{Ja:"hl",va:515,ua:680,fa:"google.com",Ya:Gi},wd:{Ja:"lang",va:485,ua:705,fa:"twitter.com",Ya:zi},kd:{Ja:"locale",va:640,ua:600,fa:"apple.com",Ya:[]}};function $i(e){for(var t in Qi)if(Qi[t].fa==e)return Qi[t];return null}function Yi(e){var t={};t["facebook.com"]=to,t["google.com"]=ro,t["github.com"]=no,t["twitter.com"]=io;var n=e&&e[Zi];try{if(n)return t[n]?new t[n](e):new eo(e);if(void 0!==e[Xi])return new Ji(e)}catch(r){}return null}var Xi="idToken",Zi="providerId";function Ji(e){var t=e[Zi];if(!t&&e[Xi]){var n=Wi(e[Xi]);n&&n.b&&(t=n.b)}if(!t)throw Error("Invalid additional user info!");"anonymous"!=t&&"custom"!=t||(t=null),n=!1,void 0!==e.isNewUser?n=!!e.isNewUser:"identitytoolkit#SignupNewUserResponse"===e.kind&&(n=!0),Yr(this,"providerId",t),Yr(this,"isNewUser",n)}function eo(e){Ji.call(this,e),Yr(this,"profile",ei((e=Fr(e.rawUserInfo||"{}"))||{}))}function to(e){if(eo.call(this,e),"facebook.com"!=this.providerId)throw Error("Invalid provider ID!")}function no(e){if(eo.call(this,e),"github.com"!=this.providerId)throw Error("Invalid provider ID!");Yr(this,"username",this.profile&&this.profile.login||null)}function ro(e){if(eo.call(this,e),"google.com"!=this.providerId)throw Error("Invalid provider ID!")}function io(e){if(eo.call(this,e),"twitter.com"!=this.providerId)throw Error("Invalid provider ID!");Yr(this,"username",e.screenName||null)}function oo(e){var t=jn(e),n=Fn(t,"link"),r=Fn(jn(n),"link");return t=Fn(t,"deep_link_id"),Fn(jn(t),"link")||t||r||n||e}function so(e,t){if(!e&&!t)throw new k("internal-error","Internal assert: no raw session string available");if(e&&t)throw new k("internal-error","Internal assert: unable to determine the session type");this.a=e||null,this.b=t||null,this.type=this.a?ao:uo}E(eo,Ji),E(to,eo),E(no,eo),E(ro,eo),E(io,eo);var ao="enroll",uo="signin";function co(){}function lo(e,t){return e.then(function(e){if(e[Xs]){var n=Wi(e[Xs]);if(!n||t!=n.i)throw new k("user-mismatch");return e}throw new k("user-mismatch")}).o(function(e){throw e&&e.code&&e.code==A+"user-not-found"?new k("user-mismatch"):e})}function ho(e,t){if(!t)throw new k("internal-error","failed to construct a credential");this.a=t,Yr(this,"providerId",e),Yr(this,"signInMethod",e)}function fo(e){return{pendingToken:e.a,requestUri:"http://localhost"}}function po(e){if(e&&e.providerId&&e.signInMethod&&0==e.providerId.indexOf("saml.")&&e.pendingToken)try{return new ho(e.providerId,e.pendingToken)}catch(t){}return null}function go(e,t,n){if(this.a=null,t.idToken||t.accessToken)t.idToken&&Yr(this,"idToken",t.idToken),t.accessToken&&Yr(this,"accessToken",t.accessToken),t.nonce&&!t.pendingToken&&Yr(this,"nonce",t.nonce),t.pendingToken&&(this.a=t.pendingToken);else{if(!t.oauthToken||!t.oauthTokenSecret)throw new k("internal-error","failed to construct a credential");Yr(this,"accessToken",t.oauthToken),Yr(this,"secret",t.oauthTokenSecret)}Yr(this,"providerId",e),Yr(this,"signInMethod",n)}function vo(e){var t={};return e.idToken&&(t.id_token=e.idToken),e.accessToken&&(t.access_token=e.accessToken),e.secret&&(t.oauth_token_secret=e.secret),t.providerId=e.providerId,e.nonce&&!e.a&&(t.nonce=e.nonce),t={postBody:Yn(t).toString(),requestUri:"http://localhost"},e.a&&(delete t.postBody,t.pendingToken=e.a),t}function mo(e){if(e&&e.providerId&&e.signInMethod){var t={idToken:e.oauthIdToken,accessToken:e.oauthTokenSecret?null:e.oauthAccessToken,oauthTokenSecret:e.oauthTokenSecret,oauthToken:e.oauthTokenSecret&&e.oauthAccessToken,nonce:e.nonce,pendingToken:e.pendingToken};try{return new go(e.providerId,t,e.signInMethod)}catch(n){}}return null}function yo(e,t){this.Qc=t||[],Zr(this,{providerId:e,isOAuthProvider:!0}),this.Jb={},this.qb=($i(e)||{}).Ja||null,this.pb=null}function _o(e){if("string"!=typeof e||0!=e.indexOf("saml."))throw new k("argument-error",'SAML provider IDs must be prefixed with "saml."');yo.call(this,e,[])}function bo(e){yo.call(this,e,Gi),this.a=[]}function wo(){bo.call(this,"facebook.com")}function To(e){if(!e)throw new k("argument-error","credential failed: expected 1 argument (the OAuth access token).");var t=e;return p(e)&&(t=e.accessToken),(new wo).credential({accessToken:t})}function Eo(){bo.call(this,"github.com")}function Io(e){if(!e)throw new k("argument-error","credential failed: expected 1 argument (the OAuth access token).");var t=e;return p(e)&&(t=e.accessToken),(new Eo).credential({accessToken:t})}function ko(){bo.call(this,"google.com"),this.Ca("profile")}function Co(e,t){var n=e;return p(e)&&(n=e.idToken,t=e.accessToken),(new ko).credential({idToken:n,accessToken:t})}function So(){yo.call(this,"twitter.com",zi)}function Ao(e,t){var n=e;if(p(n)||(n={oauthToken:e,oauthTokenSecret:t}),!n.oauthToken||!n.oauthTokenSecret)throw new k("argument-error","credential failed: expected 2 arguments (the OAuth access token and secret).");return new go("twitter.com",n,"twitter.com")}function xo(e,t,n){this.a=e,this.f=t,Yr(this,"providerId","password"),Yr(this,"signInMethod",n===Do.EMAIL_LINK_SIGN_IN_METHOD?Do.EMAIL_LINK_SIGN_IN_METHOD:Do.EMAIL_PASSWORD_SIGN_IN_METHOD)}function No(e){return e&&e.email&&e.password?new xo(e.email,e.password,e.signInMethod):null}function Do(){Zr(this,{providerId:"password",isOAuthProvider:!1})}function Po(e,t){if(!(t=Oo(t)))throw new k("argument-error","Invalid email link!");return new xo(e,t.code,Do.EMAIL_LINK_SIGN_IN_METHOD)}function Oo(e){return(e=Ni(e=oo(e)))&&e.operation===li?e:null}function Ro(e){if(!(e.fb&&e.eb||e.La&&e.ea))throw new k("internal-error");this.a=e,Yr(this,"providerId","phone"),this.fa="phone",Yr(this,"signInMethod","phone")}function Lo(e){if(e&&"phone"===e.providerId&&(e.verificationId&&e.verificationCode||e.temporaryProof&&e.phoneNumber)){var t={};return H(["verificationId","verificationCode","temporaryProof","phoneNumber"],function(n){e[n]&&(t[n]=e[n])}),new Ro(t)}return null}function Mo(e){return e.a.La&&e.a.ea?{temporaryProof:e.a.La,phoneNumber:e.a.ea}:{sessionInfo:e.a.fb,code:e.a.eb}}function Fo(e){try{this.a=e||qr.default.auth()}catch(t){throw new k("argument-error","Either an instance of firebase.auth.Auth must be passed as an argument to the firebase.auth.PhoneAuthProvider constructor, or the default firebase App instance must be initialized via firebase.initializeApp().")}Zr(this,{providerId:"phone",isOAuthProvider:!1})}function jo(e,t){if(!e)throw new k("missing-verification-id");if(!t)throw new k("missing-verification-code");return new Ro({fb:e,eb:t})}function qo(e){if(e.temporaryProof&&e.phoneNumber)return new Ro({La:e.temporaryProof,ea:e.phoneNumber});var t=e&&e.providerId;if(!t||"password"===t)return null;var n=e&&e.oauthAccessToken,r=e&&e.oauthTokenSecret,i=e&&e.nonce,o=e&&e.oauthIdToken,s=e&&e.pendingToken;try{switch(t){case"google.com":return Co(o,n);case"facebook.com":return To(n);case"github.com":return Io(n);case"twitter.com":return Ao(n,r);default:return n||r||o||s?s?0==t.indexOf("saml.")?new ho(t,s):new go(t,{pendingToken:s,idToken:e.oauthIdToken,accessToken:e.oauthAccessToken},t):new bo(t).credential({idToken:o,accessToken:n,rawNonce:i}):null}}catch(a){return null}}function Uo(e){if(!e.isOAuthProvider)throw new k("invalid-oauth-provider")}function Vo(e,t,n,r,i,o,s){if(this.c=e,this.b=t||null,this.g=n||null,this.f=r||null,this.i=o||null,this.h=s||null,this.a=i||null,!this.g&&!this.a)throw new k("invalid-auth-event");if(this.g&&this.a)throw new k("invalid-auth-event");if(this.g&&!this.f)throw new k("invalid-auth-event")}function Bo(e){return(e=e||{}).type?new Vo(e.type,e.eventId,e.urlResponse,e.sessionId,e.error&&C(e.error),e.postBody,e.tenantId):null}function Ho(){this.b=null,this.a=[]}so.prototype.Ha=function(){return Ct(this.a?this.a:this.b)},so.prototype.w=function(){return this.type==ao?{multiFactorSession:{idToken:this.a}}:{multiFactorSession:{pendingCredential:this.b}}},co.prototype.ka=function(){},co.prototype.b=function(){},co.prototype.c=function(){},co.prototype.w=function(){},ho.prototype.ka=function(e){return _a(e,fo(this))},ho.prototype.b=function(e,t){var n=fo(this);return n.idToken=t,ba(e,n)},ho.prototype.c=function(e,t){return lo(wa(e,fo(this)),t)},ho.prototype.w=function(){return{providerId:this.providerId,signInMethod:this.signInMethod,pendingToken:this.a}},go.prototype.ka=function(e){return _a(e,vo(this))},go.prototype.b=function(e,t){var n=vo(this);return n.idToken=t,ba(e,n)},go.prototype.c=function(e,t){return lo(wa(e,vo(this)),t)},go.prototype.w=function(){var e={providerId:this.providerId,signInMethod:this.signInMethod};return this.idToken&&(e.oauthIdToken=this.idToken),this.accessToken&&(e.oauthAccessToken=this.accessToken),this.secret&&(e.oauthTokenSecret=this.secret),this.nonce&&(e.nonce=this.nonce),this.a&&(e.pendingToken=this.a),e},yo.prototype.Ka=function(e){return this.Jb=pe(e),this},E(_o,yo),E(bo,yo),bo.prototype.Ca=function(e){return G(this.a,e)||this.a.push(e),this},bo.prototype.Rb=function(){return X(this.a)},bo.prototype.credential=function(e,t){var n;if(!(n=p(e)?{idToken:e.idToken||null,accessToken:e.accessToken||null,nonce:e.rawNonce||null}:{idToken:e||null,accessToken:t||null}).idToken&&!n.accessToken)throw new k("argument-error","credential failed: must provide the ID token and/or the access token.");return new go(this.providerId,n,this.providerId)},E(wo,bo),Yr(wo,"PROVIDER_ID","facebook.com"),Yr(wo,"FACEBOOK_SIGN_IN_METHOD","facebook.com"),E(Eo,bo),Yr(Eo,"PROVIDER_ID","github.com"),Yr(Eo,"GITHUB_SIGN_IN_METHOD","github.com"),E(ko,bo),Yr(ko,"PROVIDER_ID","google.com"),Yr(ko,"GOOGLE_SIGN_IN_METHOD","google.com"),E(So,yo),Yr(So,"PROVIDER_ID","twitter.com"),Yr(So,"TWITTER_SIGN_IN_METHOD","twitter.com"),xo.prototype.ka=function(e){return this.signInMethod==Do.EMAIL_LINK_SIGN_IN_METHOD?nu(e,xa,{email:this.a,oobCode:this.f}):nu(e,Xa,{email:this.a,password:this.f})},xo.prototype.b=function(e,t){return this.signInMethod==Do.EMAIL_LINK_SIGN_IN_METHOD?nu(e,Na,{idToken:t,email:this.a,oobCode:this.f}):nu(e,Ha,{idToken:t,email:this.a,password:this.f})},xo.prototype.c=function(e,t){return lo(this.ka(e),t)},xo.prototype.w=function(){return{email:this.a,password:this.f,signInMethod:this.signInMethod}},Zr(Do,{PROVIDER_ID:"password"}),Zr(Do,{EMAIL_LINK_SIGN_IN_METHOD:"emailLink"}),Zr(Do,{EMAIL_PASSWORD_SIGN_IN_METHOD:"password"}),Ro.prototype.ka=function(e){return e.gb(Mo(this))},Ro.prototype.b=function(e,t){var n=Mo(this);return n.idToken=t,nu(e,Ja,n)},Ro.prototype.c=function(e,t){var n=Mo(this);return n.operation="REAUTH",lo(e=nu(e,eu,n),t)},Ro.prototype.w=function(){var e={providerId:"phone"};return this.a.fb&&(e.verificationId=this.a.fb),this.a.eb&&(e.verificationCode=this.a.eb),this.a.La&&(e.temporaryProof=this.a.La),this.a.ea&&(e.phoneNumber=this.a.ea),e},Fo.prototype.gb=function(e,t){var n=this.a.a;return Ct(t.verify()).then(function(r){if("string"!=typeof r)throw new k("argument-error","An implementation of firebase.auth.ApplicationVerifier.prototype.verify() must return a firebase.Promise that resolves with a string.");switch(t.type){case"recaptcha":var i=p(e)?e.session:null,o=p(e)?e.phoneNumber:e;return(i&&i.type==ao?i.Ha().then(function(e){return function(e,t){return nu(e,Ka,t).then(function(e){return e.phoneSessionInfo.sessionInfo})}(n,{idToken:e,phoneEnrollmentInfo:{phoneNumber:o,recaptchaToken:r}})}):i&&i.type==uo?i.Ha().then(function(t){return function(e,t){return nu(e,za,t).then(function(e){return e.phoneResponseInfo.sessionInfo})}(n,{mfaPendingCredential:t,mfaEnrollmentId:e.multiFactorHint&&e.multiFactorHint.uid||e.multiFactorUid,phoneSignInInfo:{recaptchaToken:r}})}):function(e,t){return nu(e,Va,t)}(n,{phoneNumber:o,recaptchaToken:r})).then(function(e){return"function"==typeof t.reset&&t.reset(),e},function(e){throw"function"==typeof t.reset&&t.reset(),e});default:throw new k("argument-error",'Only firebase.auth.ApplicationVerifiers with type="recaptcha" are currently supported.')}})},Zr(Fo,{PROVIDER_ID:"phone"}),Zr(Fo,{PHONE_SIGN_IN_METHOD:"phone"}),Vo.prototype.getUid=function(){var e=[];return e.push(this.c),this.b&&e.push(this.b),this.f&&e.push(this.f),this.h&&e.push(this.h),e.join("-")},Vo.prototype.T=function(){return this.h},Vo.prototype.w=function(){return{type:this.c,eventId:this.b,urlResponse:this.g,sessionId:this.f,postBody:this.i,tenantId:this.h,error:this.a&&this.a.w()}};var Wo,Ko=null;function zo(e){var t="unauthorized-domain",n=void 0,r=jn(e);e=r.a,"chrome-extension"==(r=r.c)?n=Be("This chrome extension ID (chrome-extension://%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",e):"http"==r||"https"==r?n=Be("This domain (%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",e):t="operation-not-supported-in-this-environment",k.call(this,t,n)}function Go(e,t,n){k.call(this,e,n),(e=t||{}).Kb&&Yr(this,"email",e.Kb),e.ea&&Yr(this,"phoneNumber",e.ea),e.credential&&Yr(this,"credential",e.credential),e.$b&&Yr(this,"tenantId",e.$b)}function Qo(e){if(e.code){var t=e.code||"";0==t.indexOf(A)&&(t=t.substring(A.length));var n={credential:qo(e),$b:e.tenantId};if(e.email)n.Kb=e.email;else if(e.phoneNumber)n.ea=e.phoneNumber;else if(!n.credential)return new k(t,e.message||void 0);return new Go(t,n,e.message)}return null}function $o(){}function Yo(){}function Xo(e){if(!e.f&&"undefined"==typeof XMLHttpRequest&&"undefined"!=typeof ActiveXObject){for(var t=["MSXML2.XMLHTTP.6.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"],n=0;n<t.length;n++){var r=t[n];try{return new ActiveXObject(r),e.f=r}catch(ly){}}throw Error("Could not create ActiveXObject. ActiveX might be disabled, or MSXML might not be installed")}return e.f}function Zo(){}function Jo(){this.a=new XDomainRequest,this.readyState=0,this.onreadystatechange=null,this.responseType=this.responseText=this.response="",this.status=-1,this.statusText="",this.a.onload=b(this.qc,this),this.a.onerror=b(this.Tb,this),this.a.onprogress=b(this.rc,this),this.a.ontimeout=b(this.vc,this)}function es(e,t){e.readyState=t,e.onreadystatechange&&e.onreadystatechange()}function ts(e,t,n){this.reset(e,t,n,void 0,void 0)}function ns(e){this.f=e,this.b=this.c=this.a=null}function rs(e,t){this.name=e,this.value=t}E(zo,k),E(Go,k),Go.prototype.w=function(){var e={code:this.code,message:this.message};this.email&&(e.email=this.email),this.phoneNumber&&(e.phoneNumber=this.phoneNumber),this.tenantId&&(e.tenantId=this.tenantId);var t=this.credential&&this.credential.w();return t&&ve(e,t),e},Go.prototype.toJSON=function(){return this.w()},$o.prototype.c=null,E(Yo,$o),Yo.prototype.a=function(){var e=Xo(this);return e?new ActiveXObject(e):new XMLHttpRequest},Yo.prototype.b=function(){var e={};return Xo(this)&&(e[0]=!0,e[1]=!0),e},Wo=new Yo,E(Zo,$o),Zo.prototype.a=function(){var e=new XMLHttpRequest;if("withCredentials"in e)return e;if("undefined"!=typeof XDomainRequest)return new Jo;throw Error("Unsupported browser")},Zo.prototype.b=function(){return{}},(e=Jo.prototype).open=function(e,t,n){if(null!=n&&!n)throw Error("Only async requests are supported.");this.a.open(e,t)},e.send=function(e){if(e){if("string"!=typeof e)throw Error("Only string data is supported");this.a.send(e)}else this.a.send()},e.abort=function(){this.a.abort()},e.setRequestHeader=function(){},e.getResponseHeader=function(e){return"content-type"==e.toLowerCase()?this.a.contentType:""},e.qc=function(){this.status=200,this.response=this.responseText=this.a.responseText,es(this,4)},e.Tb=function(){this.status=500,this.response=this.responseText="",es(this,4)},e.vc=function(){this.Tb()},e.rc=function(){this.status=200,es(this,1)},e.getAllResponseHeaders=function(){return"content-type: "+this.a.contentType},ts.prototype.a=null,ts.prototype.reset=function(e,t,n,r,i){r||T(),delete this.a},rs.prototype.toString=function(){return this.name};var is=new rs("SEVERE",1e3),os=new rs("WARNING",900),ss=new rs("CONFIG",700),as=new rs("FINE",500);function us(e){return e.c?e.c:e.a?us(e.a):(L("Root logger has no level set."),null)}ns.prototype.log=function(e,t,n){if(e.value>=us(this).value)for(d(t)&&(t=t()),e=new ts(e,String(t),this.f),n&&(e.a=n),n=this;n;)n=n.a};var cs={},ls=null;function hs(e){var t;if(ls||(ls=new ns(""),cs[""]=ls,ls.c=ss),!(t=cs[e])){t=new ns(e);var n=e.lastIndexOf("."),r=e.substr(n+1);(n=hs(e.substr(0,n))).b||(n.b={}),n.b[r]=t,t.a=n,cs[e]=t}return t}function fs(e,t){e&&e.log(as,t,void 0)}function ds(e){this.f=e}function ps(e){bn.call(this),this.u=e,this.h=void 0,this.readyState=gs,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.l=new Headers,this.b=null,this.s="GET",this.f="",this.a=!1,this.i=hs("goog.net.FetchXmlHttp"),this.m=this.c=this.g=null}E(ds,$o),ds.prototype.a=function(){return new ps(this.f)},ds.prototype.b=function(e){return function(){return e}}({}),E(ps,bn);var gs=0;function vs(e){e.c.read().then(e.pc.bind(e)).catch(e.Va.bind(e))}function ms(e){e.readyState=4,e.g=null,e.c=null,e.m=null,ys(e)}function ys(e){e.onreadystatechange&&e.onreadystatechange.call(e)}function _s(e){bn.call(this),this.headers=new An,this.D=e||null,this.c=!1,this.C=this.a=null,this.h=this.P=this.l="",this.f=this.N=this.i=this.J=!1,this.g=0,this.s=null,this.m=bs,this.u=this.S=!1}(e=ps.prototype).open=function(e,t){if(this.readyState!=gs)throw this.abort(),Error("Error reopening a connection");this.s=e,this.f=t,this.readyState=1,ys(this)},e.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.a=!0;var t={headers:this.l,method:this.s,credentials:this.h,cache:void 0};e&&(t.body=e),this.u.fetch(new Request(this.f,t)).then(this.uc.bind(this),this.Va.bind(this))},e.abort=function(){this.response=this.responseText="",this.l=new Headers,this.status=0,this.c&&this.c.cancel("Request was aborted."),1<=this.readyState&&this.a&&4!=this.readyState&&(this.a=!1,ms(this)),this.readyState=gs},e.uc=function(e){this.a&&(this.g=e,this.b||(this.status=this.g.status,this.statusText=this.g.statusText,this.b=e.headers,this.readyState=2,ys(this)),this.a&&(this.readyState=3,ys(this),this.a&&("arraybuffer"===this.responseType?e.arrayBuffer().then(this.sc.bind(this),this.Va.bind(this)):void 0!==s.ReadableStream&&"body"in e?(this.response=this.responseText="",this.c=e.body.getReader(),this.m=new TextDecoder,vs(this)):e.text().then(this.tc.bind(this),this.Va.bind(this)))))},e.pc=function(e){if(this.a){var t=this.m.decode(e.value?e.value:new Uint8Array(0),{stream:!e.done});t&&(this.response=this.responseText+=t),e.done?ms(this):ys(this),3==this.readyState&&vs(this)}},e.tc=function(e){this.a&&(this.response=this.responseText=e,ms(this))},e.sc=function(e){this.a&&(this.response=e,ms(this))},e.Va=function(e){var t=this.i;t&&t.log(os,"Failed to fetch url "+this.f,e instanceof Error?e:Error(e)),this.a&&ms(this)},e.setRequestHeader=function(e,t){this.l.append(e,t)},e.getResponseHeader=function(e){return this.b?this.b.get(e.toLowerCase())||"":((e=this.i)&&e.log(os,"Attempting to get response header but no headers have been received for url: "+this.f,void 0),"")},e.getAllResponseHeaders=function(){if(!this.b){var e=this.i;return e&&e.log(os,"Attempting to get all response headers but no headers have been received for url: "+this.f,void 0),""}e=[];for(var t=this.b.entries(),n=t.next();!n.done;)e.push((n=n.value)[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(ps.prototype,"withCredentials",{get:function(){return"include"===this.h},set:function(e){this.h=e?"include":"same-origin"}}),E(_s,bn);var bs="";_s.prototype.b=hs("goog.net.XhrIo");var ws=/^https?$/i,Ts=["POST","PUT"];function Es(e){return"content-type"==e.toLowerCase()}function Is(e,t){e.c=!1,e.a&&(e.f=!0,e.a.abort(),e.f=!1),e.h=t,ks(e),Ss(e)}function ks(e){e.J||(e.J=!0,e.dispatchEvent("complete"),e.dispatchEvent("error"))}function Cs(e){if(e.c&&void 0!==o)if(e.C[1]&&4==xs(e)&&2==Ns(e))fs(e.b,Ds(e,"Local request error detected and ignored"));else if(e.i&&4==xs(e))In(e.Wb,0,e);else if(e.dispatchEvent("readystatechange"),4==xs(e)){fs(e.b,Ds(e,"Request complete")),e.c=!1;try{var t,n=Ns(e);e:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break e;default:r=!1}if(!(t=r)){var i;if(i=0===n){var a=String(e.l).match(Dn)[1]||null;if(!a&&s.self&&s.self.location){var u=s.self.location.protocol;a=u.substr(0,u.length-1)}i=!ws.test(a?a.toLowerCase():"")}t=i}if(t)e.dispatchEvent("complete"),e.dispatchEvent("success");else{try{var c=2<xs(e)?e.a.statusText:""}catch(l){fs(e.b,"Can not get status: "+l.message),c=""}e.h=c+" ["+Ns(e)+"]",ks(e)}}finally{Ss(e)}}}function Ss(e,t){if(e.a){As(e);var n=e.a,r=e.C[0]?l:null;e.a=null,e.C=null,t||e.dispatchEvent("ready");try{n.onreadystatechange=r}catch(ly){(e=e.b)&&e.log(is,"Problem encountered resetting onreadystatechange: "+ly.message,void 0)}}}function As(e){e.a&&e.u&&(e.a.ontimeout=null),e.s&&(s.clearTimeout(e.s),e.s=null)}function xs(e){return e.a?e.a.readyState:0}function Ns(e){try{return 2<xs(e)?e.a.status:-1}catch(t){return-1}}function Ds(e,t){return t+" ["+e.P+" "+e.l+" "+Ns(e)+"]"}function Ps(e){var t=Hs;this.g=[],this.u=t,this.s=e||null,this.f=this.a=!1,this.c=void 0,this.v=this.C=this.i=!1,this.h=0,this.b=null,this.l=0}function Os(e,t,n){e.a=!0,e.c=n,e.f=!t,Fs(e)}function Rs(e){if(e.a){if(!e.v)throw new js(e);e.v=!1}}function Ls(e,t,n,r){e.g.push([t,n,r]),e.a&&Fs(e)}function Ms(e){return z(e.g,function(e){return d(e[1])})}function Fs(e){if(e.h&&e.a&&Ms(e)){var t=e.h,n=Vs[t];n&&(s.clearTimeout(n.a),delete Vs[t]),e.h=0}e.b&&(e.b.l--,delete e.b),t=e.c;for(var r=n=!1;e.g.length&&!e.i;){var i=e.g.shift(),o=i[0],a=i[1];if(i=i[2],o=e.f?a:o)try{var u=o.call(i||e.s,t);void 0!==u&&(e.f=e.f&&(u==t||u instanceof Error),e.c=t=u),(P(t)||"function"==typeof s.Promise&&t instanceof s.Promise)&&(r=!0,e.i=!0)}catch(c){t=c,e.f=!0,Ms(e)||(n=!0)}}e.c=t,r&&(u=b(e.m,e,!0),r=b(e.m,e,!1),t instanceof Ps?(Ls(t,u,r),t.C=!0):t.then(u,r)),n&&(t=new Us(t),Vs[t.a]=t,e.h=t.a)}function js(){O.call(this)}function qs(){O.call(this)}function Us(e){this.a=s.setTimeout(b(this.c,this),0),this.b=e}(e=_s.prototype).Ma=function(){void 0!==o&&this.a&&(this.h="Timed out after "+this.g+"ms, aborting",fs(this.b,Ds(this,this.h)),this.dispatchEvent("timeout"),this.abort(8))},e.abort=function(){this.a&&this.c&&(fs(this.b,Ds(this,"Aborting")),this.c=!1,this.f=!0,this.a.abort(),this.f=!1,this.dispatchEvent("complete"),this.dispatchEvent("abort"),Ss(this))},e.Da=function(){this.a&&(this.c&&(this.c=!1,this.f=!0,this.a.abort(),this.f=!1),Ss(this,!0)),_s.bb.Da.call(this)},e.Wb=function(){this.ya||(this.N||this.i||this.f?Cs(this):this.Jc())},e.Jc=function(){Cs(this)},e.getResponse=function(){try{if(!this.a)return null;if("response"in this.a)return this.a.response;switch(this.m){case bs:case"text":return this.a.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in this.a)return this.a.mozResponseArrayBuffer}var e=this.b;return e&&e.log(is,"Response type "+this.m+" is not supported on this browser",void 0),null}catch(t){return fs(this.b,"Can not get response: "+t.message),null}},Ps.prototype.cancel=function(e){if(this.a)this.c instanceof Ps&&this.c.cancel();else{if(this.b){var t=this.b;delete this.b,e?t.cancel(e):(t.l--,0>=t.l&&t.cancel())}this.u?this.u.call(this.s,this):this.v=!0,this.a||(e=new qs(this),Rs(this),Os(this,!1,e))}},Ps.prototype.m=function(e,t){this.i=!1,Os(this,e,t)},Ps.prototype.then=function(e,t,n){var r,i,o=new _t(function(e,t){r=e,i=t});return Ls(this,r,function(e){e instanceof qs?o.cancel():i(e)}),o.then(e,t,n)},Ps.prototype.$goog_Thenable=!0,E(js,O),js.prototype.message="Deferred has already fired",js.prototype.name="AlreadyCalledError",E(qs,O),qs.prototype.message="Deferred was canceled",qs.prototype.name="CanceledError",Us.prototype.c=function(){throw delete Vs[this.a],this.b};var Vs={};function Bs(e){var t={},n=t.document||document,r=ke(e).toString(),i=dt(document,"SCRIPT"),o={Xb:i,Ma:void 0},a=new Ps(o),l=null,h=null!=t.timeout?t.timeout:5e3;return 0<h&&(l=window.setTimeout(function(){Ws(i,!0);var e=new Gs(zs,"Timeout reached for loading script "+r);Rs(a),Os(a,!1,e)},h),o.Ma=l),i.onload=i.onreadystatechange=function(){i.readyState&&"loaded"!=i.readyState&&"complete"!=i.readyState||(Ws(i,t.xd||!1,l),Rs(a),Os(a,!0,null))},i.onerror=function(){Ws(i,!0,l);var e=new Gs(Ks,"Error while loading script "+r);Rs(a),Os(a,!1,e)},ve(o=t.attributes||{},{type:"text/javascript",charset:"UTF-8"}),ut(i,o),function(e,t){me(e,"HTMLScriptElement"),e.src=ke(t),(t=e.ownerDocument&&e.ownerDocument.defaultView)&&t!=s?t=c(t.document):(null===u&&(u=c(s.document)),t=u),t&&e.setAttribute("nonce",t)}(i,e),function(e){var t;return(t=(e||document).getElementsByTagName("HEAD"))&&0!=t.length?t[0]:e.documentElement}(n).appendChild(i),a}function Hs(){if(this&&this.Xb){var e=this.Xb;e&&"SCRIPT"==e.tagName&&Ws(e,!0,this.Ma)}}function Ws(e,t,n){null!=n&&s.clearTimeout(n),e.onload=l,e.onerror=l,e.onreadystatechange=l,t&&window.setTimeout(function(){e&&e.parentNode&&e.parentNode.removeChild(e)},0)}var Ks=0,zs=1;function Gs(e,t){var n="Jsloader error (code #"+e+")";t&&(n+=": "+t),O.call(this,n),this.code=e}function Qs(e){this.f=e}function $s(e,t,n){if(this.c=e,this.l=(e=t||{}).secureTokenEndpoint||"https://securetoken.googleapis.com/v1/token",this.m=e.secureTokenTimeout||Zs,this.g=pe(e.secureTokenHeaders||Js),this.h=e.firebaseEndpoint||"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",this.i=e.identityPlatformEndpoint||"https://identitytoolkit.googleapis.com/v2/",this.v=e.firebaseTimeout||ea,this.a=pe(e.firebaseHeaders||ta),n&&(this.a["X-Client-Version"]=n,this.g["X-Client-Version"]=n),n="Node"==wr(),!(n=s.XMLHttpRequest||n&&qr.default.INTERNAL.node&&qr.default.INTERNAL.node.XMLHttpRequest)&&!br())throw new k("internal-error","The XMLHttpRequest compatibility library was not found.");this.f=void 0,this.f=br()?new ds(self):Tr()?new Qs(n):new Zo,this.b=null}E(Gs,O),E(Qs,$o),Qs.prototype.a=function(){return new this.f},Qs.prototype.b=function(){return{}};var Ys,Xs="idToken",Zs=new Br(3e4,6e4),Js={"Content-Type":"application/x-www-form-urlencoded"},ea=new Br(3e4,6e4),ta={"Content-Type":"application/json"};function na(e,t){t?e.a["X-Firebase-Locale"]=t:delete e.a["X-Firebase-Locale"]}function ra(e,t){t&&(e.l=ia("https://securetoken.googleapis.com/v1/token",t),e.h=ia("https://www.googleapis.com/identitytoolkit/v3/relyingparty/",t),e.i=ia("https://identitytoolkit.googleapis.com/v2/",t))}function ia(e,t){return e=jn(e),t=jn(t.url),e.f=e.a+e.f,On(e,t.c),e.a=t.a,Rn(e,t.g),e.toString()}function oa(e,t){t?(e.a["X-Client-Version"]=t,e.g["X-Client-Version"]=t):(delete e.a["X-Client-Version"],delete e.g["X-Client-Version"])}function sa(e,t,n,r,i,o,a){(function(){var e=Ar();return!((e=kr(e)!=Ir?null:(e=e.match(/\sChrome\/(\d+)/i))&&2==e.length?parseInt(e[1],10):null)&&30>e||Qe&&ot&&!(9<ot))})()||br()?e=b(e.u,e):(Ys||(Ys=new _t(function(e,t){!function(e,t){((window.gapi||{}).client||{}).request?e():(s[ua]=function(){((window.gapi||{}).client||{}).request?e():t(Error("CORS_UNSUPPORTED"))},function(e,t){Ls(e,null,t,void 0)}(Bs(Ce(aa,{onload:ua})),function(){t(Error("CORS_UNSUPPORTED"))}))}(e,t)})),e=b(e.s,e)),e(t,n,r,i,o,a)}$s.prototype.T=function(){return this.b},$s.prototype.u=function(e,t,n,r,i,o){if(br()&&(void 0===s.fetch||void 0===s.Headers||void 0===s.Request))throw new k("operation-not-supported-in-this-environment","fetch, Headers and Request native APIs or equivalent Polyfills must be available to support HTTP requests from a Worker environment.");var a=new _s(this.f);if(o){a.g=Math.max(0,o);var u=setTimeout(function(){a.dispatchEvent("timeout")},o)}wn(a,"complete",function(){u&&clearTimeout(u);var e=null;try{e=JSON.parse(function(e){try{return e.a?e.a.responseText:""}catch(t){return fs(e.b,"Can not get responseText: "+t.message),""}}(this))||null}catch(Xr){e=null}t&&t(e)}),Tn(a,"ready",function(){u&&clearTimeout(u),Wt(this)}),Tn(a,"timeout",function(){u&&clearTimeout(u),Wt(this),t&&t(null)}),function(e,t,n,r,i){if(e.a)throw Error("[goog.net.XhrIo] Object is active with another request="+e.l+"; newUri="+t);n=n?n.toUpperCase():"GET",e.l=t,e.h="",e.P=n,e.J=!1,e.c=!0,e.a=e.D?e.D.a():Wo.a(),e.C=function(e){return e.c||(e.c=e.b())}(e.D?e.D:Wo),e.a.onreadystatechange=b(e.Wb,e);try{fs(e.b,Ds(e,"Opening Xhr")),e.N=!0,e.a.open(n,String(t),!0),e.N=!1}catch(a){return fs(e.b,Ds(e,"Error opening Xhr: "+a.message)),void Is(e,a)}t=r||"";var o=new An(e.headers);i&&function(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(f(e)||"string"==typeof e)H(e,t,void 0);else for(var n=Sn(e),r=Cn(e),i=r.length,o=0;o<i;o++)t.call(void 0,r[o],n&&n[o],e)}(i,function(e,t){o.set(t,e)}),i=function(e){e:{for(var t=Es,n=e.length,r="string"==typeof e?e.split(""):e,i=0;i<n;i++)if(i in r&&t.call(void 0,r[i],i,e)){t=i;break e}t=-1}return 0>t?null:"string"==typeof e?e.charAt(t):e[t]}(o.Y()),r=s.FormData&&t instanceof s.FormData,!G(Ts,n)||i||r||o.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),o.forEach(function(e,t){this.a.setRequestHeader(t,e)},e),e.m&&(e.a.responseType=e.m),"withCredentials"in e.a&&e.a.withCredentials!==e.S&&(e.a.withCredentials=e.S);try{As(e),0<e.g&&(e.u=function(e){return Qe&&it(9)&&"number"==typeof e.timeout&&void 0!==e.ontimeout}(e.a),fs(e.b,Ds(e,"Will abort after "+e.g+"ms if incomplete, xhr2 "+e.u)),e.u?(e.a.timeout=e.g,e.a.ontimeout=b(e.Ma,e)):e.s=In(e.Ma,e.g,e)),fs(e.b,Ds(e,"Sending request")),e.i=!0,e.a.send(t),e.i=!1}catch(a){fs(e.b,Ds(e,"Send error: "+a.message)),Is(e,a)}}(a,e,n,r,i)};var aa=new ye(Te,"https://apis.google.com/js/client.js?onload=%{onload}"),ua="__fcb"+Math.floor(1e6*Math.random()).toString();function ca(e){if("string"!=typeof(e=e.email)||!vr.test(e))throw new k("invalid-email")}function la(e){"email"in e&&ca(e)}function ha(e){if(!e[Xs]){if(e.mfaPendingCredential)throw new k("multi-factor-auth-required",null,pe(e));throw new k("internal-error")}}function fa(e){if(e.phoneNumber||e.temporaryProof){if(!e.phoneNumber||!e.temporaryProof)throw new k("internal-error")}else{if(!e.sessionInfo)throw new k("missing-verification-id");if(!e.code)throw new k("missing-verification-code")}}$s.prototype.s=function(e,t,n,r,i){var o=this;Ys.then(function(){window.gapi.client.setApiKey(o.c);var s=window.gapi.auth.getToken();window.gapi.auth.setToken(null),window.gapi.client.request({path:e,method:n,body:r,headers:i,authType:"none",callback:function(e){window.gapi.auth.setToken(s),t&&t(e)}})}).o(function(e){t&&t({error:{message:e&&e.message||"CORS_UNSUPPORTED"}})})},$s.prototype.Ab=function(){return nu(this,Wa,{})},$s.prototype.Cb=function(e,t){return nu(this,Ba,{idToken:e,email:t})},$s.prototype.Db=function(e,t){return nu(this,Ha,{idToken:e,password:t})};var da={displayName:"DISPLAY_NAME",photoUrl:"PHOTO_URL"};function ga(e){if(!e.phoneVerificationInfo)throw new k("internal-error");if(!e.phoneVerificationInfo.sessionInfo)throw new k("missing-verification-id");if(!e.phoneVerificationInfo.code)throw new k("missing-verification-code")}function va(e){if(!e.requestUri||!e.sessionId&&!e.postBody&&!e.pendingToken)throw new k("internal-error")}function ma(e,t){return t.oauthIdToken&&t.providerId&&0==t.providerId.indexOf("oidc.")&&!t.pendingToken&&(e.sessionId?t.nonce=e.sessionId:e.postBody&&Zn(e=new Qn(e.postBody),"nonce")&&(t.nonce=e.get("nonce"))),t}function ya(e){var t=null;if(e.needConfirmation?(e.code="account-exists-with-different-credential",t=Qo(e)):"FEDERATED_USER_ID_ALREADY_LINKED"==e.errorMessage?(e.code="credential-already-in-use",t=Qo(e)):"EMAIL_EXISTS"==e.errorMessage?(e.code="email-already-in-use",t=Qo(e)):e.errorMessage&&(t=ru(e.errorMessage)),t)throw t;ha(e)}function _a(e,t){return t.returnIdpCredential=!0,nu(e,Ga,t)}function ba(e,t){return t.returnIdpCredential=!0,nu(e,$a,t)}function wa(e,t){return t.returnIdpCredential=!0,t.autoCreate=!1,nu(e,Qa,t)}function Ta(e){if(!e.oobCode)throw new k("invalid-action-code")}(e=$s.prototype).Eb=function(e,t){var n={idToken:e},r=[];return fe(da,function(e,i){var o=t[i];null===o?r.push(e):i in t&&(n[i]=o)}),r.length&&(n.deleteAttribute=r),nu(this,Ba,n)},e.wb=function(e,t){return ve(e={requestType:"PASSWORD_RESET",email:e},t),nu(this,Fa,e)},e.xb=function(e,t){return ve(e={requestType:"EMAIL_SIGNIN",email:e},t),nu(this,Ra,e)},e.vb=function(e,t){return ve(e={requestType:"VERIFY_EMAIL",idToken:e},t),nu(this,La,e)},e.Fb=function(e,t,n){return ve(e={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:e,newEmail:t},n),nu(this,Ma,e)},e.gb=function(e){return nu(this,Za,e)},e.ob=function(e,t){return nu(this,Ua,{oobCode:e,newPassword:t})},e.Sa=function(e){return nu(this,Ia,{oobCode:e})},e.kb=function(e){return nu(this,Ea,{oobCode:e})};var Ea={endpoint:"setAccountInfo",A:Ta,Z:"email",B:!0},Ia={endpoint:"resetPassword",A:Ta,G:function(e){var t=e.requestType;if(!t||!e.email&&"EMAIL_SIGNIN"!=t&&"VERIFY_AND_CHANGE_EMAIL"!=t)throw new k("internal-error")},B:!0},ka={endpoint:"signupNewUser",A:function(e){if(ca(e),!e.password)throw new k("weak-password")},G:ha,V:!0,B:!0},Ca={endpoint:"createAuthUri",B:!0},Sa={endpoint:"deleteAccount",O:["idToken"]},Aa={endpoint:"setAccountInfo",O:["idToken","deleteProvider"],A:function(e){if(!Array.isArray(e.deleteProvider))throw new k("internal-error")}},xa={endpoint:"emailLinkSignin",O:["email","oobCode"],A:ca,G:ha,V:!0,B:!0},Na={endpoint:"emailLinkSignin",O:["idToken","email","oobCode"],A:ca,G:ha,V:!0},Da={endpoint:"accounts/mfaEnrollment:finalize",O:["idToken","phoneVerificationInfo"],A:ga,G:ha,B:!0,Na:!0},Pa={endpoint:"accounts/mfaSignIn:finalize",O:["mfaPendingCredential","phoneVerificationInfo"],A:ga,G:ha,B:!0,Na:!0},Oa={endpoint:"getAccountInfo"},Ra={endpoint:"getOobConfirmationCode",O:["requestType"],A:function(e){if("EMAIL_SIGNIN"!=e.requestType)throw new k("internal-error");ca(e)},Z:"email",B:!0},La={endpoint:"getOobConfirmationCode",O:["idToken","requestType"],A:function(e){if("VERIFY_EMAIL"!=e.requestType)throw new k("internal-error")},Z:"email",B:!0},Ma={endpoint:"getOobConfirmationCode",O:["idToken","newEmail","requestType"],A:function(e){if("VERIFY_AND_CHANGE_EMAIL"!=e.requestType)throw new k("internal-error")},Z:"email",B:!0},Fa={endpoint:"getOobConfirmationCode",O:["requestType"],A:function(e){if("PASSWORD_RESET"!=e.requestType)throw new k("internal-error");ca(e)},Z:"email",B:!0},ja={mb:!0,endpoint:"getProjectConfig",Vb:"GET"},qa={mb:!0,endpoint:"getRecaptchaParam",Vb:"GET",G:function(e){if(!e.recaptchaSiteKey)throw new k("internal-error")}},Ua={endpoint:"resetPassword",A:Ta,Z:"email",B:!0},Va={endpoint:"sendVerificationCode",O:["phoneNumber","recaptchaToken"],Z:"sessionInfo",B:!0},Ba={endpoint:"setAccountInfo",O:["idToken"],A:la,V:!0},Ha={endpoint:"setAccountInfo",O:["idToken"],A:function(e){if(la(e),!e.password)throw new k("weak-password")},G:ha,V:!0},Wa={endpoint:"signupNewUser",G:ha,V:!0,B:!0},Ka={endpoint:"accounts/mfaEnrollment:start",O:["idToken","phoneEnrollmentInfo"],A:function(e){if(!e.phoneEnrollmentInfo)throw new k("internal-error");if(!e.phoneEnrollmentInfo.phoneNumber)throw new k("missing-phone-number");if(!e.phoneEnrollmentInfo.recaptchaToken)throw new k("missing-app-credential")},G:function(e){if(!e.phoneSessionInfo||!e.phoneSessionInfo.sessionInfo)throw new k("internal-error")},B:!0,Na:!0},za={endpoint:"accounts/mfaSignIn:start",O:["mfaPendingCredential","mfaEnrollmentId","phoneSignInInfo"],A:function(e){if(!e.phoneSignInInfo||!e.phoneSignInInfo.recaptchaToken)throw new k("missing-app-credential")},G:function(e){if(!e.phoneResponseInfo||!e.phoneResponseInfo.sessionInfo)throw new k("internal-error")},B:!0,Na:!0},Ga={endpoint:"verifyAssertion",A:va,Za:ma,G:ya,V:!0,B:!0},Qa={endpoint:"verifyAssertion",A:va,Za:ma,G:function(e){if(e.errorMessage&&"USER_NOT_FOUND"==e.errorMessage)throw new k("user-not-found");if(e.errorMessage)throw ru(e.errorMessage);ha(e)},V:!0,B:!0},$a={endpoint:"verifyAssertion",A:function(e){if(va(e),!e.idToken)throw new k("internal-error")},Za:ma,G:ya,V:!0},Ya={endpoint:"verifyCustomToken",A:function(e){if(!e.token)throw new k("invalid-custom-token")},G:ha,V:!0,B:!0},Xa={endpoint:"verifyPassword",A:function(e){if(ca(e),!e.password)throw new k("wrong-password")},G:ha,V:!0,B:!0},Za={endpoint:"verifyPhoneNumber",A:fa,G:ha,B:!0},Ja={endpoint:"verifyPhoneNumber",A:function(e){if(!e.idToken)throw new k("internal-error");fa(e)},G:function(e){if(e.temporaryProof)throw e.code="credential-already-in-use",Qo(e);ha(e)}},eu={Ib:{USER_NOT_FOUND:"user-not-found"},endpoint:"verifyPhoneNumber",A:fa,G:ha,B:!0},tu={endpoint:"accounts/mfaEnrollment:withdraw",O:["idToken","mfaEnrollmentId"],G:function(e){if(!!e[Xs]^!!e.refreshToken)throw new k("internal-error")},B:!0,Na:!0};function nu(e,t,n){if(!function(e,t){if(!t||!t.length)return!0;if(!e)return!1;for(var n=0;n<t.length;n++){var r=e[t[n]];if(null==r||""===r)return!1}return!0}(n,t.O))return St(new k("internal-error"));var r,i=!!t.Na,o=t.Vb||"POST";return Ct(n).then(t.A).then(function(){return t.V&&(n.returnSecureToken=!0),t.B&&e.b&&void 0===n.tenantId&&(n.tenantId=e.b),function(e,t,n,r,i,o,s){var a=jn(t+n);Mn(a,"key",e.c),s&&Mn(a,"cb",Date.now().toString());var u="GET"==r;if(u)for(var c in i)i.hasOwnProperty(c)&&Mn(a,c,i[c]);return new _t(function(t,n){sa(e,a.toString(),function(e){e?e.error?n(iu(e,o||{})):t(e):n(new k("network-request-failed"))},r,u?void 0:nr(Mr(i)),e.a,e.v.get())})}(e,i?e.i:e.h,t.endpoint,o,n,t.Ib,t.mb||!1)}).then(function(e){return r=e,t.Za?t.Za(n,r):r}).then(t.G).then(function(){if(!t.Z)return r;if(!(t.Z in r))throw new k("internal-error");return r[t.Z]})}function ru(e){return iu({error:{errors:[{message:e}],code:400,message:e}})}function iu(e,t){var n=(e.error&&e.error.errors&&e.error.errors[0]||{}).reason||"",r={keyInvalid:"invalid-api-key",ipRefererBlocked:"app-not-authorized"};if(n=r[n]?new k(r[n]):null)return n;for(var i in n=e.error&&e.error.message||"",ve(r={INVALID_CUSTOM_TOKEN:"invalid-custom-token",CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_EMAIL:"invalid-email",INVALID_PASSWORD:"wrong-password",USER_DISABLED:"user-disabled",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_OR_INVALID_NONCE:"missing-or-invalid-nonce",INVALID_MESSAGE_PAYLOAD:"invalid-message-payload",INVALID_RECIPIENT_EMAIL:"invalid-recipient-email",INVALID_SENDER:"invalid-sender",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",INVALID_PROVIDER_ID:"invalid-provider-id",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",CORS_UNSUPPORTED:"cors-unsupported",DYNAMIC_LINK_NOT_ACTIVATED:"dynamic-link-not-activated",INVALID_APP_ID:"invalid-app-id",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",WEAK_PASSWORD:"weak-password",OPERATION_NOT_ALLOWED:"operation-not-allowed",USER_CANCELLED:"user-cancelled",CAPTCHA_CHECK_FAILED:"captcha-check-failed",INVALID_APP_CREDENTIAL:"invalid-app-credential",INVALID_CODE:"invalid-verification-code",INVALID_PHONE_NUMBER:"invalid-phone-number",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_APP_CREDENTIAL:"missing-app-credential",MISSING_CODE:"missing-verification-code",MISSING_PHONE_NUMBER:"missing-phone-number",MISSING_SESSION_INFO:"missing-verification-id",QUOTA_EXCEEDED:"quota-exceeded",SESSION_EXPIRED:"code-expired",REJECTED_CREDENTIAL:"rejected-credential",INVALID_CONTINUE_URI:"invalid-continue-uri",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",MISSING_IOS_BUNDLE_ID:"missing-ios-bundle-id",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_DYNAMIC_LINK_DOMAIN:"invalid-dynamic-link-domain",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",INVALID_CERT_HASH:"invalid-cert-hash",UNSUPPORTED_TENANT_OPERATION:"unsupported-tenant-operation",INVALID_TENANT_ID:"invalid-tenant-id",TENANT_ID_MISMATCH:"tenant-id-mismatch",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",EMAIL_CHANGE_NEEDS_VERIFICATION:"email-change-needs-verification",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",UNSUPPORTED_FIRST_FACTOR:"unsupported-first-factor",UNVERIFIED_EMAIL:"unverified-email"},t||{}),t=(t=n.match(/^[^\s]+\s*:\s*([\s\S]*)$/))&&1<t.length?t[1]:void 0,r)if(0===n.indexOf(i))return new k(r[i],t);return!t&&e&&(t=Lr(e)),new k("internal-error",t)}function ou(e){this.b=e,this.a=null,this.sb=function(e){return(cu||(cu=new _t(function(e,t){function n(){Vr(),xr("gapi.load")("gapi.iframes",{callback:e,ontimeout:function(){Vr(),t(Error("Network Error"))},timeout:au.get()})}if(xr("gapi.iframes.Iframe"))e();else if(xr("gapi.load"))n();else{var r="__iframefcb"+Math.floor(1e6*Math.random()).toString();s[r]=function(){xr("gapi.load")?n():t(Error("Network Error"))},Ct(Bs(r=Ce(su,{onload:r}))).o(function(){t(Error("Network Error"))})}}).o(function(e){throw cu=null,e}))).then(function(){return new _t(function(t,n){xr("gapi.iframes.getContext")().open({where:document.body,url:e.b,messageHandlersFilter:xr("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"),attributes:{style:{position:"absolute",top:"-100px",width:"1px",height:"1px"}},dontclear:!0},function(r){function i(){clearTimeout(o),t()}e.a=r,e.a.restyle({setHideOnLeave:!1});var o=setTimeout(function(){n(Error("Network Error"))},uu.get());r.ping(i).then(i,function(){n(Error("Network Error"))})})})})}(this)}var su=new ye(Te,"https://apis.google.com/js/api.js?onload=%{onload}"),au=new Br(3e4,6e4),uu=new Br(5e3,15e3),cu=null;function lu(e,t,n,r){this.l=e,this.h=t,this.i=n,this.g=r,this.f=null,e=this.g?qn((e=jn(this.g.url)).c,e.a,e.g,"/emulator/auth/iframe"):qn("https",this.l,null,"/__/auth/iframe"),this.a=e,Mn(this.a,"apiKey",this.h),Mn(this.a,"appName",this.i),this.b=null,this.c=[]}function hu(e,t,n,r,i,o){this.u=e,this.s=t,this.c=n,this.m=r,this.v=o,this.i=this.g=this.l=null,this.a=i,this.h=this.f=null}function fu(e){try{return qr.default.app(e).auth().Ga()}catch(t){return[]}}function du(e,t,n,r,i,o){this.s=e,this.g=t,this.b=n,this.f=o,this.c=r||null,this.i=i||null,this.l=this.u=this.C=null,this.h=[],this.m=this.a=null}function pu(e){var t=cr();return function(e){return nu(e,ja,{}).then(function(e){return e.authorizedDomains||[]})}(e).then(function(e){e:{var n=jn(t),r=n.c;n=n.a;for(var i=0;i<e.length;i++){var o=e[i],s=n,a=r;if(0==o.indexOf("chrome-extension://")?s=jn(o).a==s&&"chrome-extension"==a:"http"!=a&&"https"!=a?s=!1:gr.test(o)?s=s==o:(o=o.split(".").join("\\."),s=new RegExp("^(.+\\."+o+"|"+o+")$","i").test(s)),s){e=!0;break e}}e=!1}if(!e)throw new zo(cr())})}function gu(e){return e.m||(e.m=mr().then(function(){if(!e.u){var t=e.c,n=e.i,r=fu(e.b),i=new lu(e.s,e.g,e.b,e.f);i.f=t,i.b=n,i.c=X(r||[]),e.u=i.toString()}e.v=new ou(e.u),function(e){if(!e.v)throw Error("IfcHandler must be initialized!");!function(e,t){e.sb.then(function(){e.a.register("authEvent",t,xr("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))})}(e.v,function(t){var n={};if(t&&t.authEvent){var r=!1;for(t=Bo(t.authEvent),n=0;n<e.h.length;n++)r=e.h[n](t)||r;return(n={}).status=r?"ACK":"ERROR",Ct(n)}return n.status="ERROR",Ct(n)})}(e)})),e.m}function vu(e){return e.l||(e.C=e.c?Sr(e.c,fu(e.b)):null,e.l=new $s(e.g,D(e.i),e.C),e.f&&ra(e.l,e.f)),e.l}function mu(e,t,n,r,i,o,s,a,u,c,l,h){return(e=new hu(e,t,n,r,i,h)).l=o,e.g=s,e.i=a,e.b=pe(u||null),e.f=c,e.zb(l).toString()}function yu(e){if(this.a=e||qr.default.INTERNAL.reactNative&&qr.default.INTERNAL.reactNative.AsyncStorage,!this.a)throw new k("internal-error","The React Native compatibility library was not found.");this.type="asyncStorage"}function _u(e){this.b=e,this.a={},this.f=b(this.c,this)}lu.prototype.toString=function(){return this.f?Mn(this.a,"v",this.f):Xn(this.a.b,"v"),this.b?Mn(this.a,"eid",this.b):Xn(this.a.b,"eid"),this.c.length?Mn(this.a,"fw",this.c.join(",")):Xn(this.a.b,"fw"),this.a.toString()},hu.prototype.zb=function(e){return this.h=e,this},hu.prototype.toString=function(){if(this.v){var e=jn(this.v.url);e=qn(e.c,e.a,e.g,"/emulator/auth/handler")}else e=qn("https",this.u,null,"/__/auth/handler");if(Mn(e,"apiKey",this.s),Mn(e,"appName",this.c),Mn(e,"authType",this.m),this.a.isOAuthProvider){var t=this.a;try{var n=qr.default.app(this.c).auth().la()}catch(a){n=null}for(var r in t.pb=n,Mn(e,"providerId",this.a.providerId),t=Mr((n=this.a).Jb))t[r]=t[r].toString();r=n.Qc,t=pe(t);for(var i=0;i<r.length;i++){var o=r[i];o in t&&delete t[o]}n.qb&&n.pb&&!t[n.qb]&&(t[n.qb]=n.pb),de(t)||Mn(e,"customParameters",Lr(t))}if("function"==typeof this.a.Rb&&(n=this.a.Rb()).length&&Mn(e,"scopes",n.join(",")),this.l?Mn(e,"redirectUrl",this.l):Xn(e.b,"redirectUrl"),this.g?Mn(e,"eventId",this.g):Xn(e.b,"eventId"),this.i?Mn(e,"v",this.i):Xn(e.b,"v"),this.b)for(var s in this.b)this.b.hasOwnProperty(s)&&!Fn(e,s)&&Mn(e,s,this.b[s]);return this.h?Mn(e,"tid",this.h):Xn(e.b,"tid"),this.f?Mn(e,"eid",this.f):Xn(e.b,"eid"),(s=fu(this.c)).length&&Mn(e,"fw",s.join(",")),e.toString()},(e=du.prototype).Pb=function(e,t,n){var r=new k("popup-closed-by-user"),i=new k("web-storage-unsupported"),o=this,s=!1;return this.ma().then(function(){(function(e){var t={type:"webStorageSupport"};return gu(e).then(function(){return function(e,t){return e.sb.then(function(){return new _t(function(n){e.a.send(t.type,t,n,xr("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))})})}(e.v,t)}).then(function(e){if(e&&e.length&&void 0!==e[0].webStorageSupport)return e[0].webStorageSupport;throw Error()})})(o).then(function(n){n||(e&&dr(e),t(i),s=!0)})}).o(function(){}).then(function(){if(!s)return function(e){return new _t(function(t){return function n(){kn(2e3).then(function(){if(e&&!e.closed)return n();t()})}()})}(e)}).then(function(){if(!s)return kn(n).then(function(){t(r)})})},e.Yb=function(){var e=Ar();return!Rr(e)&&!Ur(e)},e.Ub=function(){return!1},e.Nb=function(e,t,n,r,i,o,s,a){if(!e)return St(new k("popup-blocked"));if(s&&!Rr())return this.ma().o(function(t){dr(e),i(t)}),r(),Ct();this.a||(this.a=pu(vu(this)));var u=this;return this.a.then(function(){var t=u.ma().o(function(t){throw dr(e),i(t),t});return r(),t}).then(function(){Uo(n),s||lr(mu(u.s,u.g,u.b,t,n,null,o,u.c,void 0,u.i,a,u.f),e)}).o(function(e){throw"auth/network-request-failed"==e.code&&(u.a=null),e})},e.Ob=function(e,t,n,r){this.a||(this.a=pu(vu(this)));var i=this;return this.a.then(function(){Uo(t),lr(mu(i.s,i.g,i.b,e,t,cr(),n,i.c,void 0,i.i,r,i.f))}).o(function(e){throw"auth/network-request-failed"==e.code&&(i.a=null),e})},e.ma=function(){var e=this;return gu(this).then(function(){return e.v.sb}).o(function(){throw e.a=null,new k("network-request-failed")})},e.ac=function(){return!0},e.Ea=function(e){this.h.push(e)},e.Ta=function(e){$(this.h,function(t){return t==e})},(e=yu.prototype).get=function(e){return Ct(this.a.getItem(e)).then(function(e){return e&&Fr(e)})},e.set=function(e,t){return Ct(this.a.setItem(e,Lr(t)))},e.U=function(e){return Ct(this.a.removeItem(e))},e.ca=function(){},e.ia=function(){};var bu,wu=[];function Tu(e,t,n){de(e.a)&&e.b.addEventListener("message",e.f),void 0===e.a[t]&&(e.a[t]=[]),e.a[t].push(n)}function Eu(e){this.a=e}function Iu(e){this.c=e,this.b=!1,this.a=[]}function ku(e,t,n,r){var i,o,s,a,u=n||{},c=null;if(e.b)return St(Error("connection_unavailable"));var l=r?800:50,h="undefined"!=typeof MessageChannel?new MessageChannel:null;return new _t(function(n,r){h?(i=Math.floor(Math.random()*Math.pow(10,20)).toString(),h.port1.start(),s=setTimeout(function(){r(Error("unsupported_event"))},l),e.a.push(c={messageChannel:h,onMessage:o=function(e){e.data.eventId===i&&("ack"===e.data.status?(clearTimeout(s),a=setTimeout(function(){r(Error("timeout"))},3e3)):"done"===e.data.status?(clearTimeout(a),void 0!==e.data.response?n(e.data.response):r(Error("unknown_error"))):(clearTimeout(s),clearTimeout(a),r(Error("invalid_response"))))}}),h.port1.addEventListener("message",o),e.c.postMessage({eventType:t,eventId:i,data:u},[h.port2])):r(Error("connection_unavailable"))}).then(function(t){return Cu(e,c),t}).o(function(t){throw Cu(e,c),t})}function Cu(e,t){if(t){var n=t.messageChannel;n&&(n.port1.removeEventListener("message",t.onMessage),n.port1.close()),$(e.a,function(e){return e==t})}}function Su(){if(!Du())throw new k("web-storage-unsupported");this.c={},this.a=[],this.b=0,this.m=s.indexedDB,this.type="indexedDB",this.g=this.v=this.f=this.l=null,this.s=!1,this.h=null;var e=this;br()&&self?(this.v=function(){var e=br()?self:null;if(H(wu,function(n){n.b==e&&(t=n)}),!t){var t=new _u(e);wu.push(t)}return t}(),Tu(this.v,"keyChanged",function(t,n){return Mu(e).then(function(t){return 0<t.length&&H(e.a,function(e){e(t)}),{keyProcessed:G(t,n.key)}})}),Tu(this.v,"ping",function(){return Ct(["keyChanged"])})):function(){var e=s.navigator;return e&&e.serviceWorker?Ct().then(function(){return e.serviceWorker.ready}).then(function(e){return e.active||null}).o(function(){return null}):Ct(null)}().then(function(t){(e.h=t)&&(e.g=new Iu(new Eu(t)),ku(e.g,"ping",null,!0).then(function(t){t[0].fulfilled&&G(t[0].value,"keyChanged")&&(e.s=!0)}).o(function(){}))})}function Au(e){return new _t(function(t,n){var r=e.m.open("firebaseLocalStorageDb",1);r.onerror=function(e){try{e.preventDefault()}catch(t){}n(Error(e.target.error))},r.onupgradeneeded=function(e){e=e.target.result;try{e.createObjectStore("firebaseLocalStorage",{keyPath:"fbase_key"})}catch(t){n(t)}},r.onsuccess=function(r){(r=r.target.result).objectStoreNames.contains("firebaseLocalStorage")?t(r):function(e){return new _t(function(t,n){var r=e.m.deleteDatabase("firebaseLocalStorageDb");r.onsuccess=function(){t()},r.onerror=function(e){n(Error(e.target.error))}})}(e).then(function(){return Au(e)}).then(function(e){t(e)}).o(function(e){n(e)})}})}function xu(e){return e.i||(e.i=Au(e)),e.i}function Nu(e,t){var n=0;return new _t(function r(i,o){xu(e).then(t).then(i).o(function(t){if(!(3<++n))return xu(e).then(function(t){return t.close(),e.i=void 0,r(i,o)}).o(function(e){o(e)});o(t)})})}function Du(){try{return!!s.indexedDB}catch(ze){return!1}}function Pu(e){return e.objectStore("firebaseLocalStorage")}function Ou(e,t){return e.transaction(["firebaseLocalStorage"],t?"readwrite":"readonly")}function Ru(e){return new _t(function(t,n){e.onsuccess=function(e){e&&e.target?t(e.target.result):t()},e.onerror=function(e){n(e.target.error)}})}function Lu(e,t){return e.g&&e.h&&function(){var e=s.navigator;return e&&e.serviceWorker&&e.serviceWorker.controller||null}()===e.h?ku(e.g,"keyChanged",{key:t},e.s).then(function(){}).o(function(){}):Ct()}function Mu(e){return xu(e).then(function(e){var t=Pu(Ou(e,!1));return t.getAll?Ru(t.getAll()):new _t(function(e,n){var r=[],i=t.openCursor();i.onsuccess=function(t){(t=t.target.result)?(r.push(t.value),t.continue()):e(r)},i.onerror=function(e){n(e.target.error)}})}).then(function(t){var n={},r=[];if(0==e.b){for(r=0;r<t.length;r++)n[t[r].fbase_key]=t[r].value;r=hr(e.c,n),e.c=n}return r})}function Fu(e){e.l&&e.l.cancel("STOP_EVENT"),e.f&&(clearTimeout(e.f),e.f=null)}function ju(e){var t=this,n=null;this.a=[],this.type="indexedDB",this.c=e,this.b=Ct().then(function(){if(Du()){var e=jr(),r="__sak"+e;return bu||(bu=new Su),(n=bu).set(r,e).then(function(){return n.get(r)}).then(function(t){if(t!==e)throw Error("indexedDB not supported!");return n.U(r)}).then(function(){return n}).o(function(){return t.c})}return t.c}).then(function(e){return t.type=e.type,e.ca(function(e){H(t.a,function(t){t(e)})}),e})}function qu(){this.a={},this.type="inMemory"}function Uu(){if(!function(){var e="Node"==wr();if(!(e=Vu()||e&&qr.default.INTERNAL.node&&qr.default.INTERNAL.node.localStorage))return!1;try{return e.setItem("__sak","1"),e.removeItem("__sak"),!0}catch(t){return!1}}()){if("Node"==wr())throw new k("internal-error","The LocalStorage compatibility library was not found.");throw new k("web-storage-unsupported")}this.a=Vu()||qr.default.INTERNAL.node.localStorage,this.type="localStorage"}function Vu(){try{var e=s.localStorage,t=jr();return e&&(e.setItem(t,"1"),e.removeItem(t)),e}catch(n){return null}}function Bu(){this.type="nullStorage"}function Hu(){if(!function(){var e="Node"==wr();if(!(e=Wu()||e&&qr.default.INTERNAL.node&&qr.default.INTERNAL.node.sessionStorage))return!1;try{return e.setItem("__sak","1"),e.removeItem("__sak"),!0}catch(t){return!1}}()){if("Node"==wr())throw new k("internal-error","The SessionStorage compatibility library was not found.");throw new k("web-storage-unsupported")}this.a=Wu()||qr.default.INTERNAL.node.sessionStorage,this.type="sessionStorage"}function Wu(){try{var e=s.sessionStorage,t=jr();return e&&(e.setItem(t,"1"),e.removeItem(t)),e}catch(n){return null}}function Ku(){var e={};e.Browser=Qu,e.Node=$u,e.ReactNative=Yu,e.Worker=Xu,this.a=e[wr()]}_u.prototype.c=function(e){var t=e.data.eventType,n=e.data.eventId,r=this.a[t];if(r&&0<r.length){e.ports[0].postMessage({status:"ack",eventId:n,eventType:t,response:null});var i=[];H(r,function(t){i.push(Ct().then(function(){return t(e.origin,e.data.data)}))}),xt(i).then(function(r){var i=[];H(r,function(e){i.push({fulfilled:e.Qb,value:e.value,reason:e.reason?e.reason.message:void 0})}),H(i,function(e){for(var t in e)void 0===e[t]&&delete e[t]}),e.ports[0].postMessage({status:"done",eventId:n,eventType:t,response:i})})}},Eu.prototype.postMessage=function(e,t){this.a.postMessage(e,t)},Iu.prototype.close=function(){for(;0<this.a.length;)Cu(this,this.a[0]);this.b=!0},(e=Su.prototype).set=function(e,t){var n=this,r=!1;return Nu(this,function(t){return Ru((t=Pu(Ou(t,!0))).get(e))}).then(function(i){return Nu(n,function(o){if(o=Pu(Ou(o,!0)),i)return i.value=t,Ru(o.put(i));n.b++,r=!0;var s={};return s.fbase_key=e,s.value=t,Ru(o.add(s))})}).then(function(){return n.c[e]=t,Lu(n,e)}).oa(function(){r&&n.b--})},e.get=function(e){return Nu(this,function(t){return Ru(Pu(Ou(t,!1)).get(e))}).then(function(e){return e&&e.value})},e.U=function(e){var t=this,n=!1;return Nu(this,function(r){return n=!0,t.b++,Ru(Pu(Ou(r,!0)).delete(e))}).then(function(){return delete t.c[e],Lu(t,e)}).oa(function(){n&&t.b--})},e.ca=function(e){0==this.a.length&&function(e){Fu(e),function t(){e.f=setTimeout(function(){e.l=Mu(e).then(function(t){0<t.length&&H(e.a,function(e){e(t)})}).then(function(){t()}).o(function(e){"STOP_EVENT"!=e.message&&t()})},800)}()}(this),this.a.push(e)},e.ia=function(e){$(this.a,function(t){return t==e}),0==this.a.length&&Fu(this)},(e=ju.prototype).get=function(e){return this.b.then(function(t){return t.get(e)})},e.set=function(e,t){return this.b.then(function(n){return n.set(e,t)})},e.U=function(e){return this.b.then(function(t){return t.U(e)})},e.ca=function(e){this.a.push(e)},e.ia=function(e){$(this.a,function(t){return t==e})},(e=qu.prototype).get=function(e){return Ct(this.a[e])},e.set=function(e,t){return this.a[e]=t,Ct()},e.U=function(e){return delete this.a[e],Ct()},e.ca=function(){},e.ia=function(){},(e=Uu.prototype).get=function(e){var t=this;return Ct().then(function(){return Fr(t.a.getItem(e))})},e.set=function(e,t){var n=this;return Ct().then(function(){var r=Lr(t);null===r?n.U(e):n.a.setItem(e,r)})},e.U=function(e){var t=this;return Ct().then(function(){t.a.removeItem(e)})},e.ca=function(e){s.window&&un(s.window,"storage",e)},e.ia=function(e){s.window&&hn(s.window,"storage",e)},(e=Bu.prototype).get=function(){return Ct(null)},e.set=function(){return Ct()},e.U=function(){return Ct()},e.ca=function(){},e.ia=function(){},(e=Hu.prototype).get=function(e){var t=this;return Ct().then(function(){return Fr(t.a.getItem(e))})},e.set=function(e,t){var n=this;return Ct().then(function(){var r=Lr(t);null===r?n.U(e):n.a.setItem(e,r)})},e.U=function(e){var t=this;return Ct().then(function(){t.a.removeItem(e)})},e.ca=function(){},e.ia=function(){};var zu,Gu,Qu={F:Uu,cb:Hu},$u={F:Uu,cb:Hu},Yu={F:yu,cb:Bu},Xu={F:Uu,cb:Bu},Zu={rd:"local",NONE:"none",td:"session"};function Ju(){var e=!(Ur(Ar())||!_r()),t=Rr(),n=Nr();this.m=e,this.h=t,this.l=n,this.a={},zu||(zu=new Ku),e=zu;try{this.g=!ur()&&Kr()||!s.indexedDB?new e.a.F:new ju(br()?new qu:new e.a.F)}catch(r){this.g=new qu,this.h=!0}try{this.i=new e.a.cb}catch(r){this.i=new qu}this.v=new qu,this.f=b(this.Zb,this),this.b={}}function ec(){return Gu||(Gu=new Ju),Gu}function tc(e,t){switch(t){case"session":return e.i;case"none":return e.v;default:return e.g}}function nc(e,t){return"firebase:"+e.name+(t?":"+t:"")}function rc(e,t,n){return n=nc(t,n),"local"==t.F&&(e.b[n]=null),tc(e,t.F).U(n)}function ic(e){e.c&&(clearInterval(e.c),e.c=null)}function oc(e){this.a=e,this.b=ec()}(e=Ju.prototype).get=function(e,t){return tc(this,e.F).get(nc(e,t))},e.set=function(e,t,n){var r=nc(e,n),i=this,o=tc(this,e.F);return o.set(r,t).then(function(){return o.get(r)}).then(function(t){"local"==e.F&&(i.b[r]=t)})},e.addListener=function(e,t,n){e=nc(e,t),this.l&&(this.b[e]=s.localStorage.getItem(e)),de(this.a)&&(tc(this,"local").ca(this.f),this.h||(ur()||!Kr())&&s.indexedDB||!this.l||function(e){ic(e),e.c=setInterval(function(){for(var t in e.a){var n=s.localStorage.getItem(t),r=e.b[t];n!=r&&(e.b[t]=n,n=new Yt({type:"storage",key:t,target:window,oldValue:r,newValue:n,a:!0}),e.Zb(n))}},1e3)}(this)),this.a[e]||(this.a[e]=[]),this.a[e].push(n)},e.removeListener=function(e,t,n){e=nc(e,t),this.a[e]&&($(this.a[e],function(e){return e==n}),0==this.a[e].length&&delete this.a[e]),de(this.a)&&(tc(this,"local").ia(this.f),ic(this))},e.Zb=function(e){if(e&&e.g){var t=e.a.key;if(null==t)for(var n in this.a){var r=this.b[n];void 0===r&&(r=null);var i=s.localStorage.getItem(n);i!==r&&(this.b[n]=i,this.nb(n))}else if(0==t.indexOf("firebase:")&&this.a[t]){if(void 0!==e.a.a?tc(this,"local").ia(this.f):ic(this),this.m)if(n=s.localStorage.getItem(t),(r=e.a.newValue)!==n)null!==r?s.localStorage.setItem(t,r):s.localStorage.removeItem(t);else if(this.b[t]===r&&void 0===e.a.a)return;var o=this;n=function(){void 0===e.a.a&&o.b[t]===s.localStorage.getItem(t)||(o.b[t]=s.localStorage.getItem(t),o.nb(t))},Qe&&ot&&10==ot&&s.localStorage.getItem(t)!==e.a.newValue&&e.a.newValue!==e.a.oldValue?setTimeout(n,10):n()}}else H(e,b(this.nb,this))},e.nb=function(e){this.a[e]&&H(this.a[e],function(e){e()})};var sc,ac={name:"authEvent",F:"local"};function uc(){this.a=ec()}function cc(e,t){this.b=lc,this.f=s.Uint8Array?new Uint8Array(this.b):Array(this.b),this.g=this.c=0,this.a=[],this.i=e,this.h=t,this.l=s.Int32Array?new Int32Array(64):Array(64),void 0===sc&&(sc=s.Int32Array?new Int32Array(mc):mc),this.reset()}E(cc,function(){this.b=-1});for(var lc=64,hc=lc-1,fc=[],dc=0;dc<hc;dc++)fc[dc]=0;var pc=Y(128,fc);function gc(e){for(var t=e.f,n=e.l,r=0,i=0;i<t.length;)n[r++]=t[i]<<24|t[i+1]<<16|t[i+2]<<8|t[i+3],i=4*r;for(t=16;64>t;t++){var o=(0|n[t-16])+(((i=0|n[t-15])>>>7|i<<25)^(i>>>18|i<<14)^i>>>3)|0,s=(0|n[t-7])+(((r=0|n[t-2])>>>17|r<<15)^(r>>>19|r<<13)^r>>>10)|0;n[t]=o+s|0}r=0|e.a[0],i=0|e.a[1];var a=0|e.a[2],u=0|e.a[3],c=0|e.a[4],l=0|e.a[5],h=0|e.a[6];for(o=0|e.a[7],t=0;64>t;t++){var f=((r>>>2|r<<30)^(r>>>13|r<<19)^(r>>>22|r<<10))+(r&i^r&a^i&a)|0;s=(o=o+((c>>>6|c<<26)^(c>>>11|c<<21)^(c>>>25|c<<7))|0)+((s=(s=c&l^~c&h)+(0|sc[t])|0)+(0|n[t])|0)|0,o=h,h=l,l=c,c=u+s|0,u=a,a=i,i=r,r=s+f|0}e.a[0]=e.a[0]+r|0,e.a[1]=e.a[1]+i|0,e.a[2]=e.a[2]+a|0,e.a[3]=e.a[3]+u|0,e.a[4]=e.a[4]+c|0,e.a[5]=e.a[5]+l|0,e.a[6]=e.a[6]+h|0,e.a[7]=e.a[7]+o|0}function vc(e,t,n){void 0===n&&(n=t.length);var r=0,i=e.c;if("string"==typeof t)for(;r<n;)e.f[i++]=t.charCodeAt(r++),i==e.b&&(gc(e),i=0);else{if(!f(t))throw Error("message must be string or array");for(;r<n;){var o=t[r++];if(!("number"==typeof o&&0<=o&&255>=o&&o==(0|o)))throw Error("message must be a byte array");e.f[i++]=o,i==e.b&&(gc(e),i=0)}}e.c=i,e.g+=n}cc.prototype.reset=function(){this.g=this.c=0,this.a=s.Int32Array?new Int32Array(this.h):X(this.h)};var mc=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function yc(){cc.call(this,8,_c)}E(yc,cc);var _c=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225];function bc(e,t,n,r,i,o){this.v=e,this.i=t,this.l=n,this.m=r||null,this.u=i||null,this.s=o,this.h=t+":"+n,this.C=new uc,this.g=new oc(this.h),this.f=null,this.b=[],this.a=this.c=null}function wc(e){return new k("invalid-cordova-configuration",e)}function Tc(e,t){for(var n=0;n<e.b.length;n++)try{e.b[n](t)}catch(r){}}function Ec(e){return e.f||(e.f=e.ma().then(function(){return new _t(function(t){e.Ea(function n(r){return t(r),e.Ta(n),!1}),function(e){function t(t){r=!0,i&&i.cancel(),Ic(e).then(function(r){var i=n;if(r&&t&&t.url){var o=null;-1!=(i=oo(t.url)).indexOf("/__/auth/callback")&&(o=(o="object"==typeof(o=Fr(Fn(o=jn(i),"firebaseError")||null))?C(o):null)?new Vo(r.c,r.b,null,null,o,null,r.T()):new Vo(r.c,r.b,i,r.f,null,null,r.T())),i=o||n}Tc(e,i)})}var n=new Vo("unknown",null,null,null,new k("no-auth-event")),r=!1,i=kn(500).then(function(){return Ic(e).then(function(){r||Tc(e,n)})}),o=s.handleOpenURL;s.handleOpenURL=function(e){if(0==e.toLowerCase().indexOf(xr("BuildInfo.packageName",s).toLowerCase()+"://")&&t({url:e}),"function"==typeof o)try{o(e)}catch(n){console.error(n)}},Ko||(Ko=new Ho),function(e){var t=Ko;t.a.push(e),t.b||(t.b=function(e){for(var n=0;n<t.a.length;n++)t.a[n](e)},"function"==typeof(e=xr("universalLinks.subscribe",s))&&e(null,t.b))}(t)}(e)})})),e.f}function Ic(e){var t=null;return function(e){return e.b.get(ac,e.a).then(function(e){return Bo(e)})}(e.g).then(function(n){return t=n,rc((n=e.g).b,ac,n.a)}).then(function(){return t})}function kc(e){this.a=e,this.b=ec()}(e=bc.prototype).ma=function(){return this.Ia?this.Ia:this.Ia=(yr(void 0)?mr().then(function(){return new _t(function(e,t){var n=s.document,r=setTimeout(function(){t(Error("Cordova framework is not ready."))},1e3);n.addEventListener("deviceready",function(){clearTimeout(r),e()},!1)})}):St(Error("Cordova must run in an Android or iOS file scheme."))).then(function(){if("function"!=typeof xr("universalLinks.subscribe",s))throw wc("cordova-universal-links-plugin-fix is not installed");if(void 0===xr("BuildInfo.packageName",s))throw wc("cordova-plugin-buildinfo is not installed");if("function"!=typeof xr("cordova.plugins.browsertab.openUrl",s))throw wc("cordova-plugin-browsertab is not installed");if("function"!=typeof xr("cordova.InAppBrowser.open",s))throw wc("cordova-plugin-inappbrowser is not installed")},function(){throw new k("cordova-not-ready")})},e.Pb=function(e,t){return t(new k("operation-not-supported-in-this-environment")),Ct()},e.Nb=function(){return St(new k("operation-not-supported-in-this-environment"))},e.ac=function(){return!1},e.Yb=function(){return!0},e.Ub=function(){return!0},e.Ob=function(e,t,n,r){if(this.c)return St(new k("redirect-operation-pending"));var i=this,o=s.document,a=null,u=null,c=null,l=null;return this.c=Ct().then(function(){return Uo(t),Ec(i)}).then(function(){return function(e,t,n,r,i){var o=function(){for(var e=20,t=[];0<e;)t.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),e--;return t.join("")}(),a=new Vo(t,r,null,o,new k("no-auth-event"),null,i),u=xr("BuildInfo.packageName",s);if("string"!=typeof u)throw new k("invalid-cordova-configuration");var c=xr("BuildInfo.displayName",s),l={};if(Ar().toLowerCase().match(/iphone|ipad|ipod/))l.ibi=u;else{if(!Ar().toLowerCase().match(/android/))return St(new k("operation-not-supported-in-this-environment"));l.apn=u}c&&(l.appDisplayName=c),o=function(e){var t=new yc;vc(t,e),e=[];var n=8*t.g;vc(t,pc,56>t.c?56-t.c:t.b-(t.c-56));for(var r=63;56<=r;r--)t.f[r]=255&n,n/=256;for(gc(t),r=n=0;r<t.i;r++)for(var i=24;0<=i;i-=8)e[n++]=t.a[r]>>i&255;return function(e){return K(e,function(e){return 1<(e=e.toString(16)).length?e:"0"+e}).join("")}(e)}(o),l.sessionId=o;var h=mu(e.v,e.i,e.l,t,n,null,r,e.m,l,e.u,i,e.s);return e.ma().then(function(){var t=e.h;return e.C.a.set(ac,a.w(),t)}).then(function(){var t=xr("cordova.plugins.browsertab.isAvailable",s);if("function"!=typeof t)throw new k("invalid-cordova-configuration");var n=null;t(function(t){if(t){if("function"!=typeof(n=xr("cordova.plugins.browsertab.openUrl",s)))throw new k("invalid-cordova-configuration");n(h)}else{if("function"!=typeof(n=xr("cordova.InAppBrowser.open",s)))throw new k("invalid-cordova-configuration");t=Ar(),e.a=n(h,t.match(/(iPad|iPhone|iPod).*OS 7_\d/i)||t.match(/(iPad|iPhone|iPod).*OS 8_\d/i)?"_blank":"_system","location=yes")}})})}(i,e,t,n,r)}).then(function(){return new _t(function(e,t){u=function(){var t=xr("cordova.plugins.browsertab.close",s);return e(),"function"==typeof t&&t(),i.a&&"function"==typeof i.a.close&&(i.a.close(),i.a=null),!1},i.Ea(u),l=function(){Hr()&&c()},o.addEventListener("resume",c=function(){a||(a=kn(2e3).then(function(){t(new k("redirect-cancelled-by-user"))}))},!1),Ar().toLowerCase().match(/android/)||o.addEventListener("visibilitychange",l,!1)}).o(function(e){return Ic(i).then(function(){throw e})})}).oa(function(){c&&o.removeEventListener("resume",c,!1),l&&o.removeEventListener("visibilitychange",l,!1),a&&a.cancel(),u&&i.Ta(u),i.c=null})},e.Ea=function(e){this.b.push(e),Ec(this).o(function(t){"auth/invalid-cordova-configuration"===t.code&&(t=new Vo("unknown",null,null,null,new k("no-auth-event")),e(t))})},e.Ta=function(e){$(this.b,function(t){return t==e})};var Cc={name:"pendingRedirect",F:"session"};function Sc(e){return rc(e.b,Cc,e.a)}function Ac(e,t,n,r){this.i={},this.u=0,this.D=e,this.v=t,this.m=n,this.J=r,this.h=[],this.f=!1,this.l=b(this.s,this),this.b=new Hc,this.C=new Qc,this.g=new kc(Vc(this.v,this.m)),this.c={},this.c.unknown=this.b,this.c.signInViaRedirect=this.b,this.c.linkViaRedirect=this.b,this.c.reauthViaRedirect=this.b,this.c.signInViaPopup=this.C,this.c.linkViaPopup=this.C,this.c.reauthViaPopup=this.C,this.a=xc(this.D,this.v,this.m,S,this.J)}function xc(e,t,n,r,i){var o=qr.default.SDK_VERSION||null;return yr()?new bc(e,t,n,o,r,i):new du(e,t,n,o,r,i)}function Nc(e){e.f||(e.f=!0,e.a.Ea(e.l));var t=e.a;return e.a.ma().o(function(n){throw e.a==t&&e.reset(),n})}function Dc(e){e.a.Yb()&&Nc(e).o(function(t){var n=new Vo("unknown",null,null,null,new k("operation-not-supported-in-this-environment"));Fc(t)&&e.s(n)}),e.a.Ub()||Wc(e.b)}function Pc(e,t){G(e.h,t)||e.h.push(t),e.f||function(e){return e.b.get(Cc,e.a).then(function(e){return"pending"==e})}(e.g).then(function(t){t?Sc(e.g).then(function(){Nc(e).o(function(t){var n=new Vo("unknown",null,null,null,new k("operation-not-supported-in-this-environment"));Fc(t)&&e.s(n)})}):Dc(e)}).o(function(){Dc(e)})}function Oc(e,t){$(e.h,function(e){return e==t})}Ac.prototype.reset=function(){this.f=!1,this.a.Ta(this.l),this.a=xc(this.D,this.v,this.m,null,this.J),this.i={}},Ac.prototype.s=function(e){if(!e)throw new k("invalid-auth-event");if(6e5<=Date.now()-this.u&&(this.i={},this.u=0),e&&e.getUid()&&this.i.hasOwnProperty(e.getUid()))return!1;for(var t=!1,n=0;n<this.h.length;n++){var r=this.h[n];if(r.Gb(e.c,e.b)){(t=this.c[e.c])&&(t.h(e,r),e&&(e.f||e.b)&&(this.i[e.getUid()]=!0,this.u=Date.now())),t=!0;break}}return Wc(this.b),t};var Rc=new Br(2e3,1e4),Lc=new Br(3e4,6e4);function Mc(e,t,n,r,i,o,s){return e.a.Nb(t,n,r,function(){e.f||(e.f=!0,e.a.Ea(e.l))},function(){e.reset()},i,o,s)}function Fc(e){return!(!e||"auth/cordova-not-ready"!=e.code)}function jc(e,t,n,r,i){var o;return function(e){return e.b.set(Cc,"pending",e.a)}(e.g).then(function(){return e.a.Ob(t,n,r,i).o(function(t){if(Fc(t))throw new k("operation-not-supported-in-this-environment");return o=t,Sc(e.g).then(function(){throw o})}).then(function(){return e.a.ac()?new _t(function(){}):Sc(e.g).then(function(){return e.ra()}).then(function(){}).o(function(){})})})}function qc(e,t,n,r,i){return e.a.Pb(r,function(e){t.na(n,null,e,i)},Rc.get())}Ac.prototype.ra=function(){return this.b.ra()};var Uc={};function Vc(e,t,n){return e=e+":"+t,n&&(e=e+":"+n.url),e}function Bc(e,t,n,r){var i=Vc(t,n,r);return Uc[i]||(Uc[i]=new Ac(e,t,n,r)),Uc[i]}function Hc(){this.b=null,this.f=[],this.c=[],this.a=null,this.i=this.g=!1}function Wc(e){e.g||(e.g=!0,Gc(e,!1,null,null))}function Kc(e){e.g&&!e.i&&Gc(e,!1,null,null)}function zc(e,t){if(e.b=function(){return Ct(t)},e.f.length)for(var n=0;n<e.f.length;n++)e.f[n](t)}function Gc(e,t,n,r){t?r?function(e,t){if(e.b=function(){return St(t)},e.c.length)for(var n=0;n<e.c.length;n++)e.c[n](t)}(e,r):zc(e,n):zc(e,{user:null}),e.f=[],e.c=[]}function Qc(){}function $c(){this.jb=!1,Object.defineProperty(this,"appVerificationDisabled",{get:function(){return this.jb},set:function(e){this.jb=e},enumerable:!1})}function Yc(e,t){this.a=t,Yr(this,"verificationId",e)}function Xc(e,t,n,r){return new Fo(e).gb(t,n).then(function(e){return new Yc(e,r)})}function Zc(e){var t=Ki(e);if(!(t&&t.exp&&t.auth_time&&t.iat))throw new k("internal-error","An internal error occurred. The token obtained by Firebase appears to be malformed. Please retry the operation.");Zr(this,{token:e,expirationTime:Wr(1e3*t.exp),authTime:Wr(1e3*t.auth_time),issuedAtTime:Wr(1e3*t.iat),signInProvider:t.firebase&&t.firebase.sign_in_provider?t.firebase.sign_in_provider:null,signInSecondFactor:t.firebase&&t.firebase.sign_in_second_factor?t.firebase.sign_in_second_factor:null,claims:t})}function Jc(e,t,n){var r=t&&t[tl];if(!r)throw new k("argument-error","Internal assert: Invalid MultiFactorResolver");this.a=e,this.f=pe(t),this.g=n,this.c=new so(null,r),this.b=[];var i=this;H(t[el]||[],function(e){(e=ni(e))&&i.b.push(e)}),Yr(this,"auth",this.a),Yr(this,"session",this.c),Yr(this,"hints",this.b)}Hc.prototype.reset=function(){this.b=null,this.a&&(this.a.cancel(),this.a=null)},Hc.prototype.h=function(e,t){if(e){this.reset(),this.g=!0;var n=e.c,r=e.b,i=e.a&&"auth/web-storage-unsupported"==e.a.code,o=e.a&&"auth/operation-not-supported-in-this-environment"==e.a.code;this.i=!(!i&&!o),"unknown"!=n||i||o?e.a?(Gc(this,!0,null,e.a),Ct()):t.Fa(n,r)?function(e,t,n){n=n.Fa(t.c,t.b);var r=t.g,i=t.f,o=t.i,s=t.T(),a=!!t.c.match(/Redirect$/);n(r,i,s,o).then(function(t){Gc(e,a,t,null)}).o(function(t){Gc(e,a,null,t)})}(this,e,t):St(new k("invalid-auth-event")):(Gc(this,!1,null,null),Ct())}else St(new k("invalid-auth-event"))},Hc.prototype.ra=function(){var e=this;return new _t(function(t,n){e.b?e.b().then(t,n):(e.f.push(t),e.c.push(n),function(e){var t=new k("timeout");e.a&&e.a.cancel(),e.a=kn(Lc.get()).then(function(){e.b||(e.g=!0,Gc(e,!0,null,t))})}(e))})},Qc.prototype.h=function(e,t){if(e){var n=e.c,r=e.b;e.a?(t.na(e.c,null,e.a,e.b),Ct()):t.Fa(n,r)?function(e,t){var n=e.b,r=e.c;t.Fa(r,n)(e.g,e.f,e.T(),e.i).then(function(e){t.na(r,e,null,n)}).o(function(e){t.na(r,null,e,n)})}(e,t):St(new k("invalid-auth-event"))}else St(new k("invalid-auth-event"))},Yc.prototype.confirm=function(e){return e=jo(this.verificationId,e),this.a(e)};var el="mfaInfo",tl="mfaPendingCredential";function nl(e,t,n,r){k.call(this,"multi-factor-auth-required",r,t),this.b=new Jc(e,t,n),Yr(this,"resolver",this.b)}function rl(e,t,n){if(e&&p(e.serverResponse)&&"auth/multi-factor-auth-required"===e.code)try{return new nl(t,e.serverResponse,n,e.message)}catch(r){}return null}function il(){}function ol(e){Yr(this,"factorId",e.fa),this.a=e}function sl(e){if(ol.call(this,e),this.a.fa!=Fo.PROVIDER_ID)throw new k("argument-error","firebase.auth.PhoneMultiFactorAssertion requires a valid firebase.auth.PhoneAuthCredential")}function al(e,t){for(var n in $t.call(this,e),t)this[n]=t[n]}function ul(e,t){this.a=e,this.b=[],this.c=b(this.yc,this),un(this.a,"userReloaded",this.c);var n=[];t&&t.multiFactor&&t.multiFactor.enrolledFactors&&H(t.multiFactor.enrolledFactors,function(e){var t=null,r={};if(e){e.uid&&(r[oi]=e.uid),e.displayName&&(r[ri]=e.displayName),e.enrollmentTime&&(r[ii]=new Date(e.enrollmentTime).toISOString()),e.phoneNumber&&(r[si]=e.phoneNumber);try{t=new ai(r)}catch(i){}e=t}else e=null;e&&n.push(e)}),cl(this,n)}function cl(e,t){e.b=t,Yr(e,"enrolledFactors",t)}function ll(e,t,n){if(this.h=e,this.i=t,this.g=n,this.c=3e4,this.f=96e4,this.b=null,this.a=this.c,this.f<this.c)throw Error("Proactive refresh lower bound greater than upper bound!")}function hl(e,t){e.stop(),e.b=kn(function(e,t){return t?(e.a=e.c,e.g()):(t=e.a,e.a*=2,e.a>e.f&&(e.a=e.f),t)}(e,t)).then(function(){return function(){var e=s.document,t=null;return Hr()||!e?Ct():new _t(function(n){t=function(){Hr()&&(e.removeEventListener("visibilitychange",t,!1),n())},e.addEventListener("visibilitychange",t,!1)}).o(function(n){throw e.removeEventListener("visibilitychange",t,!1),n})}()}).then(function(){return e.h()}).then(function(){hl(e,!0)}).o(function(t){e.i(t)&&hl(e,!1)})}function fl(e){this.f=e,this.b=this.a=null,this.c=Date.now()}function dl(e,t){void 0===t&&(t=e.b?(t=e.b).a-t.g:0),e.c=Date.now()+1e3*t}function pl(e,t){e.b=Wi(t[Xs]||""),e.a=t.refreshToken,dl(e,void 0!==(t=t.expiresIn)?Number(t):void 0)}function gl(e,t){this.a=e||null,this.b=t||null,Zr(this,{lastSignInTime:Wr(t||null),creationTime:Wr(e||null)})}function vl(e,t,n,r,i,o){Zr(this,{uid:e,displayName:r||null,photoURL:i||null,email:n||null,phoneNumber:o||null,providerId:t})}function ml(e,t,n){this.N=[],this.l=e.apiKey,this.m=e.appName,this.s=e.authDomain||null;var r=qr.default.SDK_VERSION?Sr(qr.default.SDK_VERSION):null;this.a=new $s(this.l,D(S),r),(this.u=e.emulatorConfig||null)&&ra(this.a,this.u),this.h=new fl(this.a),Cl(this,t[Xs]),pl(this.h,t),Yr(this,"refreshToken",this.h.a),xl(this,n||{}),bn.call(this),this.P=!1,this.s&&Dr()&&(this.b=Bc(this.s,this.l,this.m,this.u)),this.W=[],this.i=null,this.D=function(e){return new ll(function(){return e.I(!0)},function(e){return!(!e||"auth/network-request-failed"!=e.code)},function(){var t=e.h.c-Date.now()-3e5;return 0<t?t:0})}(this),this.ba=b(this.ib,this);var i=this;this.za=null,this.Pa=function(e){i.xa(e.h)},this.qa=null,this.Ba=function(e){yl(i,e.c)},this.$=null,this.aa=[],this.Oa=function(e){wl(i,e.f)},this.ja=null,this.S=new ul(this,n),Yr(this,"multiFactor",this.S)}function yl(e,t){e.u=t,ra(e.a,t),e.b&&(t=e.b,e.b=Bc(e.s,e.l,e.m,e.u),e.P&&(Oc(t,e),Pc(e.b,e)))}function _l(e,t){e.qa&&hn(e.qa,"languageCodeChanged",e.Pa),(e.qa=t)&&un(t,"languageCodeChanged",e.Pa)}function bl(e,t){e.$&&hn(e.$,"emulatorConfigChanged",e.Ba),(e.$=t)&&un(t,"emulatorConfigChanged",e.Ba)}function wl(e,t){e.aa=t,oa(e.a,qr.default.SDK_VERSION?Sr(qr.default.SDK_VERSION,e.aa):null)}function Tl(e,t){e.ja&&hn(e.ja,"frameworkChanged",e.Oa),(e.ja=t)&&un(t,"frameworkChanged",e.Oa)}function El(e){try{return qr.default.app(e.m).auth()}catch(t){throw new k("internal-error","No firebase.auth.Auth instance is available for the Firebase App '"+e.m+"'!")}}function Il(e){e.J||e.D.b||(e.D.start(),hn(e,"tokenChanged",e.ba),un(e,"tokenChanged",e.ba))}function kl(e){hn(e,"tokenChanged",e.ba),e.D.stop()}function Cl(e,t){e.Aa=t,Yr(e,"_lat",t)}function Sl(e){for(var t=[],n=0;n<e.W.length;n++)t.push(e.W[n](e));return xt(t).then(function(){return e})}function Al(e){e.b&&!e.P&&(e.P=!0,Pc(e.b,e))}function xl(e,t){Zr(e,{uid:t.uid,displayName:t.displayName||null,photoURL:t.photoURL||null,email:t.email||null,emailVerified:t.emailVerified||!1,phoneNumber:t.phoneNumber||null,isAnonymous:t.isAnonymous||!1,tenantId:t.tenantId||null,metadata:new gl(t.createdAt,t.lastLoginAt),providerData:[]}),e.a.b=e.tenantId}function Nl(){}function Dl(e){return Ct().then(function(){if(e.J)throw new k("app-deleted")})}function Pl(e){return K(e.providerData,function(e){return e.providerId})}function Ol(e,t){t&&(Rl(e,t.providerId),e.providerData.push(t))}function Rl(e,t){$(e.providerData,function(e){return e.providerId==t})}function Ll(e,t,n){("uid"!=t||n)&&e.hasOwnProperty(t)&&Yr(e,t,n)}function Ml(e,t){e!=t&&(Zr(e,{uid:t.uid,displayName:t.displayName,photoURL:t.photoURL,email:t.email,emailVerified:t.emailVerified,phoneNumber:t.phoneNumber,isAnonymous:t.isAnonymous,tenantId:t.tenantId,providerData:[]}),Yr(e,"metadata",t.metadata?function(e){return new gl(e.a,e.b)}(t.metadata):new gl),H(t.providerData,function(t){Ol(e,t)}),function(e,t){e.b=t.b,e.a=t.a,e.c=t.c}(e.h,t.h),Yr(e,"refreshToken",e.h.a),cl(e.S,t.S.b))}function Fl(e){return e.I().then(function(t){var n=e.isAnonymous;return function(e,t){return nu(e.a,Oa,{idToken:t}).then(b(e.Kc,e))}(e,t).then(function(){return n||Ll(e,"isAnonymous",!1),t})})}function jl(e,t){t[Xs]&&e.Aa!=t[Xs]&&(pl(e.h,t),e.dispatchEvent(new al("tokenChanged")),Cl(e,t[Xs]),Ll(e,"refreshToken",e.h.a))}function ql(e,t){return Fl(e).then(function(){if(G(Pl(e),t))return Sl(e).then(function(){throw new k("provider-already-linked")})})}function Ul(e,t,n){return Jr({user:e,credential:qo(t),additionalUserInfo:t=Yi(t),operationType:n})}function Vl(e,t){return jl(e,t),e.reload().then(function(){return e})}function Bl(e,t,n,r,i){if(!Dr())return St(new k("operation-not-supported-in-this-environment"));if(e.i&&!i)return St(e.i);var o=$i(n.providerId),s=jr(e.uid+":::"),a=null;(!Rr()||_r())&&e.s&&n.isOAuthProvider&&(a=mu(e.s,e.l,e.m,t,n,null,s,qr.default.SDK_VERSION||null,null,null,e.tenantId,e.u));var u=pr(a,o&&o.va,o&&o.ua);return r=r().then(function(){if(Wl(e),!i)return e.I().then(function(){})}).then(function(){return Mc(e.b,u,t,n,s,!!a,e.tenantId)}).then(function(){return new _t(function(n,r){e.na(t,null,new k("cancelled-popup-request"),e.g||null),e.f=n,e.C=r,e.g=s,e.c=qc(e.b,e,t,u,s)})}).then(function(e){return u&&dr(u),e?Jr(e):null}).o(function(e){throw u&&dr(u),e}),Kl(e,r,i)}function Hl(e,t,n,r,i){if(!Dr())return St(new k("operation-not-supported-in-this-environment"));if(e.i&&!i)return St(e.i);var o=null,s=jr(e.uid+":::");return r=r().then(function(){if(Wl(e),!i)return e.I().then(function(){})}).then(function(){return e.ga=s,Sl(e)}).then(function(t){return e.ha&&(t=(t=e.ha).b.set(Ql,e.w(),t.a)),t}).then(function(){return jc(e.b,t,n,s,e.tenantId)}).o(function(t){if(o=t,e.ha)return $l(e.ha);throw o}).then(function(){if(o)throw o}),Kl(e,r,i)}function Wl(e){if(!e.b||!e.P){if(e.b&&!e.P)throw new k("internal-error");throw new k("auth-domain-config-required")}}function Kl(e,t,n){var r=function(e,t,n){return e.i&&!n?(t.cancel(),St(e.i)):t.o(function(t){throw!t||"auth/user-disabled"!=t.code&&"auth/user-token-expired"!=t.code||(e.i||e.dispatchEvent(new al("userInvalidated")),e.i=t),t})}(e,t,n);return e.N.push(r),r.oa(function(){Q(e.N,r)}),r.o(function(t){var n=null;throw t&&"auth/multi-factor-auth-required"===t.code&&(n=rl(t.w(),El(e),b(e.jc,e))),n||t})}function zl(e){if(!e.apiKey)return null;var t={apiKey:e.apiKey,authDomain:e.authDomain,appName:e.appName,emulatorConfig:e.emulatorConfig},n={};if(!e.stsTokenManager||!e.stsTokenManager.accessToken)return null;n[Xs]=e.stsTokenManager.accessToken,n.refreshToken=e.stsTokenManager.refreshToken||null;var r=e.stsTokenManager.expirationTime;r&&(n.expiresIn=(r-Date.now())/1e3);var i=new ml(t,n,e);return e.providerData&&H(e.providerData,function(e){e&&Ol(i,Jr(e))}),e.redirectEventId&&(i.ga=e.redirectEventId),i}function Gl(e){this.a=e,this.b=ec()}Jc.prototype.Rc=function(e){var t=this;return e.tb(this.a.a,this.c).then(function(e){var n=pe(t.f);return delete n[el],delete n[tl],ve(n,e),t.g(n)})},E(nl,k),il.prototype.tb=function(e,t,n){return t.type==ao?function(e,t,n,r){return n.Ha().then(function(n){return n={idToken:n},void 0!==r&&(n.displayName=r),ve(n,{phoneVerificationInfo:Mo(e.a)}),nu(t,Da,n)})}(this,e,t,n):function(e,t,n){return n.Ha().then(function(n){return ve(n={mfaPendingCredential:n},{phoneVerificationInfo:Mo(e.a)}),nu(t,Pa,n)})}(this,e,t)},E(ol,il),E(sl,ol),E(al,$t),(e=ul.prototype).yc=function(e){cl(this,function(e){var t=[];return H(e.mfaInfo||[],function(e){(e=ni(e))&&t.push(e)}),t}(e.hd))},e.Sb=function(){return this.a.I().then(function(e){return new so(e,null)})},e.fc=function(e,t){var n=this,r=this.a.a;return this.Sb().then(function(n){return e.tb(r,n,t)}).then(function(e){return jl(n.a,e),n.a.reload()})},e.bd=function(e){var t=this,n="string"==typeof e?e:e.uid,r=this.a.a;return this.a.I().then(function(e){return nu(r,tu,{idToken:e,mfaEnrollmentId:n})}).then(function(e){var r=W(t.b,function(e){return e.uid!=n});return cl(t,r),jl(t.a,e),t.a.reload().o(function(e){if("auth/user-token-expired"!=e.code)throw e})})},e.w=function(){return{multiFactor:{enrolledFactors:K(this.b,function(e){return e.w()})}}},ll.prototype.start=function(){this.a=this.c,hl(this,!0)},ll.prototype.stop=function(){this.b&&(this.b.cancel(),this.b=null)},fl.prototype.w=function(){return{apiKey:this.f.c,refreshToken:this.a,accessToken:this.b&&this.b.toString(),expirationTime:this.c}},fl.prototype.getToken=function(e){return e=!!e,this.b&&!this.a?St(new k("user-token-expired")):e||!this.b||Date.now()>this.c-3e4?this.a?function(e,t){return function(e,t){return new _t(function(n,r){"refresh_token"==t.grant_type&&t.refresh_token||"authorization_code"==t.grant_type&&t.code?sa(e,e.l+"?key="+encodeURIComponent(e.c),function(e){e?e.error?r(iu(e)):e.access_token&&e.refresh_token?n(e):r(new k("internal-error")):r(new k("network-request-failed"))},"POST",Yn(t).toString(),e.g,e.m.get()):r(new k("internal-error"))})}(e.f,t).then(function(t){return e.b=Wi(t.access_token),e.a=t.refresh_token,dl(e,t.expires_in),{accessToken:e.b.toString(),refreshToken:e.a}}).o(function(t){throw"auth/user-token-expired"==t.code&&(e.a=null),t})}(this,{grant_type:"refresh_token",refresh_token:this.a}):Ct(null):Ct({accessToken:this.b.toString(),refreshToken:this.a})},gl.prototype.w=function(){return{lastLoginAt:this.b,createdAt:this.a}},E(ml,bn),ml.prototype.xa=function(e){this.za=e,na(this.a,e)},ml.prototype.la=function(){return this.za},ml.prototype.Ga=function(){return X(this.aa)},ml.prototype.ib=function(){this.D.b&&(this.D.stop(),this.D.start())},Yr(ml.prototype,"providerId","firebase"),(e=ml.prototype).reload=function(){var e=this;return Kl(this,Dl(this).then(function(){return Fl(e).then(function(){return Sl(e)}).then(Nl)}))},e.oc=function(e){return this.I(e).then(function(e){return new Zc(e)})},e.I=function(e){var t=this;return Kl(this,Dl(this).then(function(){return t.h.getToken(e)}).then(function(e){if(!e)throw new k("internal-error");return e.accessToken!=t.Aa&&(Cl(t,e.accessToken),t.dispatchEvent(new al("tokenChanged"))),Ll(t,"refreshToken",e.refreshToken),e.accessToken}))},e.Kc=function(e){if(!(e=e.users)||!e.length)throw new k("internal-error");xl(this,{uid:(e=e[0]).localId,displayName:e.displayName,photoURL:e.photoUrl,email:e.email,emailVerified:!!e.emailVerified,phoneNumber:e.phoneNumber,lastLoginAt:e.lastLoginAt,createdAt:e.createdAt,tenantId:e.tenantId});for(var t=function(e){return(e=e.providerUserInfo)&&e.length?K(e,function(e){return new vl(e.rawId,e.providerId,e.email,e.displayName,e.photoUrl,e.phoneNumber)}):[]}(e),n=0;n<t.length;n++)Ol(this,t[n]);Ll(this,"isAnonymous",!(this.email&&e.passwordHash||this.providerData&&this.providerData.length)),this.dispatchEvent(new al("userReloaded",{hd:e}))},e.Lc=function(e){return Qr("firebase.User.prototype.reauthenticateAndRetrieveDataWithCredential is deprecated. Please use firebase.User.prototype.reauthenticateWithCredential instead."),this.ub(e)},e.ub=function(e){var t=this,n=null;return Kl(this,e.c(this.a,this.uid).then(function(e){return jl(t,e),n=Ul(t,e,"reauthenticate"),t.i=null,t.reload()}).then(function(){return n}),!0)},e.Cc=function(e){return Qr("firebase.User.prototype.linkAndRetrieveDataWithCredential is deprecated. Please use firebase.User.prototype.linkWithCredential instead."),this.rb(e)},e.rb=function(e){var t=this,n=null;return Kl(this,ql(this,e.providerId).then(function(){return t.I()}).then(function(n){return e.b(t.a,n)}).then(function(e){return n=Ul(t,e,"link"),Vl(t,e)}).then(function(){return n}))},e.Dc=function(e,t){var n=this;return Kl(this,ql(this,"phone").then(function(){return Xc(El(n),e,t,b(n.rb,n))}))},e.Mc=function(e,t){var n=this;return Kl(this,Ct().then(function(){return Xc(El(n),e,t,b(n.ub,n))}),!0)},e.Cb=function(e){var t=this;return Kl(this,this.I().then(function(n){return t.a.Cb(n,e)}).then(function(e){return jl(t,e),t.reload()}))},e.ed=function(e){var t=this;return Kl(this,this.I().then(function(n){return e.b(t.a,n)}).then(function(e){return jl(t,e),t.reload()}))},e.Db=function(e){var t=this;return Kl(this,this.I().then(function(n){return t.a.Db(n,e)}).then(function(e){return jl(t,e),t.reload()}))},e.Eb=function(e){if(void 0===e.displayName&&void 0===e.photoURL)return Dl(this);var t=this;return Kl(this,this.I().then(function(n){return t.a.Eb(n,{displayName:e.displayName,photoUrl:e.photoURL})}).then(function(e){return jl(t,e),Ll(t,"displayName",e.displayName||null),Ll(t,"photoURL",e.photoUrl||null),H(t.providerData,function(e){"password"===e.providerId&&(Yr(e,"displayName",t.displayName),Yr(e,"photoURL",t.photoURL))}),Sl(t)}).then(Nl))},e.cd=function(e){var t=this;return Kl(this,Fl(this).then(function(n){return G(Pl(t),e)?function(e,t,n){return nu(e,Aa,{idToken:t,deleteProvider:n})}(t.a,n,[e]).then(function(e){var n={};return H(e.providerUserInfo||[],function(e){n[e.providerId]=!0}),H(Pl(t),function(e){n[e]||Rl(t,e)}),n[Fo.PROVIDER_ID]||Yr(t,"phoneNumber",null),Sl(t)}):Sl(t).then(function(){throw new k("no-such-provider")})}))},e.delete=function(){var e=this;return Kl(this,this.I().then(function(t){return nu(e.a,Sa,{idToken:t})}).then(function(){e.dispatchEvent(new al("userDeleted"))})).then(function(){for(var t=0;t<e.N.length;t++)e.N[t].cancel("app-deleted");_l(e,null),bl(e,null),Tl(e,null),e.N=[],e.J=!0,kl(e),Yr(e,"refreshToken",null),e.b&&Oc(e.b,e)})},e.Gb=function(e,t){return!!("linkViaPopup"==e&&(this.g||null)==t&&this.f||"reauthViaPopup"==e&&(this.g||null)==t&&this.f||"linkViaRedirect"==e&&(this.ga||null)==t||"reauthViaRedirect"==e&&(this.ga||null)==t)},e.na=function(e,t,n,r){"linkViaPopup"!=e&&"reauthViaPopup"!=e||r!=(this.g||null)||(n&&this.C?this.C(n):t&&!n&&this.f&&this.f(t),this.c&&(this.c.cancel(),this.c=null),delete this.f,delete this.C)},e.Fa=function(e,t){return"linkViaPopup"==e&&t==(this.g||null)?b(this.Lb,this):"reauthViaPopup"==e&&t==(this.g||null)?b(this.Mb,this):"linkViaRedirect"==e&&(this.ga||null)==t?b(this.Lb,this):"reauthViaRedirect"==e&&(this.ga||null)==t?b(this.Mb,this):null},e.Ec=function(e){var t=this;return Bl(this,"linkViaPopup",e,function(){return ql(t,e.providerId).then(function(){return Sl(t)})},!1)},e.Nc=function(e){return Bl(this,"reauthViaPopup",e,function(){return Ct()},!0)},e.Fc=function(e){var t=this;return Hl(this,"linkViaRedirect",e,function(){return ql(t,e.providerId)},!1)},e.Oc=function(e){return Hl(this,"reauthViaRedirect",e,function(){return Ct()},!0)},e.Lb=function(e,t,n,r){var i=this;this.c&&(this.c.cancel(),this.c=null);var o=null;return Kl(this,this.I().then(function(n){return ba(i.a,{requestUri:e,postBody:r,sessionId:t,idToken:n})}).then(function(e){return o=Ul(i,e,"link"),Vl(i,e)}).then(function(){return o}))},e.Mb=function(e,t,n,r){var i=this;this.c&&(this.c.cancel(),this.c=null);var o=null;return Kl(this,Ct().then(function(){return lo(wa(i.a,{requestUri:e,sessionId:t,postBody:r,tenantId:n}),i.uid)}).then(function(e){return o=Ul(i,e,"reauthenticate"),jl(i,e),i.i=null,i.reload()}).then(function(){return o}),!0)},e.vb=function(e){var t=this,n=null;return Kl(this,this.I().then(function(t){return n=t,void 0===e||de(e)?{}:Vi(new Di(e))}).then(function(e){return t.a.vb(n,e)}).then(function(e){if(t.email!=e)return t.reload()}).then(function(){}))},e.Fb=function(e,t){var n=this,r=null;return Kl(this,this.I().then(function(e){return r=e,void 0===t||de(t)?{}:Vi(new Di(t))}).then(function(t){return n.a.Fb(r,e,t)}).then(function(e){if(n.email!=e)return n.reload()}).then(function(){}))},e.jc=function(e){var t=null,n=this;return Kl(this,e=lo(Ct(e),n.uid).then(function(e){return t=Ul(n,e,"reauthenticate"),jl(n,e),n.i=null,n.reload()}).then(function(){return t}),!0)},e.toJSON=function(){return this.w()},e.w=function(){var e={uid:this.uid,displayName:this.displayName,photoURL:this.photoURL,email:this.email,emailVerified:this.emailVerified,phoneNumber:this.phoneNumber,isAnonymous:this.isAnonymous,tenantId:this.tenantId,providerData:[],apiKey:this.l,appName:this.m,authDomain:this.s,stsTokenManager:this.h.w(),redirectEventId:this.ga||null};return this.metadata&&ve(e,this.metadata.w()),H(this.providerData,function(t){e.providerData.push(function(e){var t,n={};for(t in e)e.hasOwnProperty(t)&&(n[t]=e[t]);return n}(t))}),ve(e,this.S.w()),e};var Ql={name:"redirectUser",F:"session"};function $l(e){return rc(e.b,Ql,e.a)}function Yl(e){this.a=e,this.b=ec(),this.c=null,this.f=function(e){var t=Jl("local"),n=Jl("session"),r=Jl("none");return function(e,t,n){var r=nc(t,n),i=tc(e,t.F);return e.get(t,n).then(function(o){var a=null;try{a=Fr(s.localStorage.getItem(r))}catch(u){}if(a&&!o)return s.localStorage.removeItem(r),e.set(t,a,n);a&&o&&"localStorage"!=i.type&&s.localStorage.removeItem(r)})}(e.b,t,e.a).then(function(){return e.b.get(n,e.a)}).then(function(i){return i?n:e.b.get(r,e.a).then(function(n){return n?r:e.b.get(t,e.a).then(function(n){return n?t:e.b.get(Zl,e.a).then(function(e){return e?Jl(e):t})})})}).then(function(t){return e.c=t,Xl(e,t.F)}).o(function(){e.c||(e.c=t)})}(this),this.b.addListener(Jl("local"),this.a,b(this.g,this))}function Xl(e,t){var n,r=[];for(n in Zu)Zu[n]!==t&&r.push(rc(e.b,Jl(Zu[n]),e.a));return r.push(rc(e.b,Zl,e.a)),function(e){return new _t(function(t,n){var r=e.length,i=[];if(r)for(var o=function(e,n){r--,i[e]=n,0==r&&t(i)},s=function(e){n(e)},a=0;a<e.length;a++)At(e[a],w(o,a),s);else t(i)})}(r)}Yl.prototype.g=function(){var e=this,t=Jl("local");rh(this,function(){return Ct().then(function(){return e.c&&"local"!=e.c.F?e.b.get(t,e.a):null}).then(function(n){if(n)return Xl(e,"local").then(function(){e.c=t})})})};var Zl={name:"persistence",F:"session"};function Jl(e){return{name:"authUser",F:e}}function eh(e,t){return rh(e,function(){return e.b.set(e.c,t.w(),e.a)})}function th(e){return rh(e,function(){return rc(e.b,e.c,e.a)})}function nh(e,t,n){return rh(e,function(){return e.b.get(e.c,e.a).then(function(e){return e&&t&&(e.authDomain=t),e&&n&&(e.emulatorConfig=n),zl(e||{})})})}function rh(e,t){return e.f=e.f.then(t,t),e.f}function ih(e){if(this.l=!1,Yr(this,"settings",new $c),Yr(this,"app",e),!fh(this).options||!fh(this).options.apiKey)throw new k("invalid-api-key");e=qr.default.SDK_VERSION?Sr(qr.default.SDK_VERSION):null,this.a=new $s(fh(this).options&&fh(this).options.apiKey,D(S),e),this.P=[],this.s=[],this.N=[],this.Pa=qr.default.INTERNAL.createSubscribe(b(this.zc,this)),this.W=void 0,this.ib=qr.default.INTERNAL.createSubscribe(b(this.Ac,this)),lh(this,null),this.i=new Yl(fh(this).options.apiKey+":"+fh(this).name),this.D=new Gl(fh(this).options.apiKey+":"+fh(this).name),this.$=vh(this,function(e){var t=fh(e).options.authDomain,n=function(e){var t=function(e,t){return e.b.get(Ql,e.a).then(function(e){return e&&t&&(e.authDomain=t),zl(e||{})})}(e.D,fh(e).options.authDomain).then(function(t){return(e.m=t)&&(t.ha=e.D),$l(e.D)});return vh(e,t)}(e).then(function(){return nh(e.i,t,e.R)}).then(function(t){return t?(t.ha=e.D,e.m&&(e.m.ga||null)==(t.ga||null)?t:t.reload().then(function(){return eh(e.i,t).then(function(){return t})}).o(function(n){return"auth/network-request-failed"==n.code?t:th(e.i)})):null}).then(function(t){lh(e,t||null)});return vh(e,n)}(this)),this.h=vh(this,function(e){return e.$.then(function(){return ch(e)}).o(function(){}).then(function(){if(!e.l)return e.ja()}).o(function(){}).then(function(){if(!e.l){e.ba=!0;var t=e.i;t.b.addListener(Jl("local"),t.a,e.ja)}})}(this)),this.ba=!1,this.ja=b(this.Zc,this),this.Ba=b(this.da,this),this.qa=b(this.mc,this),this.za=b(this.wc,this),this.Aa=b(this.xc,this),this.b=null,function(e){var t=fh(e).options.authDomain,n=fh(e).options.apiKey;t&&Dr()&&(e.Oa=e.$.then(function(){if(!e.l){if(e.b=Bc(t,n,fh(e).name,e.R),Pc(e.b,e),dh(e)&&Al(dh(e)),e.m){Al(e.m);var r=e.m;r.xa(e.la()),_l(r,e),wl(r=e.m,e.J),Tl(r,e),yl(r=e.m,e.R),bl(r,e),e.m=null}return e.b}}))}(this),this.INTERNAL={},this.INTERNAL.delete=b(this.delete,this),this.INTERNAL.logFramework=b(this.Gc,this),this.u=0,bn.call(this),function(e){Object.defineProperty(e,"lc",{get:function(){return this.la()},set:function(e){this.xa(e)},enumerable:!1}),e.aa=null,Object.defineProperty(e,"ti",{get:function(){return this.T()},set:function(e){this.zb(e)},enumerable:!1}),e.S=null,Object.defineProperty(e,"emulatorConfig",{get:function(){if(this.R){var e=jn(this.R.url);e=Jr({protocol:e.c,host:e.a,port:e.g,options:Jr({disableWarnings:this.R.ec})})}else e=null;return e},enumerable:!1})}(this),this.J=[],this.R=null}function oh(e){$t.call(this,"languageCodeChanged"),this.h=e}function sh(e){$t.call(this,"emulatorConfigChanged"),this.c=e}function ah(e){$t.call(this,"frameworkChanged"),this.f=e}function uh(e){return e.Oa||St(new k("auth-domain-config-required"))}function ch(e){if(!Dr())return St(new k("operation-not-supported-in-this-environment"));var t=uh(e).then(function(){return e.b.ra()}).then(function(e){return e?Jr(e):null});return vh(e,t)}function lh(e,t){dh(e)&&(function(e,t){$(e.W,function(e){return e==t})}(dh(e),e.Ba),hn(dh(e),"tokenChanged",e.qa),hn(dh(e),"userDeleted",e.za),hn(dh(e),"userInvalidated",e.Aa),kl(dh(e))),t&&(t.W.push(e.Ba),un(t,"tokenChanged",e.qa),un(t,"userDeleted",e.za),un(t,"userInvalidated",e.Aa),0<e.u&&Il(t)),Yr(e,"currentUser",t),t&&(t.xa(e.la()),_l(t,e),wl(t,e.J),Tl(t,e),yl(t,e.R),bl(t,e))}function hh(e,t){var n=null,r=null;return vh(e,t.then(function(t){return n=qo(t),r=Yi(t),function(e,t){var n={};return n.apiKey=fh(e).options.apiKey,n.authDomain=fh(e).options.authDomain,n.appName=fh(e).name,e.R&&(n.emulatorConfig=e.R),e.$.then(function(){return function(e,t,n,r){var i=new ml(e,t);return n&&(i.ha=n),r&&wl(i,r),i.reload().then(function(){return i})}(n,t,e.D,e.Ga())}).then(function(t){return dh(e)&&t.uid==dh(e).uid?(Ml(dh(e),t),e.da(t)):(lh(e,t),Al(t),e.da(t))}).then(function(){gh(e)})}(e,t)},function(t){var n=null;throw t&&"auth/multi-factor-auth-required"===t.code&&(n=rl(t.w(),e,b(e.kc,e))),n||t}).then(function(){return Jr({user:dh(e),credential:n,additionalUserInfo:r,operationType:"signIn"})}))}function fh(e){return e.app}function dh(e){return e.currentUser}function ph(e){return dh(e)&&dh(e)._lat||null}function gh(e){if(e.ba){for(var t=0;t<e.s.length;t++)e.s[t]&&e.s[t](ph(e));if(e.W!==e.getUid()&&e.N.length)for(e.W=e.getUid(),t=0;t<e.N.length;t++)e.N[t]&&e.N[t](ph(e))}}function vh(e,t){return e.P.push(t),t.oa(function(){Q(e.P,t)}),t}function mh(){}function yh(){this.a={},this.b=1e12}Yl.prototype.yb=function(e){var t=null,n=this;return function(e){var t=new k("invalid-persistence-type"),n=new k("unsupported-persistence-type");e:{for(r in Zu)if(Zu[r]==e){var r=!0;break e}r=!1}if(!r||"string"!=typeof e)throw t;switch(wr()){case"ReactNative":if("session"===e)throw n;break;case"Node":if("none"!==e)throw n;break;case"Worker":if("session"===e||!Du()&&"none"!==e)throw n;break;default:if(!Nr()&&"none"!==e)throw n}}(e),rh(this,function(){return e!=n.c.F?n.b.get(n.c,n.a).then(function(r){return t=r,Xl(n,e)}).then(function(){if(n.c=Jl(e),t)return n.b.set(n.c,t,n.a)}):Ct()})},E(ih,bn),E(oh,$t),E(sh,$t),E(ah,$t),(e=ih.prototype).yb=function(e){return vh(this,e=this.i.yb(e))},e.xa=function(e){this.aa===e||this.l||(this.aa=e,na(this.a,this.aa),this.dispatchEvent(new oh(this.la())))},e.la=function(){return this.aa},e.fd=function(){var e=s.navigator;this.xa(e&&(e.languages&&e.languages[0]||e.language||e.userLanguage)||null)},e.gd=function(e,t){if(!this.R){if(!/^https?:\/\//.test(e))throw new k("argument-error","Emulator URL must start with a valid scheme (http:// or https://).");(function(e){"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),s.document&&!e&&mr().then(function(){var e=s.document.createElement("div");e.innerText="Running in emulator mode. Do not use with production credentials.",e.style.position="fixed",e.style.width="100%",e.style.backgroundColor="#ffffff",e.style.border=".1em solid #000000",e.style.color="#b50000",e.style.bottom="0px",e.style.left="0px",e.style.margin="0px",e.style.zIndex=1e4,e.style.textAlign="center",e.classList.add("firebase-emulator-warning"),s.document.body.appendChild(e)})})(t=!!t&&!!t.disableWarnings),this.R={url:e,ec:t},this.settings.jb=!0,ra(this.a,this.R),this.dispatchEvent(new sh(this.R))}},e.Gc=function(e){this.J.push(e),oa(this.a,qr.default.SDK_VERSION?Sr(qr.default.SDK_VERSION,this.J):null),this.dispatchEvent(new ah(this.J))},e.Ga=function(){return X(this.J)},e.zb=function(e){this.S===e||this.l||(this.S=e,this.a.b=this.S)},e.T=function(){return this.S},e.toJSON=function(){return{apiKey:fh(this).options.apiKey,authDomain:fh(this).options.authDomain,appName:fh(this).name,currentUser:dh(this)&&dh(this).w()}},e.Gb=function(e,t){switch(e){case"unknown":case"signInViaRedirect":return!0;case"signInViaPopup":return this.g==t&&!!this.f;default:return!1}},e.na=function(e,t,n,r){"signInViaPopup"==e&&this.g==r&&(n&&this.C?this.C(n):t&&!n&&this.f&&this.f(t),this.c&&(this.c.cancel(),this.c=null),delete this.f,delete this.C)},e.Fa=function(e,t){return"signInViaRedirect"==e||"signInViaPopup"==e&&this.g==t&&this.f?b(this.ic,this):null},e.ic=function(e,t,n,r){var i=this,o={requestUri:e,postBody:r,sessionId:t,tenantId:n};return this.c&&(this.c.cancel(),this.c=null),i.$.then(function(){return hh(i,_a(i.a,o))})},e.Xc=function(e){if(!Dr())return St(new k("operation-not-supported-in-this-environment"));var t=this,n=$i(e.providerId),r=jr(),i=null;(!Rr()||_r())&&fh(this).options.authDomain&&e.isOAuthProvider&&(i=mu(fh(this).options.authDomain,fh(this).options.apiKey,fh(this).name,"signInViaPopup",e,null,r,qr.default.SDK_VERSION||null,null,null,this.T(),this.R));var o=pr(i,n&&n.va,n&&n.ua);return vh(this,n=uh(this).then(function(n){return Mc(n,o,"signInViaPopup",e,r,!!i,t.T())}).then(function(){return new _t(function(e,n){t.na("signInViaPopup",null,new k("cancelled-popup-request"),t.g),t.f=e,t.C=n,t.g=r,t.c=qc(t.b,t,"signInViaPopup",o,r)})}).then(function(e){return o&&dr(o),e?Jr(e):null}).o(function(e){throw o&&dr(o),e}))},e.Yc=function(e){if(!Dr())return St(new k("operation-not-supported-in-this-environment"));var t=this;return vh(this,uh(this).then(function(){return function(e){return rh(e,function(){return e.b.set(Zl,e.c.F,e.a)})}(t.i)}).then(function(){return jc(t.b,"signInViaRedirect",e,void 0,t.T())}))},e.ra=function(){var e=this;return ch(this).then(function(t){return e.b&&Kc(e.b.b),t}).o(function(t){throw e.b&&Kc(e.b.b),t})},e.dd=function(e){if(!e)return St(new k("null-user"));if(this.S!=e.tenantId)return St(new k("tenant-id-mismatch"));var t=this,n={};n.apiKey=fh(this).options.apiKey,n.authDomain=fh(this).options.authDomain,n.appName=fh(this).name;var r=function(e,t,n,r){var i=e.h,o={};return o[Xs]=i.b&&i.b.toString(),o.refreshToken=i.a,t=new ml(t||{apiKey:e.l,authDomain:e.s,appName:e.m},o),n&&(t.ha=n),r&&wl(t,r),Ml(t,e),t}(e,n,t.D,t.Ga());return vh(this,this.h.then(function(){if(fh(t).options.apiKey!=e.l)return r.reload()}).then(function(){return dh(t)&&e.uid==dh(t).uid?(Ml(dh(t),e),t.da(e)):(lh(t,r),Al(r),t.da(r))}).then(function(){gh(t)}))},e.Bb=function(){var e=this;return vh(this,this.h.then(function(){return e.b&&Kc(e.b.b),dh(e)?(lh(e,null),th(e.i).then(function(){gh(e)})):Ct()}))},e.Zc=function(){var e=this;return nh(this.i,fh(this).options.authDomain).then(function(t){if(!e.l){var n;if(n=dh(e)&&t){n=dh(e).uid;var r=t.uid;n=null!=n&&""!==n&&null!=r&&""!==r&&n==r}if(n)return Ml(dh(e),t),dh(e).I();(dh(e)||t)&&(lh(e,t),t&&(Al(t),t.ha=e.D),e.b&&Pc(e.b,e),gh(e))}})},e.da=function(e){return eh(this.i,e)},e.mc=function(){gh(this),this.da(dh(this))},e.wc=function(){this.Bb()},e.xc=function(){this.Bb()},e.kc=function(e){var t=this;return this.h.then(function(){return hh(t,Ct(e))})},e.zc=function(e){var t=this;this.addAuthTokenListener(function(){e.next(dh(t))})},e.Ac=function(e){var t=this;!function(e,t){e.N.push(t),vh(e,e.h.then(function(){!e.l&&G(e.N,t)&&e.W!==e.getUid()&&(e.W=e.getUid(),t(ph(e)))}))}(this,function(){e.next(dh(t))})},e.Ic=function(e,t,n){var r=this;return this.ba&&Promise.resolve().then(function(){"function"==typeof e?e(dh(r)):"function"==typeof e.next&&e.next(dh(r))}),this.Pa(e,t,n)},e.Hc=function(e,t,n){var r=this;return this.ba&&Promise.resolve().then(function(){r.W=r.getUid(),"function"==typeof e?e(dh(r)):"function"==typeof e.next&&e.next(dh(r))}),this.ib(e,t,n)},e.nc=function(e){var t=this;return vh(this,this.h.then(function(){return dh(t)?dh(t).I(e).then(function(e){return{accessToken:e}}):null}))},e.Tc=function(e){var t=this;return this.h.then(function(){return hh(t,nu(t.a,Ya,{token:e}))}).then(function(e){var n=e.user;return Ll(n,"isAnonymous",!1),t.da(n),e})},e.Uc=function(e,t){var n=this;return this.h.then(function(){return hh(n,nu(n.a,Xa,{email:e,password:t}))})},e.dc=function(e,t){var n=this;return this.h.then(function(){return hh(n,nu(n.a,ka,{email:e,password:t}))})},e.ab=function(e){var t=this;return this.h.then(function(){return hh(t,e.ka(t.a))})},e.Sc=function(e){return Qr("firebase.auth.Auth.prototype.signInAndRetrieveDataWithCredential is deprecated. Please use firebase.auth.Auth.prototype.signInWithCredential instead."),this.ab(e)},e.Ab=function(){var e=this;return this.h.then(function(){var t=dh(e);if(t&&t.isAnonymous){var n=Jr({providerId:null,isNewUser:!1});return Jr({user:t,credential:null,additionalUserInfo:n,operationType:"signIn"})}return hh(e,e.a.Ab()).then(function(t){var n=t.user;return Ll(n,"isAnonymous",!0),e.da(n),t})})},e.getUid=function(){return dh(this)&&dh(this).uid||null},e.cc=function(e){this.addAuthTokenListener(e),this.u++,0<this.u&&dh(this)&&Il(dh(this))},e.Pc=function(e){var t=this;H(this.s,function(n){n==e&&t.u--}),0>this.u&&(this.u=0),0==this.u&&dh(this)&&kl(dh(this)),this.removeAuthTokenListener(e)},e.addAuthTokenListener=function(e){var t=this;this.s.push(e),vh(this,this.h.then(function(){t.l||G(t.s,e)&&e(ph(t))}))},e.removeAuthTokenListener=function(e){$(this.s,function(t){return t==e})},e.delete=function(){this.l=!0;for(var e=0;e<this.P.length;e++)this.P[e].cancel("app-deleted");return this.P=[],this.i&&(e=this.i).b.removeListener(Jl("local"),e.a,this.ja),this.b&&(Oc(this.b,this),Kc(this.b.b)),Promise.resolve()},e.hc=function(e){return vh(this,function(e,t){return nu(e,Ca,{identifier:t,continueUri:Pr()?cr():"http://localhost"}).then(function(e){return e.signinMethods||[]})}(this.a,e))},e.Bc=function(e){return!!Oo(e)},e.xb=function(e,t){var n=this;return vh(this,Ct().then(function(){var e=new Di(t);if(!e.c)throw new k("argument-error",Ri+" must be true when sending sign in link to email");return Vi(e)}).then(function(t){return n.a.xb(e,t)}).then(function(){}))},e.jd=function(e){return this.Sa(e).then(function(e){return e.data.email})},e.ob=function(e,t){return vh(this,this.a.ob(e,t).then(function(){}))},e.Sa=function(e){return vh(this,this.a.Sa(e).then(function(e){return new ui(e)}))},e.kb=function(e){return vh(this,this.a.kb(e).then(function(){}))},e.wb=function(e,t){var n=this;return vh(this,Ct().then(function(){return void 0===t||de(t)?{}:Vi(new Di(t))}).then(function(t){return n.a.wb(e,t)}).then(function(){}))},e.Wc=function(e,t){return vh(this,Xc(this,e,t,b(this.ab,this)))},e.Vc=function(e,t){var n=this;return vh(this,Ct().then(function(){var r=t||cr(),i=Po(e,r);if(!(r=Oo(r)))throw new k("argument-error","Invalid email link!");if(r.tenantId!==n.T())throw new k("tenant-id-mismatch");return n.ab(i)}))},mh.prototype.render=function(){},mh.prototype.reset=function(){},mh.prototype.getResponse=function(){},mh.prototype.execute=function(){};var _h=null;function bh(e,t){return(t=wh(t))&&e.a[t]||null}function wh(e){return(e=void 0===e?1e12:e)?e.toString():null}function Th(e,t){this.g=!1,this.c=t,this.a=this.b=null,this.h="invisible"!==this.c.size,this.f=at(e);var n=this;this.i=function(){n.execute()},this.h?this.execute():un(this.f,"click",this.i)}function Eh(e){if(e.g)throw Error("reCAPTCHA mock was already deleted!")}function Ih(){}function kh(){}yh.prototype.render=function(e,t){return this.a[this.b.toString()]=new Th(e,t),this.b++},yh.prototype.reset=function(e){var t=bh(this,e);e=wh(e),t&&e&&(t.delete(),delete this.a[e])},yh.prototype.getResponse=function(e){return(e=bh(this,e))?e.getResponse():null},yh.prototype.execute=function(e){(e=bh(this,e))&&e.execute()},Th.prototype.getResponse=function(){return Eh(this),this.b},Th.prototype.execute=function(){Eh(this);var e=this;this.a||(this.a=setTimeout(function(){e.b=function(){for(var e=50,t=[];0<e;)t.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),e--;return t.join("")}();var t=e.c.callback,n=e.c["expired-callback"];if(t)try{t(e.b)}catch(r){}e.a=setTimeout(function(){if(e.a=null,e.b=null,n)try{n()}catch(r){}e.h&&e.execute()},6e4)},500))},Th.prototype.delete=function(){Eh(this),this.g=!0,clearTimeout(this.a),this.a=null,hn(this.f,"click",this.i)},Yr(Ih,"FACTOR_ID","phone"),kh.prototype.g=function(){return _h||(_h=new yh),Ct(_h)},kh.prototype.c=function(){};var Ch=null;function Sh(){this.b=s.grecaptcha?1/0:0,this.f=null,this.a="__rcb"+Math.floor(1e6*Math.random()).toString()}var Ah=new ye(Te,"https://www.google.com/recaptcha/api.js?onload=%{onload}&render=explicit&hl=%{hl}"),xh=new Br(3e4,6e4);Sh.prototype.g=function(e){var t=this;return new _t(function(n,r){var i=setTimeout(function(){r(new k("network-request-failed"))},xh.get());!s.grecaptcha||e!==t.f&&!t.b?(s[t.a]=function(){if(s.grecaptcha){t.f=e;var o=s.grecaptcha.render;s.grecaptcha.render=function(e,n){return e=o(e,n),t.b++,e},clearTimeout(i),n(s.grecaptcha)}else clearTimeout(i),r(new k("internal-error"));delete s[t.a]},Ct(Bs(Ce(Ah,{onload:t.a,hl:e||""}))).o(function(){clearTimeout(i),r(new k("internal-error","Unable to load external reCAPTCHA dependencies!"))})):(clearTimeout(i),n(s.grecaptcha))})},Sh.prototype.c=function(){this.b--};var Nh=null;function Dh(e,t,n,r,i,o,a){if(Yr(this,"type","recaptcha"),this.c=this.f=null,this.J=!1,this.v=t,this.g=null,a?(Ch||(Ch=new kh),a=Ch):(Nh||(Nh=new Sh),a=Nh),this.m=a,this.a=n||{theme:"light",type:"image"},this.h=[],this.a[Rh])throw new k("argument-error","sitekey should not be provided for reCAPTCHA as one is automatically provisioned for the current project.");if(this.i="invisible"===this.a[Lh],!s.document)throw new k("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment with DOM support.");if(!at(t)||!this.i&&at(t).hasChildNodes())throw new k("argument-error","reCAPTCHA container is either not found or already contains inner elements!");this.s=new $s(e,o||null,i||null),this.u=r||function(){return null};var u=this;this.l=[];var c=this.a[Ph];this.a[Ph]=function(e){if(Mh(u,e),"function"==typeof c)c(e);else if("string"==typeof c){var t=xr(c,s);"function"==typeof t&&t(e)}};var l=this.a[Oh];this.a[Oh]=function(){if(Mh(u,null),"function"==typeof l)l();else if("string"==typeof l){var e=xr(l,s);"function"==typeof e&&e()}}}var Ph="callback",Oh="expired-callback",Rh="sitekey",Lh="size";function Mh(e,t){for(var n=0;n<e.l.length;n++)try{e.l[n](t)}catch(r){}}function Fh(e,t){return e.h.push(t),t.oa(function(){Q(e.h,t)}),t}function jh(e){if(e.J)throw new k("internal-error","RecaptchaVerifier instance has been destroyed.")}function qh(e,t,n){var r=!1;try{this.b=n||qr.default.app()}catch(s){throw new k("argument-error","No firebase.app.App instance is currently initialized.")}if(!this.b.options||!this.b.options.apiKey)throw new k("invalid-api-key");n=this.b.options.apiKey;var i=this,o=null;try{o=this.b.auth().Ga()}catch(s){}try{r=this.b.auth().settings.appVerificationDisabledForTesting}catch(s){}o=qr.default.SDK_VERSION?Sr(qr.default.SDK_VERSION,o):null,Dh.call(this,n,e,t,function(){try{var e=i.b.auth().la()}catch(t){e=null}return e},o,D(S),r)}function Uh(e,t,n,r){e:{n=Array.prototype.slice.call(n);for(var i=0,o=!1,s=0;s<t.length;s++)if(t[s].optional)o=!0;else{if(o)throw new k("internal-error","Argument validator encountered a required argument after an optional argument.");i++}if(o=t.length,n.length<i||o<n.length)r="Expected "+(i==o?1==i?"1 argument":i+" arguments":i+"-"+o+" arguments")+" but got "+n.length+".";else{for(i=0;i<n.length;i++)if(o=t[i].optional&&void 0===n[i],!t[i].M(n[i])&&!o){if(t=t[i],0>i||i>=Vh.length)throw new k("internal-error","Argument validator received an unsupported number of arguments.");n=Vh[i],r=(r?"":n+" argument ")+(t.name?'"'+t.name+'" ':"")+"must be "+t.K+".";break e}r=null}}if(r)throw new k("argument-error",e+" failed: "+r)}(e=Dh.prototype).Ia=function(){var e=this;return this.f?this.f:this.f=Fh(this,Ct().then(function(){if(Pr()&&!br())return mr();throw new k("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment.")}).then(function(){return e.m.g(e.u())}).then(function(t){return e.g=t,nu(e.s,qa,{})}).then(function(t){e.a[Rh]=t.recaptchaSiteKey}).o(function(t){throw e.f=null,t}))},e.render=function(){jh(this);var e=this;return Fh(this,this.Ia().then(function(){if(null===e.c){var t=e.v;if(!e.i){var n=at(t);t=function(e,t,n){var r=arguments,i=document,o=String(r[0]),s=r[1];if(!st&&s&&(s.name||s.type)){if(o=["<",o],s.name&&o.push(' name="',He(s.name),'"'),s.type){o.push(' type="',He(s.type),'"');var a={};ve(a,s),delete a.type,s=a}o.push(">"),o=o.join("")}return o=dt(i,o),s&&("string"==typeof s?o.className=s:Array.isArray(s)?o.className=s.join(" "):ut(o,s)),2<r.length&&ft(i,o,r),o}("DIV"),n.appendChild(t)}e.c=e.g.render(t,e.a)}return e.c}))},e.verify=function(){jh(this);var e=this;return Fh(this,this.render().then(function(t){return new _t(function(n){var r=e.g.getResponse(t);if(r)n(r);else{var i=function(t){t&&(function(e,t){$(e.l,function(e){return e==t})}(e,i),n(t))};e.l.push(i),e.i&&e.g.execute(e.c)}})}))},e.reset=function(){jh(this),null!==this.c&&this.g.reset(this.c)},e.clear=function(){jh(this),this.J=!0,this.m.c();for(var e=0;e<this.h.length;e++)this.h[e].cancel("RecaptchaVerifier instance has been destroyed.");if(!this.i){e=at(this.v);for(var t;t=e.firstChild;)e.removeChild(t)}},E(qh,Dh);var Vh="First Second Third Fourth Fifth Sixth Seventh Eighth Ninth".split(" ");function Bh(e,t){return{name:e||"",K:"a valid string",optional:!!t,M:function(e){return"string"==typeof e}}}function Hh(e,t){return{name:e||"",K:"a boolean",optional:!!t,M:function(e){return"boolean"==typeof e}}}function Wh(e,t){return{name:e||"",K:"a valid object",optional:!!t,M:p}}function Kh(e,t){return{name:e||"",K:"a function",optional:!!t,M:function(e){return"function"==typeof e}}}function zh(e,t){return{name:e||"",K:"null",optional:!!t,M:function(e){return null===e}}}function Gh(e){return{name:e?e+"Credential":"credential",K:e?"a valid "+e+" credential":"a valid credential",optional:!1,M:function(t){return!!t&&!(!t.ka||e&&t.providerId!==e)}}}function Qh(e,t){return p(e)&&"string"==typeof e.type&&e.type===t&&"function"==typeof e.Ha}function $h(e){return p(e)&&"string"==typeof e.uid}function Yh(e,t,n,r){return{name:n||"",K:e.K+" or "+t.K,optional:!!r,M:function(n){return e.M(n)||t.M(n)}}}function Xh(e,t){for(var n in t){var r=t[n].name;e[r]=ef(r,e[n],t[n].j)}}function Zh(e,t){for(var n in t){var r=t[n].name;r!==n&&Object.defineProperty(e,r,{get:w(function(e){return this[e]},n),set:w(function(e,t,n,r){Uh(e,[n],[r],!0),this[t]=r},r,n,t[n].lb),enumerable:!0})}}function Jh(e,t,n,r){e[t]=ef(t,n,r)}function ef(e,t,n){function r(){var e=Array.prototype.slice.call(arguments);return Uh(o,n,e),t.apply(this,e)}if(!n)return t;var i,o=function(e){return(e=e.split("."))[e.length-1]}(e);for(i in t)r[i]=t[i];for(i in t.prototype)r.prototype[i]=t.prototype[i];return r}Xh(ih.prototype,{kb:{name:"applyActionCode",j:[Bh("code")]},Sa:{name:"checkActionCode",j:[Bh("code")]},ob:{name:"confirmPasswordReset",j:[Bh("code"),Bh("newPassword")]},dc:{name:"createUserWithEmailAndPassword",j:[Bh("email"),Bh("password")]},hc:{name:"fetchSignInMethodsForEmail",j:[Bh("email")]},ra:{name:"getRedirectResult",j:[]},Bc:{name:"isSignInWithEmailLink",j:[Bh("emailLink")]},Hc:{name:"onAuthStateChanged",j:[Yh(Wh(),Kh(),"nextOrObserver"),Kh("opt_error",!0),Kh("opt_completed",!0)]},Ic:{name:"onIdTokenChanged",j:[Yh(Wh(),Kh(),"nextOrObserver"),Kh("opt_error",!0),Kh("opt_completed",!0)]},wb:{name:"sendPasswordResetEmail",j:[Bh("email"),Yh(Wh("opt_actionCodeSettings",!0),zh(null,!0),"opt_actionCodeSettings",!0)]},xb:{name:"sendSignInLinkToEmail",j:[Bh("email"),Wh("actionCodeSettings")]},yb:{name:"setPersistence",j:[Bh("persistence")]},Sc:{name:"signInAndRetrieveDataWithCredential",j:[Gh()]},Ab:{name:"signInAnonymously",j:[]},ab:{name:"signInWithCredential",j:[Gh()]},Tc:{name:"signInWithCustomToken",j:[Bh("token")]},Uc:{name:"signInWithEmailAndPassword",j:[Bh("email"),Bh("password")]},Vc:{name:"signInWithEmailLink",j:[Bh("email"),Bh("emailLink",!0)]},Wc:{name:"signInWithPhoneNumber",j:[Bh("phoneNumber"),{name:"applicationVerifier",K:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,M:function(e){return!(!e||"string"!=typeof e.type||"function"!=typeof e.verify)}}]},Xc:{name:"signInWithPopup",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(e){return!!(e&&e.providerId&&e.hasOwnProperty&&e.hasOwnProperty("isOAuthProvider"))}}]},Yc:{name:"signInWithRedirect",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(e){return!!(e&&e.providerId&&e.hasOwnProperty&&e.hasOwnProperty("isOAuthProvider"))}}]},dd:{name:"updateCurrentUser",j:[Yh({name:"user",K:"an instance of Firebase User",optional:!1,M:function(e){return!!(e&&e instanceof ml)}},zh(),"user")]},Bb:{name:"signOut",j:[]},toJSON:{name:"toJSON",j:[Bh(null,!0)]},fd:{name:"useDeviceLanguage",j:[]},gd:{name:"useEmulator",j:[Bh("url"),Wh("options",!0)]},jd:{name:"verifyPasswordResetCode",j:[Bh("code")]}}),Zh(ih.prototype,{lc:{name:"languageCode",lb:Yh(Bh(),zh(),"languageCode")},ti:{name:"tenantId",lb:Yh(Bh(),zh(),"tenantId")}}),(ih.Persistence=Zu).LOCAL="local",ih.Persistence.SESSION="session",ih.Persistence.NONE="none",Xh(ml.prototype,{delete:{name:"delete",j:[]},oc:{name:"getIdTokenResult",j:[Hh("opt_forceRefresh",!0)]},I:{name:"getIdToken",j:[Hh("opt_forceRefresh",!0)]},Cc:{name:"linkAndRetrieveDataWithCredential",j:[Gh()]},rb:{name:"linkWithCredential",j:[Gh()]},Dc:{name:"linkWithPhoneNumber",j:[Bh("phoneNumber"),{name:"applicationVerifier",K:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,M:function(e){return!(!e||"string"!=typeof e.type||"function"!=typeof e.verify)}}]},Ec:{name:"linkWithPopup",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(e){return!!(e&&e.providerId&&e.hasOwnProperty&&e.hasOwnProperty("isOAuthProvider"))}}]},Fc:{name:"linkWithRedirect",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(e){return!!(e&&e.providerId&&e.hasOwnProperty&&e.hasOwnProperty("isOAuthProvider"))}}]},Lc:{name:"reauthenticateAndRetrieveDataWithCredential",j:[Gh()]},ub:{name:"reauthenticateWithCredential",j:[Gh()]},Mc:{name:"reauthenticateWithPhoneNumber",j:[Bh("phoneNumber"),{name:"applicationVerifier",K:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,M:function(e){return!(!e||"string"!=typeof e.type||"function"!=typeof e.verify)}}]},Nc:{name:"reauthenticateWithPopup",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(e){return!!(e&&e.providerId&&e.hasOwnProperty&&e.hasOwnProperty("isOAuthProvider"))}}]},Oc:{name:"reauthenticateWithRedirect",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(e){return!!(e&&e.providerId&&e.hasOwnProperty&&e.hasOwnProperty("isOAuthProvider"))}}]},reload:{name:"reload",j:[]},vb:{name:"sendEmailVerification",j:[Yh(Wh("opt_actionCodeSettings",!0),zh(null,!0),"opt_actionCodeSettings",!0)]},toJSON:{name:"toJSON",j:[Bh(null,!0)]},cd:{name:"unlink",j:[Bh("provider")]},Cb:{name:"updateEmail",j:[Bh("email")]},Db:{name:"updatePassword",j:[Bh("password")]},ed:{name:"updatePhoneNumber",j:[Gh("phone")]},Eb:{name:"updateProfile",j:[Wh("profile")]},Fb:{name:"verifyBeforeUpdateEmail",j:[Bh("email"),Yh(Wh("opt_actionCodeSettings",!0),zh(null,!0),"opt_actionCodeSettings",!0)]}}),Xh(yh.prototype,{execute:{name:"execute"},render:{name:"render"},reset:{name:"reset"},getResponse:{name:"getResponse"}}),Xh(mh.prototype,{execute:{name:"execute"},render:{name:"render"},reset:{name:"reset"},getResponse:{name:"getResponse"}}),Xh(_t.prototype,{oa:{name:"finally"},o:{name:"catch"},then:{name:"then"}}),Zh($c.prototype,{appVerificationDisabled:{name:"appVerificationDisabledForTesting",lb:Hh("appVerificationDisabledForTesting")}}),Xh(Yc.prototype,{confirm:{name:"confirm",j:[Bh("verificationCode")]}}),Jh(co,"fromJSON",function(e){e="string"==typeof e?JSON.parse(e):e;for(var t,n=[mo,No,Lo,po],r=0;r<n.length;r++)if(t=n[r](e))return t;return null},[Yh(Bh(),Wh(),"json")]),Jh(Do,"credential",function(e,t){return new xo(e,t)},[Bh("email"),Bh("password")]),Xh(xo.prototype,{w:{name:"toJSON",j:[Bh(null,!0)]}}),Xh(wo.prototype,{Ca:{name:"addScope",j:[Bh("scope")]},Ka:{name:"setCustomParameters",j:[Wh("customOAuthParameters")]}}),Jh(wo,"credential",To,[Yh(Bh(),Wh(),"token")]),Jh(Do,"credentialWithLink",Po,[Bh("email"),Bh("emailLink")]),Xh(Eo.prototype,{Ca:{name:"addScope",j:[Bh("scope")]},Ka:{name:"setCustomParameters",j:[Wh("customOAuthParameters")]}}),Jh(Eo,"credential",Io,[Yh(Bh(),Wh(),"token")]),Xh(ko.prototype,{Ca:{name:"addScope",j:[Bh("scope")]},Ka:{name:"setCustomParameters",j:[Wh("customOAuthParameters")]}}),Jh(ko,"credential",Co,[Yh(Bh(),Yh(Wh(),zh()),"idToken"),Yh(Bh(),zh(),"accessToken",!0)]),Xh(So.prototype,{Ka:{name:"setCustomParameters",j:[Wh("customOAuthParameters")]}}),Jh(So,"credential",Ao,[Yh(Bh(),Wh(),"token"),Bh("secret",!0)]),Xh(bo.prototype,{Ca:{name:"addScope",j:[Bh("scope")]},credential:{name:"credential",j:[Yh(Bh(),Yh(Wh(),zh()),"optionsOrIdToken"),Yh(Bh(),zh(),"accessToken",!0)]},Ka:{name:"setCustomParameters",j:[Wh("customOAuthParameters")]}}),Xh(go.prototype,{w:{name:"toJSON",j:[Bh(null,!0)]}}),Xh(ho.prototype,{w:{name:"toJSON",j:[Bh(null,!0)]}}),Jh(Fo,"credential",jo,[Bh("verificationId"),Bh("verificationCode")]),Xh(Fo.prototype,{gb:{name:"verifyPhoneNumber",j:[Yh(Bh(),{name:"phoneInfoOptions",K:"valid phone info options",optional:!1,M:function(e){return!!e&&(e.session&&e.phoneNumber?Qh(e.session,ao)&&"string"==typeof e.phoneNumber:e.session&&e.multiFactorHint?Qh(e.session,uo)&&$h(e.multiFactorHint):e.session&&e.multiFactorUid?Qh(e.session,uo)&&"string"==typeof e.multiFactorUid:!!e.phoneNumber&&"string"==typeof e.phoneNumber)}},"phoneInfoOptions"),{name:"applicationVerifier",K:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,M:function(e){return!(!e||"string"!=typeof e.type||"function"!=typeof e.verify)}}]}}),Xh(Ro.prototype,{w:{name:"toJSON",j:[Bh(null,!0)]}}),Xh(k.prototype,{toJSON:{name:"toJSON",j:[Bh(null,!0)]}}),Xh(Go.prototype,{toJSON:{name:"toJSON",j:[Bh(null,!0)]}}),Xh(zo.prototype,{toJSON:{name:"toJSON",j:[Bh(null,!0)]}}),Xh(nl.prototype,{toJSON:{name:"toJSON",j:[Bh(null,!0)]}}),Xh(Jc.prototype,{Rc:{name:"resolveSignIn",j:[{name:"multiFactorAssertion",K:"a valid multiFactorAssertion",optional:!1,M:function(e){return!!e&&!!e.tb}}]}}),Xh(ul.prototype,{Sb:{name:"getSession",j:[]},fc:{name:"enroll",j:[{name:"multiFactorAssertion",K:"a valid multiFactorAssertion",optional:!1,M:function(e){return!!e&&!!e.tb}},Bh("displayName",!0)]},bd:{name:"unenroll",j:[Yh({name:"multiFactorInfo",K:"a valid multiFactorInfo",optional:!1,M:$h},Bh(),"multiFactorInfoIdentifier")]}}),Xh(qh.prototype,{clear:{name:"clear",j:[]},render:{name:"render",j:[]},verify:{name:"verify",j:[]}}),Jh(Ti,"parseLink",Ni,[Bh("link")]),Jh(Ih,"assertion",function(e){return new sl(e)},[Gh("phone")]),function(){if(void 0===qr.default||!qr.default.INTERNAL||!qr.default.INTERNAL.registerComponent)throw Error("Cannot find the firebase namespace; be sure to include firebase-app.js before this library.");var e={ActionCodeInfo:{Operation:{EMAIL_SIGNIN:li,PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:ci,VERIFY_AND_CHANGE_EMAIL:hi,VERIFY_EMAIL:"VERIFY_EMAIL"}},Auth:ih,AuthCredential:co,Error:k};Jh(e,"EmailAuthProvider",Do,[]),Jh(e,"FacebookAuthProvider",wo,[]),Jh(e,"GithubAuthProvider",Eo,[]),Jh(e,"GoogleAuthProvider",ko,[]),Jh(e,"TwitterAuthProvider",So,[]),Jh(e,"OAuthProvider",bo,[Bh("providerId")]),Jh(e,"SAMLAuthProvider",_o,[Bh("providerId")]),Jh(e,"PhoneAuthProvider",Fo,[{name:"auth",K:"an instance of Firebase Auth",optional:!0,M:function(e){return!!(e&&e instanceof ih)}}]),Jh(e,"RecaptchaVerifier",qh,[Yh(Bh(),{name:"",K:"an HTML element",optional:!1,M:function(e){return!!(e&&e instanceof Element)}},"recaptchaContainer"),Wh("recaptchaParameters",!0),{name:"app",K:"an instance of Firebase App",optional:!0,M:function(e){return!!(e&&e instanceof qr.default.app.App)}}]),Jh(e,"ActionCodeURL",Ti,[]),Jh(e,"PhoneMultiFactorGenerator",Ih,[]),qr.default.INTERNAL.registerComponent({name:"auth",instanceFactory:function(e){return new ih(e=e.getProvider("app").getImmediate())},multipleInstances:!1,serviceProps:e,instantiationMode:"LAZY",type:"PUBLIC",onInstanceCreated:function(e){e.getProvider("auth-internal").initialize()}}),qr.default.INTERNAL.registerComponent({name:"auth-internal",instanceFactory:function(e){return{getUid:b((e=e.getProvider("auth").getImmediate()).getUid,e),getToken:b(e.nc,e),addAuthTokenListener:b(e.cc,e),removeAuthTokenListener:b(e.Pc,e)}},multipleInstances:!1,instantiationMode:"LAZY",type:"PRIVATE"}),qr.default.registerVersion("@firebase/auth","0.16.8"),qr.default.INTERNAL.extendNamespace({User:ml})}()}).apply("undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{}),n(192);var Ur=n(762),Vr=n(685),Br=n(300),Hr=function(e,t){return(Hr=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)};function Wr(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}var Kr,zr="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},Gr=Gr||{},Qr=zr||self;function $r(){}function Yr(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function Xr(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}var Zr="closure_uid_"+(1e9*Math.random()>>>0),Jr=0;function ei(e,t,n){return e.call.apply(e.bind,arguments)}function ti(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function ni(e,t,n){return(ni=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?ei:ti).apply(null,arguments)}function ri(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function ii(e,t){function n(){}n.prototype=t.prototype,e.Z=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Vb=function(e,n,r){for(var i=Array(arguments.length-2),o=2;o<arguments.length;o++)i[o-2]=arguments[o];return t.prototype[n].apply(e,i)}}function oi(){this.s=this.s,this.o=this.o}var si={};oi.prototype.s=!1,oi.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var e=function(e){return Object.prototype.hasOwnProperty.call(e,Zr)&&e[Zr]||(e[Zr]=++Jr)}(this);delete si[e]}},oi.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};var ai=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if("string"==typeof e)return"string"!=typeof t||1!=t.length?-1:e.indexOf(t,0);for(var n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1},ui=Array.prototype.forEach?function(e,t,n){Array.prototype.forEach.call(e,t,n)}:function(e,t,n){for(var r=e.length,i="string"==typeof e?e.split(""):e,o=0;o<r;o++)o in i&&t.call(n,i[o],o,e)};function ci(e){return Array.prototype.concat.apply([],arguments)}function li(e){var t=e.length;if(0<t){for(var n=Array(t),r=0;r<t;r++)n[r]=e[r];return n}return[]}function hi(e){return/^[\s\xa0]*$/.test(e)}var fi,di=String.prototype.trim?function(e){return e.trim()}:function(e){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(e)[1]};function pi(e,t){return-1!=e.indexOf(t)}function gi(e,t){return e<t?-1:e>t?1:0}e:{var vi=Qr.navigator;if(vi){var mi=vi.userAgent;if(mi){fi=mi;break e}}fi=""}function yi(e,t,n){for(var r in e)t.call(n,e[r],r,e)}function _i(e){var t={};for(var n in e)t[n]=e[n];return t}var bi="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function wi(e,t){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])e[n]=r[n];for(var o=0;o<bi.length;o++)n=bi[o],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function Ti(e){return Ti[" "](e),e}Ti[" "]=$r;var Ei,Ii,ki=pi(fi,"Opera"),Ci=pi(fi,"Trident")||pi(fi,"MSIE"),Si=pi(fi,"Edge"),Ai=Si||Ci,xi=pi(fi,"Gecko")&&!(pi(fi.toLowerCase(),"webkit")&&!pi(fi,"Edge"))&&!(pi(fi,"Trident")||pi(fi,"MSIE"))&&!pi(fi,"Edge"),Ni=pi(fi.toLowerCase(),"webkit")&&!pi(fi,"Edge");function Di(){var e=Qr.document;return e?e.documentMode:void 0}e:{var Pi="",Oi=(Ii=fi,xi?/rv:([^\);]+)(\)|;)/.exec(Ii):Si?/Edge\/([\d\.]+)/.exec(Ii):Ci?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(Ii):Ni?/WebKit\/(\S+)/.exec(Ii):ki?/(?:Version)[ \/]?(\S+)/.exec(Ii):void 0);if(Oi&&(Pi=Oi?Oi[1]:""),Ci){var Ri=Di();if(null!=Ri&&Ri>parseFloat(Pi)){Ei=String(Ri);break e}}Ei=Pi}var Li={};var Mi=Qr.document&&Ci&&(Di()||parseInt(Ei,10))||void 0,Fi=function(){if(!Qr.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{Qr.addEventListener("test",$r,t),Qr.removeEventListener("test",$r,t)}catch(n){}return e}();function ji(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}function qi(e,t){if(ji.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(xi){e:{try{Ti(t.nodeName);var i=!0;break e}catch(o){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"==typeof e.pointerType?e.pointerType:Ui[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&qi.Z.h.call(this)}}ji.prototype.h=function(){this.defaultPrevented=!0},ii(qi,ji);var Ui={2:"touch",3:"pen",4:"mouse"};qi.prototype.h=function(){qi.Z.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var Vi="closure_listenable_"+(1e6*Math.random()|0),Bi=0;function Hi(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.ia=i,this.key=++Bi,this.ca=this.fa=!1}function Wi(e){e.ca=!0,e.listener=null,e.proxy=null,e.src=null,e.ia=null}function Ki(e){this.src=e,this.g={},this.h=0}function zi(e,t){var n=t.type;if(n in e.g){var r,i=e.g[n],o=ai(i,t);(r=0<=o)&&Array.prototype.splice.call(i,o,1),r&&(Wi(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function Gi(e,t,n,r){for(var i=0;i<e.length;++i){var o=e[i];if(!o.ca&&o.listener==t&&o.capture==!!n&&o.ia==r)return i}return-1}Ki.prototype.add=function(e,t,n,r,i){var o=e.toString();(e=this.g[o])||(e=this.g[o]=[],this.h++);var s=Gi(e,t,r,i);return-1<s?(t=e[s],n||(t.fa=!1)):((t=new Hi(t,this.src,o,!!r,i)).fa=n,e.push(t)),t};var Qi="closure_lm_"+(1e6*Math.random()|0),$i={};function Yi(e,t,n,r,i){if(r&&r.once)return Zi(e,t,n,r,i);if(Array.isArray(t)){for(var o=0;o<t.length;o++)Yi(e,t[o],n,r,i);return null}return n=oo(n),e&&e[Vi]?e.N(t,n,Xr(r)?!!r.capture:!!r,i):Xi(e,t,n,!1,r,i)}function Xi(e,t,n,r,i,o){if(!t)throw Error("Invalid event type");var s=Xr(i)?!!i.capture:!!i,a=ro(e);if(a||(e[Qi]=a=new Ki(e)),(n=a.add(t,n,r,s,o)).proxy)return n;if(r=function(){var e=no;return function t(n){return e.call(t.src,t.listener,n)}}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)Fi||(i=s),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(to(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function Zi(e,t,n,r,i){if(Array.isArray(t)){for(var o=0;o<t.length;o++)Zi(e,t[o],n,r,i);return null}return n=oo(n),e&&e[Vi]?e.O(t,n,Xr(r)?!!r.capture:!!r,i):Xi(e,t,n,!0,r,i)}function Ji(e,t,n,r,i){if(Array.isArray(t))for(var o=0;o<t.length;o++)Ji(e,t[o],n,r,i);else r=Xr(r)?!!r.capture:!!r,n=oo(n),e&&e[Vi]?(e=e.i,(t=String(t).toString())in e.g&&-1<(n=Gi(o=e.g[t],n,r,i))&&(Wi(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete e.g[t],e.h--))):e&&(e=ro(e))&&(t=e.g[t.toString()],e=-1,t&&(e=Gi(t,n,r,i)),(n=-1<e?t[e]:null)&&eo(n))}function eo(e){if("number"!=typeof e&&e&&!e.ca){var t=e.src;if(t&&t[Vi])zi(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(to(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=ro(t))?(zi(n,e),0==n.h&&(n.src=null,t[Qi]=null)):Wi(e)}}}function to(e){return e in $i?$i[e]:$i[e]="on"+e}function no(e,t){if(e.ca)e=!0;else{t=new qi(t,this);var n=e.listener,r=e.ia||e.src;e.fa&&eo(e),e=n.call(r,t)}return e}function ro(e){return(e=e[Qi])instanceof Ki?e:null}var io="__closure_events_fn_"+(1e9*Math.random()>>>0);function oo(e){return"function"==typeof e?e:(e[io]||(e[io]=function(t){return e.handleEvent(t)}),e[io])}function so(){oi.call(this),this.i=new Ki(this),this.P=this,this.I=null}function ao(e,t){var n,r=e.I;if(r)for(n=[];r;r=r.I)n.push(r);if(e=e.P,r=t.type||t,"string"==typeof t)t=new ji(t,e);else if(t instanceof ji)t.target=t.target||e;else{var i=t;wi(t=new ji(r,e),i)}if(i=!0,n)for(var o=n.length-1;0<=o;o--){var s=t.g=n[o];i=uo(s,r,!0,t)&&i}if(i=uo(s=t.g=e,r,!0,t)&&i,i=uo(s,r,!1,t)&&i,n)for(o=0;o<n.length;o++)i=uo(s=t.g=n[o],r,!1,t)&&i}function uo(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,o=0;o<t.length;++o){var s=t[o];if(s&&!s.ca&&s.capture==n){var a=s.listener,u=s.ia||s.src;s.fa&&zi(e.i,s),i=!1!==a.call(u,r)&&i}}return i&&!r.defaultPrevented}ii(so,oi),so.prototype[Vi]=!0,so.prototype.removeEventListener=function(e,t,n,r){Ji(this,e,t,n,r)},so.prototype.M=function(){if(so.Z.M.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)Wi(n[r]);delete t.g[e],t.h--}}this.I=null},so.prototype.N=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},so.prototype.O=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};var co=Qr.JSON.stringify;function lo(){var e=_o,t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var ho,fo=function(){function e(){this.h=this.g=null}return e.prototype.add=function(e,t){var n=po.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n},e}(),po=new(function(){function e(e,t){this.i=e,this.j=t,this.h=0,this.g=null}return e.prototype.get=function(){var e;return 0<this.h?(this.h--,this.g=(e=this.g).next,e.next=null):e=this.i(),e},e}())(function(){return new go},function(e){return e.reset()}),go=function(){function e(){this.next=this.g=this.h=null}return e.prototype.set=function(e,t){this.h=e,this.g=t,this.next=null},e.prototype.reset=function(){this.next=this.g=this.h=null},e}();function vo(e){Qr.setTimeout(function(){throw e},0)}function mo(e,t){ho||function(){var e=Qr.Promise.resolve(void 0);ho=function(){e.then(bo)}}(),yo||(ho(),yo=!0),_o.add(e,t)}var yo=!1,_o=new fo;function bo(){for(var e;e=lo();){try{e.h.call(e.g)}catch(n){vo(n)}var t=po;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}yo=!1}function wo(e,t){so.call(this),this.h=e||1,this.g=t||Qr,this.j=ni(this.kb,this),this.l=Date.now()}function To(e){e.da=!1,e.S&&(e.g.clearTimeout(e.S),e.S=null)}function Eo(e,t,n){if("function"==typeof e)n&&(e=ni(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=ni(e.handleEvent,e)}return 2147483647<Number(t)?-1:Qr.setTimeout(e,t||0)}function Io(e){e.g=Eo(function(){e.g=null,e.i&&(e.i=!1,Io(e))},e.j);var t=e.h;e.h=null,e.m.apply(null,t)}ii(wo,so),(Kr=wo.prototype).da=!1,Kr.S=null,Kr.kb=function(){if(this.da){var e=Date.now()-this.l;0<e&&e<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-e):(this.S&&(this.g.clearTimeout(this.S),this.S=null),ao(this,"tick"),this.da&&(To(this),this.start()))}},Kr.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},Kr.M=function(){wo.Z.M.call(this),To(this),delete this.g};var ko=function(e){function t(t,n){var r=e.call(this)||this;return r.m=t,r.j=n,r.h=null,r.i=!1,r.g=null,r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}Hr(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}(t,e),t.prototype.l=function(e){this.h=arguments,this.g?this.i=!0:Io(this)},t.prototype.M=function(){e.prototype.M.call(this),this.g&&(Qr.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)},t}(oi);function Co(e){oi.call(this),this.h=e,this.g={}}ii(Co,oi);var So=[];function Ao(e,t,n,r){Array.isArray(n)||(n&&(So[0]=n.toString()),n=So);for(var i=0;i<n.length;i++){var o=Yi(t,n[i],r||e.handleEvent,!1,e.h||e);if(!o)break;e.g[o.key]=o}}function xo(e){yi(e.g,function(e,t){this.g.hasOwnProperty(t)&&eo(e)},e),e.g={}}function No(){this.g=!0}function Do(e,t,n,r){e.info(function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var o=i[0];if("noop"!=o&&"stop"!=o&&"close"!=o)for(var s=1;s<i.length;s++)i[s]=""}}}return co(n)}catch(a){return t}}(e,n)+(r?" "+r:"")})}Co.prototype.M=function(){Co.Z.M.call(this),xo(this)},Co.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},No.prototype.Aa=function(){this.g=!1},No.prototype.info=function(){};var Po={},Oo=null;function Ro(){return Oo=Oo||new so}function Lo(e){ji.call(this,Po.Ma,e)}function Mo(e){var t=Ro();ao(t,new Lo(t,e))}function Fo(e,t){ji.call(this,Po.STAT_EVENT,e),this.stat=t}function jo(e){var t=Ro();ao(t,new Fo(t,e))}function qo(e,t){ji.call(this,Po.Na,e),this.size=t}function Uo(e,t){if("function"!=typeof e)throw Error("Fn must not be null and must be a function");return Qr.setTimeout(function(){e()},t)}Po.Ma="serverreachability",ii(Lo,ji),Po.STAT_EVENT="statevent",ii(Fo,ji),Po.Na="timingevent",ii(qo,ji);var Vo={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},Bo={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function Ho(){}function Wo(){}Ho.prototype.h=null;var Ko,zo={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function Go(){ji.call(this,"d")}function Qo(){ji.call(this,"c")}function $o(){}function Yo(e,t,n,r){this.l=e,this.j=t,this.m=n,this.X=r||1,this.V=new Co(this),this.P=Zo,this.W=new wo(e=Ai?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new Xo}function Xo(){this.i=null,this.g="",this.h=!1}ii(Go,ji),ii(Qo,ji),ii($o,Ho),$o.prototype.g=function(){return new XMLHttpRequest},$o.prototype.i=function(){return{}},Ko=new $o;var Zo=45e3,Jo={},es={};function ts(e,t,n){e.K=1,e.v=Is(ys(t)),e.s=n,e.U=!0,ns(e,null)}function ns(e,t){e.F=Date.now(),ss(e),e.A=ys(e.v);var n=e.A,r=e.X;Array.isArray(r)||(r=[String(r)]),Fs(n.h,"t",r),e.C=0,n=e.l.H,e.h=new Xo,e.g=ja(e.l,n?t:null,!e.s),0<e.O&&(e.L=new ko(ni(e.Ia,e,e.g),e.O)),Ao(e.V,e.g,"readystatechange",e.gb),t=e.H?_i(e.H):{},e.s?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ea(e.A,e.u,e.s,t)):(e.u="GET",e.g.ea(e.A,e.u,null,t)),Mo(1),function(e,t,n,r,i,o){e.info(function(){if(e.g)if(o)for(var s="",a=o.split("&"),u=0;u<a.length;u++){var c=a[u].split("=");if(1<c.length){var l=c[0];c=c[1];var h=l.split("_");s=2<=h.length&&"type"==h[1]?s+(l+"=")+c+"&":s+(l+"=redacted&")}}else s=null;else s=o;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+s})}(e.j,e.u,e.A,e.m,e.X,e.s)}function rs(e){return!!e.g&&"GET"==e.u&&2!=e.K&&e.l.Ba}function is(e,t,n){for(var r,i=!0;!e.I&&e.C<n.length;){if((r=os(e,n))==es){4==t&&(e.o=4,jo(14),i=!1),Do(e.j,e.m,null,"[Incomplete Response]");break}if(r==Jo){e.o=4,jo(15),Do(e.j,e.m,n,"[Invalid Chunk]"),i=!1;break}Do(e.j,e.m,r,null),hs(e,r)}rs(e)&&r!=es&&r!=Jo&&(e.h.g="",e.C=0),4!=t||0!=n.length||e.h.h||(e.o=1,jo(16),i=!1),e.i=e.i&&i,i?0<n.length&&!e.aa&&(e.aa=!0,(t=e.l).g==e&&t.$&&!t.L&&(t.h.info("Great, no buffering proxy detected. Bytes received: "+n.length),Na(t),t.L=!0,jo(11))):(Do(e.j,e.m,n,"[Invalid Chunked Response]"),ls(e),cs(e))}function os(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?es:(n=Number(t.substring(n,r)),isNaN(n)?Jo:(r+=1)+n>t.length?es:(t=t.substr(r,n),e.C=r+n,t))}function ss(e){e.Y=Date.now()+e.P,as(e,e.P)}function as(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=Uo(ni(e.eb,e),t)}function us(e){e.B&&(Qr.clearTimeout(e.B),e.B=null)}function cs(e){0==e.l.G||e.I||Oa(e.l,e)}function ls(e){us(e);var t=e.L;t&&"function"==typeof t.na&&t.na(),e.L=null,To(e.W),xo(e.V),e.g&&(t=e.g,e.g=null,t.abort(),t.na())}function hs(e,t){try{var n=e.l;if(0!=n.G&&(n.g==e||Ws(n.i,e)))if(n.I=e.N,!e.J&&Ws(n.i,e)&&3==n.G){try{var r=n.Ca.g.parse(t)}catch(o){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.F+3e3<e.F))break e;Pa(n),wa(n)}xa(n),jo(18)}}else n.ta=i[1],0<n.ta-n.U&&37500>i[2]&&n.N&&0==n.A&&!n.v&&(n.v=Uo(ni(n.ab,n),6e3));if(1>=Hs(n.i)&&n.ka){try{n.ka()}catch(o){}n.ka=void 0}}else La(n,11)}else if((e.J||n.g==e)&&Pa(n),!hi(t))for(i=n.Ca.g.parse(t),t=0;t<i.length;t++){var o=i[t];if(n.U=o[0],o=o[1],2==n.G)if("c"==o[0]){n.J=o[1],n.la=o[2];var s=o[3];null!=s&&(n.ma=s,n.h.info("VER="+n.ma));var a=o[4];null!=a&&(n.za=a,n.h.info("SVER="+n.za));var u=o[5];null!=u&&"number"==typeof u&&0<u&&(n.K=r=1.5*u,n.h.info("backChannelRequestTimeoutMs_="+r)),r=n;var c=e.g;if(c){var l=c.g?c.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(l){var h=r.i;!h.g&&(pi(l,"spdy")||pi(l,"quic")||pi(l,"h2"))&&(h.j=h.l,h.g=new Set,h.h&&(Ks(h,h.h),h.h=null))}if(r.D){var f=c.g?c.g.getResponseHeader("X-HTTP-Session-Id"):null;f&&(r.sa=f,Es(r.F,r.D,f))}}n.G=3,n.j&&n.j.xa(),n.$&&(n.O=Date.now()-e.F,n.h.info("Handshake RTT: "+n.O+"ms"));var d=e;if((r=n).oa=Fa(r,r.H?r.la:null,r.W),d.J){zs(r.i,d);var p=d,g=r.K;g&&p.setTimeout(g),p.B&&(us(p),ss(p)),r.g=d}else Aa(r);0<n.l.length&&Ia(n)}else"stop"!=o[0]&&"close"!=o[0]||La(n,7);else 3==n.G&&("stop"==o[0]||"close"==o[0]?"stop"==o[0]?La(n,7):ba(n):"noop"!=o[0]&&n.j&&n.j.wa(o),n.A=0)}Mo(4)}catch(o){}}function fs(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(Yr(e)||"string"==typeof e)ui(e,t,void 0);else{if(e.T&&"function"==typeof e.T)var n=e.T();else if(e.R&&"function"==typeof e.R)n=void 0;else if(Yr(e)||"string"==typeof e){n=[];for(var r=e.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,e)n[r++]=i;i=(r=function(e){if(e.R&&"function"==typeof e.R)return e.R();if("string"==typeof e)return e.split("");if(Yr(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e)).length;for(var o=0;o<i;o++)t.call(void 0,r[o],n&&n[o],e)}}function ds(e,t){this.h={},this.g=[],this.i=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(e)if(e instanceof ds)for(n=e.T(),r=0;r<n.length;r++)this.set(n[r],e.get(n[r]));else for(r in e)this.set(r,e[r])}function ps(e){if(e.i!=e.g.length){for(var t=0,n=0;t<e.g.length;){var r=e.g[t];gs(e.h,r)&&(e.g[n++]=r),t++}e.g.length=n}if(e.i!=e.g.length){var i={};for(n=t=0;t<e.g.length;)gs(i,r=e.g[t])||(e.g[n++]=r,i[r]=1),t++;e.g.length=n}}function gs(e,t){return Object.prototype.hasOwnProperty.call(e,t)}(Kr=Yo.prototype).setTimeout=function(e){this.P=e},Kr.gb=function(e){e=e.target;var t=this.L;t&&3==ga(e)?t.l():this.Ia(e)},Kr.Ia=function(e){try{if(e==this.g)e:{var t=ga(this.g),n=this.g.Da(),r=this.g.ba();if(!(3>t)&&(3!=t||Ai||this.g&&(this.h.h||this.g.ga()||va(this.g)))){this.I||4!=t||7==n||Mo(8==n||0>=r?3:2),us(this);var i=this.g.ba();this.N=i;t:if(rs(this)){var o=va(this.g);e="";var s=o.length,a=4==ga(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){ls(this),cs(this);var u="";break t}this.h.i=new Qr.TextDecoder}for(n=0;n<s;n++)this.h.h=!0,e+=this.h.i.decode(o[n],{stream:a&&n==s-1});o.splice(0,s),this.h.g+=e,this.C=0,u=this.h.g}else u=this.g.ga();if(this.i=200==i,function(e,t,n,r,i,o,s){e.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+o+" "+s})}(this.j,this.u,this.A,this.m,this.X,t,i),this.i){if(this.$&&!this.J){t:{if(this.g){var c,l=this.g;if((c=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!hi(c)){var h=c;break t}}h=null}if(!(i=h)){this.i=!1,this.o=3,jo(12),ls(this),cs(this);break e}Do(this.j,this.m,i,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,hs(this,i)}this.U?(is(this,t,u),Ai&&this.i&&3==t&&(Ao(this.V,this.W,"tick",this.fb),this.W.start())):(Do(this.j,this.m,u,null),hs(this,u)),4==t&&ls(this),this.i&&!this.I&&(4==t?Oa(this.l,this):(this.i=!1,ss(this)))}else 400==i&&0<u.indexOf("Unknown SID")?(this.o=3,jo(12)):(this.o=0,jo(13)),ls(this),cs(this)}}}catch(t){}},Kr.fb=function(){if(this.g){var e=ga(this.g),t=this.g.ga();this.C<t.length&&(us(this),is(this,e,t),this.i&&4!=e&&ss(this))}},Kr.cancel=function(){this.I=!0,ls(this)},Kr.eb=function(){this.B=null;var e=Date.now();0<=e-this.Y?(function(e,t){e.info(function(){return"TIMEOUT: "+t})}(this.j,this.A),2!=this.K&&(Mo(3),jo(17)),ls(this),this.o=2,cs(this)):as(this,this.Y-e)},(Kr=ds.prototype).R=function(){ps(this);for(var e=[],t=0;t<this.g.length;t++)e.push(this.h[this.g[t]]);return e},Kr.T=function(){return ps(this),this.g.concat()},Kr.get=function(e,t){return gs(this.h,e)?this.h[e]:t},Kr.set=function(e,t){gs(this.h,e)||(this.i++,this.g.push(e)),this.h[e]=t},Kr.forEach=function(e,t){for(var n=this.T(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);e.call(t,o,i,this)}};var vs=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function ms(e,t){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,e instanceof ms){this.g=void 0!==t?t:e.g,_s(this,e.j),this.s=e.s,bs(this,e.i),ws(this,e.m),this.l=e.l,t=e.h;var n=new Os;n.i=t.i,t.g&&(n.g=new ds(t.g),n.h=t.h),Ts(this,n),this.o=e.o}else e&&(n=String(e).match(vs))?(this.g=!!t,_s(this,n[1]||"",!0),this.s=ks(n[2]||""),bs(this,n[3]||"",!0),ws(this,n[4]),this.l=ks(n[5]||"",!0),Ts(this,n[6]||"",!0),this.o=ks(n[7]||"")):(this.g=!!t,this.h=new Os(null,this.g))}function ys(e){return new ms(e)}function _s(e,t,n){e.j=n?ks(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function bs(e,t,n){e.i=n?ks(t,!0):t}function ws(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.m=t}else e.m=null}function Ts(e,t,n){t instanceof Os?(e.h=t,function(e,t){t&&!e.j&&(Rs(e),e.i=null,e.g.forEach(function(e,t){var n=t.toLowerCase();t!=n&&(Ls(this,t),Fs(this,n,e))},e)),e.j=t}(e.h,e.g)):(n||(t=Cs(t,Ds)),e.h=new Os(t,e.g))}function Es(e,t,n){e.h.set(t,n)}function Is(e){return Es(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function ks(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function Cs(e,t,n){return"string"==typeof e?(e=encodeURI(e).replace(t,Ss),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function Ss(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}ms.prototype.toString=function(){var e=[],t=this.j;t&&e.push(Cs(t,As,!0),":");var n=this.i;return(n||"file"==t)&&(e.push("//"),(t=this.s)&&e.push(Cs(t,As,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&e.push(":",String(n))),(n=this.l)&&(this.i&&"/"!=n.charAt(0)&&e.push("/"),e.push(Cs(n,"/"==n.charAt(0)?Ns:xs,!0))),(n=this.h.toString())&&e.push("?",n),(n=this.o)&&e.push("#",Cs(n,Ps)),e.join("")};var As=/[#\/\?@]/g,xs=/[#\?:]/g,Ns=/[#\?]/g,Ds=/[#\?@]/g,Ps=/#/g;function Os(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function Rs(e){e.g||(e.g=new ds,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var o=e[n].substring(0,r);i=e[n].substring(r+1)}else o=e[n];t(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)}))}function Ls(e,t){Rs(e),t=js(e,t),gs(e.g.h,t)&&(e.i=null,e.h-=e.g.get(t).length,gs((e=e.g).h,t)&&(delete e.h[t],e.i--,e.g.length>2*e.i&&ps(e)))}function Ms(e,t){return Rs(e),t=js(e,t),gs(e.g.h,t)}function Fs(e,t,n){Ls(e,t),0<n.length&&(e.i=null,e.g.set(js(e,t),li(n)),e.h+=n.length)}function js(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}(Kr=Os.prototype).add=function(e,t){Rs(this),this.i=null,e=js(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},Kr.forEach=function(e,t){Rs(this),this.g.forEach(function(n,r){ui(n,function(n){e.call(t,n,r,this)},this)},this)},Kr.T=function(){Rs(this);for(var e=this.g.R(),t=this.g.T(),n=[],r=0;r<t.length;r++)for(var i=e[r],o=0;o<i.length;o++)n.push(t[r]);return n},Kr.R=function(e){Rs(this);var t=[];if("string"==typeof e)Ms(this,e)&&(t=ci(t,this.g.get(js(this,e))));else{e=this.g.R();for(var n=0;n<e.length;n++)t=ci(t,e[n])}return t},Kr.set=function(e,t){return Rs(this),this.i=null,Ms(this,e=js(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},Kr.get=function(e,t){return e&&0<(e=this.R(e)).length?String(e[0]):t},Kr.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var e=[],t=this.g.T(),n=0;n<t.length;n++){var r=t[n],i=encodeURIComponent(String(r));r=this.R(r);for(var o=0;o<r.length;o++){var s=i;""!==r[o]&&(s+="="+encodeURIComponent(String(r[o]))),e.push(s)}}return this.i=e.join("&")};var qs=function(e,t){this.h=e,this.g=t};function Us(e){this.l=e||Vs,e=Qr.PerformanceNavigationTiming?0<(e=Qr.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):!!(Qr.g&&Qr.g.Ea&&Qr.g.Ea()&&Qr.g.Ea().Zb),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var Vs=10;function Bs(e){return!!e.h||!!e.g&&e.g.size>=e.j}function Hs(e){return e.h?1:e.g?e.g.size:0}function Ws(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function Ks(e,t){e.g?e.g.add(t):e.h=t}function zs(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function Gs(e){var t,n;if(null!=e.h)return e.i.concat(e.h.D);if(null!=e.g&&0!==e.g.size){var r=e.i;try{for(var i=Wr(e.g.values()),o=i.next();!o.done;o=i.next())r=r.concat(o.value.D)}catch(s){t={error:s}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}return r}return li(e.i)}function Qs(){}function $s(){this.g=new Qs}function Ys(e,t,n){var r=n||"";try{fs(e,function(e,n){var i=e;Xr(e)&&(i=co(e)),t.push(r+n+"="+encodeURIComponent(i))})}catch(ly){throw t.push(r+"type="+encodeURIComponent("_badmap")),ly}}function Xs(e,t,n,r,i){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,i(r)}catch(o){}}function Zs(e){this.l=e.$b||null,this.j=e.ib||!1}function Js(e,t){so.call(this),this.D=e,this.u=t,this.m=void 0,this.readyState=ea,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Us.prototype.cancel=function(){var e,t;if(this.i=Gs(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){try{for(var n=Wr(this.g.values()),r=n.next();!r.done;r=n.next())r.value.cancel()}catch(i){e={error:i}}finally{try{r&&!r.done&&(t=n.return)&&t.call(n)}finally{if(e)throw e.error}}this.g.clear()}},Qs.prototype.stringify=function(e){return Qr.JSON.stringify(e,void 0)},Qs.prototype.parse=function(e){return Qr.JSON.parse(e,void 0)},ii(Zs,Ho),Zs.prototype.g=function(){return new Js(this.l,this.j)},Zs.prototype.i=function(e){return function(){return e}}({}),ii(Js,so);var ea=0;function ta(e){e.j.read().then(e.Sa.bind(e)).catch(e.ha.bind(e))}function na(e){e.readyState=4,e.l=null,e.j=null,e.A=null,ra(e)}function ra(e){e.onreadystatechange&&e.onreadystatechange.call(e)}(Kr=Js.prototype).open=function(e,t){if(this.readyState!=ea)throw this.abort(),Error("Error reopening a connection");this.C=e,this.B=t,this.readyState=1,ra(this)},Kr.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;var t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};e&&(t.body=e),(this.D||Qr).fetch(new Request(this.B,t)).then(this.Va.bind(this),this.ha.bind(this))},Kr.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,na(this)),this.readyState=ea},Kr.Va=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,ra(this)),this.g&&(this.readyState=3,ra(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(void 0!==Qr.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;ta(this)}else e.text().then(this.Ua.bind(this),this.ha.bind(this))},Kr.Sa=function(e){if(this.g){if(this.u&&e.value)this.response.push(e.value);else if(!this.u){var t=e.value?e.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?na(this):ra(this),3==this.readyState&&ta(this)}},Kr.Ua=function(e){this.g&&(this.response=this.responseText=e,na(this))},Kr.Ta=function(e){this.g&&(this.response=e,na(this))},Kr.ha=function(){this.g&&na(this)},Kr.setRequestHeader=function(e,t){this.v.append(e,t)},Kr.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},Kr.getAllResponseHeaders=function(){if(!this.h)return"";for(var e=[],t=this.h.entries(),n=t.next();!n.done;)e.push((n=n.value)[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(Js.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}});var ia=Qr.JSON.parse;function oa(e){so.call(this),this.headers=new ds,this.u=e||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=sa,this.K=this.L=!1}ii(oa,so);var sa="",aa=/^https?$/i,ua=["POST","PUT"];function ca(e){return"content-type"==e.toLowerCase()}function la(e,t){e.h=!1,e.g&&(e.l=!0,e.g.abort(),e.l=!1),e.j=t,e.m=5,ha(e),da(e)}function ha(e){e.D||(e.D=!0,ao(e,"complete"),ao(e,"error"))}function fa(e){if(e.h&&void 0!==Gr&&(!e.C[1]||4!=ga(e)||2!=e.ba()))if(e.v&&4==ga(e))Eo(e.Fa,0,e);else if(ao(e,"readystatechange"),4==ga(e)){e.h=!1;try{var t,n=e.ba();e:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break e;default:r=!1}if(!(t=r)){var i;if(i=0===n){var o=String(e.H).match(vs)[1]||null;if(!o&&Qr.self&&Qr.self.location){var s=Qr.self.location.protocol;o=s.substr(0,s.length-1)}i=!aa.test(o?o.toLowerCase():"")}t=i}if(t)ao(e,"complete"),ao(e,"success");else{e.m=6;try{var a=2<ga(e)?e.g.statusText:""}catch(u){a=""}e.j=a+" ["+e.ba()+"]",ha(e)}}finally{da(e)}}}function da(e,t){if(e.g){pa(e);var n=e.g,r=e.C[0]?$r:null;e.g=null,e.C=null,t||ao(e,"ready");try{n.onreadystatechange=r}catch(ly){}}}function pa(e){e.g&&e.K&&(e.g.ontimeout=null),e.A&&(Qr.clearTimeout(e.A),e.A=null)}function ga(e){return e.g?e.g.readyState:0}function va(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.J){case sa:case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(t){return null}}function ma(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=function(e){var t="";return yi(e,function(e,n){t+=n,t+=":",t+=e,t+="\r\n"}),t}(n),"string"==typeof e?null!=n&&encodeURIComponent(String(n)):Es(e,t,n))}function ya(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function _a(e){this.za=0,this.l=[],this.h=new No,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=ya("failFast",!1,e),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=ya("baseRetryDelayMs",5e3,e),this.$a=ya("retryDelaySeedMs",1e4,e),this.Ya=ya("forwardChannelMaxRetries",2,e),this.ra=ya("forwardChannelRequestTimeoutMs",2e4,e),this.qa=e&&e.xmlHttpFactory||void 0,this.Ba=e&&e.Yb||!1,this.K=void 0,this.H=e&&e.supportsCrossDomainXhr||!1,this.J="",this.i=new Us(e&&e.concurrentRequestLimit),this.Ca=new $s,this.ja=e&&e.fastHandshake||!1,this.Ra=e&&e.Wb||!1,e&&e.Aa&&this.h.Aa(),e&&e.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&e&&e.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!e||!1!==e.Xb}function ba(e){if(Ta(e),3==e.G){var t=e.V++,n=ys(e.F);Es(n,"SID",e.J),Es(n,"RID",t),Es(n,"TYPE","terminate"),Ca(e,n),(t=new Yo(e,e.h,t,void 0)).K=2,t.v=Is(ys(n)),n=!1,Qr.navigator&&Qr.navigator.sendBeacon&&(n=Qr.navigator.sendBeacon(t.v.toString(),"")),!n&&Qr.Image&&((new Image).src=t.v,n=!0),n||(t.g=ja(t.l,null),t.g.ea(t.v)),t.F=Date.now(),ss(t)}Ma(e)}function wa(e){e.g&&(Na(e),e.g.cancel(),e.g=null)}function Ta(e){wa(e),e.u&&(Qr.clearTimeout(e.u),e.u=null),Pa(e),e.i.cancel(),e.m&&("number"==typeof e.m&&Qr.clearTimeout(e.m),e.m=null)}function Ea(e,t){e.l.push(new qs(e.Za++,t)),3==e.G&&Ia(e)}function Ia(e){Bs(e.i)||e.m||(e.m=!0,mo(e.Ha,e),e.C=0)}function ka(e,t){var n;n=t?t.m:e.V++;var r=ys(e.F);Es(r,"SID",e.J),Es(r,"RID",n),Es(r,"AID",e.U),Ca(e,r),e.o&&e.s&&ma(r,e.o,e.s),n=new Yo(e,e.h,n,e.C+1),null===e.o&&(n.H=e.s),t&&(e.l=t.D.concat(e.l)),t=Sa(e,n,1e3),n.setTimeout(Math.round(.5*e.ra)+Math.round(.5*e.ra*Math.random())),Ks(e.i,n),ts(n,r,t)}function Ca(e,t){e.j&&fs({},function(e,n){Es(t,n,e)})}function Sa(e,t,n){n=Math.min(e.l.length,n);var r=e.j?ni(e.j.Oa,e.j,e):null;e:for(var i=e.l,o=-1;;){var s=["count="+n];-1==o?0<n?s.push("ofs="+(o=i[0].h)):o=0:s.push("ofs="+o);for(var a=!0,u=0;u<n;u++){var c=i[u].h,l=i[u].g;if(0>(c-=o))o=Math.max(0,i[u].h-100),a=!1;else try{Ys(l,s,"req"+c+"_")}catch(mu){r&&r(l)}}if(a){r=s.join("&");break e}}return e=e.l.splice(0,n),t.D=e,r}function Aa(e){e.g||e.u||(e.Y=1,mo(e.Ga,e),e.A=0)}function xa(e){return!(e.g||e.u||3<=e.A||(e.Y++,e.u=Uo(ni(e.Ga,e),Ra(e,e.A)),e.A++,0))}function Na(e){null!=e.B&&(Qr.clearTimeout(e.B),e.B=null)}function Da(e){e.g=new Yo(e,e.h,"rpc",e.Y),null===e.o&&(e.g.H=e.s),e.g.O=0;var t=ys(e.oa);Es(t,"RID","rpc"),Es(t,"SID",e.J),Es(t,"CI",e.N?"0":"1"),Es(t,"AID",e.U),Ca(e,t),Es(t,"TYPE","xmlhttp"),e.o&&e.s&&ma(t,e.o,e.s),e.K&&e.g.setTimeout(e.K);var n=e.g;e=e.la,n.K=1,n.v=Is(ys(t)),n.s=null,n.U=!0,ns(n,e)}function Pa(e){null!=e.v&&(Qr.clearTimeout(e.v),e.v=null)}function Oa(e,t){var n=null;if(e.g==t){Pa(e),Na(e),e.g=null;var r=2}else{if(!Ws(e.i,t))return;n=t.D,zs(e.i,t),r=1}if(e.I=t.N,0!=e.G)if(t.i)if(1==r){n=t.s?t.s.length:0,t=Date.now()-t.F;var i=e.C;ao(r=Ro(),new qo(r,n,t,i)),Ia(e)}else Aa(e);else if(3==(i=t.o)||0==i&&0<e.I||!(1==r&&function(e,t){return!(Hs(e.i)>=e.i.j-(e.m?1:0)||(e.m?(e.l=t.D.concat(e.l),0):1==e.G||2==e.G||e.C>=(e.Xa?0:e.Ya)||(e.m=Uo(ni(e.Ha,e,t),Ra(e,e.C)),e.C++,0)))}(e,t)||2==r&&xa(e)))switch(n&&0<n.length&&(t=e.i,t.i=t.i.concat(n)),i){case 1:La(e,5);break;case 4:La(e,10);break;case 3:La(e,6);break;default:La(e,2)}}function Ra(e,t){var n=e.Pa+Math.floor(Math.random()*e.$a);return e.j||(n*=2),n*t}function La(e,t){if(e.h.info("Error code "+t),2==t){var n=null;e.j&&(n=null);var r=ni(e.jb,e);n||(n=new ms("//www.google.com/images/cleardot.gif"),Qr.location&&"http"==Qr.location.protocol||_s(n,"https"),Is(n)),function(e,t){var n=new No;if(Qr.Image){var r=new Image;r.onload=ri(Xs,n,r,"TestLoadImage: loaded",!0,t),r.onerror=ri(Xs,n,r,"TestLoadImage: error",!1,t),r.onabort=ri(Xs,n,r,"TestLoadImage: abort",!1,t),r.ontimeout=ri(Xs,n,r,"TestLoadImage: timeout",!1,t),Qr.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=e}else t(!1)}(n.toString(),r)}else jo(2);e.G=0,e.j&&e.j.va(t),Ma(e),Ta(e)}function Ma(e){e.G=0,e.I=-1,e.j&&(0==Gs(e.i).length&&0==e.l.length||(e.i.i.length=0,li(e.l),e.l.length=0),e.j.ua())}function Fa(e,t,n){var r=function(e){return e instanceof ms?ys(e):new ms(e,void 0)}(n);if(""!=r.i)t&&bs(r,t+"."+r.i),ws(r,r.m);else{var i=Qr.location;r=function(e,t,n,r){var i=new ms(null,void 0);return e&&_s(i,e),t&&bs(i,t),n&&ws(i,n),r&&(i.l=r),i}(i.protocol,t?t+"."+i.hostname:i.hostname,+i.port,n)}return e.aa&&yi(e.aa,function(e,t){Es(r,t,e)}),n=e.sa,(t=e.D)&&n&&Es(r,t,n),Es(r,"VER",e.ma),Ca(e,r),r}function ja(e,t,n){if(t&&!e.H)throw Error("Can't create secondary domain capable XhrIo object.");return(t=new oa(n&&e.Ba&&!e.qa?new Zs({ib:!0}):e.qa)).L=e.H,t}function qa(){}function Ua(){if(Ci&&!(10<=Number(Mi)))throw Error("Environmental error: no available transport.")}function Va(e,t){so.call(this),this.g=new _a(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.s=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.ya&&(e?e["X-WebChannel-Client-Profile"]=t.ya:e={"X-WebChannel-Client-Profile":t.ya}),this.g.P=e,(e=t&&t.httpHeadersOverwriteParam)&&!hi(e)&&(this.g.o=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!hi(t)&&(this.g.D=t,null!==(e=this.h)&&t in e&&t in(e=this.h)&&delete e[t]),this.j=new Wa(this)}function Ba(e){Go.call(this);var t=e.__sm__;if(t){e:{for(var n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function Ha(){Qo.call(this),this.status=1}function Wa(e){this.g=e}(Kr=oa.prototype).ea=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+e);t=t?t.toUpperCase():"GET",this.H=e,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():Ko.g(),this.C=function(e){return e.h||(e.h=e.i())}(this.u?this.u:Ko),this.g.onreadystatechange=ni(this.Fa,this);try{this.F=!0,this.g.open(t,String(e),!0),this.F=!1}catch(o){return void la(this,o)}e=n||"";var i=new ds(this.headers);r&&fs(r,function(e,t){i.set(t,e)}),r=function(e){e:{for(var t=ca,n=e.length,r="string"==typeof e?e.split(""):e,i=0;i<n;i++)if(i in r&&t.call(void 0,r[i],i,e)){t=i;break e}t=-1}return 0>t?null:"string"==typeof e?e.charAt(t):e[t]}(i.T()),n=Qr.FormData&&e instanceof Qr.FormData,!(0<=ai(ua,t))||r||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach(function(e,t){this.g.setRequestHeader(t,e)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{pa(this),0<this.B&&((this.K=function(e){return Ci&&function(){return e=Li,Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=function(){for(var e=0,t=di(String(Ei)).split("."),n=di("9").split("."),r=Math.max(t.length,n.length),i=0;0==e&&i<r;i++){var o=t[i]||"",s=n[i]||"";do{if(o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],0==o[0].length&&0==s[0].length)break;e=gi(0==o[1].length?0:parseInt(o[1],10),0==s[1].length?0:parseInt(s[1],10))||gi(0==o[2].length,0==s[2].length)||gi(o[2],s[2]),o=o[3],s=s[3]}while(0==e)}return 0<=e}();var e}()&&"number"==typeof e.timeout&&void 0!==e.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=ni(this.pa,this)):this.A=Eo(this.pa,this.B,this)),this.v=!0,this.g.send(e),this.v=!1}catch(o){la(this,o)}},Kr.pa=function(){void 0!==Gr&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,ao(this,"timeout"),this.abort(8))},Kr.abort=function(e){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=e||7,ao(this,"complete"),ao(this,"abort"),da(this))},Kr.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),da(this,!0)),oa.Z.M.call(this)},Kr.Fa=function(){this.s||(this.F||this.v||this.l?fa(this):this.cb())},Kr.cb=function(){fa(this)},Kr.ba=function(){try{return 2<ga(this)?this.g.status:-1}catch(Ii){return-1}},Kr.ga=function(){try{return this.g?this.g.responseText:""}catch(Ii){return""}},Kr.Qa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),ia(t)}},Kr.Da=function(){return this.m},Kr.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(Kr=_a.prototype).ma=8,Kr.G=1,Kr.hb=function(e){try{this.h.info("Origin Trials invoked: "+e)}catch(t){}},Kr.Ha=function(e){if(this.m)if(this.m=null,1==this.G){if(!e){this.V=Math.floor(1e5*Math.random()),e=this.V++;var t=new Yo(this,this.h,e,void 0),n=this.s;if(this.P&&(n?wi(n=_i(n),this.P):n=this.P),null===this.o&&(t.H=n),this.ja)e:{for(var r=0,i=0;i<this.l.length;i++){var o=this.l[i];if(void 0===(o="__data__"in o.g&&"string"==typeof(o=o.g.__data__)?o.length:void 0))break;if(4096<(r+=o)){r=i;break e}if(4096===r||i===this.l.length-1){r=i+1;break e}}r=1e3}else r=1e3;r=Sa(this,t,r),Es(i=ys(this.F),"RID",e),Es(i,"CVER",22),this.D&&Es(i,"X-HTTP-Session-Id",this.D),Ca(this,i),this.o&&n&&ma(i,this.o,n),Ks(this.i,t),this.Ra&&Es(i,"TYPE","init"),this.ja?(Es(i,"$req",r),Es(i,"SID","null"),t.$=!0,ts(t,i,null)):ts(t,i,r),this.G=2}}else 3==this.G&&(e?ka(this,e):0==this.l.length||Bs(this.i)||ka(this))},Kr.Ga=function(){if(this.u=null,Da(this),this.$&&!(this.L||null==this.g||0>=this.O)){var e=2*this.O;this.h.info("BP detection timer enabled: "+e),this.B=Uo(ni(this.bb,this),e)}},Kr.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,jo(10),wa(this),Da(this))},Kr.ab=function(){null!=this.v&&(this.v=null,wa(this),xa(this),jo(19))},Kr.jb=function(e){e?(this.h.info("Successfully pinged google.com"),jo(2)):(this.h.info("Failed to ping google.com"),jo(1))},(Kr=qa.prototype).xa=function(){},Kr.wa=function(){},Kr.va=function(){},Kr.ua=function(){},Kr.Oa=function(){},Ua.prototype.g=function(e,t){return new Va(e,t)},ii(Va,so),Va.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var e=this.g,t=this.l,n=this.h||void 0;e.Wa&&(e.h.info("Origin Trials enabled."),mo(ni(e.hb,e,t))),jo(0),e.W=t,e.aa=n||{},e.N=e.X,e.F=Fa(e,null,e.W),Ia(e)},Va.prototype.close=function(){ba(this.g)},Va.prototype.u=function(e){if("string"==typeof e){var t={};t.__data__=e,Ea(this.g,t)}else this.v?((t={}).__data__=co(e),Ea(this.g,t)):Ea(this.g,e)},Va.prototype.M=function(){this.g.j=null,delete this.j,ba(this.g),delete this.g,Va.Z.M.call(this)},ii(Ba,Go),ii(Ha,Qo),ii(Wa,qa),Wa.prototype.xa=function(){ao(this.g,"a")},Wa.prototype.wa=function(e){ao(this.g,new Ba(e))},Wa.prototype.va=function(e){ao(this.g,new Ha(e))},Wa.prototype.ua=function(){ao(this.g,"b")},Ua.prototype.createWebChannel=Ua.prototype.g,Va.prototype.send=Va.prototype.u,Va.prototype.open=Va.prototype.m,Va.prototype.close=Va.prototype.close,Vo.NO_ERROR=0,Vo.TIMEOUT=8,Vo.HTTP_ERROR=6,Bo.COMPLETE="complete",Wo.EventType=zo,zo.OPEN="a",zo.CLOSE="b",zo.ERROR="c",zo.MESSAGE="d",so.prototype.listen=so.prototype.N,oa.prototype.listenOnce=oa.prototype.O,oa.prototype.getLastError=oa.prototype.La,oa.prototype.getLastErrorCode=oa.prototype.Da,oa.prototype.getStatus=oa.prototype.ba,oa.prototype.getResponseJson=oa.prototype.Qa,oa.prototype.getResponseText=oa.prototype.ga,oa.prototype.send=oa.prototype.ea;var Ka=Vo,za=Bo,Ga=Po,Qa=Zs,$a=Wo,Ya=oa,Xa=function(){function e(e,t){var n=this;this.previousValue=e,t&&(t.sequenceNumberHandler=function(e){return n.t(e)},this.i=function(e){return t.writeSequenceNumber(e)})}return e.prototype.t=function(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue},e.prototype.next=function(){var e=++this.previousValue;return this.i&&this.i(e),e},e}();Xa.o=-1;var Za={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},Ja=function(e){function t(t,n){var r=this;return(r=e.call(this,n)||this).code=t,r.message=n,r.name="FirebaseError",r.toString=function(){return r.name+": [code="+r.code+"]: "+r.message},r}return(0,Ur.__extends)(t,e),t}(Error),eu=new Br.Logger("@firebase/firestore");function tu(){return eu.logLevel}function nu(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];if(eu.logLevel<=Br.LogLevel.DEBUG){var r=t.map(ou);eu.debug.apply(eu,(0,Ur.__spreadArray)(["Firestore (8.8.1): "+e],r))}}function ru(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];if(eu.logLevel<=Br.LogLevel.ERROR){var r=t.map(ou);eu.error.apply(eu,(0,Ur.__spreadArray)(["Firestore (8.8.1): "+e],r))}}function iu(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];if(eu.logLevel<=Br.LogLevel.WARN){var r=t.map(ou);eu.warn.apply(eu,(0,Ur.__spreadArray)(["Firestore (8.8.1): "+e],r))}}function ou(e){if("string"==typeof e)return e;try{return JSON.stringify(e)}catch(ly){return e}}function su(e){void 0===e&&(e="Unexpected state");var t="FIRESTORE (8.8.1) INTERNAL ASSERTION FAILED: "+e;throw ru(t),new Error(t)}function au(e,t){e||su()}function uu(e,t){return e}function cu(e){var t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(var r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}var lu=function(){function e(){}return e.u=function(){for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length,n="";n.length<20;)for(var r=cu(40),i=0;i<r.length;++i)n.length<20&&r[i]<t&&(n+=e.charAt(r[i]%e.length));return n},e}();function hu(e,t){return e<t?-1:e>t?1:0}function fu(e,t,n){return e.length===t.length&&e.every(function(e,r){return n(e,t[r])})}function du(e){return e+"\0"}var pu=function(){function e(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Ja(Za.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Ja(Za.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Ja(Za.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Ja(Za.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}return e.now=function(){return e.fromMillis(Date.now())},e.fromDate=function(t){return e.fromMillis(t.getTime())},e.fromMillis=function(t){var n=Math.floor(t/1e3);return new e(n,Math.floor(1e6*(t-1e3*n)))},e.prototype.toDate=function(){return new Date(this.toMillis())},e.prototype.toMillis=function(){return 1e3*this.seconds+this.nanoseconds/1e6},e.prototype._compareTo=function(e){return this.seconds===e.seconds?hu(this.nanoseconds,e.nanoseconds):hu(this.seconds,e.seconds)},e.prototype.isEqual=function(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds},e.prototype.toString=function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"},e.prototype.toJSON=function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}},e.prototype.valueOf=function(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")},e}(),gu=function(){function e(e){this.timestamp=e}return e.fromTimestamp=function(t){return new e(t)},e.min=function(){return new e(new pu(0,0))},e.prototype.compareTo=function(e){return this.timestamp._compareTo(e.timestamp)},e.prototype.isEqual=function(e){return this.timestamp.isEqual(e.timestamp)},e.prototype.toMicroseconds=function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3},e.prototype.toString=function(){return"SnapshotVersion("+this.timestamp.toString()+")"},e.prototype.toTimestamp=function(){return this.timestamp},e}();function vu(e){var t=0;for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function mu(e,t){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function yu(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}var _u=function(){function e(e,t,n){void 0===t?t=0:t>e.length&&su(),void 0===n?n=e.length-t:n>e.length-t&&su(),this.segments=e,this.offset=t,this.len=n}return Object.defineProperty(e.prototype,"length",{get:function(){return this.len},enumerable:!1,configurable:!0}),e.prototype.isEqual=function(t){return 0===e.comparator(this,t)},e.prototype.child=function(t){var n=this.segments.slice(this.offset,this.limit());return t instanceof e?t.forEach(function(e){n.push(e)}):n.push(t),this.construct(n)},e.prototype.limit=function(){return this.offset+this.length},e.prototype.popFirst=function(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)},e.prototype.popLast=function(){return this.construct(this.segments,this.offset,this.length-1)},e.prototype.firstSegment=function(){return this.segments[this.offset]},e.prototype.lastSegment=function(){return this.get(this.length-1)},e.prototype.get=function(e){return this.segments[this.offset+e]},e.prototype.isEmpty=function(){return 0===this.length},e.prototype.isPrefixOf=function(e){if(e.length<this.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0},e.prototype.isImmediateParentOf=function(e){if(this.length+1!==e.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0},e.prototype.forEach=function(e){for(var t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])},e.prototype.toArray=function(){return this.segments.slice(this.offset,this.limit())},e.comparator=function(e,t){for(var n=Math.min(e.length,t.length),r=0;r<n;r++){var i=e.get(r),o=t.get(r);if(i<o)return-1;if(i>o)return 1}return e.length<t.length?-1:e.length>t.length?1:0},e}(),bu=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,Ur.__extends)(t,e),t.prototype.construct=function(e,n,r){return new t(e,n,r)},t.prototype.canonicalString=function(){return this.toArray().join("/")},t.prototype.toString=function(){return this.canonicalString()},t.fromString=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];for(var r=[],i=0,o=e;i<o.length;i++){var s=o[i];if(s.indexOf("//")>=0)throw new Ja(Za.INVALID_ARGUMENT,"Invalid segment ("+s+"). Paths must not contain // in them.");r.push.apply(r,s.split("/").filter(function(e){return e.length>0}))}return new t(r)},t.emptyPath=function(){return new t([])},t}(_u),wu=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Tu=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,Ur.__extends)(t,e),t.prototype.construct=function(e,n,r){return new t(e,n,r)},t.isValidIdentifier=function(e){return wu.test(e)},t.prototype.canonicalString=function(){return this.toArray().map(function(e){return e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),t.isValidIdentifier(e)||(e="`"+e+"`"),e}).join(".")},t.prototype.toString=function(){return this.canonicalString()},t.prototype.isKeyField=function(){return 1===this.length&&"__name__"===this.get(0)},t.keyField=function(){return new t(["__name__"])},t.fromServerFormat=function(e){for(var n=[],r="",i=0,o=function(){if(0===r.length)throw new Ja(Za.INVALID_ARGUMENT,"Invalid field path ("+e+"). Paths must not be empty, begin with '.', end with '.', or contain '..'");n.push(r),r=""},s=!1;i<e.length;){var a=e[i];if("\\"===a){if(i+1===e.length)throw new Ja(Za.INVALID_ARGUMENT,"Path has trailing escape character: "+e);var u=e[i+1];if("\\"!==u&&"."!==u&&"`"!==u)throw new Ja(Za.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else"`"===a?(s=!s,i++):"."!==a||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new Ja(Za.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new t(n)},t.emptyPath=function(){return new t([])},t}(_u),Eu=function(){function e(e){this.fields=e,e.sort(Tu.comparator)}return e.prototype.covers=function(e){for(var t=0,n=this.fields;t<n.length;t++)if(n[t].isPrefixOf(e))return!0;return!1},e.prototype.isEqual=function(e){return fu(this.fields,e.fields,function(e,t){return e.isEqual(t)})},e}(),Iu=function(){function e(e){this.binaryString=e}return e.fromBase64String=function(t){return new e(atob(t))},e.fromUint8Array=function(t){return new e(function(e){for(var t="",n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(t))},e.prototype.toBase64=function(){return btoa(this.binaryString)},e.prototype.toUint8Array=function(){return function(e){for(var t=new Uint8Array(e.length),n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)},e.prototype.approximateByteSize=function(){return 2*this.binaryString.length},e.prototype.compareTo=function(e){return hu(this.binaryString,e.binaryString)},e.prototype.isEqual=function(e){return this.binaryString===e.binaryString},e}();Iu.EMPTY_BYTE_STRING=new Iu("");var ku=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Cu(e){if(au(!!e),"string"==typeof e){var t=0,n=ku.exec(e);if(au(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),t=Number(r)}var i=new Date(e);return{seconds:Math.floor(i.getTime()/1e3),nanos:t}}return{seconds:Su(e.seconds),nanos:Su(e.nanos)}}function Su(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function Au(e){return"string"==typeof e?Iu.fromBase64String(e):Iu.fromUint8Array(e)}function xu(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function Nu(e){var t=e.mapValue.fields.__previous_value__;return xu(t)?Nu(t):t}function Du(e){var t=Cu(e.mapValue.fields.__local_write_time__.timestampValue);return new pu(t.seconds,t.nanos)}function Pu(e){return null==e}function Ou(e){return 0===e&&1/e==-1/0}function Ru(e){return"number"==typeof e&&Number.isInteger(e)&&!Ou(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}var Lu=function(){function e(e){this.path=e}return e.fromPath=function(t){return new e(bu.fromString(t))},e.fromName=function(t){return new e(bu.fromString(t).popFirst(5))},e.prototype.hasCollectionId=function(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e},e.prototype.isEqual=function(e){return null!==e&&0===bu.comparator(this.path,e.path)},e.prototype.toString=function(){return this.path.toString()},e.comparator=function(e,t){return bu.comparator(e.path,t.path)},e.isDocumentKey=function(e){return e.length%2==0},e.fromSegments=function(t){return new e(new bu(t.slice()))},e}();function Mu(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?xu(e)?4:10:su()}function Fu(e,t){var n=Mu(e);if(n!==Mu(t))return!1;switch(n){case 0:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return Du(e).isEqual(Du(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;var n=Cu(e.timestampValue),r=Cu(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return Au(e.bytesValue).isEqual(Au(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return Su(e.geoPointValue.latitude)===Su(t.geoPointValue.latitude)&&Su(e.geoPointValue.longitude)===Su(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return Su(e.integerValue)===Su(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){var n=Su(e.doubleValue),r=Su(t.doubleValue);return n===r?Ou(n)===Ou(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return fu(e.arrayValue.values||[],t.arrayValue.values||[],Fu);case 10:return function(e,t){var n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(vu(n)!==vu(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!Fu(n[i],r[i])))return!1;return!0}(e,t);default:return su()}}function ju(e,t){return void 0!==(e.values||[]).find(function(e){return Fu(e,t)})}function qu(e,t){var n=Mu(e),r=Mu(t);if(n!==r)return hu(n,r);switch(n){case 0:return 0;case 1:return hu(e.booleanValue,t.booleanValue);case 2:return function(e,t){var n=Su(e.integerValue||e.doubleValue),r=Su(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return Uu(e.timestampValue,t.timestampValue);case 4:return Uu(Du(e),Du(t));case 5:return hu(e.stringValue,t.stringValue);case 6:return function(e,t){var n=Au(e),r=Au(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){for(var n=e.split("/"),r=t.split("/"),i=0;i<n.length&&i<r.length;i++){var o=hu(n[i],r[i]);if(0!==o)return o}return hu(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){var n=hu(Su(e.latitude),Su(t.latitude));return 0!==n?n:hu(Su(e.longitude),Su(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(e,t){for(var n=e.values||[],r=t.values||[],i=0;i<n.length&&i<r.length;++i){var o=qu(n[i],r[i]);if(o)return o}return hu(n.length,r.length)}(e.arrayValue,t.arrayValue);case 10:return function(e,t){var n=e.fields||{},r=Object.keys(n),i=t.fields||{},o=Object.keys(i);r.sort(),o.sort();for(var s=0;s<r.length&&s<o.length;++s){var a=hu(r[s],o[s]);if(0!==a)return a;var u=qu(n[r[s]],i[o[s]]);if(0!==u)return u}return hu(r.length,o.length)}(e.mapValue,t.mapValue);default:throw su()}}function Uu(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return hu(e,t);var n=Cu(e),r=Cu(t),i=hu(n.seconds,r.seconds);return 0!==i?i:hu(n.nanos,r.nanos)}function Vu(e){return Bu(e)}function Bu(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){var t=Cu(e);return"time("+t.seconds+","+t.nanos+")"}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?Au(e.bytesValue).toBase64():"referenceValue"in e?Lu.fromName(e.referenceValue).toString():"geoPointValue"in e?"geo("+(t=e.geoPointValue).latitude+","+t.longitude+")":"arrayValue"in e?function(e){for(var t="[",n=!0,r=0,i=e.values||[];r<i.length;r++)n?n=!1:t+=",",t+=Bu(i[r]);return t+"]"}(e.arrayValue):"mapValue"in e?function(e){for(var t="{",n=!0,r=0,i=Object.keys(e.fields||{}).sort();r<i.length;r++){var o=i[r];n?n=!1:t+=",",t+=o+":"+Bu(e.fields[o])}return t+"}"}(e.mapValue):su();var t}function Hu(e,t){return{referenceValue:"projects/"+e.projectId+"/databases/"+e.database+"/documents/"+t.path.canonicalString()}}function Wu(e){return!!e&&"integerValue"in e}function Ku(e){return!!e&&"arrayValue"in e}function zu(e){return!!e&&"nullValue"in e}function Gu(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function Qu(e){return!!e&&"mapValue"in e}function $u(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){var t={mapValue:{fields:{}}};return mu(e.mapValue.fields,function(e,n){return t.mapValue.fields[e]=$u(n)}),t}if(e.arrayValue){for(var n={arrayValue:{values:[]}},r=0;r<(e.arrayValue.values||[]).length;++r)n.arrayValue.values[r]=$u(e.arrayValue.values[r]);return n}return Object.assign({},e)}var Yu=function(){function e(e){this.value=e}return e.empty=function(){return new e({mapValue:{}})},e.prototype.field=function(e){if(e.isEmpty())return this.value;for(var t=this.value,n=0;n<e.length-1;++n)if(!Qu(t=(t.mapValue.fields||{})[e.get(n)]))return null;return(t=(t.mapValue.fields||{})[e.lastSegment()])||null},e.prototype.set=function(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=$u(t)},e.prototype.setAll=function(e){var t=this,n=Tu.emptyPath(),r={},i=[];e.forEach(function(e,o){if(!n.isImmediateParentOf(o)){var s=t.getFieldsMap(n);t.applyChanges(s,r,i),r={},i=[],n=o.popLast()}e?r[o.lastSegment()]=$u(e):i.push(o.lastSegment())});var o=this.getFieldsMap(n);this.applyChanges(o,r,i)},e.prototype.delete=function(e){var t=this.field(e.popLast());Qu(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]},e.prototype.isEqual=function(e){return Fu(this.value,e.value)},e.prototype.getFieldsMap=function(e){var t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(var n=0;n<e.length;++n){var r=t.mapValue.fields[e.get(n)];Qu(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields},e.prototype.applyChanges=function(e,t,n){mu(t,function(t,n){return e[t]=n});for(var r=0,i=n;r<i.length;r++)delete e[i[r]]},e.prototype.clone=function(){return new e($u(this.value))},e}();function Xu(e){var t=[];return mu(e.fields,function(e,n){var r=new Tu([e]);if(Qu(n)){var i=Xu(n.mapValue).fields;if(0===i.length)t.push(r);else for(var o=0,s=i;o<s.length;o++)t.push(r.child(s[o]))}else t.push(r)}),new Eu(t)}var Zu=function(){function e(e,t,n,r,i){this.key=e,this.documentType=t,this.version=n,this.data=r,this.documentState=i}return e.newInvalidDocument=function(t){return new e(t,0,gu.min(),Yu.empty(),0)},e.newFoundDocument=function(t,n,r){return new e(t,1,n,r,0)},e.newNoDocument=function(t,n){return new e(t,2,n,Yu.empty(),0)},e.newUnknownDocument=function(t,n){return new e(t,3,n,Yu.empty(),2)},e.prototype.convertToFoundDocument=function(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this},e.prototype.convertToNoDocument=function(e){return this.version=e,this.documentType=2,this.data=Yu.empty(),this.documentState=0,this},e.prototype.convertToUnknownDocument=function(e){return this.version=e,this.documentType=3,this.data=Yu.empty(),this.documentState=2,this},e.prototype.setHasCommittedMutations=function(){return this.documentState=2,this},e.prototype.setHasLocalMutations=function(){return this.documentState=1,this},Object.defineProperty(e.prototype,"hasLocalMutations",{get:function(){return 1===this.documentState},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"hasCommittedMutations",{get:function(){return 2===this.documentState},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return this.hasLocalMutations||this.hasCommittedMutations},enumerable:!1,configurable:!0}),e.prototype.isValidDocument=function(){return 0!==this.documentType},e.prototype.isFoundDocument=function(){return 1===this.documentType},e.prototype.isNoDocument=function(){return 2===this.documentType},e.prototype.isUnknownDocument=function(){return 3===this.documentType},e.prototype.isEqual=function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)},e.prototype.clone=function(){return new e(this.key,this.documentType,this.version,this.data.clone(),this.documentState)},e.prototype.toString=function(){return"Document("+this.key+", "+this.version+", "+JSON.stringify(this.data.value)+", {documentType: "+this.documentType+"}), {documentState: "+this.documentState+"})"},e}(),Ju=function(e,t,n,r,i,o,s){void 0===t&&(t=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===s&&(s=null),this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=o,this.endAt=s,this.h=null};function ec(e,t,n,r,i,o,s){return void 0===t&&(t=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===s&&(s=null),new Ju(e,t,n,r,i,o,s)}function tc(e){var t=uu(e);if(null===t.h){var n=t.path.canonicalString();null!==t.collectionGroup&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map(function(e){return function(e){return e.field.canonicalString()+e.op.toString()+Vu(e.value)}(e)}).join(","),n+="|ob:",n+=t.orderBy.map(function(e){return function(e){return e.field.canonicalString()+e.dir}(e)}).join(","),Pu(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=pc(t.startAt)),t.endAt&&(n+="|ub:",n+=pc(t.endAt)),t.h=n}return t.h}function nc(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(var n=0;n<e.orderBy.length;n++)if(!vc(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(var r=0;r<e.filters.length;r++)if((i=e.filters[r]).op!==(o=t.filters[r]).op||!i.field.isEqual(o.field)||!Fu(i.value,o.value))return!1;var i,o;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!yc(e.startAt,t.startAt)&&yc(e.endAt,t.endAt)}function rc(e){return Lu.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}var ic=function(e){function t(t,n,r){var i=this;return(i=e.call(this)||this).field=t,i.op=n,i.value=r,i}return(0,Ur.__extends)(t,e),t.create=function(e,n,r){return e.isKeyField()?"in"===n||"not-in"===n?this.l(e,n,r):new oc(e,n,r):"array-contains"===n?new cc(e,r):"in"===n?new lc(e,r):"not-in"===n?new hc(e,r):"array-contains-any"===n?new fc(e,r):new t(e,n,r)},t.l=function(e,t,n){return"in"===t?new sc(e,n):new ac(e,n)},t.prototype.matches=function(e){var t=e.data.field(this.field);return"!="===this.op?null!==t&&this.m(qu(t,this.value)):null!==t&&Mu(this.value)===Mu(t)&&this.m(qu(t,this.value))},t.prototype.m=function(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return su()}},t.prototype.g=function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0},t}(function(){}),oc=function(e){function t(t,n,r){var i=this;return(i=e.call(this,t,n,r)||this).key=Lu.fromName(r.referenceValue),i}return(0,Ur.__extends)(t,e),t.prototype.matches=function(e){var t=Lu.comparator(e.key,this.key);return this.m(t)},t}(ic),sc=function(e){function t(t,n){var r=this;return(r=e.call(this,t,"in",n)||this).keys=uc(0,n),r}return(0,Ur.__extends)(t,e),t.prototype.matches=function(e){return this.keys.some(function(t){return t.isEqual(e.key)})},t}(ic),ac=function(e){function t(t,n){var r=this;return(r=e.call(this,t,"not-in",n)||this).keys=uc(0,n),r}return(0,Ur.__extends)(t,e),t.prototype.matches=function(e){return!this.keys.some(function(t){return t.isEqual(e.key)})},t}(ic);function uc(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map(function(e){return Lu.fromName(e.referenceValue)})}var cc=function(e){function t(t,n){return e.call(this,t,"array-contains",n)||this}return(0,Ur.__extends)(t,e),t.prototype.matches=function(e){var t=e.data.field(this.field);return Ku(t)&&ju(t.arrayValue,this.value)},t}(ic),lc=function(e){function t(t,n){return e.call(this,t,"in",n)||this}return(0,Ur.__extends)(t,e),t.prototype.matches=function(e){var t=e.data.field(this.field);return null!==t&&ju(this.value.arrayValue,t)},t}(ic),hc=function(e){function t(t,n){return e.call(this,t,"not-in",n)||this}return(0,Ur.__extends)(t,e),t.prototype.matches=function(e){if(ju(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var t=e.data.field(this.field);return null!==t&&!ju(this.value.arrayValue,t)},t}(ic),fc=function(e){function t(t,n){return e.call(this,t,"array-contains-any",n)||this}return(0,Ur.__extends)(t,e),t.prototype.matches=function(e){var t=this,n=e.data.field(this.field);return!(!Ku(n)||!n.arrayValue.values)&&n.arrayValue.values.some(function(e){return ju(t.value.arrayValue,e)})},t}(ic),dc=function(e,t){this.position=e,this.before=t};function pc(e){return(e.before?"b":"a")+":"+e.position.map(function(e){return Vu(e)}).join(",")}var gc=function(e,t){void 0===t&&(t="asc"),this.field=e,this.dir=t};function vc(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}function mc(e,t,n){for(var r=0,i=0;i<e.position.length;i++){var o=t[i],s=e.position[i];if(r=o.field.isKeyField()?Lu.comparator(Lu.fromName(s.referenceValue),n.key):qu(s,n.data.field(o.field)),"desc"===o.dir&&(r*=-1),0!==r)break}return e.before?r<=0:r<0}function yc(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.before!==t.before||e.position.length!==t.position.length)return!1;for(var n=0;n<e.position.length;n++)if(!Fu(e.position[n],t.position[n]))return!1;return!0}var _c=function(e,t,n,r,i,o,s,a){void 0===t&&(t=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o="F"),void 0===s&&(s=null),void 0===a&&(a=null),this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=o,this.startAt=s,this.endAt=a,this.p=null,this.T=null};function bc(e,t,n,r,i,o,s,a){return new _c(e,t,n,r,i,o,s,a)}function wc(e){return new _c(e)}function Tc(e){return!Pu(e.limit)&&"F"===e.limitType}function Ec(e){return!Pu(e.limit)&&"L"===e.limitType}function Ic(e){return e.explicitOrderBy.length>0?e.explicitOrderBy[0].field:null}function kc(e){for(var t=0,n=e.filters;t<n.length;t++){var r=n[t];if(r.g())return r.field}return null}function Cc(e){return null!==e.collectionGroup}function Sc(e){var t=uu(e);if(null===t.p){t.p=[];var n=kc(t),r=Ic(t);if(null!==n&&null===r)n.isKeyField()||t.p.push(new gc(n)),t.p.push(new gc(Tu.keyField(),"asc"));else{for(var i=!1,o=0,s=t.explicitOrderBy;o<s.length;o++){var a=s[o];t.p.push(a),a.field.isKeyField()&&(i=!0)}if(!i){var u=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";t.p.push(new gc(Tu.keyField(),u))}}}return t.p}function Ac(e){var t=uu(e);if(!t.T)if("F"===t.limitType)t.T=ec(t.path,t.collectionGroup,Sc(t),t.filters,t.limit,t.startAt,t.endAt);else{for(var n=[],r=0,i=Sc(t);r<i.length;r++){var o=i[r];n.push(new gc(o.field,"desc"===o.dir?"asc":"desc"))}var s=t.endAt?new dc(t.endAt.position,!t.endAt.before):null,a=t.startAt?new dc(t.startAt.position,!t.startAt.before):null;t.T=ec(t.path,t.collectionGroup,n,t.filters,t.limit,s,a)}return t.T}function xc(e,t,n){return new _c(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function Nc(e,t){return nc(Ac(e),Ac(t))&&e.limitType===t.limitType}function Dc(e){return tc(Ac(e))+"|lt:"+e.limitType}function Pc(e){return"Query(target="+function(e){var t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=", filters: ["+e.filters.map(function(e){return(t=e).field.canonicalString()+" "+t.op+" "+Vu(t.value);var t}).join(", ")+"]"),Pu(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=", orderBy: ["+e.orderBy.map(function(e){return function(e){return e.field.canonicalString()+" ("+e.dir+")"}(e)}).join(", ")+"]"),e.startAt&&(t+=", startAt: "+pc(e.startAt)),e.endAt&&(t+=", endAt: "+pc(e.endAt)),"Target("+t+")"}(Ac(e))+"; limitType="+e.limitType+")"}function Oc(e,t){return t.isFoundDocument()&&function(e,t){var n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):Lu.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){for(var n=0,r=e.explicitOrderBy;n<r.length;n++){var i=r[n];if(!i.field.isKeyField()&&null===t.data.field(i.field))return!1}return!0}(e,t)&&function(e,t){for(var n=0,r=e.filters;n<r.length;n++)if(!r[n].matches(t))return!1;return!0}(e,t)&&function(e,t){return!(e.startAt&&!mc(e.startAt,Sc(e),t)||e.endAt&&mc(e.endAt,Sc(e),t))}(e,t)}function Rc(e){return function(t,n){for(var r=!1,i=0,o=Sc(e);i<o.length;i++){var s=o[i],a=Lc(s,t,n);if(0!==a)return a;r=r||s.field.isKeyField()}return 0}}function Lc(e,t,n){var r=e.field.isKeyField()?Lu.comparator(t.key,n.key):function(e,t,n){var r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?qu(r,i):su()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return su()}}function Mc(e,t){if(e.I){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ou(t)?"-0":t}}function Fc(e){return{integerValue:""+e}}function jc(e,t){return Ru(t)?Fc(t):Mc(e,t)}var qc=function(){this._=void 0};function Uc(e,t,n){return e instanceof Hc?function(e,t){var n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&(n.fields.__previous_value__=t),{mapValue:n}}(n,t):e instanceof Wc?Kc(e,t):e instanceof zc?Gc(e,t):function(e,t){var n=Bc(e,t),r=$c(n)+$c(e.A);return Wu(n)&&Wu(e.A)?Fc(r):Mc(e.R,r)}(e,t)}function Vc(e,t,n){return e instanceof Wc?Kc(e,t):e instanceof zc?Gc(e,t):n}function Bc(e,t){return e instanceof Qc?Wu(n=t)||function(e){return!!e&&"doubleValue"in e}(n)?t:{integerValue:0}:null;var n}var Hc=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,Ur.__extends)(t,e),t}(qc),Wc=function(e){function t(t){var n=this;return(n=e.call(this)||this).elements=t,n}return(0,Ur.__extends)(t,e),t}(qc);function Kc(e,t){for(var n=Yc(t),r=function(e){n.some(function(t){return Fu(t,e)})||n.push(e)},i=0,o=e.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var zc=function(e){function t(t){var n=this;return(n=e.call(this)||this).elements=t,n}return(0,Ur.__extends)(t,e),t}(qc);function Gc(e,t){for(var n=Yc(t),r=function(e){n=n.filter(function(t){return!Fu(t,e)})},i=0,o=e.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var Qc=function(e){function t(t,n){var r=this;return(r=e.call(this)||this).R=t,r.A=n,r}return(0,Ur.__extends)(t,e),t}(qc);function $c(e){return Su(e.integerValue||e.doubleValue)}function Yc(e){return Ku(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}var Xc=function(e,t){this.field=e,this.transform=t},Zc=function(e,t){this.version=e,this.transformResults=t},Jc=function(){function e(e,t){this.updateTime=e,this.exists=t}return e.none=function(){return new e},e.exists=function(t){return new e(void 0,t)},e.updateTime=function(t){return new e(t)},Object.defineProperty(e.prototype,"isNone",{get:function(){return void 0===this.updateTime&&void 0===this.exists},enumerable:!1,configurable:!0}),e.prototype.isEqual=function(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)},e}();function el(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}var tl=function(){};function nl(e,t,n){e instanceof al?function(e,t,n){var r=e.value.clone(),i=ll(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof ul?function(e,t,n){if(el(e.precondition,t)){var r=ll(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(cl(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}else t.convertToUnknownDocument(n.version)}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function rl(e,t,n){e instanceof al?function(e,t,n){if(el(e.precondition,t)){var r=e.value.clone(),i=hl(e.fieldTransforms,n,t);r.setAll(i),t.convertToFoundDocument(sl(t),r).setHasLocalMutations()}}(e,t,n):e instanceof ul?function(e,t,n){if(el(e.precondition,t)){var r=hl(e.fieldTransforms,n,t),i=t.data;i.setAll(cl(e)),i.setAll(r),t.convertToFoundDocument(sl(t),i).setHasLocalMutations()}}(e,t,n):function(e,t){el(e.precondition,t)&&t.convertToNoDocument(gu.min())}(e,t)}function il(e,t){for(var n=null,r=0,i=e.fieldTransforms;r<i.length;r++){var o=i[r],s=t.data.field(o.field),a=Bc(o.transform,s||null);null!=a&&(null==n&&(n=Yu.empty()),n.set(o.field,a))}return n||null}function ol(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&fu(e,t,function(e,t){return function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof Wc&&t instanceof Wc||e instanceof zc&&t instanceof zc?fu(e.elements,t.elements,Fu):e instanceof Qc&&t instanceof Qc?Fu(e.A,t.A):e instanceof Hc&&t instanceof Hc}(e.transform,t.transform)}(e,t)})}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}function sl(e){return e.isFoundDocument()?e.version:gu.min()}var al=function(e){function t(t,n,r,i){void 0===i&&(i=[]);var o=this;return(o=e.call(this)||this).key=t,o.value=n,o.precondition=r,o.fieldTransforms=i,o.type=0,o}return(0,Ur.__extends)(t,e),t}(tl),ul=function(e){function t(t,n,r,i,o){void 0===o&&(o=[]);var s=this;return(s=e.call(this)||this).key=t,s.data=n,s.fieldMask=r,s.precondition=i,s.fieldTransforms=o,s.type=1,s}return(0,Ur.__extends)(t,e),t}(tl);function cl(e){var t=new Map;return e.fieldMask.fields.forEach(function(n){if(!n.isEmpty()){var r=e.data.field(n);t.set(n,r)}}),t}function ll(e,t,n){var r=new Map;au(e.length===n.length);for(var i=0;i<n.length;i++){var o=e[i],s=o.transform,a=t.data.field(o.field);r.set(o.field,Vc(s,a,n[i]))}return r}function hl(e,t,n){for(var r=new Map,i=0,o=e;i<o.length;i++){var s=o[i],a=s.transform,u=n.data.field(s.field);r.set(s.field,Uc(a,u,t))}return r}var fl,dl,pl=function(e){function t(t,n){var r=this;return(r=e.call(this)||this).key=t,r.precondition=n,r.type=2,r.fieldTransforms=[],r}return(0,Ur.__extends)(t,e),t}(tl),gl=function(e){function t(t,n){var r=this;return(r=e.call(this)||this).key=t,r.precondition=n,r.type=3,r.fieldTransforms=[],r}return(0,Ur.__extends)(t,e),t}(tl),vl=function(e){this.count=e};function ml(e){switch(e){case Za.OK:return su();case Za.CANCELLED:case Za.UNKNOWN:case Za.DEADLINE_EXCEEDED:case Za.RESOURCE_EXHAUSTED:case Za.INTERNAL:case Za.UNAVAILABLE:case Za.UNAUTHENTICATED:return!1;case Za.INVALID_ARGUMENT:case Za.NOT_FOUND:case Za.ALREADY_EXISTS:case Za.PERMISSION_DENIED:case Za.FAILED_PRECONDITION:case Za.ABORTED:case Za.OUT_OF_RANGE:case Za.UNIMPLEMENTED:case Za.DATA_LOSS:return!0;default:return su()}}function yl(e){if(void 0===e)return ru("GRPC error has no .code"),Za.UNKNOWN;switch(e){case fl.OK:return Za.OK;case fl.CANCELLED:return Za.CANCELLED;case fl.UNKNOWN:return Za.UNKNOWN;case fl.DEADLINE_EXCEEDED:return Za.DEADLINE_EXCEEDED;case fl.RESOURCE_EXHAUSTED:return Za.RESOURCE_EXHAUSTED;case fl.INTERNAL:return Za.INTERNAL;case fl.UNAVAILABLE:return Za.UNAVAILABLE;case fl.UNAUTHENTICATED:return Za.UNAUTHENTICATED;case fl.INVALID_ARGUMENT:return Za.INVALID_ARGUMENT;case fl.NOT_FOUND:return Za.NOT_FOUND;case fl.ALREADY_EXISTS:return Za.ALREADY_EXISTS;case fl.PERMISSION_DENIED:return Za.PERMISSION_DENIED;case fl.FAILED_PRECONDITION:return Za.FAILED_PRECONDITION;case fl.ABORTED:return Za.ABORTED;case fl.OUT_OF_RANGE:return Za.OUT_OF_RANGE;case fl.UNIMPLEMENTED:return Za.UNIMPLEMENTED;case fl.DATA_LOSS:return Za.DATA_LOSS;default:return su()}}(dl=fl||(fl={}))[dl.OK=0]="OK",dl[dl.CANCELLED=1]="CANCELLED",dl[dl.UNKNOWN=2]="UNKNOWN",dl[dl.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",dl[dl.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",dl[dl.NOT_FOUND=5]="NOT_FOUND",dl[dl.ALREADY_EXISTS=6]="ALREADY_EXISTS",dl[dl.PERMISSION_DENIED=7]="PERMISSION_DENIED",dl[dl.UNAUTHENTICATED=16]="UNAUTHENTICATED",dl[dl.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",dl[dl.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",dl[dl.ABORTED=10]="ABORTED",dl[dl.OUT_OF_RANGE=11]="OUT_OF_RANGE",dl[dl.UNIMPLEMENTED=12]="UNIMPLEMENTED",dl[dl.INTERNAL=13]="INTERNAL",dl[dl.UNAVAILABLE=14]="UNAVAILABLE",dl[dl.DATA_LOSS=15]="DATA_LOSS";var _l=function(){function e(e,t){this.comparator=e,this.root=t||wl.EMPTY}return e.prototype.insert=function(t,n){return new e(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,wl.BLACK,null,null))},e.prototype.remove=function(t){return new e(this.comparator,this.root.remove(t,this.comparator).copy(null,null,wl.BLACK,null,null))},e.prototype.get=function(e){for(var t=this.root;!t.isEmpty();){var n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null},e.prototype.indexOf=function(e){for(var t=0,n=this.root;!n.isEmpty();){var r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1},e.prototype.isEmpty=function(){return this.root.isEmpty()},Object.defineProperty(e.prototype,"size",{get:function(){return this.root.size},enumerable:!1,configurable:!0}),e.prototype.minKey=function(){return this.root.minKey()},e.prototype.maxKey=function(){return this.root.maxKey()},e.prototype.inorderTraversal=function(e){return this.root.inorderTraversal(e)},e.prototype.forEach=function(e){this.inorderTraversal(function(t,n){return e(t,n),!1})},e.prototype.toString=function(){var e=[];return this.inorderTraversal(function(t,n){return e.push(t+":"+n),!1}),"{"+e.join(", ")+"}"},e.prototype.reverseTraversal=function(e){return this.root.reverseTraversal(e)},e.prototype.getIterator=function(){return new bl(this.root,null,this.comparator,!1)},e.prototype.getIteratorFrom=function(e){return new bl(this.root,e,this.comparator,!1)},e.prototype.getReverseIterator=function(){return new bl(this.root,null,this.comparator,!0)},e.prototype.getReverseIteratorFrom=function(e){return new bl(this.root,e,this.comparator,!0)},e}(),bl=function(){function e(e,t,n,r){this.isReverse=r,this.nodeStack=[];for(var i=1;!e.isEmpty();)if(i=t?n(e.key,t):1,r&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(0===i){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}return e.prototype.getNext=function(){var e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t},e.prototype.hasNext=function(){return this.nodeStack.length>0},e.prototype.peek=function(){if(0===this.nodeStack.length)return null;var e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}},e}(),wl=function(){function e(t,n,r,i,o){this.key=t,this.value=n,this.color=null!=r?r:e.RED,this.left=null!=i?i:e.EMPTY,this.right=null!=o?o:e.EMPTY,this.size=this.left.size+1+this.right.size}return e.prototype.copy=function(t,n,r,i,o){return new e(null!=t?t:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)},e.prototype.isEmpty=function(){return!1},e.prototype.inorderTraversal=function(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)},e.prototype.reverseTraversal=function(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)},e.prototype.min=function(){return this.left.isEmpty()?this:this.left.min()},e.prototype.minKey=function(){return this.min().key},e.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},e.prototype.insert=function(e,t,n){var r=this,i=n(e,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n))).fixUp()},e.prototype.removeMin=function(){if(this.left.isEmpty())return e.EMPTY;var t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),(t=t.copy(null,null,null,t.left.removeMin(),null)).fixUp()},e.prototype.remove=function(t,n){var r,i=this;if(n(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(t,i.key)){if(i.right.isEmpty())return e.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,n))}return i.fixUp()},e.prototype.isRed=function(){return this.color},e.prototype.fixUp=function(){var e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e},e.prototype.moveRedLeft=function(){var e=this.colorFlip();return e.right.left.isRed()&&(e=(e=(e=e.copy(null,null,null,null,e.right.rotateRight())).rotateLeft()).colorFlip()),e},e.prototype.moveRedRight=function(){var e=this.colorFlip();return e.left.left.isRed()&&(e=(e=e.rotateRight()).colorFlip()),e},e.prototype.rotateLeft=function(){var t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)},e.prototype.rotateRight=function(){var t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)},e.prototype.colorFlip=function(){var e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)},e.prototype.checkMaxDepth=function(){var e=this.check();return Math.pow(2,e)<=this.size+1},e.prototype.check=function(){if(this.isRed()&&this.left.isRed())throw su();if(this.right.isRed())throw su();var e=this.left.check();if(e!==this.right.check())throw su();return e+(this.isRed()?0:1)},e}();wl.EMPTY=null,wl.RED=!0,wl.BLACK=!1,wl.EMPTY=new(function(){function e(){this.size=0}return Object.defineProperty(e.prototype,"key",{get:function(){throw su()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"value",{get:function(){throw su()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"color",{get:function(){throw su()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"left",{get:function(){throw su()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"right",{get:function(){throw su()},enumerable:!1,configurable:!0}),e.prototype.copy=function(e,t,n,r,i){return this},e.prototype.insert=function(e,t,n){return new wl(e,t)},e.prototype.remove=function(e,t){return this},e.prototype.isEmpty=function(){return!0},e.prototype.inorderTraversal=function(e){return!1},e.prototype.reverseTraversal=function(e){return!1},e.prototype.minKey=function(){return null},e.prototype.maxKey=function(){return null},e.prototype.isRed=function(){return!1},e.prototype.checkMaxDepth=function(){return!0},e.prototype.check=function(){return 0},e}());var Tl=function(){function e(e){this.comparator=e,this.data=new _l(this.comparator)}return e.prototype.has=function(e){return null!==this.data.get(e)},e.prototype.first=function(){return this.data.minKey()},e.prototype.last=function(){return this.data.maxKey()},Object.defineProperty(e.prototype,"size",{get:function(){return this.data.size},enumerable:!1,configurable:!0}),e.prototype.indexOf=function(e){return this.data.indexOf(e)},e.prototype.forEach=function(e){this.data.inorderTraversal(function(t,n){return e(t),!1})},e.prototype.forEachInRange=function(e,t){for(var n=this.data.getIteratorFrom(e[0]);n.hasNext();){var r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}},e.prototype.forEachWhile=function(e,t){var n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return},e.prototype.firstAfterOrEqual=function(e){var t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null},e.prototype.getIterator=function(){return new El(this.data.getIterator())},e.prototype.getIteratorFrom=function(e){return new El(this.data.getIteratorFrom(e))},e.prototype.add=function(e){return this.copy(this.data.remove(e).insert(e,!0))},e.prototype.delete=function(e){return this.has(e)?this.copy(this.data.remove(e)):this},e.prototype.isEmpty=function(){return this.data.isEmpty()},e.prototype.unionWith=function(e){var t=this;return t.size<e.size&&(t=e,e=this),e.forEach(function(e){t=t.add(e)}),t},e.prototype.isEqual=function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.data.getIterator(),r=t.data.getIterator();n.hasNext();){var i=n.getNext().key,o=r.getNext().key;if(0!==this.comparator(i,o))return!1}return!0},e.prototype.toArray=function(){var e=[];return this.forEach(function(t){e.push(t)}),e},e.prototype.toString=function(){var e=[];return this.forEach(function(t){return e.push(t)}),"SortedSet("+e.toString()+")"},e.prototype.copy=function(t){var n=new e(this.comparator);return n.data=t,n},e}(),El=function(){function e(e){this.iter=e}return e.prototype.getNext=function(){return this.iter.getNext().key},e.prototype.hasNext=function(){return this.iter.hasNext()},e}(),Il=new _l(Lu.comparator);function kl(){return Il}var Cl=new _l(Lu.comparator);function Sl(){return Cl}var Al=new _l(Lu.comparator);function xl(){return Al}var Nl=new Tl(Lu.comparator);function Dl(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var n=Nl,r=0,i=e;r<i.length;r++){var o=i[r];n=n.add(o)}return n}var Pl=new Tl(hu);function Ol(){return Pl}var Rl=function(){function e(e,t,n,r,i){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}return e.createSynthesizedRemoteEventForCurrentChange=function(t,n){var r=new Map;return r.set(t,Ll.createSynthesizedTargetChangeForCurrentChange(t,n)),new e(gu.min(),r,Ol(),kl(),Dl())},e}(),Ll=function(){function e(e,t,n,r,i){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}return e.createSynthesizedTargetChangeForCurrentChange=function(t,n){return new e(Iu.EMPTY_BYTE_STRING,n,Dl(),Dl(),Dl())},e}(),Ml=function(e,t,n,r){this.v=e,this.removedTargetIds=t,this.key=n,this.P=r},Fl=function(e,t){this.targetId=e,this.V=t},jl=function(e,t,n,r){void 0===n&&(n=Iu.EMPTY_BYTE_STRING),void 0===r&&(r=null),this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=r},ql=function(){function e(){this.S=0,this.D=Bl(),this.C=Iu.EMPTY_BYTE_STRING,this.N=!1,this.F=!0}return Object.defineProperty(e.prototype,"current",{get:function(){return this.N},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"resumeToken",{get:function(){return this.C},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"k",{get:function(){return 0!==this.S},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"$",{get:function(){return this.F},enumerable:!1,configurable:!0}),e.prototype.O=function(e){e.approximateByteSize()>0&&(this.F=!0,this.C=e)},e.prototype.M=function(){var e=Dl(),t=Dl(),n=Dl();return this.D.forEach(function(r,i){switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:su()}}),new Ll(this.C,this.N,e,t,n)},e.prototype.L=function(){this.F=!1,this.D=Bl()},e.prototype.B=function(e,t){this.F=!0,this.D=this.D.insert(e,t)},e.prototype.q=function(e){this.F=!0,this.D=this.D.remove(e)},e.prototype.U=function(){this.S+=1},e.prototype.K=function(){this.S-=1},e.prototype.j=function(){this.F=!0,this.N=!0},e}(),Ul=function(){function e(e){this.W=e,this.G=new Map,this.H=kl(),this.J=Vl(),this.Y=new Tl(hu)}return e.prototype.X=function(e){for(var t=0,n=e.v;t<n.length;t++){var r=n[t];e.P&&e.P.isFoundDocument()?this.Z(r,e.P):this.tt(r,e.key,e.P)}for(var i=0,o=e.removedTargetIds;i<o.length;i++)this.tt(r=o[i],e.key,e.P)},e.prototype.et=function(e){var t=this;this.forEachTarget(e,function(n){var r=t.nt(n);switch(e.state){case 0:t.st(n)&&r.O(e.resumeToken);break;case 1:r.K(),r.k||r.L(),r.O(e.resumeToken);break;case 2:r.K(),r.k||t.removeTarget(n);break;case 3:t.st(n)&&(r.j(),r.O(e.resumeToken));break;case 4:t.st(n)&&(t.it(n),r.O(e.resumeToken));break;default:su()}})},e.prototype.forEachTarget=function(e,t){var n=this;e.targetIds.length>0?e.targetIds.forEach(t):this.G.forEach(function(e,r){n.st(r)&&t(r)})},e.prototype.rt=function(e){var t=e.targetId,n=e.V.count,r=this.ot(t);if(r){var i=r.target;if(rc(i))if(0===n){var o=new Lu(i.path);this.tt(t,o,Zu.newNoDocument(o,gu.min()))}else au(1===n);else this.ct(t)!==n&&(this.it(t),this.Y=this.Y.add(t))}},e.prototype.ut=function(e){var t=this,n=new Map;this.G.forEach(function(r,i){var o=t.ot(i);if(o){if(r.current&&rc(o.target)){var s=new Lu(o.target.path);null!==t.H.get(s)||t.at(i,s)||t.tt(i,s,Zu.newNoDocument(s,e))}r.$&&(n.set(i,r.M()),r.L())}});var r=Dl();this.J.forEach(function(e,n){var i=!0;n.forEachWhile(function(e){var n=t.ot(e);return!n||2===n.purpose||(i=!1,!1)}),i&&(r=r.add(e))});var i=new Rl(e,n,this.Y,this.H,r);return this.H=kl(),this.J=Vl(),this.Y=new Tl(hu),i},e.prototype.Z=function(e,t){if(this.st(e)){var n=this.at(e,t.key)?2:0;this.nt(e).B(t.key,n),this.H=this.H.insert(t.key,t),this.J=this.J.insert(t.key,this.ht(t.key).add(e))}},e.prototype.tt=function(e,t,n){if(this.st(e)){var r=this.nt(e);this.at(e,t)?r.B(t,1):r.q(t),this.J=this.J.insert(t,this.ht(t).delete(e)),n&&(this.H=this.H.insert(t,n))}},e.prototype.removeTarget=function(e){this.G.delete(e)},e.prototype.ct=function(e){var t=this.nt(e).M();return this.W.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size},e.prototype.U=function(e){this.nt(e).U()},e.prototype.nt=function(e){var t=this.G.get(e);return t||(t=new ql,this.G.set(e,t)),t},e.prototype.ht=function(e){var t=this.J.get(e);return t||(t=new Tl(hu),this.J=this.J.insert(e,t)),t},e.prototype.st=function(e){var t=null!==this.ot(e);return t||nu("WatchChangeAggregator","Detected inactive target",e),t},e.prototype.ot=function(e){var t=this.G.get(e);return t&&t.k?null:this.W.lt(e)},e.prototype.it=function(e){var t=this;this.G.set(e,new ql),this.W.getRemoteKeysForTarget(e).forEach(function(n){t.tt(e,n,null)})},e.prototype.at=function(e,t){return this.W.getRemoteKeysForTarget(e).has(t)},e}();function Vl(){return new _l(Lu.comparator)}function Bl(){return new _l(Lu.comparator)}var Hl={asc:"ASCENDING",desc:"DESCENDING"},Wl={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Kl=function(e,t){this.databaseId=e,this.I=t};function zl(e,t){return e.I?new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")+"."+("000000000"+t.nanoseconds).slice(-9)+"Z":{seconds:""+t.seconds,nanos:t.nanoseconds}}function Gl(e,t){return e.I?t.toBase64():t.toUint8Array()}function Ql(e,t){return zl(e,t.toTimestamp())}function $l(e){return au(!!e),gu.fromTimestamp(function(e){var t=Cu(e);return new pu(t.seconds,t.nanos)}(e))}function Yl(e,t){return function(e){return new bu(["projects",e.projectId,"databases",e.database])}(e).child("documents").child(t).canonicalString()}function Xl(e){var t=bu.fromString(e);return au(wh(t)),t}function Zl(e,t){return Yl(e.databaseId,t.path)}function Jl(e,t){var n=Xl(t);if(n.get(1)!==e.databaseId.projectId)throw new Ja(Za.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new Ja(Za.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new Lu(rh(n))}function eh(e,t){return Yl(e.databaseId,t)}function th(e){var t=Xl(e);return 4===t.length?bu.emptyPath():rh(t)}function nh(e){return new bu(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function rh(e){return au(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function ih(e,t,n){return{name:Zl(e,t),fields:n.value.mapValue.fields}}function oh(e,t,n){var r=Jl(e,t.name),i=$l(t.updateTime),o=new Yu({mapValue:{fields:t.fields}}),s=Zu.newFoundDocument(r,i,o);return n&&s.setHasCommittedMutations(),n?s.setHasCommittedMutations():s}function sh(e,t){var n;if(t instanceof al)n={update:ih(e,t.key,t.value)};else if(t instanceof pl)n={delete:Zl(e,t.key)};else if(t instanceof ul)n={update:ih(e,t.key,t.data),updateMask:bh(t.fieldMask)};else{if(!(t instanceof gl))return su();n={verify:Zl(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map(function(e){return function(e,t){var n=t.transform;if(n instanceof Hc)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof Wc)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof zc)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof Qc)return{fieldPath:t.field.canonicalString(),increment:n.A};throw su()}(0,e)})),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:Ql(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:su()}(e,t.precondition)),n}function ah(e,t){var n=t.currentDocument?function(e){return void 0!==e.updateTime?Jc.updateTime($l(e.updateTime)):void 0!==e.exists?Jc.exists(e.exists):Jc.none()}(t.currentDocument):Jc.none(),r=t.updateTransforms?t.updateTransforms.map(function(t){return function(e,t){var n=null;"setToServerValue"in t?(au("REQUEST_TIME"===t.setToServerValue),n=new Hc):"appendMissingElements"in t?n=new Wc(t.appendMissingElements.values||[]):"removeAllFromArray"in t?n=new zc(t.removeAllFromArray.values||[]):"increment"in t?n=new Qc(e,t.increment):su();var r=Tu.fromServerFormat(t.fieldPath);return new Xc(r,n)}(e,t)}):[];if(t.update){var i=Jl(e,t.update.name),o=new Yu({mapValue:{fields:t.update.fields}});if(t.updateMask){var s=function(e){return new Eu((e.fieldPaths||[]).map(function(e){return Tu.fromServerFormat(e)}))}(t.updateMask);return new ul(i,o,s,n,r)}return new al(i,o,n,r)}if(t.delete){var a=Jl(e,t.delete);return new pl(a,n)}if(t.verify){var u=Jl(e,t.verify);return new gl(u,n)}return su()}function uh(e,t){return{documents:[eh(e,t.path)]}}function ch(e,t){var n={structuredQuery:{}},r=t.path;null!==t.collectionGroup?(n.parent=eh(e,r),n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(n.parent=eh(e,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);var i=function(e){if(0!==e.length){var t=e.map(function(e){return function(e){if("=="===e.op){if(Gu(e.value))return{unaryFilter:{field:vh(e.field),op:"IS_NAN"}};if(zu(e.value))return{unaryFilter:{field:vh(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(Gu(e.value))return{unaryFilter:{field:vh(e.field),op:"IS_NOT_NAN"}};if(zu(e.value))return{unaryFilter:{field:vh(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:vh(e.field),op:gh(e.op),value:e.value}}}(e)});return 1===t.length?t[0]:{compositeFilter:{op:"AND",filters:t}}}}(t.filters);i&&(n.structuredQuery.where=i);var o=function(e){if(0!==e.length)return e.map(function(e){return function(e){return{field:vh(e.field),direction:ph(e.dir)}}(e)})}(t.orderBy);o&&(n.structuredQuery.orderBy=o);var s=function(e,t){return e.I||Pu(t)?t:{value:t}}(e,t.limit);return null!==s&&(n.structuredQuery.limit=s),t.startAt&&(n.structuredQuery.startAt=fh(t.startAt)),t.endAt&&(n.structuredQuery.endAt=fh(t.endAt)),n}function lh(e){var t=th(e.parent),n=e.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){au(1===r);var o=n.from[0];o.allDescendants?i=o.collectionId:t=t.child(o.collectionId)}var s=[];n.where&&(s=hh(n.where));var a=[];n.orderBy&&(a=n.orderBy.map(function(e){return function(e){return new gc(mh(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e)}));var u=null;n.limit&&(u=function(e){var t;return Pu(t="object"==typeof e?e.value:e)?null:t}(n.limit));var c=null;n.startAt&&(c=dh(n.startAt));var l=null;return n.endAt&&(l=dh(n.endAt)),bc(t,i,a,s,u,"F",c,l)}function hh(e){return e?void 0!==e.unaryFilter?[_h(e)]:void 0!==e.fieldFilter?[yh(e)]:void 0!==e.compositeFilter?e.compositeFilter.filters.map(function(e){return hh(e)}).reduce(function(e,t){return e.concat(t)}):su():[]}function fh(e){return{before:e.before,values:e.position}}function dh(e){return new dc(e.values||[],!!e.before)}function ph(e){return Hl[e]}function gh(e){return Wl[e]}function vh(e){return{fieldPath:e.canonicalString()}}function mh(e){return Tu.fromServerFormat(e.fieldPath)}function yh(e){return ic.create(mh(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":default:return su()}}(e.fieldFilter.op),e.fieldFilter.value)}function _h(e){switch(e.unaryFilter.op){case"IS_NAN":var t=mh(e.unaryFilter.field);return ic.create(t,"==",{doubleValue:NaN});case"IS_NULL":var n=mh(e.unaryFilter.field);return ic.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=mh(e.unaryFilter.field);return ic.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=mh(e.unaryFilter.field);return ic.create(i,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":default:return su()}}function bh(e){var t=[];return e.fields.forEach(function(e){return t.push(e.canonicalString())}),{fieldPaths:t}}function wh(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}function Th(e){for(var t="",n=0;n<e.length;n++)t.length>0&&(t=Ih(t)),t=Eh(e.get(n),t);return Ih(t)}function Eh(e,t){for(var n=t,r=e.length,i=0;i<r;i++){var o=e.charAt(i);switch(o){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=o}}return n}function Ih(e){return e+"\x01\x01"}function kh(e){var t=e.length;if(au(t>=2),2===t)return au("\x01"===e.charAt(0)&&"\x01"===e.charAt(1)),bu.emptyPath();for(var n=t-2,r=[],i="",o=0;o<t;){var s=e.indexOf("\x01",o);switch((s<0||s>n)&&su(),e.charAt(s+1)){case"\x01":var a=e.substring(o,s),u=void 0;0===i.length?u=a:(u=i+=a,i=""),r.push(u);break;case"\x10":i+=e.substring(o,s),i+="\0";break;case"\x11":i+=e.substring(o,s+1);break;default:su()}o=s+2}return new bu(r)}var Ch=function(e,t){this.seconds=e,this.nanoseconds=t},Sh=function(e,t,n){this.ownerId=e,this.allowTabSynchronization=t,this.leaseTimestampMs=n};Sh.store="owner",Sh.key="owner";var Ah=function(e,t,n){this.userId=e,this.lastAcknowledgedBatchId=t,this.lastStreamToken=n};Ah.store="mutationQueues",Ah.keyPath="userId";var xh=function(e,t,n,r,i){this.userId=e,this.batchId=t,this.localWriteTimeMs=n,this.baseMutations=r,this.mutations=i};xh.store="mutations",xh.keyPath="batchId",xh.userMutationsIndex="userMutationsIndex",xh.userMutationsKeyPath=["userId","batchId"];var Nh=function(){function e(){}return e.prefixForUser=function(e){return[e]},e.prefixForPath=function(e,t){return[e,Th(t)]},e.key=function(e,t,n){return[e,Th(t),n]},e}();Nh.store="documentMutations",Nh.PLACEHOLDER=new Nh;var Dh=function(e,t){this.path=e,this.readTime=t},Ph=function(e,t){this.path=e,this.version=t},Oh=function(e,t,n,r,i,o){this.unknownDocument=e,this.noDocument=t,this.document=n,this.hasCommittedMutations=r,this.readTime=i,this.parentPath=o};Oh.store="remoteDocuments",Oh.readTimeIndex="readTimeIndex",Oh.readTimeIndexPath="readTime",Oh.collectionReadTimeIndex="collectionReadTimeIndex",Oh.collectionReadTimeIndexPath=["parentPath","readTime"];var Rh=function(e){this.byteSize=e};Rh.store="remoteDocumentGlobal",Rh.key="remoteDocumentGlobalKey";var Lh=function(e,t,n,r,i,o,s){this.targetId=e,this.canonicalId=t,this.readTime=n,this.resumeToken=r,this.lastListenSequenceNumber=i,this.lastLimboFreeSnapshotVersion=o,this.query=s};Lh.store="targets",Lh.keyPath="targetId",Lh.queryTargetsIndexName="queryTargetsIndex",Lh.queryTargetsKeyPath=["canonicalId","targetId"];var Mh=function(e,t,n){this.targetId=e,this.path=t,this.sequenceNumber=n};Mh.store="targetDocuments",Mh.keyPath=["targetId","path"],Mh.documentTargetsIndex="documentTargetsIndex",Mh.documentTargetsKeyPath=["path","targetId"];var Fh=function(e,t,n,r){this.highestTargetId=e,this.highestListenSequenceNumber=t,this.lastRemoteSnapshotVersion=n,this.targetCount=r};Fh.key="targetGlobalKey",Fh.store="targetGlobal";var jh=function(e,t){this.collectionId=e,this.parent=t};jh.store="collectionParents",jh.keyPath=["collectionId","parent"];var qh=function(e,t,n,r){this.clientId=e,this.updateTimeMs=t,this.networkEnabled=n,this.inForeground=r};qh.store="clientMetadata",qh.keyPath="clientId";var Uh=function(e,t,n){this.bundleId=e,this.createTime=t,this.version=n};Uh.store="bundles",Uh.keyPath="bundleId";var Vh=function(e,t,n){this.name=e,this.readTime=t,this.bundledQuery=n};Vh.store="namedQueries",Vh.keyPath="name";var Bh=(0,Ur.__spreadArray)((0,Ur.__spreadArray)([],(0,Ur.__spreadArray)((0,Ur.__spreadArray)([],(0,Ur.__spreadArray)((0,Ur.__spreadArray)([],(0,Ur.__spreadArray)((0,Ur.__spreadArray)([],[Ah.store,xh.store,Nh.store,Oh.store,Lh.store,Sh.store,Fh.store,Mh.store]),[qh.store])),[Rh.store])),[jh.store])),[Uh.store,Vh.store]),Hh="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Wh=function(){function e(){this.onCommittedListeners=[]}return e.prototype.addOnCommittedListener=function(e){this.onCommittedListeners.push(e)},e.prototype.raiseOnCommittedEvent=function(){this.onCommittedListeners.forEach(function(e){return e()})},e}(),Kh=function(){var e=this;this.promise=new Promise(function(t,n){e.resolve=t,e.reject=n})},zh=function(){function e(e){var t=this;this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(function(e){t.isDone=!0,t.result=e,t.nextCallback&&t.nextCallback(e)},function(e){t.isDone=!0,t.error=e,t.catchCallback&&t.catchCallback(e)})}return e.prototype.catch=function(e){return this.next(void 0,e)},e.prototype.next=function(t,n){var r=this;return this.callbackAttached&&su(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new e(function(e,i){r.nextCallback=function(n){r.wrapSuccess(t,n).next(e,i)},r.catchCallback=function(t){r.wrapFailure(n,t).next(e,i)}})},e.prototype.toPromise=function(){var e=this;return new Promise(function(t,n){e.next(t,n)})},e.prototype.wrapUserFunction=function(t){try{var n=t();return n instanceof e?n:e.resolve(n)}catch(t){return e.reject(t)}},e.prototype.wrapSuccess=function(t,n){return t?this.wrapUserFunction(function(){return t(n)}):e.resolve(n)},e.prototype.wrapFailure=function(t,n){return t?this.wrapUserFunction(function(){return t(n)}):e.reject(n)},e.resolve=function(t){return new e(function(e,n){e(t)})},e.reject=function(t){return new e(function(e,n){n(t)})},e.waitFor=function(t){return new e(function(e,n){var r=0,i=0,o=!1;t.forEach(function(t){++r,t.next(function(){++i,o&&i===r&&e()},function(e){return n(e)})}),o=!0,i===r&&e()})},e.or=function(t){for(var n=e.resolve(!1),r=function(t){n=n.next(function(n){return n?e.resolve(n):t()})},i=0,o=t;i<o.length;i++)r(o[i]);return n},e.forEach=function(e,t){var n=this,r=[];return e.forEach(function(e,i){r.push(t.call(n,e,i))}),this.waitFor(r)},e}(),Gh=function(){function e(e,t){var n=this;this.action=e,this.transaction=t,this.aborted=!1,this.ft=new Kh,this.transaction.oncomplete=function(){n.ft.resolve()},this.transaction.onabort=function(){t.error?n.ft.reject(new Yh(e,t.error)):n.ft.resolve()},this.transaction.onerror=function(t){var r=tf(t.target.error);n.ft.reject(new Yh(e,r))}}return e.open=function(t,n,r,i){try{return new e(n,t.transaction(i,r))}catch(t){throw new Yh(n,t)}},Object.defineProperty(e.prototype,"dt",{get:function(){return this.ft.promise},enumerable:!1,configurable:!0}),e.prototype.abort=function(e){e&&this.ft.reject(e),this.aborted||(nu("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())},e.prototype.store=function(e){var t=this.transaction.objectStore(e);return new Zh(t)},e}(),Qh=function(){function e(t,n,r){this.name=t,this.version=n,this.wt=r,12.2===e._t((0,Vr.getUA)())&&ru("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return e.delete=function(e){return nu("SimpleDb","Removing database:",e),Jh(window.indexedDB.deleteDatabase(e)).toPromise()},e.yt=function(){if("undefined"==typeof indexedDB)return!1;if(e.gt())return!0;var t=(0,Vr.getUA)(),n=e._t(t),r=0<n&&n<10,i=e.Et(t),o=0<i&&i<4.5;return!(t.indexOf("MSIE ")>0||t.indexOf("Trident/")>0||t.indexOf("Edge/")>0||r||o)},e.gt=function(){var e;return"undefined"!=typeof process&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.Tt)},e.It=function(e,t){return e.store(t)},e._t=function(e){var t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(n)},e.Et=function(e){var t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)},e.prototype.At=function(e){return(0,Ur.__awaiter)(this,void 0,void 0,function(){var t,n=this;return(0,Ur.__generator)(this,function(r){switch(r.label){case 0:return this.db?[3,2]:(nu("SimpleDb","Opening database:",this.name),t=this,[4,new Promise(function(t,r){var i=indexedDB.open(n.name,n.version);i.onsuccess=function(e){t(e.target.result)},i.onblocked=function(){r(new Yh(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=function(t){var n=t.target.error;r("VersionError"===n.name?new Ja(Za.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):new Yh(e,n))},i.onupgradeneeded=function(e){nu("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',e.oldVersion),n.wt.Rt(e.target.result,i.transaction,e.oldVersion,n.version).next(function(){nu("SimpleDb","Database upgrade to version "+n.version+" complete")})}})]);case 1:t.db=r.sent(),r.label=2;case 2:return[2,(this.bt&&(this.db.onversionchange=function(e){return n.bt(e)}),this.db)]}})})},e.prototype.vt=function(e){this.bt=e,this.db&&(this.db.onversionchange=function(t){return e(t)})},e.prototype.runTransaction=function(e,t,n,r){return(0,Ur.__awaiter)(this,void 0,void 0,function(){var i,o,s,a,u;return(0,Ur.__generator)(this,function(c){switch(c.label){case 0:i="readonly"===t,o=0,s=function(){var t,s,u,c,l;return(0,Ur.__generator)(this,function(h){switch(h.label){case 0:++o,h.label=1;case 1:return h.trys.push([1,4,,5]),[4,a.At(e)];case 2:return a.db=h.sent(),t=Gh.open(a.db,e,i?"readonly":"readwrite",n),s=r(t).catch(function(e){return t.abort(e),zh.reject(e)}).toPromise(),u={},s.catch(function(){}),[4,t.dt];case 3:return[2,(u.value=(h.sent(),s),u)];case 4:return nu("SimpleDb","Transaction failed with error:",(c=h.sent()).message,"Retrying:",l="FirebaseError"!==c.name&&o<3),a.close(),l?[3,5]:[2,{value:Promise.reject(c)}];case 5:return[2]}})},a=this,c.label=1;case 1:return[5,s()];case 2:if("object"==typeof(u=c.sent()))return[2,u.value];c.label=3;case 3:return[3,1];case 4:return[2]}})})},e.prototype.close=function(){this.db&&this.db.close(),this.db=void 0},e}(),$h=function(){function e(e){this.Pt=e,this.Vt=!1,this.St=null}return Object.defineProperty(e.prototype,"isDone",{get:function(){return this.Vt},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"Dt",{get:function(){return this.St},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"cursor",{set:function(e){this.Pt=e},enumerable:!1,configurable:!0}),e.prototype.done=function(){this.Vt=!0},e.prototype.Ct=function(e){this.St=e},e.prototype.delete=function(){return Jh(this.Pt.delete())},e}(),Yh=function(e){function t(t,n){var r=this;return(r=e.call(this,Za.UNAVAILABLE,"IndexedDB transaction '"+t+"' failed: "+n)||this).name="IndexedDbTransactionError",r}return(0,Ur.__extends)(t,e),t}(Ja);function Xh(e){return"IndexedDbTransactionError"===e.name}var Zh=function(){function e(e){this.store=e}return e.prototype.put=function(e,t){var n;return void 0!==t?(nu("SimpleDb","PUT",this.store.name,e,t),n=this.store.put(t,e)):(nu("SimpleDb","PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),Jh(n)},e.prototype.add=function(e){return nu("SimpleDb","ADD",this.store.name,e,e),Jh(this.store.add(e))},e.prototype.get=function(e){var t=this;return Jh(this.store.get(e)).next(function(n){return void 0===n&&(n=null),nu("SimpleDb","GET",t.store.name,e,n),n})},e.prototype.delete=function(e){return nu("SimpleDb","DELETE",this.store.name,e),Jh(this.store.delete(e))},e.prototype.count=function(){return nu("SimpleDb","COUNT",this.store.name),Jh(this.store.count())},e.prototype.Nt=function(e,t){var n=this.cursor(this.options(e,t)),r=[];return this.xt(n,function(e,t){r.push(t)}).next(function(){return r})},e.prototype.Ft=function(e,t){nu("SimpleDb","DELETE ALL",this.store.name);var n=this.options(e,t);n.kt=!1;var r=this.cursor(n);return this.xt(r,function(e,t,n){return n.delete()})},e.prototype.$t=function(e,t){var n;t?n=e:(n={},t=e);var r=this.cursor(n);return this.xt(r,t)},e.prototype.Ot=function(e){var t=this.cursor({});return new zh(function(n,r){t.onerror=function(e){var t=tf(e.target.error);r(t)},t.onsuccess=function(t){var r=t.target.result;r?e(r.primaryKey,r.value).next(function(e){e?r.continue():n()}):n()}})},e.prototype.xt=function(e,t){var n=[];return new zh(function(r,i){e.onerror=function(e){i(e.target.error)},e.onsuccess=function(e){var i=e.target.result;if(i){var o=new $h(i),s=t(i.primaryKey,i.value,o);if(s instanceof zh){var a=s.catch(function(e){return o.done(),zh.reject(e)});n.push(a)}o.isDone?r():null===o.Dt?i.continue():i.continue(o.Dt)}else r()}}).next(function(){return zh.waitFor(n)})},e.prototype.options=function(e,t){var n;return void 0!==e&&("string"==typeof e?n=e:t=e),{index:n,range:t}},e.prototype.cursor=function(e){var t="next";if(e.reverse&&(t="prev"),e.index){var n=this.store.index(e.index);return e.kt?n.openKeyCursor(e.range,t):n.openCursor(e.range,t)}return this.store.openCursor(e.range,t)},e}();function Jh(e){return new zh(function(t,n){e.onsuccess=function(e){t(e.target.result)},e.onerror=function(e){var t=tf(e.target.error);n(t)}})}var ef=!1;function tf(e){var t=Qh._t((0,Vr.getUA)());if(t>=12.2&&t<13){var n="An internal error was encountered in the Indexed Database server";if(e.message.indexOf(n)>=0){var r=new Ja("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '"+n+"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.");return ef||(ef=!0,setTimeout(function(){throw r},0)),r}}return e}var nf=function(e){function t(t,n){var r=this;return(r=e.call(this)||this).Mt=t,r.currentSequenceNumber=n,r}return(0,Ur.__extends)(t,e),t}(Wh);function rf(e,t){var n=uu(e);return Qh.It(n.Mt,t)}var of=function(){function e(e,t,n,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=r}return e.prototype.applyToRemoteDocument=function(e,t){for(var n=t.mutationResults,r=0;r<this.mutations.length;r++){var i=this.mutations[r];i.key.isEqual(e.key)&&nl(i,e,n[r])}},e.prototype.applyToLocalView=function(e){for(var t=0,n=this.baseMutations;t<n.length;t++)(o=n[t]).key.isEqual(e.key)&&rl(o,e,this.localWriteTime);for(var r=0,i=this.mutations;r<i.length;r++){var o;(o=i[r]).key.isEqual(e.key)&&rl(o,e,this.localWriteTime)}},e.prototype.applyToLocalDocumentSet=function(e){var t=this;this.mutations.forEach(function(n){var r=e.get(n.key),i=r;t.applyToLocalView(i),r.isValidDocument()||i.convertToNoDocument(gu.min())})},e.prototype.keys=function(){return this.mutations.reduce(function(e,t){return e.add(t.key)},Dl())},e.prototype.isEqual=function(e){return this.batchId===e.batchId&&fu(this.mutations,e.mutations,function(e,t){return ol(e,t)})&&fu(this.baseMutations,e.baseMutations,function(e,t){return ol(e,t)})},e}(),sf=function(){function e(e,t,n,r){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=r}return e.from=function(t,n,r){au(t.mutations.length===r.length);for(var i=xl(),o=t.mutations,s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new e(t,n,r,i)},e}(),af=function(){function e(e,t,n,r,i,o,s){void 0===i&&(i=gu.min()),void 0===o&&(o=gu.min()),void 0===s&&(s=Iu.EMPTY_BYTE_STRING),this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=s}return e.prototype.withSequenceNumber=function(t){return new e(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)},e.prototype.withResumeToken=function(t,n){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t)},e.prototype.withLastLimboFreeSnapshotVersion=function(t){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken)},e}(),uf=function(e){this.Lt=e};function cf(e,t){if(t.document)return oh(e.Lt,t.document,!!t.hasCommittedMutations);if(t.noDocument){var n=Lu.fromSegments(t.noDocument.path),r=pf(t.noDocument.readTime),i=Zu.newNoDocument(n,r);return t.hasCommittedMutations?i.setHasCommittedMutations():i}if(t.unknownDocument){var o=Lu.fromSegments(t.unknownDocument.path);return r=pf(t.unknownDocument.version),Zu.newUnknownDocument(o,r)}return su()}function lf(e,t,n){var r=hf(n),i=t.key.path.popLast().toArray();if(t.isFoundDocument()){var o=function(e,t){return{name:Zl(e,t.key),fields:t.data.value.mapValue.fields,updateTime:zl(e,t.version.toTimestamp())}}(e.Lt,t),s=t.hasCommittedMutations;return new Oh(null,null,o,s,r,i)}if(t.isNoDocument()){var a=t.key.path.toArray(),u=df(t.version);return s=t.hasCommittedMutations,new Oh(null,new Dh(a,u),null,s,r,i)}if(t.isUnknownDocument()){var c=t.key.path.toArray(),l=df(t.version);return new Oh(new Ph(c,l),null,null,!0,r,i)}return su()}function hf(e){var t=e.toTimestamp();return[t.seconds,t.nanoseconds]}function ff(e){var t=new pu(e[0],e[1]);return gu.fromTimestamp(t)}function df(e){var t=e.toTimestamp();return new Ch(t.seconds,t.nanoseconds)}function pf(e){var t=new pu(e.seconds,e.nanoseconds);return gu.fromTimestamp(t)}function gf(e,t){for(var n=(t.baseMutations||[]).map(function(t){return ah(e.Lt,t)}),r=0;r<t.mutations.length-1;++r)r+1<t.mutations.length&&void 0!==t.mutations[r+1].transform&&(t.mutations[r].updateTransforms=t.mutations[r+1].transform.fieldTransforms,t.mutations.splice(r+1,1),++r);var i=t.mutations.map(function(t){return ah(e.Lt,t)}),o=pu.fromMillis(t.localWriteTimeMs);return new of(t.batchId,o,n,i)}function vf(e){var t,n,r=pf(e.readTime),i=void 0!==e.lastLimboFreeSnapshotVersion?pf(e.lastLimboFreeSnapshotVersion):gu.min();return void 0!==e.query.documents?(au(1===(n=e.query).documents.length),t=Ac(wc(th(n.documents[0])))):t=function(e){return Ac(lh(e))}(e.query),new af(t,e.targetId,0,e.lastListenSequenceNumber,r,i,Iu.fromBase64String(e.resumeToken))}function mf(e,t){var n,r=df(t.snapshotVersion),i=df(t.lastLimboFreeSnapshotVersion);n=rc(t.target)?uh(e.Lt,t.target):ch(e.Lt,t.target);var o=t.resumeToken.toBase64();return new Lh(t.targetId,tc(t.target),r,o,t.sequenceNumber,i,n)}function yf(e){var t=lh({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?xc(t,t.limit,"L"):t}var _f=function(){function e(){}return e.prototype.getBundleMetadata=function(e,t){return bf(e).get(t).next(function(e){if(e)return{id:(t=e).bundleId,createTime:pf(t.createTime),version:t.version};var t})},e.prototype.saveBundleMetadata=function(e,t){return bf(e).put({bundleId:(n=t).id,createTime:df($l(n.createTime)),version:n.version});var n},e.prototype.getNamedQuery=function(e,t){return wf(e).get(t).next(function(e){if(e)return{name:(t=e).name,query:yf(t.bundledQuery),readTime:pf(t.readTime)};var t})},e.prototype.saveNamedQuery=function(e,t){return wf(e).put(function(e){return{name:e.name,readTime:df($l(e.readTime)),bundledQuery:e.bundledQuery}}(t))},e}();function bf(e){return rf(e,Uh.store)}function wf(e){return rf(e,Vh.store)}var Tf=function(){function e(){this.Bt=new Ef}return e.prototype.addToCollectionParentIndex=function(e,t){return this.Bt.add(t),zh.resolve()},e.prototype.getCollectionParents=function(e,t){return zh.resolve(this.Bt.getEntries(t))},e}(),Ef=function(){function e(){this.index={}}return e.prototype.add=function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new Tl(bu.comparator),i=!r.has(n);return this.index[t]=r.add(n),i},e.prototype.has=function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)},e.prototype.getEntries=function(e){return(this.index[e]||new Tl(bu.comparator)).toArray()},e}(),If=function(){function e(){this.qt=new Ef}return e.prototype.addToCollectionParentIndex=function(e,t){var n=this;if(!this.qt.has(t)){var r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener(function(){n.qt.add(t)});var o={collectionId:r,parent:Th(i)};return kf(e).put(o)}return zh.resolve()},e.prototype.getCollectionParents=function(e,t){var n=[],r=IDBKeyRange.bound([t,""],[du(t),""],!1,!0);return kf(e).Nt(r).next(function(e){for(var r=0,i=e;r<i.length;r++){var o=i[r];if(o.collectionId!==t)break;n.push(kh(o.parent))}return n})},e}();function kf(e){return rf(e,jh.store)}var Cf={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Sf=function(){function e(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}return e.withCacheSize=function(t){return new e(t,e.DEFAULT_COLLECTION_PERCENTILE,e.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)},e}();function Af(e,t,n){var r=e.store(xh.store),i=e.store(Nh.store),o=[],s=IDBKeyRange.only(n.batchId),a=0,u=r.$t({range:s},function(e,t,n){return a++,n.delete()});o.push(u.next(function(){au(1===a)}));for(var c=[],l=0,h=n.mutations;l<h.length;l++){var f=h[l],d=Nh.key(t,f.key.path,n.batchId);o.push(i.delete(d)),c.push(f.key)}return zh.waitFor(o).next(function(){return c})}function xf(e){if(!e)return 0;var t;if(e.document)t=e.document;else if(e.unknownDocument)t=e.unknownDocument;else{if(!e.noDocument)throw su();t=e.noDocument}return JSON.stringify(t).length}Sf.DEFAULT_COLLECTION_PERCENTILE=10,Sf.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Sf.DEFAULT=new Sf(41943040,Sf.DEFAULT_COLLECTION_PERCENTILE,Sf.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Sf.DISABLED=new Sf(-1,0,0);var Nf=function(){function e(e,t,n,r){this.userId=e,this.R=t,this.Ut=n,this.referenceDelegate=r,this.Kt={}}return e.Qt=function(t,n,r,i){return au(""!==t.uid),new e(t.isAuthenticated()?t.uid:"",n,r,i)},e.prototype.checkEmpty=function(e){var t=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Pf(e).$t({index:xh.userMutationsIndex,range:n},function(e,n,r){t=!1,r.done()}).next(function(){return t})},e.prototype.addMutationBatch=function(e,t,n,r){var i=this,o=Of(e),s=Pf(e);return s.add({}).next(function(a){au("number"==typeof a);for(var u=new of(a,t,n,r),c=function(e,t,n){var r=n.baseMutations.map(function(t){return sh(e.Lt,t)}),i=n.mutations.map(function(t){return sh(e.Lt,t)});return new xh(t,n.batchId,n.localWriteTime.toMillis(),r,i)}(i.R,i.userId,u),l=[],h=new Tl(function(e,t){return hu(e.canonicalString(),t.canonicalString())}),f=0,d=r;f<d.length;f++){var p=d[f],g=Nh.key(i.userId,p.key.path,a);h=h.add(p.key.path.popLast()),l.push(s.put(c)),l.push(o.put(g,Nh.PLACEHOLDER))}return h.forEach(function(t){l.push(i.Ut.addToCollectionParentIndex(e,t))}),e.addOnCommittedListener(function(){i.Kt[a]=u.keys()}),zh.waitFor(l).next(function(){return u})})},e.prototype.lookupMutationBatch=function(e,t){var n=this;return Pf(e).get(t).next(function(e){return e?(au(e.userId===n.userId),gf(n.R,e)):null})},e.prototype.jt=function(e,t){var n=this;return this.Kt[t]?zh.resolve(this.Kt[t]):this.lookupMutationBatch(e,t).next(function(e){if(e){var r=e.keys();return n.Kt[t]=r,r}return null})},e.prototype.getNextMutationBatchAfterBatchId=function(e,t){var n=this,r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]),o=null;return Pf(e).$t({index:xh.userMutationsIndex,range:i},function(e,t,i){t.userId===n.userId&&(au(t.batchId>=r),o=gf(n.R,t)),i.done()}).next(function(){return o})},e.prototype.getHighestUnacknowledgedBatchId=function(e){var t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return Pf(e).$t({index:xh.userMutationsIndex,range:t,reverse:!0},function(e,t,r){n=t.batchId,r.done()}).next(function(){return n})},e.prototype.getAllMutationBatches=function(e){var t=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Pf(e).Nt(xh.userMutationsIndex,n).next(function(e){return e.map(function(e){return gf(t.R,e)})})},e.prototype.getAllMutationBatchesAffectingDocumentKey=function(e,t){var n=this,r=Nh.prefixForPath(this.userId,t.path),i=IDBKeyRange.lowerBound(r),o=[];return Of(e).$t({range:i},function(r,i,s){var a=r[0],u=r[2],c=kh(r[1]);if(a===n.userId&&t.path.isEqual(c))return Pf(e).get(u).next(function(e){if(!e)throw su();au(e.userId===n.userId),o.push(gf(n.R,e))});s.done()}).next(function(){return o})},e.prototype.getAllMutationBatchesAffectingDocumentKeys=function(e,t){var n=this,r=new Tl(hu),i=[];return t.forEach(function(t){var o=Nh.prefixForPath(n.userId,t.path),s=IDBKeyRange.lowerBound(o),a=Of(e).$t({range:s},function(e,i,o){var s=e[0],a=e[2],u=kh(e[1]);s===n.userId&&t.path.isEqual(u)?r=r.add(a):o.done()});i.push(a)}),zh.waitFor(i).next(function(){return n.Wt(e,r)})},e.prototype.getAllMutationBatchesAffectingQuery=function(e,t){var n=this,r=t.path,i=r.length+1,o=Nh.prefixForPath(this.userId,r),s=IDBKeyRange.lowerBound(o),a=new Tl(hu);return Of(e).$t({range:s},function(e,t,o){var s=e[0],u=e[2],c=kh(e[1]);s===n.userId&&r.isPrefixOf(c)?c.length===i&&(a=a.add(u)):o.done()}).next(function(){return n.Wt(e,a)})},e.prototype.Wt=function(e,t){var n=this,r=[],i=[];return t.forEach(function(t){i.push(Pf(e).get(t).next(function(e){if(null===e)throw su();au(e.userId===n.userId),r.push(gf(n.R,e))}))}),zh.waitFor(i).next(function(){return r})},e.prototype.removeMutationBatch=function(e,t){var n=this;return Af(e.Mt,this.userId,t).next(function(r){return e.addOnCommittedListener(function(){n.Gt(t.batchId)}),zh.forEach(r,function(t){return n.referenceDelegate.markPotentiallyOrphaned(e,t)})})},e.prototype.Gt=function(e){delete this.Kt[e]},e.prototype.performConsistencyCheck=function(e){var t=this;return this.checkEmpty(e).next(function(n){if(!n)return zh.resolve();var r=IDBKeyRange.lowerBound(Nh.prefixForUser(t.userId)),i=[];return Of(e).$t({range:r},function(e,n,r){if(e[0]===t.userId){var o=kh(e[1]);i.push(o)}else r.done()}).next(function(){au(0===i.length)})})},e.prototype.containsKey=function(e,t){return Df(e,this.userId,t)},e.prototype.zt=function(e){var t=this;return Rf(e).get(this.userId).next(function(e){return e||new Ah(t.userId,-1,"")})},e}();function Df(e,t,n){var r=Nh.prefixForPath(t,n.path),i=r[1],o=IDBKeyRange.lowerBound(r),s=!1;return Of(e).$t({range:o,kt:!0},function(e,n,r){e[0]===t&&e[1]===i&&(s=!0),r.done()}).next(function(){return s})}function Pf(e){return rf(e,xh.store)}function Of(e){return rf(e,Nh.store)}function Rf(e){return rf(e,Ah.store)}var Lf=function(){function e(e){this.Ht=e}return e.prototype.next=function(){return this.Ht+=2,this.Ht},e.Jt=function(){return new e(0)},e.Yt=function(){return new e(-1)},e}(),Mf=function(){function e(e,t){this.referenceDelegate=e,this.R=t}return e.prototype.allocateTargetId=function(e){var t=this;return this.Xt(e).next(function(n){var r=new Lf(n.highestTargetId);return n.highestTargetId=r.next(),t.Zt(e,n).next(function(){return n.highestTargetId})})},e.prototype.getLastRemoteSnapshotVersion=function(e){return this.Xt(e).next(function(e){return gu.fromTimestamp(new pu(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds))})},e.prototype.getHighestSequenceNumber=function(e){return this.Xt(e).next(function(e){return e.highestListenSequenceNumber})},e.prototype.setTargetsMetadata=function(e,t,n){var r=this;return this.Xt(e).next(function(i){return i.highestListenSequenceNumber=t,n&&(i.lastRemoteSnapshotVersion=n.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),r.Zt(e,i)})},e.prototype.addTargetData=function(e,t){var n=this;return this.te(e,t).next(function(){return n.Xt(e).next(function(r){return r.targetCount+=1,n.ee(t,r),n.Zt(e,r)})})},e.prototype.updateTargetData=function(e,t){return this.te(e,t)},e.prototype.removeTargetData=function(e,t){var n=this;return this.removeMatchingKeysForTargetId(e,t.targetId).next(function(){return Ff(e).delete(t.targetId)}).next(function(){return n.Xt(e)}).next(function(t){return au(t.targetCount>0),t.targetCount-=1,n.Zt(e,t)})},e.prototype.removeTargets=function(e,t,n){var r=this,i=0,o=[];return Ff(e).$t(function(s,a){var u=vf(a);u.sequenceNumber<=t&&null===n.get(u.targetId)&&(i++,o.push(r.removeTargetData(e,u)))}).next(function(){return zh.waitFor(o)}).next(function(){return i})},e.prototype.forEachTarget=function(e,t){return Ff(e).$t(function(e,n){var r=vf(n);t(r)})},e.prototype.Xt=function(e){return jf(e).get(Fh.key).next(function(e){return au(null!==e),e})},e.prototype.Zt=function(e,t){return jf(e).put(Fh.key,t)},e.prototype.te=function(e,t){return Ff(e).put(mf(this.R,t))},e.prototype.ee=function(e,t){var n=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,n=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,n=!0),n},e.prototype.getTargetCount=function(e){return this.Xt(e).next(function(e){return e.targetCount})},e.prototype.getTargetData=function(e,t){var n=tc(t),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]),i=null;return Ff(e).$t({range:r,index:Lh.queryTargetsIndexName},function(e,n,r){var o=vf(n);nc(t,o.target)&&(i=o,r.done())}).next(function(){return i})},e.prototype.addMatchingKeys=function(e,t,n){var r=this,i=[],o=qf(e);return t.forEach(function(t){var s=Th(t.path);i.push(o.put(new Mh(n,s))),i.push(r.referenceDelegate.addReference(e,n,t))}),zh.waitFor(i)},e.prototype.removeMatchingKeys=function(e,t,n){var r=this,i=qf(e);return zh.forEach(t,function(t){var o=Th(t.path);return zh.waitFor([i.delete([n,o]),r.referenceDelegate.removeReference(e,n,t)])})},e.prototype.removeMatchingKeysForTargetId=function(e,t){var n=qf(e),r=IDBKeyRange.bound([t],[t+1],!1,!0);return n.delete(r)},e.prototype.getMatchingKeysForTargetId=function(e,t){var n=IDBKeyRange.bound([t],[t+1],!1,!0),r=qf(e),i=Dl();return r.$t({range:n,kt:!0},function(e,t,n){var r=kh(e[1]),o=new Lu(r);i=i.add(o)}).next(function(){return i})},e.prototype.containsKey=function(e,t){var n=Th(t.path),r=IDBKeyRange.bound([n],[du(n)],!1,!0),i=0;return qf(e).$t({index:Mh.documentTargetsIndex,kt:!0,range:r},function(e,t,n){0!==e[0]&&(i++,n.done())}).next(function(){return i>0})},e.prototype.lt=function(e,t){return Ff(e).get(t).next(function(e){return e?vf(e):null})},e}();function Ff(e){return rf(e,Lh.store)}function jf(e){return rf(e,Fh.store)}function qf(e){return rf(e,Mh.store)}function Uf(e){return(0,Ur.__awaiter)(this,void 0,void 0,function(){return(0,Ur.__generator)(this,function(t){if(e.code!==Za.FAILED_PRECONDITION||e.message!==Hh)throw e;return nu("LocalStore","Unexpectedly lost primary lease"),[2]})})}function Vf(e,t){var n=e[1],r=t[1],i=hu(e[0],t[0]);return 0===i?hu(n,r):i}var Bf=function(){function e(e){this.ne=e,this.buffer=new Tl(Vf),this.se=0}return e.prototype.ie=function(){return++this.se},e.prototype.re=function(e){var t=[e,this.ie()];if(this.buffer.size<this.ne)this.buffer=this.buffer.add(t);else{var n=this.buffer.last();Vf(t,n)<0&&(this.buffer=this.buffer.delete(n).add(t))}},Object.defineProperty(e.prototype,"maxValue",{get:function(){return this.buffer.last()[0]},enumerable:!1,configurable:!0}),e}(),Hf=function(){function e(e,t){this.garbageCollector=e,this.asyncQueue=t,this.oe=!1,this.ce=null}return e.prototype.start=function(e){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.ue(e)},e.prototype.stop=function(){this.ce&&(this.ce.cancel(),this.ce=null)},Object.defineProperty(e.prototype,"started",{get:function(){return null!==this.ce},enumerable:!1,configurable:!0}),e.prototype.ue=function(e){var t=this,n=this.oe?3e5:6e4;nu("LruGarbageCollector","Garbage collection scheduled in "+n+"ms"),this.ce=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",n,function(){return(0,Ur.__awaiter)(t,void 0,void 0,function(){var t;return(0,Ur.__generator)(this,function(n){switch(n.label){case 0:this.ce=null,this.oe=!0,n.label=1;case 1:return n.trys.push([1,3,,7]),[4,e.collectGarbage(this.garbageCollector)];case 2:return n.sent(),[3,7];case 3:return Xh(t=n.sent())?(nu("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",t),[3,6]):[3,4];case 4:return[4,Uf(t)];case 5:n.sent(),n.label=6;case 6:return[3,7];case 7:return[4,this.ue(e)];case 8:return n.sent(),[2]}})})})},e}(),Wf=function(){function e(e,t){this.ae=e,this.params=t}return e.prototype.calculateTargetCount=function(e,t){return this.ae.he(e).next(function(e){return Math.floor(t/100*e)})},e.prototype.nthSequenceNumber=function(e,t){var n=this;if(0===t)return zh.resolve(Xa.o);var r=new Bf(t);return this.ae.forEachTarget(e,function(e){return r.re(e.sequenceNumber)}).next(function(){return n.ae.le(e,function(e){return r.re(e)})}).next(function(){return r.maxValue})},e.prototype.removeTargets=function(e,t,n){return this.ae.removeTargets(e,t,n)},e.prototype.removeOrphanedDocuments=function(e,t){return this.ae.removeOrphanedDocuments(e,t)},e.prototype.collect=function(e,t){var n=this;return-1===this.params.cacheSizeCollectionThreshold?(nu("LruGarbageCollector","Garbage collection skipped; disabled"),zh.resolve(Cf)):this.getCacheSize(e).next(function(r){return r<n.params.cacheSizeCollectionThreshold?(nu("LruGarbageCollector","Garbage collection skipped; Cache size "+r+" is lower than threshold "+n.params.cacheSizeCollectionThreshold),Cf):n.fe(e,t)})},e.prototype.getCacheSize=function(e){return this.ae.getCacheSize(e)},e.prototype.fe=function(e,t){var n,r,i,o,s,a,u,c=this,l=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(function(t){return t>c.params.maximumSequenceNumbersToCollect?(nu("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of "+c.params.maximumSequenceNumbersToCollect+" from "+t),r=c.params.maximumSequenceNumbersToCollect):r=t,o=Date.now(),c.nthSequenceNumber(e,r)}).next(function(r){return n=r,s=Date.now(),c.removeTargets(e,n,t)}).next(function(t){return i=t,a=Date.now(),c.removeOrphanedDocuments(e,n)}).next(function(e){return u=Date.now(),tu()<=Br.LogLevel.DEBUG&&nu("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in "+(o-l)+"ms\n\tDetermined least recently used "+r+" in "+(s-o)+"ms\n\tRemoved "+i+" targets in "+(a-s)+"ms\n\tRemoved "+e+" documents in "+(u-a)+"ms\nTotal Duration: "+(u-l)+"ms"),zh.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:e})})},e}(),Kf=function(){function e(e,t){this.db=e,this.garbageCollector=function(e,t){return new Wf(e,t)}(this,t)}return e.prototype.he=function(e){var t=this.de(e);return this.db.getTargetCache().getTargetCount(e).next(function(e){return t.next(function(t){return e+t})})},e.prototype.de=function(e){var t=0;return this.le(e,function(e){t++}).next(function(){return t})},e.prototype.forEachTarget=function(e,t){return this.db.getTargetCache().forEachTarget(e,t)},e.prototype.le=function(e,t){return this.we(e,function(e,n){return t(n)})},e.prototype.addReference=function(e,t,n){return zf(e,n)},e.prototype.removeReference=function(e,t,n){return zf(e,n)},e.prototype.removeTargets=function(e,t,n){return this.db.getTargetCache().removeTargets(e,t,n)},e.prototype.markPotentiallyOrphaned=function(e,t){return zf(e,t)},e.prototype._e=function(e,t){return function(e,t){var n=!1;return Rf(e).Ot(function(r){return Df(e,r,t).next(function(e){return e&&(n=!0),zh.resolve(!e)})}).next(function(){return n})}(e,t)},e.prototype.removeOrphanedDocuments=function(e,t){var n=this,r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],o=0;return this.we(e,function(s,a){if(a<=t){var u=n._e(e,s).next(function(t){if(!t)return o++,r.getEntry(e,s).next(function(){return r.removeEntry(s),qf(e).delete([0,Th(s.path)])})});i.push(u)}}).next(function(){return zh.waitFor(i)}).next(function(){return r.apply(e)}).next(function(){return o})},e.prototype.removeTarget=function(e,t){var n=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)},e.prototype.updateLimboDocument=function(e,t){return zf(e,t)},e.prototype.we=function(e,t){var n,r=qf(e),i=Xa.o;return r.$t({index:Mh.documentTargetsIndex},function(e,r){var o=r.path,s=r.sequenceNumber;0===e[0]?(i!==Xa.o&&t(new Lu(kh(n)),i),i=s,n=o):i=Xa.o}).next(function(){i!==Xa.o&&t(new Lu(kh(n)),i)})},e.prototype.getCacheSize=function(e){return this.db.getRemoteDocumentCache().getSize(e)},e}();function zf(e,t){return qf(e).put(function(e,t){return new Mh(0,Th(e.path),t)}(t,e.currentSequenceNumber))}var Gf=function(){function e(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={}}return e.prototype.get=function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n)for(var r=0,i=n;r<i.length;r++){var o=i[r],s=o[1];if(this.equalsFn(o[0],e))return s}},e.prototype.has=function(e){return void 0!==this.get(e)},e.prototype.set=function(e,t){var n=this.mapKeyFn(e),r=this.inner[n];if(void 0!==r){for(var i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t])}else this.inner[n]=[[e,t]]},e.prototype.delete=function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),!0;return!1},e.prototype.forEach=function(e){mu(this.inner,function(t,n){for(var r=0,i=n;r<i.length;r++){var o=i[r];e(o[0],o[1])}})},e.prototype.isEmpty=function(){return yu(this.inner)},e}(),Qf=function(){function e(){this.changes=new Gf(function(e){return e.toString()},function(e,t){return e.isEqual(t)}),this.changesApplied=!1}return e.prototype.getReadTime=function(e){var t=this.changes.get(e);return t?t.readTime:gu.min()},e.prototype.addEntry=function(e,t){this.assertNotApplied(),this.changes.set(e.key,{document:e,readTime:t})},e.prototype.removeEntry=function(e,t){void 0===t&&(t=null),this.assertNotApplied(),this.changes.set(e,{document:Zu.newInvalidDocument(e),readTime:t})},e.prototype.getEntry=function(e,t){this.assertNotApplied();var n=this.changes.get(t);return void 0!==n?zh.resolve(n.document):this.getFromCache(e,t)},e.prototype.getEntries=function(e,t){return this.getAllFromCache(e,t)},e.prototype.apply=function(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)},e.prototype.assertNotApplied=function(){},e}(),$f=function(){function e(e,t){this.R=e,this.Ut=t}return e.prototype.addEntry=function(e,t,n){return Zf(e).put(Jf(t),n)},e.prototype.removeEntry=function(e,t){var n=Zf(e),r=Jf(t);return n.delete(r)},e.prototype.updateMetadata=function(e,t){var n=this;return this.getMetadata(e).next(function(r){return r.byteSize+=t,n.me(e,r)})},e.prototype.getEntry=function(e,t){var n=this;return Zf(e).get(Jf(t)).next(function(e){return n.ye(t,e)})},e.prototype.ge=function(e,t){var n=this;return Zf(e).get(Jf(t)).next(function(e){return{document:n.ye(t,e),size:xf(e)}})},e.prototype.getEntries=function(e,t){var n=this,r=kl();return this.pe(e,t,function(e,t){var i=n.ye(e,t);r=r.insert(e,i)}).next(function(){return r})},e.prototype.Ee=function(e,t){var n=this,r=kl(),i=new _l(Lu.comparator);return this.pe(e,t,function(e,t){var o=n.ye(e,t);r=r.insert(e,o),i=i.insert(e,xf(t))}).next(function(){return{documents:r,Te:i}})},e.prototype.pe=function(e,t,n){if(t.isEmpty())return zh.resolve();var r=IDBKeyRange.bound(t.first().path.toArray(),t.last().path.toArray()),i=t.getIterator(),o=i.getNext();return Zf(e).$t({range:r},function(e,t,r){for(var s=Lu.fromSegments(e);o&&Lu.comparator(o,s)<0;)n(o,null),o=i.getNext();o&&o.isEqual(s)&&(n(o,t),o=i.hasNext()?i.getNext():null),o?r.Ct(o.path.toArray()):r.done()}).next(function(){for(;o;)n(o,null),o=i.hasNext()?i.getNext():null})},e.prototype.getDocumentsMatchingQuery=function(e,t,n){var r=this,i=kl(),o=t.path.length+1,s={};if(n.isEqual(gu.min())){var a=t.path.toArray();s.range=IDBKeyRange.lowerBound(a)}else{var u=t.path.toArray(),c=hf(n);s.range=IDBKeyRange.lowerBound([u,c],!0),s.index=Oh.collectionReadTimeIndex}return Zf(e).$t(s,function(e,n,s){if(e.length===o){var a=cf(r.R,n);t.path.isPrefixOf(a.key.path)?Oc(t,a)&&(i=i.insert(a.key,a)):s.done()}}).next(function(){return i})},e.prototype.newChangeBuffer=function(e){return new Yf(this,!!e&&e.trackRemovals)},e.prototype.getSize=function(e){return this.getMetadata(e).next(function(e){return e.byteSize})},e.prototype.getMetadata=function(e){return Xf(e).get(Rh.key).next(function(e){return au(!!e),e})},e.prototype.me=function(e,t){return Xf(e).put(Rh.key,t)},e.prototype.ye=function(e,t){if(t){var n=cf(this.R,t);if(!n.isNoDocument()||!n.version.isEqual(gu.min()))return n}return Zu.newInvalidDocument(e)},e}(),Yf=function(e){function t(t,n){var r=this;return(r=e.call(this)||this).Ie=t,r.trackRemovals=n,r.Ae=new Gf(function(e){return e.toString()},function(e,t){return e.isEqual(t)}),r}return(0,Ur.__extends)(t,e),t.prototype.applyChanges=function(e){var t=this,n=[],r=0,i=new Tl(function(e,t){return hu(e.canonicalString(),t.canonicalString())});return this.changes.forEach(function(o,s){var a=t.Ae.get(o);if(s.document.isValidDocument()){var u=lf(t.Ie.R,s.document,t.getReadTime(o));i=i.add(o.path.popLast());var c=xf(u);r+=c-a,n.push(t.Ie.addEntry(e,o,u))}else if(r-=a,t.trackRemovals){var l=lf(t.Ie.R,Zu.newNoDocument(o,gu.min()),t.getReadTime(o));n.push(t.Ie.addEntry(e,o,l))}else n.push(t.Ie.removeEntry(e,o))}),i.forEach(function(r){n.push(t.Ie.Ut.addToCollectionParentIndex(e,r))}),n.push(this.Ie.updateMetadata(e,r)),zh.waitFor(n)},t.prototype.getFromCache=function(e,t){var n=this;return this.Ie.ge(e,t).next(function(e){return n.Ae.set(t,e.size),e.document})},t.prototype.getAllFromCache=function(e,t){var n=this;return this.Ie.Ee(e,t).next(function(e){var t=e.documents;return e.Te.forEach(function(e,t){n.Ae.set(e,t)}),t})},t}(Qf);function Xf(e){return rf(e,Rh.store)}function Zf(e){return rf(e,Oh.store)}function Jf(e){return e.path.toArray()}var ed=function(){function e(e){this.R=e}return e.prototype.Rt=function(e,t,n,r){var i=this;au(n<r&&n>=0&&r<=11);var o=new Gh("createOrUpgrade",t);n<1&&r>=1&&(function(e){e.createObjectStore(Sh.store)}(e),function(e){e.createObjectStore(Ah.store,{keyPath:Ah.keyPath}),e.createObjectStore(xh.store,{keyPath:xh.keyPath,autoIncrement:!0}).createIndex(xh.userMutationsIndex,xh.userMutationsKeyPath,{unique:!0}),e.createObjectStore(Nh.store)}(e),td(e),function(e){e.createObjectStore(Oh.store)}(e));var s=zh.resolve();return n<3&&r>=3&&(0!==n&&(function(e){e.deleteObjectStore(Mh.store),e.deleteObjectStore(Lh.store),e.deleteObjectStore(Fh.store)}(e),td(e)),s=s.next(function(){return function(e){var t=e.store(Fh.store),n=new Fh(0,0,gu.min().toTimestamp(),0);return t.put(Fh.key,n)}(o)})),n<4&&r>=4&&(0!==n&&(s=s.next(function(){return function(e,t){return t.store(xh.store).Nt().next(function(n){e.deleteObjectStore(xh.store),e.createObjectStore(xh.store,{keyPath:xh.keyPath,autoIncrement:!0}).createIndex(xh.userMutationsIndex,xh.userMutationsKeyPath,{unique:!0});var r=t.store(xh.store),i=n.map(function(e){return r.put(e)});return zh.waitFor(i)})}(e,o)})),s=s.next(function(){!function(e){e.createObjectStore(qh.store,{keyPath:qh.keyPath})}(e)})),n<5&&r>=5&&(s=s.next(function(){return i.Re(o)})),n<6&&r>=6&&(s=s.next(function(){return function(e){e.createObjectStore(Rh.store)}(e),i.be(o)})),n<7&&r>=7&&(s=s.next(function(){return i.ve(o)})),n<8&&r>=8&&(s=s.next(function(){return i.Pe(e,o)})),n<9&&r>=9&&(s=s.next(function(){!function(e){e.objectStoreNames.contains("remoteDocumentChanges")&&e.deleteObjectStore("remoteDocumentChanges")}(e),function(e){var t=e.objectStore(Oh.store);t.createIndex(Oh.readTimeIndex,Oh.readTimeIndexPath,{unique:!1}),t.createIndex(Oh.collectionReadTimeIndex,Oh.collectionReadTimeIndexPath,{unique:!1})}(t)})),n<10&&r>=10&&(s=s.next(function(){return i.Ve(o)})),n<11&&r>=11&&(s=s.next(function(){!function(e){e.createObjectStore(Uh.store,{keyPath:Uh.keyPath})}(e),function(e){e.createObjectStore(Vh.store,{keyPath:Vh.keyPath})}(e)})),s},e.prototype.be=function(e){var t=0;return e.store(Oh.store).$t(function(e,n){t+=xf(n)}).next(function(){var n=new Rh(t);return e.store(Rh.store).put(Rh.key,n)})},e.prototype.Re=function(e){var t=this,n=e.store(Ah.store),r=e.store(xh.store);return n.Nt().next(function(n){return zh.forEach(n,function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.Nt(xh.userMutationsIndex,i).next(function(r){return zh.forEach(r,function(r){au(r.userId===n.userId);var i=gf(t.R,r);return Af(e,n.userId,i).next(function(){})})})})})},e.prototype.ve=function(e){var t=e.store(Mh.store),n=e.store(Oh.store);return e.store(Fh.store).get(Fh.key).next(function(e){var r=[];return n.$t(function(n,i){var o=new bu(n),s=function(e){return[0,Th(e)]}(o);r.push(t.get(s).next(function(n){return n?zh.resolve():function(n){return t.put(new Mh(0,Th(n),e.highestListenSequenceNumber))}(o)}))}).next(function(){return zh.waitFor(r)})})},e.prototype.Pe=function(e,t){e.createObjectStore(jh.store,{keyPath:jh.keyPath});var n=t.store(jh.store),r=new Ef,i=function(e){if(r.add(e)){var t=e.lastSegment(),i=e.popLast();return n.put({collectionId:t,parent:Th(i)})}};return t.store(Oh.store).$t({kt:!0},function(e,t){var n=new bu(e);return i(n.popLast())}).next(function(){return t.store(Nh.store).$t({kt:!0},function(e,t){var n=kh(e[1]);return i(n.popLast())})})},e.prototype.Ve=function(e){var t=this,n=e.store(Lh.store);return n.$t(function(e,r){var i=vf(r),o=mf(t.R,i);return n.put(o)})},e}();function td(e){e.createObjectStore(Mh.store,{keyPath:Mh.keyPath}).createIndex(Mh.documentTargetsIndex,Mh.documentTargetsKeyPath,{unique:!0}),e.createObjectStore(Lh.store,{keyPath:Lh.keyPath}).createIndex(Lh.queryTargetsIndexName,Lh.queryTargetsKeyPath,{unique:!0}),e.createObjectStore(Fh.store)}var nd="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",rd=function(){function e(t,n,r,i,o,s,a,u,c,l){if(this.allowTabSynchronization=t,this.persistenceKey=n,this.clientId=r,this.Se=o,this.window=s,this.document=a,this.De=c,this.Ce=l,this.Ne=null,this.xe=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Fe=null,this.inForeground=!1,this.ke=null,this.$e=null,this.Oe=Number.NEGATIVE_INFINITY,this.Me=function(e){return Promise.resolve()},!e.yt())throw new Ja(Za.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Kf(this,i),this.Le=n+"main",this.R=new uf(u),this.Be=new Qh(this.Le,11,new ed(this.R)),this.qe=new Mf(this.referenceDelegate,this.R),this.Ut=new If,this.Ue=function(e,t){return new $f(e,t)}(this.R,this.Ut),this.Ke=new _f,this.window&&this.window.localStorage?this.Qe=this.window.localStorage:(this.Qe=null,!1===l&&ru("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return e.prototype.start=function(){var e=this;return this.je().then(function(){if(!e.isPrimary&&!e.allowTabSynchronization)throw new Ja(Za.FAILED_PRECONDITION,nd);return e.We(),e.Ge(),e.ze(),e.runTransaction("getHighestListenSequenceNumber","readonly",function(t){return e.qe.getHighestSequenceNumber(t)})}).then(function(t){e.Ne=new Xa(t,e.De)}).then(function(){e.xe=!0}).catch(function(t){return e.Be&&e.Be.close(),Promise.reject(t)})},e.prototype.He=function(e){var t=this;return this.Me=function(n){return(0,Ur.__awaiter)(t,void 0,void 0,function(){return(0,Ur.__generator)(this,function(t){return this.started?[2,e(n)]:[2]})})},e(this.isPrimary)},e.prototype.setDatabaseDeletedListener=function(e){var t=this;this.Be.vt(function(n){return(0,Ur.__awaiter)(t,void 0,void 0,function(){return(0,Ur.__generator)(this,function(t){switch(t.label){case 0:return null===n.newVersion?[4,e()]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})})},e.prototype.setNetworkEnabled=function(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Se.enqueueAndForget(function(){return(0,Ur.__awaiter)(t,void 0,void 0,function(){return(0,Ur.__generator)(this,function(e){switch(e.label){case 0:return this.started?[4,this.je()]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}})})}))},e.prototype.je=function(){var e=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",function(t){return od(t).put(new qh(e.clientId,Date.now(),e.networkEnabled,e.inForeground)).next(function(){if(e.isPrimary)return e.Je(t).next(function(t){t||(e.isPrimary=!1,e.Se.enqueueRetryable(function(){return e.Me(!1)}))})}).next(function(){return e.Ye(t)}).next(function(n){return e.isPrimary&&!n?e.Xe(t).next(function(){return!1}):!!n&&e.Ze(t).next(function(){return!0})})}).catch(function(t){if(Xh(t))return nu("IndexedDbPersistence","Failed to extend owner lease: ",t),e.isPrimary;if(!e.allowTabSynchronization)throw t;return nu("IndexedDbPersistence","Releasing owner lease after error during lease refresh",t),!1}).then(function(t){e.isPrimary!==t&&e.Se.enqueueRetryable(function(){return e.Me(t)}),e.isPrimary=t})},e.prototype.Je=function(e){var t=this;return id(e).get(Sh.key).next(function(e){return zh.resolve(t.tn(e))})},e.prototype.en=function(e){return od(e).delete(this.clientId)},e.prototype.nn=function(){return(0,Ur.__awaiter)(this,void 0,void 0,function(){var e,t,n,r=this;return(0,Ur.__generator)(this,function(i){switch(i.label){case 0:return!this.isPrimary||this.sn(this.Oe,18e5)?[3,2]:(this.Oe=Date.now(),[4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",function(e){var t=rf(e,qh.store);return t.Nt().next(function(e){var n=r.rn(e,18e5),i=e.filter(function(e){return-1===n.indexOf(e)});return zh.forEach(i,function(e){return t.delete(e.clientId)}).next(function(){return i})})}).catch(function(){return[]})]);case 1:if(e=i.sent(),this.Qe)for(t=0,n=e;t<n.length;t++)this.Qe.removeItem(this.on(n[t].clientId));i.label=2;case 2:return[2]}})})},e.prototype.ze=function(){var e=this;this.$e=this.Se.enqueueAfterDelay("client_metadata_refresh",4e3,function(){return e.je().then(function(){return e.nn()}).then(function(){return e.ze()})})},e.prototype.tn=function(e){return!!e&&e.ownerId===this.clientId},e.prototype.Ye=function(e){var t=this;return this.Ce?zh.resolve(!0):id(e).get(Sh.key).next(function(n){if(null!==n&&t.sn(n.leaseTimestampMs,5e3)&&!t.cn(n.ownerId)){if(t.tn(n)&&t.networkEnabled)return!0;if(!t.tn(n)){if(!n.allowTabSynchronization)throw new Ja(Za.FAILED_PRECONDITION,nd);return!1}}return!(!t.networkEnabled||!t.inForeground)||od(e).Nt().next(function(e){return void 0===t.rn(e,5e3).find(function(e){return!(t.clientId===e.clientId||!(!t.networkEnabled&&e.networkEnabled||!t.inForeground&&e.inForeground&&t.networkEnabled===e.networkEnabled))})})}).next(function(e){return t.isPrimary!==e&&nu("IndexedDbPersistence","Client "+(e?"is":"is not")+" eligible for a primary lease."),e})},e.prototype.shutdown=function(){return(0,Ur.__awaiter)(this,void 0,void 0,function(){var e=this;return(0,Ur.__generator)(this,function(t){switch(t.label){case 0:return this.xe=!1,this.un(),this.$e&&(this.$e.cancel(),this.$e=null),this.an(),this.hn(),[4,this.Be.runTransaction("shutdown","readwrite",[Sh.store,qh.store],function(t){var n=new nf(t,Xa.o);return e.Xe(n).next(function(){return e.en(n)})})];case 1:return t.sent(),this.Be.close(),this.ln(),[2]}})})},e.prototype.rn=function(e,t){var n=this;return e.filter(function(e){return n.sn(e.updateTimeMs,t)&&!n.cn(e.clientId)})},e.prototype.fn=function(){var e=this;return this.runTransaction("getActiveClients","readonly",function(t){return od(t).Nt().next(function(t){return e.rn(t,18e5).map(function(e){return e.clientId})})})},Object.defineProperty(e.prototype,"started",{get:function(){return this.xe},enumerable:!1,configurable:!0}),e.prototype.getMutationQueue=function(e){return Nf.Qt(e,this.R,this.Ut,this.referenceDelegate)},e.prototype.getTargetCache=function(){return this.qe},e.prototype.getRemoteDocumentCache=function(){return this.Ue},e.prototype.getIndexManager=function(){return this.Ut},e.prototype.getBundleCache=function(){return this.Ke},e.prototype.runTransaction=function(e,t,n){var r,i=this;return nu("IndexedDbPersistence","Starting transaction:",e),this.Be.runTransaction(e,"readonly"===t?"readonly":"readwrite",Bh,function(o){return r=new nf(o,i.Ne?i.Ne.next():Xa.o),"readwrite-primary"===t?i.Je(r).next(function(e){return!!e||i.Ye(r)}).next(function(t){if(!t)throw ru("Failed to obtain primary lease for action '"+e+"'."),i.isPrimary=!1,i.Se.enqueueRetryable(function(){return i.Me(!1)}),new Ja(Za.FAILED_PRECONDITION,Hh);return n(r)}).next(function(e){return i.Ze(r).next(function(){return e})}):i.dn(r).next(function(){return n(r)})}).then(function(e){return r.raiseOnCommittedEvent(),e})},e.prototype.dn=function(e){var t=this;return id(e).get(Sh.key).next(function(e){if(null!==e&&t.sn(e.leaseTimestampMs,5e3)&&!t.cn(e.ownerId)&&!t.tn(e)&&!(t.Ce||t.allowTabSynchronization&&e.allowTabSynchronization))throw new Ja(Za.FAILED_PRECONDITION,nd)})},e.prototype.Ze=function(e){var t=new Sh(this.clientId,this.allowTabSynchronization,Date.now());return id(e).put(Sh.key,t)},e.yt=function(){return Qh.yt()},e.prototype.Xe=function(e){var t=this,n=id(e);return n.get(Sh.key).next(function(e){return t.tn(e)?(nu("IndexedDbPersistence","Releasing primary lease."),n.delete(Sh.key)):zh.resolve()})},e.prototype.sn=function(e,t){var n=Date.now();return!(e<n-t||e>n&&(ru("Detected an update time that is in the future: "+e+" > "+n),1))},e.prototype.We=function(){var e=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ke=function(){e.Se.enqueueAndForget(function(){return e.inForeground="visible"===e.document.visibilityState,e.je()})},this.document.addEventListener("visibilitychange",this.ke),this.inForeground="visible"===this.document.visibilityState)},e.prototype.an=function(){this.ke&&(this.document.removeEventListener("visibilitychange",this.ke),this.ke=null)},e.prototype.Ge=function(){var e,t=this;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.Fe=function(){t.un(),(0,Vr.isSafari)()&&navigator.appVersion.match("Version/14")&&t.Se.enterRestrictedMode(!0),t.Se.enqueueAndForget(function(){return t.shutdown()})},this.window.addEventListener("pagehide",this.Fe))},e.prototype.hn=function(){this.Fe&&(this.window.removeEventListener("pagehide",this.Fe),this.Fe=null)},e.prototype.cn=function(e){var t;try{var n=null!==(null===(t=this.Qe)||void 0===t?void 0:t.getItem(this.on(e)));return nu("IndexedDbPersistence","Client '"+e+"' "+(n?"is":"is not")+" zombied in LocalStorage"),n}catch(e){return ru("IndexedDbPersistence","Failed to get zombied client id.",e),!1}},e.prototype.un=function(){if(this.Qe)try{this.Qe.setItem(this.on(this.clientId),String(Date.now()))}catch(e){ru("Failed to set zombie client id.",e)}},e.prototype.ln=function(){if(this.Qe)try{this.Qe.removeItem(this.on(this.clientId))}catch(e){}},e.prototype.on=function(e){return"firestore_zombie_"+this.persistenceKey+"_"+e},e}();function id(e){return rf(e,Sh.store)}function od(e){return rf(e,qh.store)}function sd(e,t){var n=e.projectId;return e.isDefaultDatabase||(n+="."+e.database),"firestore/"+t+"/"+n+"/"}var ad=function(e,t){this.progress=e,this.wn=t},ud=function(){function e(e,t,n){this.Ue=e,this._n=t,this.Ut=n}return e.prototype.mn=function(e,t){var n=this;return this._n.getAllMutationBatchesAffectingDocumentKey(e,t).next(function(r){return n.yn(e,t,r)})},e.prototype.yn=function(e,t,n){return this.Ue.getEntry(e,t).next(function(e){for(var t=0,r=n;t<r.length;t++)r[t].applyToLocalView(e);return e})},e.prototype.gn=function(e,t){e.forEach(function(e,n){for(var r=0,i=t;r<i.length;r++)i[r].applyToLocalView(n)})},e.prototype.pn=function(e,t){var n=this;return this.Ue.getEntries(e,t).next(function(t){return n.En(e,t).next(function(){return t})})},e.prototype.En=function(e,t){var n=this;return this._n.getAllMutationBatchesAffectingDocumentKeys(e,t).next(function(e){return n.gn(t,e)})},e.prototype.getDocumentsMatchingQuery=function(e,t,n){return function(e){return Lu.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.Tn(e,t.path):Cc(t)?this.In(e,t,n):this.An(e,t,n)},e.prototype.Tn=function(e,t){return this.mn(e,new Lu(t)).next(function(e){var t=Sl();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t})},e.prototype.In=function(e,t,n){var r=this,i=t.collectionGroup,o=Sl();return this.Ut.getCollectionParents(e,i).next(function(s){return zh.forEach(s,function(s){var a=function(e,t){return new _c(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,s.child(i));return r.An(e,a,n).next(function(e){e.forEach(function(e,t){o=o.insert(e,t)})})}).next(function(){return o})})},e.prototype.An=function(e,t,n){var r,i,o=this;return this.Ue.getDocumentsMatchingQuery(e,t,n).next(function(n){return r=n,o._n.getAllMutationBatchesAffectingQuery(e,t)}).next(function(t){return o.Rn(e,i=t,r).next(function(e){r=e;for(var t=0,n=i;t<n.length;t++)for(var o=n[t],s=0,a=o.mutations;s<a.length;s++){var u=a[s],c=u.key,l=r.get(c);null==l&&(l=Zu.newInvalidDocument(c),r=r.insert(c,l)),rl(u,l,o.localWriteTime),l.isFoundDocument()||(r=r.remove(c))}})}).next(function(){return r.forEach(function(e,n){Oc(t,n)||(r=r.remove(e))}),r})},e.prototype.Rn=function(e,t,n){for(var r=Dl(),i=0,o=t;i<o.length;i++)for(var s=0,a=o[i].mutations;s<a.length;s++){var u=a[s];u instanceof ul&&null===n.get(u.key)&&(r=r.add(u.key))}var c=n;return this.Ue.getEntries(e,r).next(function(e){return e.forEach(function(e,t){t.isFoundDocument()&&(c=c.insert(e,t))}),c})},e}(),cd=function(){function e(e,t,n,r){this.targetId=e,this.fromCache=t,this.bn=n,this.vn=r}return e.Pn=function(t,n){for(var r=Dl(),i=Dl(),o=0,s=n.docChanges;o<s.length;o++){var a=s[o];switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:i=i.add(a.doc.key)}}return new e(t,n.fromCache,r,i)},e}(),ld=function(){function e(){}return e.prototype.Vn=function(e){this.Sn=e},e.prototype.getDocumentsMatchingQuery=function(e,t,n,r){var i=this;return function(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}(t)||n.isEqual(gu.min())?this.Dn(e,t):this.Sn.pn(e,r).next(function(o){var s=i.Cn(t,o);return(Tc(t)||Ec(t))&&i.Nn(t.limitType,s,r,n)?i.Dn(e,t):(tu()<=Br.LogLevel.DEBUG&&nu("QueryEngine","Re-using previous result from %s to execute query: %s",n.toString(),Pc(t)),i.Sn.getDocumentsMatchingQuery(e,t,n).next(function(e){return s.forEach(function(t){e=e.insert(t.key,t)}),e}))})},e.prototype.Cn=function(e,t){var n=new Tl(Rc(e));return t.forEach(function(t,r){Oc(e,r)&&(n=n.add(r))}),n},e.prototype.Nn=function(e,t,n,r){if(n.size!==t.size)return!0;var i="F"===e?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)},e.prototype.Dn=function(e,t){return tu()<=Br.LogLevel.DEBUG&&nu("QueryEngine","Using full collection scan to execute query:",Pc(t)),this.Sn.getDocumentsMatchingQuery(e,t,gu.min())},e}(),hd=function(){function e(e,t,n,r){this.persistence=e,this.xn=t,this.R=r,this.Fn=new _l(hu),this.kn=new Gf(function(e){return tc(e)},nc),this.$n=gu.min(),this._n=e.getMutationQueue(n),this.On=e.getRemoteDocumentCache(),this.qe=e.getTargetCache(),this.Mn=new ud(this.On,this._n,this.persistence.getIndexManager()),this.Ke=e.getBundleCache(),this.xn.Vn(this.Mn)}return e.prototype.collectGarbage=function(e){var t=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",function(n){return e.collect(n,t.Fn)})},e}();function fd(e,t,n,r){return new hd(e,t,n,r)}function dd(e,t){return(0,Ur.__awaiter)(this,void 0,void 0,function(){var n,r,i,o;return(0,Ur.__generator)(this,function(s){switch(s.label){case 0:return n=uu(e),r=n._n,i=n.Mn,[4,n.persistence.runTransaction("Handle user change","readonly",function(e){var o;return n._n.getAllMutationBatches(e).next(function(s){return o=s,r=n.persistence.getMutationQueue(t),i=new ud(n.On,r,n.persistence.getIndexManager()),r.getAllMutationBatches(e)}).next(function(t){for(var n=[],r=[],s=Dl(),a=0,u=o;a<u.length;a++){var c=u[a];n.push(c.batchId);for(var l=0,h=c.mutations;l<h.length;l++)s=s.add(h[l].key)}for(var f=0,d=t;f<d.length;f++){var p=d[f];r.push(p.batchId);for(var g=0,v=p.mutations;g<v.length;g++)s=s.add(v[g].key)}return i.pn(e,s).next(function(e){return{Ln:e,removedBatchIds:n,addedBatchIds:r}})})})];case 1:return o=s.sent(),[2,(n._n=r,n.Mn=i,n.xn.Vn(n.Mn),o)]}})})}function pd(e,t){var n=uu(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",function(e){var r=t.batch.keys(),i=n.On.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){var i=n.batch,o=i.keys(),s=zh.resolve();return o.forEach(function(e){s=s.next(function(){return r.getEntry(t,e)}).next(function(t){var o=n.docVersions.get(e);au(null!==o),t.version.compareTo(o)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&r.addEntry(t,n.commitVersion))})}),s.next(function(){return e._n.removeMutationBatch(t,i)})}(n,e,t,i).next(function(){return i.apply(e)}).next(function(){return n._n.performConsistencyCheck(e)}).next(function(){return n.Mn.pn(e,r)})})}function gd(e){var t=uu(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",function(e){return t.qe.getLastRemoteSnapshotVersion(e)})}function vd(e,t){var n=uu(e),r=t.snapshotVersion,i=n.Fn;return n.persistence.runTransaction("Apply remote event","readwrite-primary",function(e){var o=n.On.newChangeBuffer({trackRemovals:!0});i=n.Fn;var s=[];t.targetChanges.forEach(function(t,o){var a=i.get(o);if(a){s.push(n.qe.removeMatchingKeys(e,t.removedDocuments,o).next(function(){return n.qe.addMatchingKeys(e,t.addedDocuments,o)}));var u=t.resumeToken;if(u.approximateByteSize()>0){var c=a.withResumeToken(u,r).withSequenceNumber(e.currentSequenceNumber);i=i.insert(o,c),function(e,t,n){return au(t.resumeToken.approximateByteSize()>0),0===e.resumeToken.approximateByteSize()||t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0}(a,c,t)&&s.push(n.qe.updateTargetData(e,c))}}});var a=kl();if(t.documentUpdates.forEach(function(r,i){t.resolvedLimboDocuments.has(r)&&s.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))}),s.push(md(e,o,t.documentUpdates,r,void 0).next(function(e){a=e})),!r.isEqual(gu.min())){var u=n.qe.getLastRemoteSnapshotVersion(e).next(function(t){return n.qe.setTargetsMetadata(e,e.currentSequenceNumber,r)});s.push(u)}return zh.waitFor(s).next(function(){return o.apply(e)}).next(function(){return n.Mn.En(e,a)}).next(function(){return a})}).then(function(e){return n.Fn=i,e})}function md(e,t,n,r,i){var o=Dl();return n.forEach(function(e){return o=o.add(e)}),t.getEntries(e,o).next(function(e){var o=kl();return n.forEach(function(n,s){var a=e.get(n),u=(null==i?void 0:i.get(n))||r;s.isNoDocument()&&s.version.isEqual(gu.min())?(t.removeEntry(n,u),o=o.insert(n,s)):!a.isValidDocument()||s.version.compareTo(a.version)>0||0===s.version.compareTo(a.version)&&a.hasPendingWrites?(t.addEntry(s,u),o=o.insert(n,s)):nu("LocalStore","Ignoring outdated watch update for ",n,". Current version:",a.version," Watch version:",s.version)}),o})}function yd(e,t){var n=uu(e);return n.persistence.runTransaction("Get next mutation batch","readonly",function(e){return void 0===t&&(t=-1),n._n.getNextMutationBatchAfterBatchId(e,t)})}function _d(e,t){var n=uu(e);return n.persistence.runTransaction("Allocate target","readwrite",function(e){var r;return n.qe.getTargetData(e,t).next(function(i){return i?zh.resolve(r=i):n.qe.allocateTargetId(e).next(function(i){return r=new af(t,i,0,e.currentSequenceNumber),n.qe.addTargetData(e,r).next(function(){return r})})})}).then(function(e){var r=n.Fn.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Fn=n.Fn.insert(e.targetId,e),n.kn.set(t,e.targetId)),e})}function bd(e,t,n){return(0,Ur.__awaiter)(this,void 0,void 0,function(){var r,i,o,s;return(0,Ur.__generator)(this,function(a){switch(a.label){case 0:r=uu(e),i=r.Fn.get(t),o=n?"readwrite":"readwrite-primary",a.label=1;case 1:return a.trys.push([1,4,,5]),n?[3,3]:[4,r.persistence.runTransaction("Release target",o,function(e){return r.persistence.referenceDelegate.removeTarget(e,i)})];case 2:a.sent(),a.label=3;case 3:return[3,5];case 4:if(!Xh(s=a.sent()))throw s;return nu("LocalStore","Failed to update sequence numbers for target "+t+": "+s),[3,5];case 5:return r.Fn=r.Fn.remove(t),r.kn.delete(i.target),[2]}})})}function wd(e,t,n){var r=uu(e),i=gu.min(),o=Dl();return r.persistence.runTransaction("Execute query","readonly",function(e){return function(e,t,n){var r=uu(e),i=r.kn.get(n);return void 0!==i?zh.resolve(r.Fn.get(i)):r.qe.getTargetData(t,n)}(r,e,Ac(t)).next(function(t){if(t)return i=t.lastLimboFreeSnapshotVersion,r.qe.getMatchingKeysForTargetId(e,t.targetId).next(function(e){o=e})}).next(function(){return r.xn.getDocumentsMatchingQuery(e,t,n?i:gu.min(),n?o:Dl())}).next(function(e){return{documents:e,Bn:o}})})}function Td(e,t){var n=uu(e),r=uu(n.qe),i=n.Fn.get(t);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",function(e){return r.lt(e,t).next(function(e){return e?e.target:null})})}function Ed(e){var t=uu(e);return t.persistence.runTransaction("Get new document changes","readonly",function(e){return function(e,t,n){var r=uu(e),i=kl(),o=hf(n),s=Zf(t),a=IDBKeyRange.lowerBound(o,!0);return s.$t({index:Oh.readTimeIndex,range:a},function(e,t){var n=cf(r.R,t);i=i.insert(n.key,n),o=t.readTime}).next(function(){return{wn:i,readTime:ff(o)}})}(t.On,e,t.$n)}).then(function(e){var n=e.wn;return t.$n=e.readTime,n})}function Id(e){return(0,Ur.__awaiter)(this,void 0,void 0,function(){var t;return(0,Ur.__generator)(this,function(n){return[2,(t=uu(e)).persistence.runTransaction("Synchronize last document change read time","readonly",function(e){return function(e){var t=Zf(e),n=gu.min();return t.$t({index:Oh.readTimeIndex,reverse:!0},function(e,t,r){t.readTime&&(n=ff(t.readTime)),r.done()}).next(function(){return n})}(e)}).then(function(e){t.$n=e})]})})}function kd(e,t,n,r){return(0,Ur.__awaiter)(this,void 0,void 0,function(){var i,o,s,a,u,c,l,h,f,d;return(0,Ur.__generator)(this,function(p){switch(p.label){case 0:for(i=uu(e),o=Dl(),s=kl(),a=xl(),u=0,c=n;u<c.length;u++)h=t.qn((l=c[u]).metadata.name),l.document&&(o=o.add(h)),s=s.insert(h,t.Un(l)),a=a.insert(h,t.Kn(l.metadata.readTime));return f=i.On.newChangeBuffer({trackRemovals:!0}),[4,_d(i,function(e){return Ac(wc(bu.fromString("__bundle__/docs/"+e)))}(r))];case 1:return d=p.sent(),[2,i.persistence.runTransaction("Apply bundle documents","readwrite",function(e){return md(e,f,s,gu.min(),a).next(function(t){return f.apply(e),t}).next(function(t){return i.qe.removeMatchingKeysForTargetId(e,d.targetId).next(function(){return i.qe.addMatchingKeys(e,o,d.targetId)}).next(function(){return i.Mn.En(e,t)}).next(function(){return t})})})]}})})}function Cd(e,t,n){return void 0===n&&(n=Dl()),(0,Ur.__awaiter)(this,void 0,void 0,function(){var r,i;return(0,Ur.__generator)(this,function(o){switch(o.label){case 0:return[4,_d(e,Ac(yf(t.bundledQuery)))];case 1:return r=o.sent(),[2,(i=uu(e)).persistence.runTransaction("Save named query","readwrite",function(e){var o=$l(t.readTime);if(r.snapshotVersion.compareTo(o)>=0)return i.Ke.saveNamedQuery(e,t);var s=r.withResumeToken(Iu.EMPTY_BYTE_STRING,o);return i.Fn=i.Fn.insert(s.targetId,s),i.qe.updateTargetData(e,s).next(function(){return i.qe.removeMatchingKeysForTargetId(e,r.targetId)}).next(function(){return i.qe.addMatchingKeys(e,n,r.targetId)}).next(function(){return i.Ke.saveNamedQuery(e,t)})})]}})})}var Sd=function(){function e(e){this.R=e,this.Qn=new Map,this.jn=new Map}return e.prototype.getBundleMetadata=function(e,t){return zh.resolve(this.Qn.get(t))},e.prototype.saveBundleMetadata=function(e,t){var n;return this.Qn.set(t.id,{id:(n=t).id,version:n.version,createTime:$l(n.createTime)}),zh.resolve()},e.prototype.getNamedQuery=function(e,t){return zh.resolve(this.jn.get(t))},e.prototype.saveNamedQuery=function(e,t){return this.jn.set(t.name,function(e){return{name:e.name,query:yf(e.bundledQuery),readTime:$l(e.readTime)}}(t)),zh.resolve()},e}(),Ad=function(){function e(){this.Wn=new Tl(xd.Gn),this.zn=new Tl(xd.Hn)}return e.prototype.isEmpty=function(){return this.Wn.isEmpty()},e.prototype.addReference=function(e,t){var n=new xd(e,t);this.Wn=this.Wn.add(n),this.zn=this.zn.add(n)},e.prototype.Jn=function(e,t){var n=this;e.forEach(function(e){return n.addReference(e,t)})},e.prototype.removeReference=function(e,t){this.Yn(new xd(e,t))},e.prototype.Xn=function(e,t){var n=this;e.forEach(function(e){return n.removeReference(e,t)})},e.prototype.Zn=function(e){var t=this,n=new Lu(new bu([])),r=new xd(n,e),i=new xd(n,e+1),o=[];return this.zn.forEachInRange([r,i],function(e){t.Yn(e),o.push(e.key)}),o},e.prototype.ts=function(){var e=this;this.Wn.forEach(function(t){return e.Yn(t)})},e.prototype.Yn=function(e){this.Wn=this.Wn.delete(e),this.zn=this.zn.delete(e)},e.prototype.es=function(e){var t=new Lu(new bu([])),n=new xd(t,e),r=new xd(t,e+1),i=Dl();return this.zn.forEachInRange([n,r],function(e){i=i.add(e.key)}),i},e.prototype.containsKey=function(e){var t=new xd(e,0),n=this.Wn.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)},e}(),xd=function(){function e(e,t){this.key=e,this.ns=t}return e.Gn=function(e,t){return Lu.comparator(e.key,t.key)||hu(e.ns,t.ns)},e.Hn=function(e,t){return hu(e.ns,t.ns)||Lu.comparator(e.key,t.key)},e}(),Nd=function(){function e(e,t){this.Ut=e,this.referenceDelegate=t,this._n=[],this.ss=1,this.rs=new Tl(xd.Gn)}return e.prototype.checkEmpty=function(e){return zh.resolve(0===this._n.length)},e.prototype.addMutationBatch=function(e,t,n,r){var i=this.ss;this.ss++;var o=new of(i,t,n,r);this._n.push(o);for(var s=0,a=r;s<a.length;s++){var u=a[s];this.rs=this.rs.add(new xd(u.key,i)),this.Ut.addToCollectionParentIndex(e,u.key.path.popLast())}return zh.resolve(o)},e.prototype.lookupMutationBatch=function(e,t){return zh.resolve(this.os(t))},e.prototype.getNextMutationBatchAfterBatchId=function(e,t){var n=this.cs(t+1),r=n<0?0:n;return zh.resolve(this._n.length>r?this._n[r]:null)},e.prototype.getHighestUnacknowledgedBatchId=function(){return zh.resolve(0===this._n.length?-1:this.ss-1)},e.prototype.getAllMutationBatches=function(e){return zh.resolve(this._n.slice())},e.prototype.getAllMutationBatchesAffectingDocumentKey=function(e,t){var n=this,r=new xd(t,0),i=new xd(t,Number.POSITIVE_INFINITY),o=[];return this.rs.forEachInRange([r,i],function(e){var t=n.os(e.ns);o.push(t)}),zh.resolve(o)},e.prototype.getAllMutationBatchesAffectingDocumentKeys=function(e,t){var n=this,r=new Tl(hu);return t.forEach(function(e){var t=new xd(e,0),i=new xd(e,Number.POSITIVE_INFINITY);n.rs.forEachInRange([t,i],function(e){r=r.add(e.ns)})}),zh.resolve(this.us(r))},e.prototype.getAllMutationBatchesAffectingQuery=function(e,t){var n=t.path,r=n.length+1,i=n;Lu.isDocumentKey(i)||(i=i.child(""));var o=new xd(new Lu(i),0),s=new Tl(hu);return this.rs.forEachWhile(function(e){var t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(s=s.add(e.ns)),!0)},o),zh.resolve(this.us(s))},e.prototype.us=function(e){var t=this,n=[];return e.forEach(function(e){var r=t.os(e);null!==r&&n.push(r)}),n},e.prototype.removeMutationBatch=function(e,t){var n=this;au(0===this.hs(t.batchId,"removed")),this._n.shift();var r=this.rs;return zh.forEach(t.mutations,function(i){var o=new xd(i.key,t.batchId);return r=r.delete(o),n.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(function(){n.rs=r})},e.prototype.Gt=function(e){},e.prototype.containsKey=function(e,t){var n=new xd(t,0),r=this.rs.firstAfterOrEqual(n);return zh.resolve(t.isEqual(r&&r.key))},e.prototype.performConsistencyCheck=function(e){return zh.resolve()},e.prototype.hs=function(e,t){return this.cs(e)},e.prototype.cs=function(e){return 0===this._n.length?0:e-this._n[0].batchId},e.prototype.os=function(e){var t=this.cs(e);return t<0||t>=this._n.length?null:this._n[t]},e}(),Dd=function(){function e(e,t){this.Ut=e,this.ls=t,this.docs=new _l(Lu.comparator),this.size=0}return e.prototype.addEntry=function(e,t,n){var r=t.key,i=this.docs.get(r),o=i?i.size:0,s=this.ls(t);return this.docs=this.docs.insert(r,{document:t.clone(),size:s,readTime:n}),this.size+=s-o,this.Ut.addToCollectionParentIndex(e,r.path.popLast())},e.prototype.removeEntry=function(e){var t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)},e.prototype.getEntry=function(e,t){var n=this.docs.get(t);return zh.resolve(n?n.document.clone():Zu.newInvalidDocument(t))},e.prototype.getEntries=function(e,t){var n=this,r=kl();return t.forEach(function(e){var t=n.docs.get(e);r=r.insert(e,t?t.document.clone():Zu.newInvalidDocument(e))}),zh.resolve(r)},e.prototype.getDocumentsMatchingQuery=function(e,t,n){for(var r=kl(),i=new Lu(t.path.child("")),o=this.docs.getIteratorFrom(i);o.hasNext();){var s=o.getNext(),a=s.value,u=a.document,c=a.readTime;if(!t.path.isPrefixOf(s.key.path))break;c.compareTo(n)<=0||Oc(t,u)&&(r=r.insert(u.key,u.clone()))}return zh.resolve(r)},e.prototype.fs=function(e,t){return zh.forEach(this.docs,function(e){return t(e)})},e.prototype.newChangeBuffer=function(e){return new Pd(this)},e.prototype.getSize=function(e){return zh.resolve(this.size)},e}(),Pd=function(e){function t(t){var n=this;return(n=e.call(this)||this).Ie=t,n}return(0,Ur.__extends)(t,e),t.prototype.applyChanges=function(e){var t=this,n=[];return this.changes.forEach(function(r,i){i.document.isValidDocument()?n.push(t.Ie.addEntry(e,i.document,t.getReadTime(r))):t.Ie.removeEntry(r)}),zh.waitFor(n)},t.prototype.getFromCache=function(e,t){return this.Ie.getEntry(e,t)},t.prototype.getAllFromCache=function(e,t){return this.Ie.getEntries(e,t)},t}(Qf),Od=function(){function e(e){this.persistence=e,this.ds=new Gf(function(e){return tc(e)},nc),this.lastRemoteSnapshotVersion=gu.min(),this.highestTargetId=0,this.ws=0,this._s=new Ad,this.targetCount=0,this.ys=Lf.Jt()}return e.prototype.forEachTarget=function(e,t){return this.ds.forEach(function(e,n){return t(n)}),zh.resolve()},e.prototype.getLastRemoteSnapshotVersion=function(e){return zh.resolve(this.lastRemoteSnapshotVersion)},e.prototype.getHighestSequenceNumber=function(e){return zh.resolve(this.ws)},e.prototype.allocateTargetId=function(e){return this.highestTargetId=this.ys.next(),zh.resolve(this.highestTargetId)},e.prototype.setTargetsMetadata=function(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.ws&&(this.ws=t),zh.resolve()},e.prototype.te=function(e){this.ds.set(e.target,e);var t=e.targetId;t>this.highestTargetId&&(this.ys=new Lf(t),this.highestTargetId=t),e.sequenceNumber>this.ws&&(this.ws=e.sequenceNumber)},e.prototype.addTargetData=function(e,t){return this.te(t),this.targetCount+=1,zh.resolve()},e.prototype.updateTargetData=function(e,t){return this.te(t),zh.resolve()},e.prototype.removeTargetData=function(e,t){return this.ds.delete(t.target),this._s.Zn(t.targetId),this.targetCount-=1,zh.resolve()},e.prototype.removeTargets=function(e,t,n){var r=this,i=0,o=[];return this.ds.forEach(function(s,a){a.sequenceNumber<=t&&null===n.get(a.targetId)&&(r.ds.delete(s),o.push(r.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),zh.waitFor(o).next(function(){return i})},e.prototype.getTargetCount=function(e){return zh.resolve(this.targetCount)},e.prototype.getTargetData=function(e,t){var n=this.ds.get(t)||null;return zh.resolve(n)},e.prototype.addMatchingKeys=function(e,t,n){return this._s.Jn(t,n),zh.resolve()},e.prototype.removeMatchingKeys=function(e,t,n){this._s.Xn(t,n);var r=this.persistence.referenceDelegate,i=[];return r&&t.forEach(function(t){i.push(r.markPotentiallyOrphaned(e,t))}),zh.waitFor(i)},e.prototype.removeMatchingKeysForTargetId=function(e,t){return this._s.Zn(t),zh.resolve()},e.prototype.getMatchingKeysForTargetId=function(e,t){var n=this._s.es(t);return zh.resolve(n)},e.prototype.containsKey=function(e,t){return zh.resolve(this._s.containsKey(t))},e}(),Rd=function(){function e(e,t){var n=this;this.gs={},this.Ne=new Xa(0),this.xe=!1,this.xe=!0,this.referenceDelegate=e(this),this.qe=new Od(this),this.Ut=new Tf,this.Ue=function(e,t){return new Dd(e,function(e){return n.referenceDelegate.ps(e)})}(this.Ut),this.R=new uf(t),this.Ke=new Sd(this.R)}return e.prototype.start=function(){return Promise.resolve()},e.prototype.shutdown=function(){return this.xe=!1,Promise.resolve()},Object.defineProperty(e.prototype,"started",{get:function(){return this.xe},enumerable:!1,configurable:!0}),e.prototype.setDatabaseDeletedListener=function(){},e.prototype.setNetworkEnabled=function(){},e.prototype.getIndexManager=function(){return this.Ut},e.prototype.getMutationQueue=function(e){var t=this.gs[e.toKey()];return t||(t=new Nd(this.Ut,this.referenceDelegate),this.gs[e.toKey()]=t),t},e.prototype.getTargetCache=function(){return this.qe},e.prototype.getRemoteDocumentCache=function(){return this.Ue},e.prototype.getBundleCache=function(){return this.Ke},e.prototype.runTransaction=function(e,t,n){var r=this;nu("MemoryPersistence","Starting transaction:",e);var i=new Ld(this.Ne.next());return this.referenceDelegate.Es(),n(i).next(function(e){return r.referenceDelegate.Ts(i).next(function(){return e})}).toPromise().then(function(e){return i.raiseOnCommittedEvent(),e})},e.prototype.Is=function(e,t){return zh.or(Object.values(this.gs).map(function(n){return function(){return n.containsKey(e,t)}}))},e}(),Ld=function(e){function t(t){var n=this;return(n=e.call(this)||this).currentSequenceNumber=t,n}return(0,Ur.__extends)(t,e),t}(Wh),Md=function(){function e(e){this.persistence=e,this.As=new Ad,this.Rs=null}return e.bs=function(t){return new e(t)},Object.defineProperty(e.prototype,"vs",{get:function(){if(this.Rs)return this.Rs;throw su()},enumerable:!1,configurable:!0}),e.prototype.addReference=function(e,t,n){return this.As.addReference(n,t),this.vs.delete(n.toString()),zh.resolve()},e.prototype.removeReference=function(e,t,n){return this.As.removeReference(n,t),this.vs.add(n.toString()),zh.resolve()},e.prototype.markPotentiallyOrphaned=function(e,t){return this.vs.add(t.toString()),zh.resolve()},e.prototype.removeTarget=function(e,t){var n=this;this.As.Zn(t.targetId).forEach(function(e){return n.vs.add(e.toString())});var r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(function(e){e.forEach(function(e){return n.vs.add(e.toString())})}).next(function(){return r.removeTargetData(e,t)})},e.prototype.Es=function(){this.Rs=new Set},e.prototype.Ts=function(e){var t=this,n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return zh.forEach(this.vs,function(r){var i=Lu.fromPath(r);return t.Ps(e,i).next(function(e){e||n.removeEntry(i)})}).next(function(){return t.Rs=null,n.apply(e)})},e.prototype.updateLimboDocument=function(e,t){var n=this;return this.Ps(e,t).next(function(e){e?n.vs.delete(t.toString()):n.vs.add(t.toString())})},e.prototype.ps=function(e){return 0},e.prototype.Ps=function(e,t){var n=this;return zh.or([function(){return zh.resolve(n.As.containsKey(t))},function(){return n.persistence.getTargetCache().containsKey(e,t)},function(){return n.persistence.Is(e,t)}])},e}(),Fd=function(){function e(e){this.uid=e}return e.prototype.isAuthenticated=function(){return null!=this.uid},e.prototype.toKey=function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"},e.prototype.isEqual=function(e){return e.uid===this.uid},e}();function jd(e,t){return"firestore_clients_"+e+"_"+t}function qd(e,t,n){var r="firestore_mutations_"+e+"_"+n;return t.isAuthenticated()&&(r+="_"+t.uid),r}function Ud(e,t){return"firestore_targets_"+e+"_"+t}Fd.UNAUTHENTICATED=new Fd(null),Fd.GOOGLE_CREDENTIALS=new Fd("google-credentials-uid"),Fd.FIRST_PARTY=new Fd("first-party-uid");var Vd=function(){function e(e,t,n,r){this.user=e,this.batchId=t,this.state=n,this.error=r}return e.Vs=function(t,n,r){var i,o=JSON.parse(r),s="object"==typeof o&&-1!==["pending","acknowledged","rejected"].indexOf(o.state)&&(void 0===o.error||"object"==typeof o.error);return s&&o.error&&(s="string"==typeof o.error.message&&"string"==typeof o.error.code)&&(i=new Ja(o.error.code,o.error.message)),s?new e(t,n,o.state,i):(ru("SharedClientState","Failed to parse mutation state for ID '"+n+"': "+r),null)},e.prototype.Ss=function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)},e}(),Bd=function(){function e(e,t,n){this.targetId=e,this.state=t,this.error=n}return e.Vs=function(t,n){var r,i=JSON.parse(n),o="object"==typeof i&&-1!==["not-current","current","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return o&&i.error&&(o="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(r=new Ja(i.error.code,i.error.message)),o?new e(t,i.state,r):(ru("SharedClientState","Failed to parse target state for ID '"+t+"': "+n),null)},e.prototype.Ss=function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)},e}(),Hd=function(){function e(e,t){this.clientId=e,this.activeTargetIds=t}return e.Vs=function(t,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,o=Ol(),s=0;i&&s<r.activeTargetIds.length;++s)i=Ru(r.activeTargetIds[s]),o=o.add(r.activeTargetIds[s]);return i?new e(t,o):(ru("SharedClientState","Failed to parse client data for instance '"+t+"': "+n),null)},e}(),Wd=function(){function e(e,t){this.clientId=e,this.onlineState=t}return e.Vs=function(t){var n=JSON.parse(t);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new e(n.clientId,n.onlineState):(ru("SharedClientState","Failed to parse online state: "+t),null)},e}(),Kd=function(){function e(){this.activeTargetIds=Ol()}return e.prototype.Ds=function(e){this.activeTargetIds=this.activeTargetIds.add(e)},e.prototype.Cs=function(e){this.activeTargetIds=this.activeTargetIds.delete(e)},e.prototype.Ss=function(){var e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)},e}(),zd=function(){function e(e,t,n,r,i){this.window=e,this.Se=t,this.persistenceKey=n,this.Ns=r,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.xs=this.Fs.bind(this),this.ks=new _l(hu),this.started=!1,this.$s=[];var o=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.Os=jd(this.persistenceKey,this.Ns),this.Ms=function(e){return"firestore_sequence_number_"+e}(this.persistenceKey),this.ks=this.ks.insert(this.Ns,new Kd),this.Ls=new RegExp("^firestore_clients_"+o+"_([^_]*)$"),this.Bs=new RegExp("^firestore_mutations_"+o+"_(\\d+)(?:_(.*))?$"),this.qs=new RegExp("^firestore_targets_"+o+"_(\\d+)$"),this.Us=function(e){return"firestore_online_state_"+e}(this.persistenceKey),this.Ks=function(e){return"firestore_bundle_loaded_"+e}(this.persistenceKey),this.window.addEventListener("storage",this.xs)}return e.yt=function(e){return!(!e||!e.localStorage)},e.prototype.start=function(){return(0,Ur.__awaiter)(this,void 0,void 0,function(){var e,t,n,r,i,o,s,a,u,c,l=this;return(0,Ur.__generator)(this,function(h){switch(h.label){case 0:return[4,this.syncEngine.fn()];case 1:for(e=h.sent(),t=0,n=e;t<n.length;t++)(r=n[t])!==this.Ns&&(i=this.getItem(jd(this.persistenceKey,r)))&&(o=Hd.Vs(r,i))&&(this.ks=this.ks.insert(o.clientId,o));for(this.Qs(),(s=this.storage.getItem(this.Us))&&(a=this.js(s))&&this.Ws(a),u=0,c=this.$s;u<c.length;u++)this.Fs(c[u]);return this.$s=[],this.window.addEventListener("pagehide",function(){return l.shutdown()}),this.started=!0,[2]}})})},e.prototype.writeSequenceNumber=function(e){this.setItem(this.Ms,JSON.stringify(e))},e.prototype.getAllActiveQueryTargets=function(){return this.Gs(this.ks)},e.prototype.isActiveQueryTarget=function(e){var t=!1;return this.ks.forEach(function(n,r){r.activeTargetIds.has(e)&&(t=!0)}),t},e.prototype.addPendingMutation=function(e){this.zs(e,"pending")},e.prototype.updateMutationState=function(e,t,n){this.zs(e,t,n),this.Hs(e)},e.prototype.addLocalQueryTarget=function(e){var t="not-current";if(this.isActiveQueryTarget(e)){var n=this.storage.getItem(Ud(this.persistenceKey,e));if(n){var r=Bd.Vs(e,n);r&&(t=r.state)}}return this.Js.Ds(e),this.Qs(),t},e.prototype.removeLocalQueryTarget=function(e){this.Js.Cs(e),this.Qs()},e.prototype.isLocalQueryTarget=function(e){return this.Js.activeTargetIds.has(e)},e.prototype.clearQueryState=function(e){this.removeItem(Ud(this.persistenceKey,e))},e.prototype.updateQueryState=function(e,t,n){this.Ys(e,t,n)},e.prototype.handleUserChange=function(e,t,n){var r=this;t.forEach(function(e){r.Hs(e)}),this.currentUser=e,n.forEach(function(e){r.addPendingMutation(e)})},e.prototype.setOnlineState=function(e){this.Xs(e)},e.prototype.notifyBundleLoaded=function(){this.Zs()},e.prototype.shutdown=function(){this.started&&(this.window.removeEventListener("storage",this.xs),this.removeItem(this.Os),this.started=!1)},e.prototype.getItem=function(e){var t=this.storage.getItem(e);return nu("SharedClientState","READ",e,t),t},e.prototype.setItem=function(e,t){nu("SharedClientState","SET",e,t),this.storage.setItem(e,t)},e.prototype.removeItem=function(e){nu("SharedClientState","REMOVE",e),this.storage.removeItem(e)},e.prototype.Fs=function(e){var t=this,n=e;if(n.storageArea===this.storage){if(nu("SharedClientState","EVENT",n.key,n.newValue),n.key===this.Os)return void ru("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Se.enqueueRetryable(function(){return(0,Ur.__awaiter)(t,void 0,void 0,function(){var e,t,r,i,o,s;return(0,Ur.__generator)(this,function(a){if(this.started){if(null!==n.key)if(this.Ls.test(n.key)){if(null==n.newValue)return e=this.ti(n.key),[2,this.ei(e,null)];if(t=this.ni(n.key,n.newValue))return[2,this.ei(t.clientId,t)]}else if(this.Bs.test(n.key)){if(null!==n.newValue&&(r=this.si(n.key,n.newValue)))return[2,this.ii(r)]}else if(this.qs.test(n.key)){if(null!==n.newValue&&(i=this.ri(n.key,n.newValue)))return[2,this.oi(i)]}else if(n.key===this.Us){if(null!==n.newValue&&(o=this.js(n.newValue)))return[2,this.Ws(o)]}else if(n.key===this.Ms)(s=function(e){var t=Xa.o;if(null!=e)try{var n=JSON.parse(e);au("number"==typeof n),t=n}catch(e){ru("SharedClientState","Failed to read sequence number from WebStorage",e)}return t}(n.newValue))!==Xa.o&&this.sequenceNumberHandler(s);else if(n.key===this.Ks)return[2,this.syncEngine.ci()]}else this.$s.push(n);return[2]})})})}},Object.defineProperty(e.prototype,"Js",{get:function(){return this.ks.get(this.Ns)},enumerable:!1,configurable:!0}),e.prototype.Qs=function(){this.setItem(this.Os,this.Js.Ss())},e.prototype.zs=function(e,t,n){var r=new Vd(this.currentUser,e,t,n),i=qd(this.persistenceKey,this.currentUser,e);this.setItem(i,r.Ss())},e.prototype.Hs=function(e){var t=qd(this.persistenceKey,this.currentUser,e);this.removeItem(t)},e.prototype.Xs=function(e){this.storage.setItem(this.Us,JSON.stringify({clientId:this.Ns,onlineState:e}))},e.prototype.Ys=function(e,t,n){var r=Ud(this.persistenceKey,e),i=new Bd(e,t,n);this.setItem(r,i.Ss())},e.prototype.Zs=function(){this.setItem(this.Ks,"value-not-used")},e.prototype.ti=function(e){var t=this.Ls.exec(e);return t?t[1]:null},e.prototype.ni=function(e,t){var n=this.ti(e);return Hd.Vs(n,t)},e.prototype.si=function(e,t){var n=this.Bs.exec(e),r=Number(n[1]);return Vd.Vs(new Fd(void 0!==n[2]?n[2]:null),r,t)},e.prototype.ri=function(e,t){var n=this.qs.exec(e),r=Number(n[1]);return Bd.Vs(r,t)},e.prototype.js=function(e){return Wd.Vs(e)},e.prototype.ii=function(e){return(0,Ur.__awaiter)(this,void 0,void 0,function(){return(0,Ur.__generator)(this,function(t){return e.user.uid===this.currentUser.uid?[2,this.syncEngine.ui(e.batchId,e.state,e.error)]:(nu("SharedClientState","Ignoring mutation for non-active user "+e.user.uid),[2])})})},e.prototype.oi=function(e){return this.syncEngine.ai(e.targetId,e.state,e.error)},e.prototype.ei=function(e,t){var n=this,r=t?this.ks.insert(e,t):this.ks.remove(e),i=this.Gs(this.ks),o=this.Gs(r),s=[],a=[];return o.forEach(function(e){i.has(e)||s.push(e)}),i.forEach(function(e){o.has(e)||a.push(e)}),this.syncEngine.hi(s,a).then(function(){n.ks=r})},e.prototype.Ws=function(e){this.ks.get(e.clientId)&&this.onlineStateHandler(e.onlineState)},e.prototype.Gs=function(e){var t=Ol();return e.forEach(function(e,n){t=t.unionWith(n.activeTargetIds)}),t},e}(),Gd=function(){function e(){this.li=new Kd,this.fi={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}return e.prototype.addPendingMutation=function(e){},e.prototype.updateMutationState=function(e,t,n){},e.prototype.addLocalQueryTarget=function(e){return this.li.Ds(e),this.fi[e]||"not-current"},e.prototype.updateQueryState=function(e,t,n){this.fi[e]=t},e.prototype.removeLocalQueryTarget=function(e){this.li.Cs(e)},e.prototype.isLocalQueryTarget=function(e){return this.li.activeTargetIds.has(e)},e.prototype.clearQueryState=function(e){delete this.fi[e]},e.prototype.getAllActiveQueryTargets=function(){return this.li.activeTargetIds},e.prototype.isActiveQueryTarget=function(e){return this.li.activeTargetIds.has(e)},e.prototype.start=function(){return this.li=new Kd,Promise.resolve()},e.prototype.handleUserChange=function(e,t,n){},e.prototype.setOnlineState=function(e){},e.prototype.shutdown=function(){},e.prototype.writeSequenceNumber=function(e){},e.prototype.notifyBundleLoaded=function(){},e}(),Qd=function(){function e(){}return e.prototype.di=function(e){},e.prototype.shutdown=function(){},e}(),$d=function(){function e(){var e=this;this.wi=function(){return e._i()},this.mi=function(){return e.yi()},this.gi=[],this.pi()}return e.prototype.di=function(e){this.gi.push(e)},e.prototype.shutdown=function(){window.removeEventListener("online",this.wi),window.removeEventListener("offline",this.mi)},e.prototype.pi=function(){window.addEventListener("online",this.wi),window.addEventListener("offline",this.mi)},e.prototype._i=function(){nu("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(var e=0,t=this.gi;e<t.length;e++)(0,t[e])(0)},e.prototype.yi=function(){nu("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(var e=0,t=this.gi;e<t.length;e++)(0,t[e])(1)},e.yt=function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener},e}(),Yd={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"},Xd=function(){function e(e){this.Ei=e.Ei,this.Ti=e.Ti}return e.prototype.Ii=function(e){this.Ai=e},e.prototype.Ri=function(e){this.bi=e},e.prototype.onMessage=function(e){this.vi=e},e.prototype.close=function(){this.Ti()},e.prototype.send=function(e){this.Ei(e)},e.prototype.Pi=function(){this.Ai()},e.prototype.Vi=function(e){this.bi(e)},e.prototype.Si=function(e){this.vi(e)},e}(),Zd=function(e){function t(t){var n=this;return(n=e.call(this,t)||this).forceLongPolling=t.forceLongPolling,n.autoDetectLongPolling=t.autoDetectLongPolling,n.useFetchStreams=t.useFetchStreams,n}return(0,Ur.__extends)(t,e),t.prototype.ki=function(e,t,n,r){return new Promise(function(i,o){var s=new Ya;s.listenOnce(za.COMPLETE,function(){try{switch(s.getLastErrorCode()){case Ka.NO_ERROR:var t=s.getResponseJson();nu("Connection","XHR received:",JSON.stringify(t)),i(t);break;case Ka.TIMEOUT:nu("Connection",'RPC "'+e+'" timed out'),o(new Ja(Za.DEADLINE_EXCEEDED,"Request time out"));break;case Ka.HTTP_ERROR:var n=s.getStatus();if(nu("Connection",'RPC "'+e+'" failed with status:',n,"response text:",s.getResponseText()),n>0){var r=s.getResponseJson().error;if(r&&r.status&&r.message){var a=function(e){var t=e.toLowerCase().replace(/_/g,"-");return Object.values(Za).indexOf(t)>=0?t:Za.UNKNOWN}(r.status);o(new Ja(a,r.message))}else o(new Ja(Za.UNKNOWN,"Server responded with status "+s.getStatus()))}else o(new Ja(Za.UNAVAILABLE,"Connection failed."));break;default:su()}}finally{nu("Connection",'RPC "'+e+'" completed.')}});var a=JSON.stringify(r);s.send(t,"POST",a,n,15)})},t.prototype.Oi=function(e,t){var n=[this.Di,"/","google.firestore.v1.Firestore","/",e,"/channel"],r=new Ua,i=Ro(),o={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(o.xmlHttpFactory=new Qa({})),this.Fi(o.initMessageHeaders,t),(0,Vr.isMobileCordova)()||(0,Vr.isReactNative)()||(0,Vr.isElectron)()||(0,Vr.isIE)()||(0,Vr.isUWP)()||(0,Vr.isBrowserExtension)()||(o.httpHeadersOverwriteParam="$httpHeaders");var s=n.join("");nu("Connection","Creating WebChannel: "+s,o);var a=r.createWebChannel(s,o),u=!1,c=!1,l=new Xd({Ei:function(e){c?nu("Connection","Not sending because WebChannel is closed:",e):(u||(nu("Connection","Opening WebChannel transport."),a.open(),u=!0),nu("Connection","WebChannel sending:",e),a.send(e))},Ti:function(){return a.close()}}),h=function(e,t,n){e.listen(t,function(e){try{n(e)}catch(e){setTimeout(function(){throw e},0)}})};return h(a,$a.EventType.OPEN,function(){c||nu("Connection","WebChannel transport opened.")}),h(a,$a.EventType.CLOSE,function(){c||(c=!0,nu("Connection","WebChannel transport closed"),l.Vi())}),h(a,$a.EventType.ERROR,function(e){c||(c=!0,iu("Connection","WebChannel transport errored:",e),l.Vi(new Ja(Za.UNAVAILABLE,"The operation could not be completed")))}),h(a,$a.EventType.MESSAGE,function(e){var t;if(!c){var n=e.data[0];au(!!n);var r=n.error||(null===(t=n[0])||void 0===t?void 0:t.error);if(r){nu("Connection","WebChannel received error:",r);var i=r.status,o=function(e){var t=fl[e];if(void 0!==t)return yl(t)}(i),s=r.message;void 0===o&&(o=Za.INTERNAL,s="Unknown error status: "+i+" with message "+r.message),c=!0,l.Vi(new Ja(o,s)),a.close()}else nu("Connection","WebChannel received:",n),l.Si(n)}}),h(i,Ga.STAT_EVENT,function(e){10===e.stat?nu("Connection","Detected buffering proxy"):11===e.stat&&nu("Connection","Detected no buffering proxy")}),setTimeout(function(){l.Pi()},0),l},t}(function(){function e(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.Di=(e.ssl?"https":"http")+"://"+e.host,this.Ci="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}return e.prototype.Ni=function(e,t,n,r){var i=this.xi(e,t);nu("RestConnection","Sending: ",i,n);var o={};return this.Fi(o,r),this.ki(e,i,o,n).then(function(e){return nu("RestConnection","Received: ",e),e},function(t){throw iu("RestConnection",e+" failed with error: ",t,"url: ",i,"request:",n),t})},e.prototype.$i=function(e,t,n,r){return this.Ni(e,t,n,r)},e.prototype.Fi=function(e,t){if(e["X-Goog-Api-Client"]="gl-js/ fire/8.8.1",e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t)for(var n in t.authHeaders)t.authHeaders.hasOwnProperty(n)&&(e[n]=t.authHeaders[n])},e.prototype.xi=function(e,t){return this.Di+"/v1/"+t+":"+Yd[e]},e}());function Jd(){return"undefined"!=typeof window?window:null}function ep(){return"undefined"!=typeof document?document:null}function tp(e){return new Kl(e,!0)}var np=function(){function e(e,t,n,r,i){void 0===n&&(n=1e3),void 0===r&&(r=1.5),void 0===i&&(i=6e4),this.Se=e,this.timerId=t,this.Mi=n,this.Li=r,this.Bi=i,this.qi=0,this.Ui=null,this.Ki=Date.now(),this.reset()}return e.prototype.reset=function(){this.qi=0},e.prototype.Qi=function(){this.qi=this.Bi},e.prototype.ji=function(e){var t=this;this.cancel();var n=Math.floor(this.qi+this.Wi()),r=Math.max(0,Date.now()-this.Ki),i=Math.max(0,n-r);i>0&&nu("ExponentialBackoff","Backing off for "+i+" ms (base delay: "+this.qi+" ms, delay with jitter: "+n+" ms, last attempt: "+r+" ms ago)"),this.Ui=this.Se.enqueueAfterDelay(this.timerId,i,function(){return t.Ki=Date.now(),e()}),this.qi*=this.Li,this.qi<this.Mi&&(this.qi=this.Mi),this.qi>this.Bi&&(this.qi=this.Bi)},e.prototype.Gi=function(){null!==this.Ui&&(this.Ui.skipDelay(),this.Ui=null)},e.prototype.cancel=function(){null!==this.Ui&&(this.Ui.cancel(),this.Ui=null)},e.prototype.Wi=function(){return(Math.random()-.5)*this.qi},e}(),rp=function(){function e(e,t,n,r,i,o){this.Se=e,this.zi=n,this.Hi=r,this.Ji=i,this.listener=o,this.state=0,this.Yi=0,this.Xi=null,this.stream=null,this.Zi=new np(e,t)}return e.prototype.tr=function(){return 1===this.state||2===this.state||4===this.state},e.prototype.er=function(){return 2===this.state},e.prototype.start=function(){3!==this.state?this.auth():this.nr()},e.prototype.stop=function(){return(0,Ur.__awaiter)(this,void 0,void 0,function(){return(0,Ur.__generator)(this,function(e){switch(e.label){case 0:return this.tr()?[4,this.close(0)]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}})})},e.prototype.sr=function(){this.state=0,this.Zi.reset()},e.prototype.ir=function(){var e=this;this.er()&&null===this.Xi&&(this.Xi=this.Se.enqueueAfterDelay(this.zi,6e4,function(){return e.rr()}))},e.prototype.cr=function(e){this.ur(),this.stream.send(e)},e.prototype.rr=function(){return(0,Ur.__awaiter)(this,void 0,void 0,function(){return(0,Ur.__generator)(this,function(e){return this.er()?[2,this.close(0)]:[2]})})},e.prototype.ur=function(){this.Xi&&(this.Xi.cancel(),this.Xi=null)},e.prototype.close=function(e,t){return(0,Ur.__awaiter)(this,void 0,void 0,function(){return(0,Ur.__generator)(this,function(n){switch(n.label){case 0:return this.ur(),this.Zi.cancel(),this.Yi++,3!==e?this.Zi.reset():t&&t.code===Za.RESOURCE_EXHAUSTED?(ru(t.toString()),ru("Using maximum backoff delay to prevent overloading the backend."),this.Zi.Qi()):t&&t.code===Za.UNAUTHENTICATED&&this.Ji.invalidateToken(),null!==this.stream&&(this.ar(),this.stream.close(),this.stream=null),this.state=e,[4,this.listener.Ri(t)];case 1:return n.sent(),[2]}})})},e.prototype.ar=function(){},e.prototype.auth=function(){var e=this;this.state=1;var t=this.hr(this.Yi),n=this.Yi;this.Ji.getToken().then(function(t){e.Yi===n&&e.lr(t)},function(n){t(function(){var t=new Ja(Za.UNKNOWN,"Fetching auth token failed: "+n.message);return e.dr(t)})})},e.prototype.lr=function(e){var t=this,n=this.hr(this.Yi);this.stream=this.wr(e),this.stream.Ii(function(){n(function(){return t.state=2,t.listener.Ii()})}),this.stream.Ri(function(e){n(function(){return t.dr(e)})}),this.stream.onMessage(function(e){n(function(){return t.onMessage(e)})})},e.prototype.nr=function(){var e=this;this.state=4,this.Zi.ji(function(){return(0,Ur.__awaiter)(e,void 0,void 0,function(){return(0,Ur.__generator)(this,function(e){return this.state=0,this.start(),[2]})})})},e.prototype.dr=function(e){return nu("PersistentStream","close with error: "+e),this.stream=null,this.close(3,e)},e.prototype.hr=function(e){var t=this;return function(n){t.Se.enqueueAndForget(function(){return t.Yi===e?n():(nu("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())})}},e}(),ip=function(e){function t(t,n,r,i,o){var s=this;return(s=e.call(this,t,"listen_stream_connection_backoff","listen_stream_idle",n,r,o)||this).R=i,s}return(0,Ur.__extends)(t,e),t.prototype.wr=function(e){return this.Hi.Oi("Listen",e)},t.prototype.onMessage=function(e){this.Zi.reset();var t=function(e,t){var n;if("targetChange"in t){var r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:su()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],o=function(e,t){return e.I?(au(void 0===t||"string"==typeof t),Iu.fromBase64String(t||"")):(au(void 0===t||t instanceof Uint8Array),Iu.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),s=(a=t.targetChange.cause)&&function(e){var t=void 0===e.code?Za.UNKNOWN:yl(e.code);return new Ja(t,e.message||"")}(a);n=new jl(r,i,o,s||null)}else if("documentChange"in t){i=Jl(e,(r=t.documentChange).document.name),o=$l(r.document.updateTime);var a=new Yu({mapValue:{fields:r.document.fields}}),u=(s=Zu.newFoundDocument(i,o,a),r.targetIds||[]);n=new Ml(u,r.removedTargetIds||[],s.key,s)}else if("documentDelete"in t)i=Jl(e,(r=t.documentDelete).document),o=r.readTime?$l(r.readTime):gu.min(),a=Zu.newNoDocument(i,o),n=new Ml([],s=r.removedTargetIds||[],a.key,a);else if("documentRemove"in t)i=Jl(e,(r=t.documentRemove).document),n=new Ml([],o=r.removedTargetIds||[],i,null);else{if(!("filter"in t))return su();var c=t.filter;i=new vl(r=c.count||0),n=new Fl(o=c.targetId,i)}return n}(this.R,e),n=function(e){if(!("targetChange"in e))return gu.min();var t=e.targetChange;return t.targetIds&&t.targetIds.length?gu.min():t.readTime?$l(t.readTime):gu.min()}(e);return this.listener._r(t,n)},t.prototype.mr=function(e){var t={};t.database=nh(this.R),t.addTarget=function(e,t){var n,r=t.target;return(n=rc(r)?{documents:uh(e,r)}:{query:ch(e,r)}).targetId=t.targetId,t.resumeToken.approximateByteSize()>0?n.resumeToken=Gl(e,t.resumeToken):t.snapshotVersion.compareTo(gu.min())>0&&(n.readTime=zl(e,t.snapshotVersion.toTimestamp())),n}(this.R,e);var n=function(e,t){var n=function(e,t){switch(t){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return su()}}(0,t.purpose);return null==n?null:{"goog-listen-tags":n}}(0,e);n&&(t.labels=n),this.cr(t)},t.prototype.yr=function(e){var t={};t.database=nh(this.R),t.removeTarget=e,this.cr(t)},t}(rp),op=function(e){function t(t,n,r,i,o){var s=this;return(s=e.call(this,t,"write_stream_connection_backoff","write_stream_idle",n,r,o)||this).R=i,s.gr=!1,s}return(0,Ur.__extends)(t,e),Object.defineProperty(t.prototype,"pr",{get:function(){return this.gr},enumerable:!1,configurable:!0}),t.prototype.start=function(){this.gr=!1,this.lastStreamToken=void 0,e.prototype.start.call(this)},t.prototype.ar=function(){this.gr&&this.Er([])},t.prototype.wr=function(e){return this.Hi.Oi("Write",e)},t.prototype.onMessage=function(e){if(au(!!e.streamToken),this.lastStreamToken=e.streamToken,this.gr){this.Zi.reset();var t=function(e,t){return e&&e.length>0?(au(void 0!==t),e.map(function(e){return function(e,t){var n=$l(e.updateTime?e.updateTime:t);return n.isEqual(gu.min())&&(n=$l(t)),new Zc(n,e.transformResults||[])}(e,t)})):[]}(e.writeResults,e.commitTime),n=$l(e.commitTime);return this.listener.Tr(n,t)}return au(!e.writeResults||0===e.writeResults.length),this.gr=!0,this.listener.Ir()},t.prototype.Ar=function(){var e={};e.database=nh(this.R),this.cr(e)},t.prototype.Er=function(e){var t=this,n={streamToken:this.lastStreamToken,writes:e.map(function(e){return sh(t.R,e)})};this.cr(n)},t}(rp),sp=function(e){function t(t,n,r){var i=this;return(i=e.call(this)||this).credentials=t,i.Hi=n,i.R=r,i.Rr=!1,i}return(0,Ur.__extends)(t,e),t.prototype.br=function(){if(this.Rr)throw new Ja(Za.FAILED_PRECONDITION,"The client has already been terminated.")},t.prototype.Ni=function(e,t,n){var r=this;return this.br(),this.credentials.getToken().then(function(i){return r.Hi.Ni(e,t,n,i)}).catch(function(e){throw"FirebaseError"===e.name?(e.code===Za.UNAUTHENTICATED&&r.credentials.invalidateToken(),e):new Ja(Za.UNKNOWN,e.toString())})},t.prototype.$i=function(e,t,n){var r=this;return this.br(),this.credentials.getToken().then(function(i){return r.Hi.$i(e,t,n,i)}).catch(function(e){throw"FirebaseError"===e.name?(e.code===Za.UNAUTHENTICATED&&r.credentials.invalidateToken(),e):new Ja(Za.UNKNOWN,e.toString())})},t.prototype.terminate=function(){this.Rr=!0},t}(function(){}),ap=function(){function e(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.vr=0,this.Pr=null,this.Vr=!0}return e.prototype.Sr=function(){var e=this;0===this.vr&&(this.Dr("Unknown"),this.Pr=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,function(){return e.Pr=null,e.Cr("Backend didn't respond within 10 seconds."),e.Dr("Offline"),Promise.resolve()}))},e.prototype.Nr=function(e){"Online"===this.state?this.Dr("Unknown"):(this.vr++,this.vr>=1&&(this.Fr(),this.Cr("Connection failed 1 times. Most recent error: "+e.toString()),this.Dr("Offline")))},e.prototype.set=function(e){this.Fr(),this.vr=0,"Online"===e&&(this.Vr=!1),this.Dr(e)},e.prototype.Dr=function(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))},e.prototype.Cr=function(e){var t="Could not reach Cloud Firestore backend. "+e+"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.";this.Vr?(ru(t),this.Vr=!1):nu("OnlineStateTracker",t)},e.prototype.Fr=function(){null!==this.Pr&&(this.Pr.cancel(),this.Pr=null)},e}(),up=function(e,t,n,r,i){var o=this;this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.kr=[],this.$r=new Map,this.Or=new Set,this.Mr=[],this.Lr=i,this.Lr.di(function(e){n.enqueueAndForget(function(){return(0,Ur.__awaiter)(o,void 0,void 0,function(){return(0,Ur.__generator)(this,function(e){switch(e.label){case 0:return mp(this)?(nu("RemoteStore","Restarting streams for network reachability change."),[4,function(e){return(0,Ur.__awaiter)(this,void 0,void 0,function(){var t;return(0,Ur.__generator)(this,function(n){switch(n.label){case 0:return(t=uu(e)).Or.add(4),[4,lp(t)];case 1:return n.sent(),t.Br.set("Unknown"),t.Or.delete(4),[4,cp(t)];case 2:return n.sent(),[2]}})})}(this)]):[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}})})})}),this.Br=new ap(n,r)};function cp(e){return(0,Ur.__awaiter)(this,void 0,void 0,function(){var t,n;return(0,Ur.__generator)(this,function(r){switch(r.label){case 0:if(!mp(e))return[3,4];t=0,n=e.Mr,r.label=1;case 1:return t<n.length?[4,(0,n[t])(!0)]:[3,4];case 2:r.sent(),r.label=3;case 3:return t++,[3,1];case 4:return[2]}})})}function lp(e){return(0,Ur.__awaiter)(this,void 0,void 0,function(){var t,n;return(0,Ur.__generator)(this,function(r){switch(r.label){case 0:t=0,n=e.Mr,r.label=1;case 1:return t<n.length?[4,(0,n[t])(!1)]:[3,4];case 2:r.sent(),r.label=3;case 3:return t++,[3,1];case 4:return[2]}})})}function hp(e,t){var n=uu(e);n.$r.has(t.targetId)||(n.$r.set(t.targetId,t),vp(n)?gp(n):Pp(n).er()&&dp(n,t))}function fp(e,t){var n=uu(e),r=Pp(n);n.$r.delete(t),r.er()&&pp(n,t),0===n.$r.size&&(r.er()?r.ir():mp(n)&&n.Br.set("Unknown"))}function dp(e,t){e.qr.U(t.targetId),Pp(e).mr(t)}function pp(e,t){e.qr.U(t),Pp(e).yr(t)}function gp(e){e.qr=new Ul({getRemoteKeysForTarget:function(t){return e.remoteSyncer.getRemoteKeysForTarget(t)},lt:function(t){return e.$r.get(t)||null}}),Pp(e).start(),e.Br.Sr()}function vp(e){return mp(e)&&!Pp(e).tr()&&e.$r.size>0}function mp(e){return 0===uu(e).Or.size}function yp(e){e.qr=void 0}function _p(e){return(0,Ur.__awaiter)(this,void 0,void 0,function(){return(0,Ur.__generator)(this,function(t){return e.$r.forEach(function(t,n){dp(e,t)}),[2]})})}function bp(e,t){return(0,Ur.__awaiter)(this,void 0,void 0,function(){return(0,Ur.__generator)(this,function(n){return yp(e),vp(e)?(e.Br.Nr(t),gp(e)):e.Br.set("Unknown"),[2]})})}function wp(e,t,n){return(0,Ur.__awaiter)(this,void 0,void 0,function(){var r,i,o;return(0,Ur.__generator)(this,function(s){switch(s.label){case 0:if(e.Br.set("Online"),!(t instanceof jl&&2===t.state&&t.cause))return[3,6];s.label=1;case 1:return s.trys.push([1,3,,5]),[4,function(e,t){return(0,Ur.__awaiter)(this,void 0,void 0,function(){var n,r,i,o;return(0,Ur.__generator)(this,function(s){switch(s.label){case 0:n=t.cause,r=0,i=t.targetIds,s.label=1;case 1:return r<i.length?e.$r.has(o=i[r])?[4,e.remoteSyncer.rejectListen(o,n)]:[3,3]:[3,5];case 2:s.sent(),e.$r.delete(o),e.qr.removeTarget(o),s.label=3;case 3:s.label=4;case 4:return r++,[3,1];case 5:return[2]}})})}(e,t)];case 2:return s.sent(),[3,5];case 3:return r=s.sent(),nu("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),r),[4,Tp(e,r)];case 4:return s.sent(),[3,5];case 5:return[3,13];case 6:if(t instanceof Ml?e.qr.X(t):t instanceof Fl?e.qr.rt(t):e.qr.et(t),n.isEqual(gu.min()))return[3,13];s.label=7;case 7:return s.trys.push([7,11,,13]),[4,gd(e.localStore)];case 8:return i=s.sent(),n.compareTo(i)>=0?[4,function(e,t){var n=e.qr.ut(t);return n.targetChanges.forEach(function(n,r){if(n.resumeToken.approximateByteSize()>0){var i=e.$r.get(r);i&&e.$r.set(r,i.withResumeToken(n.resumeToken,t))}}),n.targetMismatches.forEach(function(t){var n=e.$r.get(t);if(n){e.$r.set(t,n.withResumeToken(Iu.EMPTY_BYTE_STRING,n.snapshotVersion)),pp(e,t);var r=new af(n.target,t,1,n.sequenceNumber);dp(e,r)}}),e.remoteSyncer.applyRemoteEvent(n)}(e,n)]:[3,10];case 9:s.sent(),s.label=10;case 10:return[3,13];case 11:return nu("RemoteStore","Failed to raise snapshot:",o=s.sent()),[4,Tp(e,o)];case 12:return s.sent(),[3,13];case 13:return[2]}})})}function Tp(e,t,n){return(0,Ur.__awaiter)(this,void 0,void 0,function(){var r=this;return(0,Ur.__generator)(this,function(i){switch(i.label){case 0:if(!Xh(t))throw t;return e.Or.add(1),[4,lp(e)];case 1:return i.sent(),e.Br.set("Offline"),n||(n=function(){return gd(e.localStore)}),e.asyncQueue.enqueueRetryable(function(){return(0,Ur.__awaiter)(r,void 0,void 0,function(){return(0,Ur.__generator)(this,function(t){switch(t.label){case 0:return nu("RemoteStore","Retrying IndexedDB access"),[4,n()];case 1:return t.sent(),e.Or.delete(1),[4,cp(e)];case 2:return t.sent(),[2]}})})}),[2]}})})}function Ep(e,t){return t().catch(function(n){return Tp(e,n,t)})}function Ip(e){return(0,Ur.__awaiter)(this,void 0,void 0,function(){var t,n,r,i,o;return(0,Ur.__generator)(this,function(s){switch(s.label){case 0:t=uu(e),n=Op(t),r=t.kr.length>0?t.kr[t.kr.length-1].batchId:-1,s.label=1;case 1:if(!function(e){return mp(e)&&e.kr.length<10}(t))return[3,7];s.label=2;case 2:return s.trys.push([2,4,,6]),[4,yd(t.localStore,r)];case 3:return null===(i=s.sent())?(0===t.kr.length&&n.ir(),[3,7]):(r=i.batchId,function(e,t){e.kr.push(t);var n=Op(e);n.er()&&n.pr&&n.Er(t.mutations)}(t,i),[3,6]);case 4:return o=s.sent(),[4,Tp(t,o)];case 5:return s.sent(),[3,6];case 6:return[3,1];case 7:return kp(t)&&Cp(t),[2]}})})}function kp(e){return mp(e)&&!Op(e).tr()&&e.kr.length>0}function Cp(e){Op(e).start()}function Sp(e){return(0,Ur.__awaiter)(this,void 0,void 0,function(){return(0,Ur.__generator)(this,function(t){return Op(e).Ar(),[2]})})}function Ap(e){return(0,Ur.__awaiter)(this,void 0,void 0,function(){var t,n,r;return(0,Ur.__generator)(this,function(i){for(t=Op(e),n=0,r=e.kr;n<r.length;n++)t.Er(r[n].mutations);return[2]})})}function xp(e,t,n){return(0,Ur.__awaiter)(this,void 0,void 0,function(){var r,i;return(0,Ur.__generator)(this,function(o){switch(o.label){case 0:return r=e.kr.shift(),i=sf.from(r,t,n),[4,Ep(e,function(){return e.remoteSyncer.applySuccessfulWrite(i)})];case 1:return o.sent(),[4,Ip(e)];case 2:return o.sent(),[2]}})})}function Np(e,t){return(0,Ur.__awaiter)(this,void 0,void 0,function(){return(0,Ur.__generator)(this,function(n){switch(n.label){case 0:return t&&Op(e).pr?[4,function(e,t){return(0,Ur.__awaiter)(this,void 0,void 0,function(){var n,r;return(0,Ur.__generator)(this,function(i){switch(i.label){case 0:return ml(r=t.code)&&r!==Za.ABORTED?(n=e.kr.shift(),Op(e).sr(),[4,Ep(e,function(){return e.remoteSyncer.rejectFailedWrite(n.batchId,t)})]):[3,3];case 1:return i.sent(),[4,Ip(e)];case 2:i.sent(),i.label=3;case 3:return[2]}})})}(e,t)]:[3,2];case 1:n.sent(),n.label=2;case 2:return kp(e)&&Cp(e),[2]}})})}function Dp(e,t){return(0,Ur.__awaiter)(this,void 0,void 0,function(){var n;return(0,Ur.__generator)(this,function(r){switch(r.label){case 0:return n=uu(e),t?(n.Or.delete(2),[4,cp(n)]):[3,2];case 1:return r.sent(),[3,5];case 2:return t?[3,4]:(n.Or.add(2),[4,lp(n)]);case 3:r.sent(),n.Br.set("Unknown"),r.label=4;case 4:r.label=5;case 5:return[2]}})})}function Pp(e){var t=this;return e.Ur||(e.Ur=function(e,t,n){var r=uu(e);return r.br(),new ip(t,r.Hi,r.credentials,r.R,n)}(e.datastore,e.asyncQueue,{Ii:_p.bind(null,e),Ri:bp.bind(null,e),_r:wp.bind(null,e)}),e.Mr.push(function(n){return(0,Ur.__awaiter)(t,void 0,void 0,function(){return(0,Ur.__generator)(this,function(t){switch(t.label){case 0:return n?(e.Ur.sr(),vp(e)?gp(e):e.Br.set("Unknown"),[3,3]):[3,1];case 1:return[4,e.Ur.stop()];case 2:t.sent(),yp(e),t.label=3;case 3:return[2]}})})})),e.Ur}function Op(e){var t=this;return e.Kr||(e.Kr=function(e,t,n){var r=uu(e);return r.br(),new op(t,r.Hi,r.credentials,r.R,n)}(e.datastore,e.asyncQueue,{Ii:Sp.bind(null,e),Ri:Np.bind(null,e),Ir:Ap.bind(null,e),Tr:xp.bind(null,e)}),e.Mr.push(function(n){return(0,Ur.__awaiter)(t,void 0,void 0,function(){return(0,Ur.__generator)(this,function(t){switch(t.label){case 0:return n?(e.Kr.sr(),[4,Ip(e)]):[3,2];case 1:return t.sent(),[3,4];case 2:return[4,e.Kr.stop()];case 3:t.sent(),e.kr.length>0&&(nu("RemoteStore","Stopping write stream with "+e.kr.length+" pending writes"),e.kr=[]),t.label=4;case 4:return[2]}})})})),e.Kr}var Rp=function(){function e(e,t,n,r,i){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new Kh,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(function(e){})}return e.createAndSchedule=function(t,n,r,i,o){var s=new e(t,n,Date.now()+r,i,o);return s.start(r),s},e.prototype.start=function(e){var t=this;this.timerHandle=setTimeout(function(){return t.handleDelayElapsed()},e)},e.prototype.skipDelay=function(){return this.handleDelayElapsed()},e.prototype.cancel=function(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Ja(Za.CANCELLED,"Operation cancelled"+(e?": "+e:""))))},e.prototype.handleDelayElapsed=function(){var e=this;this.asyncQueue.enqueueAndForget(function(){return null!==e.timerHandle?(e.clearTimeout(),e.op().then(function(t){return e.deferred.resolve(t)})):Promise.resolve()})},e.prototype.clearTimeout=function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)},e}();function Lp(e,t){if(ru("AsyncQueue",t+": "+e),Xh(e))return new Ja(Za.UNAVAILABLE,t+": "+e);throw e}var Mp=function(){function e(e){this.comparator=e?function(t,n){return e(t,n)||Lu.comparator(t.key,n.key)}:function(e,t){return Lu.comparator(e.key,t.key)},this.keyedMap=Sl(),this.sortedSet=new _l(this.comparator)}return e.emptySet=function(t){return new e(t.comparator)},e.prototype.has=function(e){return null!=this.keyedMap.get(e)},e.prototype.get=function(e){return this.keyedMap.get(e)},e.prototype.first=function(){return this.sortedSet.minKey()},e.prototype.last=function(){return this.sortedSet.maxKey()},e.prototype.isEmpty=function(){return this.sortedSet.isEmpty()},e.prototype.indexOf=function(e){var t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1},Object.defineProperty(e.prototype,"size",{get:function(){return this.sortedSet.size},enumerable:!1,configurable:!0}),e.prototype.forEach=function(e){this.sortedSet.inorderTraversal(function(t,n){return e(t),!1})},e.prototype.add=function(e){var t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))},e.prototype.delete=function(e){var t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this},e.prototype.isEqual=function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();n.hasNext();){var i=n.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0},e.prototype.toString=function(){var e=[];return this.forEach(function(t){e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"},e.prototype.copy=function(t,n){var r=new e;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=n,r},e}(),Fp=function(){function e(){this.Qr=new _l(Lu.comparator)}return e.prototype.track=function(e){var t=e.doc.key,n=this.Qr.get(t);n?0!==e.type&&3===n.type?this.Qr=this.Qr.insert(t,e):3===e.type&&1!==n.type?this.Qr=this.Qr.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.Qr=this.Qr.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.Qr=this.Qr.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.Qr=this.Qr.remove(t):1===e.type&&2===n.type?this.Qr=this.Qr.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.Qr=this.Qr.insert(t,{type:2,doc:e.doc}):su():this.Qr=this.Qr.insert(t,e)},e.prototype.jr=function(){var e=[];return this.Qr.inorderTraversal(function(t,n){e.push(n)}),e},e}(),jp=function(){function e(e,t,n,r,i,o,s,a){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=s,this.excludesMetadataChanges=a}return e.fromInitialDocuments=function(t,n,r,i){var o=[];return n.forEach(function(e){o.push({type:0,doc:e})}),new e(t,n,Mp.emptySet(n),o,r,i,!0,!1)},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return!this.mutatedKeys.isEmpty()},enumerable:!1,configurable:!0}),e.prototype.isEqual=function(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Nc(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;var t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(var r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0},e}(),qp=function(){this.Wr=void 0,this.listeners=[]},Up=function(){this.queries=new Gf(function(e){return Dc(e)},Nc),this.onlineState="Unknown",this.Gr=new Set};function Vp(e,t){return(0,Ur.__awaiter)(this,void 0,void 0,function(){var n,r,i,o,s,a,u;return(0,Ur.__generator)(this,function(c){switch(c.label){case 0:if(n=uu(e),i=!1,(o=n.queries.get(r=t.query))||(i=!0,o=new qp),!i)return[3,4];c.label=1;case 1:return c.trys.push([1,3,,4]),s=o,[4,n.onListen(r)];case 2:return s.Wr=c.sent(),[3,4];case 3:return a=c.sent(),u=Lp(a,"Initialization of query '"+Pc(t.query)+"' failed"),[2,void t.onError(u)];case 4:return n.queries.set(r,o),o.listeners.push(t),t.zr(n.onlineState),o.Wr&&t.Hr(o.Wr)&&Kp(n),[2]}})})}function Bp(e,t){return(0,Ur.__awaiter)(this,void 0,void 0,function(){var n,r,i,o,s;return(0,Ur.__generator)(this,function(a){return n=uu(e),i=!1,(o=n.queries.get(r=t.query))&&(s=o.listeners.indexOf(t))>=0&&(o.listeners.splice(s,1),i=0===o.listeners.length),i?[2,(n.queries.delete(r),n.onUnlisten(r))]:[2]})})}function Hp(e,t){for(var n=uu(e),r=!1,i=0,o=t;i<o.length;i++){var s=o[i],a=n.queries.get(s.query);if(a){for(var u=0,c=a.listeners;u<c.length;u++)c[u].Hr(s)&&(r=!0);a.Wr=s}}r&&Kp(n)}function Wp(e,t,n){var r=uu(e),i=r.queries.get(t);if(i)for(var o=0,s=i.listeners;o<s.length;o++)s[o].onError(n);r.queries.delete(t)}function Kp(e){e.Gr.forEach(function(e){e.next()})}var zp=function(){function e(e,t,n){this.query=e,this.Jr=t,this.Yr=!1,this.Xr=null,this.onlineState="Unknown",this.options=n||{}}return e.prototype.Hr=function(e){if(!this.options.includeMetadataChanges){for(var t=[],n=0,r=e.docChanges;n<r.length;n++){var i=r[n];3!==i.type&&t.push(i)}e=new jp(e.query,e.docs,e.oldDocs,t,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}var o=!1;return this.Yr?this.Zr(e)&&(this.Jr.next(e),o=!0):this.eo(e,this.onlineState)&&(this.no(e),o=!0),this.Xr=e,o},e.prototype.onError=function(e){this.Jr.error(e)},e.prototype.zr=function(e){this.onlineState=e;var t=!1;return this.Xr&&!this.Yr&&this.eo(this.Xr,e)&&(this.no(this.Xr),t=!0),t},e.prototype.eo=function(e,t){return!e.fromCache||!(this.options.so&&"Offline"!==t||e.docs.isEmpty()&&"Offline"!==t)},e.prototype.Zr=function(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Xr&&this.Xr.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges},e.prototype.no=function(e){e=jp.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.Yr=!0,this.Jr.next(e)},e}(),Gp=function(){function e(e,t){this.payload=e,this.byteLength=t}return e.prototype.io=function(){return"metadata"in this.payload},e}(),Qp=function(){function e(e){this.R=e}return e.prototype.qn=function(e){return Jl(this.R,e)},e.prototype.Un=function(e){return e.metadata.exists?oh(this.R,e.document,!1):Zu.newNoDocument(this.qn(e.metadata.name),this.Kn(e.metadata.readTime))},e.prototype.Kn=function(e){return $l(e)},e}(),$p=function(){function e(e,t,n){this.ro=e,this.localStore=t,this.R=n,this.queries=[],this.documents=[],this.progress=Yp(e)}return e.prototype.oo=function(e){this.progress.bytesLoaded+=e.byteLength;var t=this.progress.documentsLoaded;return e.payload.namedQuery?this.queries.push(e.payload.namedQuery):e.payload.documentMetadata?(this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t):e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t),t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null},e.prototype.co=function(e){for(var t=new Map,n=new Qp(this.R),r=0,i=e;r<i.length;r++){var o=i[r];if(o.metadata.queries)for(var s=n.qn(o.metadata.name),a=0,u=o.metadata.queries;a<u.length;a++){var c=u[a],l=(t.get(c)||Dl()).add(s);t.set(c,l)}}return t},e.prototype.complete=function(){return(0,Ur.__awaiter)(this,void 0,void 0,function(){var e,t,n,r,i;return(0,Ur.__generator)(this,function(o){switch(o.label){case 0:return[4,kd(this.localStore,new Qp(this.R),this.documents,this.ro.id)];case 1:e=o.sent(),t=this.co(this.documents),n=0,r=this.queries,o.label=2;case 2:return n<r.length?[4,Cd(this.localStore,i=r[n],t.get(i.name))]:[3,5];case 3:o.sent(),o.label=4;case 4:return n++,[3,2];case 5:return[2,(this.progress.taskState="Success",new ad(Object.assign({},this.progress),e))]}})})},e}();function Yp(e){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}var Xp=function(e){this.key=e},Zp=function(e){this.key=e},Jp=function(){function e(e,t){this.query=e,this.uo=t,this.ao=null,this.current=!1,this.ho=Dl(),this.mutatedKeys=Dl(),this.lo=Rc(e),this.fo=new Mp(this.lo)}return Object.defineProperty(e.prototype,"wo",{get:function(){return this.uo},enumerable:!1,configurable:!0}),e.prototype._o=function(e,t){var n=this,r=t?t.mo:new Fp,i=t?t.fo:this.fo,o=t?t.mutatedKeys:this.mutatedKeys,s=i,a=!1,u=Tc(this.query)&&i.size===this.query.limit?i.last():null,c=Ec(this.query)&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal(function(e,t){var l=i.get(e),h=Oc(n.query,t)?t:null,f=!!l&&n.mutatedKeys.has(l.key),d=!!h&&(h.hasLocalMutations||n.mutatedKeys.has(h.key)&&h.hasCommittedMutations),p=!1;l&&h?l.data.isEqual(h.data)?f!==d&&(r.track({type:3,doc:h}),p=!0):n.yo(l,h)||(r.track({type:2,doc:h}),p=!0,(u&&n.lo(h,u)>0||c&&n.lo(h,c)<0)&&(a=!0)):!l&&h?(r.track({type:0,doc:h}),p=!0):l&&!h&&(r.track({type:1,doc:l}),p=!0,(u||c)&&(a=!0)),p&&(h?(s=s.add(h),o=d?o.add(e):o.delete(e)):(s=s.delete(e),o=o.delete(e)))}),Tc(this.query)||Ec(this.query))for(;s.size>this.query.limit;){var l=Tc(this.query)?s.last():s.first();s=s.delete(l.key),o=o.delete(l.key),r.track({type:1,doc:l})}return{fo:s,mo:r,Nn:a,mutatedKeys:o}},e.prototype.yo=function(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations},e.prototype.applyChanges=function(e,t,n){var r=this,i=this.fo;this.fo=e.fo,this.mutatedKeys=e.mutatedKeys;var o=e.mo.jr();o.sort(function(e,t){return function(e,t){var n=function(e){switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return su()}};return n(e)-n(t)}(e.type,t.type)||r.lo(e.doc,t.doc)}),this.po(n);var s=t?this.Eo():[],a=0===this.ho.size&&this.current?1:0,u=a!==this.ao;return this.ao=a,0!==o.length||u?{snapshot:new jp(this.query,e.fo,i,o,e.mutatedKeys,0===a,u,!1),To:s}:{To:s}},e.prototype.zr=function(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({fo:this.fo,mo:new Fp,mutatedKeys:this.mutatedKeys,Nn:!1},!1)):{To:[]}},e.prototype.Io=function(e){return!this.uo.has(e)&&!!this.fo.has(e)&&!this.fo.get(e).hasLocalMutations},e.prototype.po=function(e){var t=this;e&&(e.addedDocuments.forEach(function(e){return t.uo=t.uo.add(e)}),e.modifiedDocuments.forEach(function(e){}),e.removedDocuments.forEach(function(e){return t.uo=t.uo.delete(e)}),this.current=e.current)},e.prototype.Eo=function(){var e=this;if(!this.current)return[];var t=this.ho;this.ho=Dl(),this.fo.forEach(function(t){e.Io(t.key)&&(e.ho=e.ho.add(t.key))});var n=[];return t.forEach(function(t){e.ho.has(t)||n.push(new Zp(t))}),this.ho.forEach(function(e){t.has(e)||n.push(new Xp(e))}),n},e.prototype.Ao=function(e){this.uo=e.Bn,this.ho=Dl();var t=this._o(e.documents);return this.applyChanges(t,!0)},e.prototype.Ro=function(){return jp.fromInitialDocuments(this.query,this.fo,this.mutatedKeys,0===this.ao)},e}(),eg=function(e,t,n){this.query=e,this.targetId=t,this.view=n},tg=function(e){this.key=e,this.bo=!1},ng=function(){function e(e,t,n,r,i,o){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.vo={},this.Po=new Gf(function(e){return Dc(e)},Nc),this.Vo=new Map,this.So=new Set,this.Do=new _l(Lu.comparator),this.Co=new Map,this.No=new Ad,this.xo={},this.Fo=new Map,this.ko=Lf.Yt(),this.onlineState="Unknown",this.$o=void 0}return Object.defineProperty(e.prototype,"isPrimaryClient",{get:function(){return!0===this.$o},enumerable:!1,configurable:!0}),e}();function rg(e,t){return(0,Ur.__awaiter)(this,void 0,void 0,function(){var n,r,i,o,s;return(0,Ur.__generator)(this,function(a){switch(a.label){case 0:return n=Pg(e),(i=n.Po.get(t))?(n.sharedClientState.addLocalQueryTarget(i.targetId),r=i.view.Ro(),[3,4]):[3,1];case 1:return[4,_d(n.localStore,Ac(t))];case 2:return o=a.sent(),s=n.sharedClientState.addLocalQueryTarget(o.targetId),[4,ig(n,t,o.targetId,"current"===s)];case 3:r=a.sent(),n.isPrimaryClient&&hp(n.remoteStore,o),a.label=4;case 4:return[2,r]}})})}function ig(e,t,n,r){return(0,Ur.__awaiter)(this,void 0,void 0,function(){var i,o,s,a,u,c;return(0,Ur.__generator)(this,function(l){switch(l.label){case 0:return e.Oo=function(t,n,r){return function(e,t,n,r){return(0,Ur.__awaiter)(this,void 0,void 0,function(){var i,o,s;return(0,Ur.__generator)(this,function(a){switch(a.label){case 0:return(i=t.view._o(n)).Nn?[4,wd(e.localStore,t.query,!1).then(function(e){return t.view._o(e.documents,i)})]:[3,2];case 1:i=a.sent(),a.label=2;case 2:return o=r&&r.targetChanges.get(t.targetId),s=t.view.applyChanges(i,e.isPrimaryClient,o),[2,(mg(e,t.targetId,s.To),s.snapshot)]}})})}(e,t,n,r)},[4,wd(e.localStore,t,!0)];case 1:return i=l.sent(),o=new Jp(t,i.Bn),s=o._o(i.documents),a=Ll.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==e.onlineState),u=o.applyChanges(s,e.isPrimaryClient,a),mg(e,n,u.To),c=new eg(t,n,o),[2,(e.Po.set(t,c),e.Vo.has(n)?e.Vo.get(n).push(t):e.Vo.set(n,[t]),u.snapshot)]}})})}function og(e,t){return(0,Ur.__awaiter)(this,void 0,void 0,function(){var n,r,i;return(0,Ur.__generator)(this,function(o){switch(o.label){case 0:return n=uu(e),r=n.Po.get(t),(i=n.Vo.get(r.targetId)).length>1?[2,(n.Vo.set(r.targetId,i.filter(function(e){return!Nc(e,t)})),void n.Po.delete(t))]:n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)?[3,2]:[4,bd(n.localStore,r.targetId,!1).then(function(){n.sharedClientState.clearQueryState(r.targetId),fp(n.remoteStore,r.targetId),gg(n,r.targetId)}).catch(Uf)]):[3,3];case 1:o.sent(),o.label=2;case 2:return[3,5];case 3:return gg(n,r.targetId),[4,bd(n.localStore,r.targetId,!0)];case 4:o.sent(),o.label=5;case 5:return[2]}})})}function sg(e,t,n){return(0,Ur.__awaiter)(this,void 0,void 0,function(){var r,i,o,s;return(0,Ur.__generator)(this,function(a){switch(a.label){case 0:r=Og(e),a.label=1;case 1:return a.trys.push([1,5,,6]),[4,function(e,t){var n,r=uu(e),i=pu.now(),o=t.reduce(function(e,t){return e.add(t.key)},Dl());return r.persistence.runTransaction("Locally write mutations","readwrite",function(e){return r.Mn.pn(e,o).next(function(o){n=o;for(var s=[],a=0,u=t;a<u.length;a++){var c=u[a],l=il(c,n.get(c.key));null!=l&&s.push(new ul(c.key,l,Xu(l.value.mapValue),Jc.exists(!0)))}return r._n.addMutationBatch(e,i,s,t)})}).then(function(e){return e.applyToLocalDocumentSet(n),{batchId:e.batchId,changes:n}})}(r.localStore,t)];case 2:return i=a.sent(),r.sharedClientState.addPendingMutation(i.batchId),function(e,t,n){var r=e.xo[e.currentUser.toKey()];r||(r=new _l(hu)),r=r.insert(t,n),e.xo[e.currentUser.toKey()]=r}(r,i.batchId,n),[4,bg(r,i.changes)];case 3:return a.sent(),[4,Ip(r.remoteStore)];case 4:return a.sent(),[3,6];case 5:return o=a.sent(),s=Lp(o,"Failed to persist write"),n.reject(s),[3,6];case 6:return[2]}})})}function ag(e,t){return(0,Ur.__awaiter)(this,void 0,void 0,function(){var n,r;return(0,Ur.__generator)(this,function(i){switch(i.label){case 0:n=uu(e),i.label=1;case 1:return i.trys.push([1,4,,6]),[4,vd(n.localStore,t)];case 2:return r=i.sent(),t.targetChanges.forEach(function(e,t){var r=n.Co.get(t);r&&(au(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?r.bo=!0:e.modifiedDocuments.size>0?au(r.bo):e.removedDocuments.size>0&&(au(r.bo),r.bo=!1))}),[4,bg(n,r,t)];case 3:return i.sent(),[3,6];case 4:return[4,Uf(i.sent())];case 5:return i.sent(),[3,6];case 6:return[2]}})})}function ug(e,t,n){var r=uu(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){var i=[];r.Po.forEach(function(e,n){var r=n.view.zr(t);r.snapshot&&i.push(r.snapshot)}),function(e,t){var n=uu(e);n.onlineState=t;var r=!1;n.queries.forEach(function(e,n){for(var i=0,o=n.listeners;i<o.length;i++)o[i].zr(t)&&(r=!0)}),r&&Kp(n)}(r.eventManager,t),i.length&&r.vo._r(i),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}function cg(e,t,n){return(0,Ur.__awaiter)(this,void 0,void 0,function(){var r,i,o,s,a,u;return(0,Ur.__generator)(this,function(c){switch(c.label){case 0:return(r=uu(e)).sharedClientState.updateQueryState(t,"rejected",n),i=r.Co.get(t),(o=i&&i.key)?(s=(s=new _l(Lu.comparator)).insert(o,Zu.newNoDocument(o,gu.min())),a=Dl().add(o),u=new Rl(gu.min(),new Map,new Tl(hu),s,a),[4,ag(r,u)]):[3,2];case 1:return c.sent(),r.Do=r.Do.remove(o),r.Co.delete(t),_g(r),[3,4];case 2:return[4,bd(r.localStore,t,!1).then(function(){return gg(r,t,n)}).catch(Uf)];case 3:c.sent(),c.label=4;case 4:return[2]}})})}function lg(e,t){return(0,Ur.__awaiter)(this,void 0,void 0,function(){var n,r,i;return(0,Ur.__generator)(this,function(o){switch(o.label){case 0:n=uu(e),r=t.batch.batchId,o.label=1;case 1:return o.trys.push([1,4,,6]),[4,pd(n.localStore,t)];case 2:return i=o.sent(),pg(n,r,null),dg(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),[4,bg(n,i)];case 3:return o.sent(),[3,6];case 4:return[4,Uf(o.sent())];case 5:return o.sent(),[3,6];case 6:return[2]}})})}function hg(e,t,n){return(0,Ur.__awaiter)(this,void 0,void 0,function(){var r,i;return(0,Ur.__generator)(this,function(o){switch(o.label){case 0:r=uu(e),o.label=1;case 1:return o.trys.push([1,4,,6]),[4,function(e,t){var n=uu(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",function(e){var r;return n._n.lookupMutationBatch(e,t).next(function(t){return au(null!==t),r=t.keys(),n._n.removeMutationBatch(e,t)}).next(function(){return n._n.performConsistencyCheck(e)}).next(function(){return n.Mn.pn(e,r)})})}(r.localStore,t)];case 2:return i=o.sent(),pg(r,t,n),dg(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),[4,bg(r,i)];case 3:return o.sent(),[3,6];case 4:return[4,Uf(o.sent())];case 5:return o.sent(),[3,6];case 6:return[2]}})})}function fg(e,t){return(0,Ur.__awaiter)(this,void 0,void 0,function(){var n,r,i,o,s;return(0,Ur.__generator)(this,function(a){switch(a.label){case 0:mp((n=uu(e)).remoteStore)||nu("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),a.label=1;case 1:return a.trys.push([1,3,,4]),[4,function(e){var t=uu(e);return t.persistence.runTransaction("Get highest unacknowledged batch id","readonly",function(e){return t._n.getHighestUnacknowledgedBatchId(e)})}(n.localStore)];case 2:return-1===(r=a.sent())?[2,void t.resolve()]:((i=n.Fo.get(r)||[]).push(t),n.Fo.set(r,i),[3,4]);case 3:return o=a.sent(),s=Lp(o,"Initialization of waitForPendingWrites() operation failed"),t.reject(s),[3,4];case 4:return[2]}})})}function dg(e,t){(e.Fo.get(t)||[]).forEach(function(e){e.resolve()}),e.Fo.delete(t)}function pg(e,t,n){var r=uu(e),i=r.xo[r.currentUser.toKey()];if(i){var o=i.get(t);o&&(n?o.reject(n):o.resolve(),i=i.remove(t)),r.xo[r.currentUser.toKey()]=i}}function gg(e,t,n){void 0===n&&(n=null),e.sharedClientState.removeLocalQueryTarget(t);for(var r=0,i=e.Vo.get(t);r<i.length;r++){var o=i[r];e.Po.delete(o),n&&e.vo.Mo(o,n)}e.Vo.delete(t),e.isPrimaryClient&&e.No.Zn(t).forEach(function(t){e.No.containsKey(t)||vg(e,t)})}function vg(e,t){e.So.delete(t.path.canonicalString());var n=e.Do.get(t);null!==n&&(fp(e.remoteStore,n),e.Do=e.Do.remove(t),e.Co.delete(n),_g(e))}function mg(e,t,n){for(var r=0,i=n;r<i.length;r++){var o=i[r];o instanceof Xp?(e.No.addReference(o.key,t),yg(e,o)):o instanceof Zp?(nu("SyncEngine","Document no longer in limbo: "+o.key),e.No.removeReference(o.key,t),e.No.containsKey(o.key)||vg(e,o.key)):su()}}function yg(e,t){var n=t.key,r=n.path.canonicalString();e.Do.get(n)||e.So.has(r)||(nu("SyncEngine","New document in limbo: "+n),e.So.add(r),_g(e))}function _g(e){for(;e.So.size>0&&e.Do.size<e.maxConcurrentLimboResolutions;){var t=e.So.values().next().value;e.So.delete(t);var n=new Lu(bu.fromString(t)),r=e.ko.next();e.Co.set(r,new tg(n)),e.Do=e.Do.insert(n,r),hp(e.remoteStore,new af(Ac(wc(n.path)),r,2,Xa.o))}}function bg(e,t,n){return(0,Ur.__awaiter)(this,void 0,void 0,function(){var r,i,o,s;return(0,Ur.__generator)(this,function(a){switch(a.label){case 0:return r=uu(e),i=[],o=[],s=[],r.Po.isEmpty()?[3,3]:(r.Po.forEach(function(e,a){s.push(r.Oo(a,t,n).then(function(e){if(e){r.isPrimaryClient&&r.sharedClientState.updateQueryState(a.targetId,e.fromCache?"not-current":"current"),i.push(e);var t=cd.Pn(a.targetId,e);o.push(t)}}))}),[4,Promise.all(s)]);case 1:return a.sent(),r.vo._r(i),[4,function(e,t){return(0,Ur.__awaiter)(this,void 0,void 0,function(){var n,r,i,o,s,a,u,c;return(0,Ur.__generator)(this,function(l){switch(l.label){case 0:n=uu(e),l.label=1;case 1:return l.trys.push([1,3,,4]),[4,n.persistence.runTransaction("notifyLocalViewChanges","readwrite",function(e){return zh.forEach(t,function(t){return zh.forEach(t.bn,function(r){return n.persistence.referenceDelegate.addReference(e,t.targetId,r)}).next(function(){return zh.forEach(t.vn,function(r){return n.persistence.referenceDelegate.removeReference(e,t.targetId,r)})})})})];case 2:return l.sent(),[3,4];case 3:if(!Xh(r=l.sent()))throw r;return nu("LocalStore","Failed to update sequence numbers: "+r),[3,4];case 4:for(i=0,o=t;i<o.length;i++)a=(s=o[i]).targetId,s.fromCache||(u=n.Fn.get(a),c=u.withLastLimboFreeSnapshotVersion(u.snapshotVersion),n.Fn=n.Fn.insert(a,c));return[2]}})})}(r.localStore,o)];case 2:a.sent(),a.label=3;case 3:return[2]}})})}function wg(e,t){return(0,Ur.__awaiter)(this,void 0,void 0,function(){var n,r;return(0,Ur.__generator)(this,function(i){switch(i.label){case 0:return(n=uu(e)).currentUser.isEqual(t)?[3,3]:(nu("SyncEngine","User change. New user:",t.toKey()),[4,dd(n.localStore,t)]);case 1:return r=i.sent(),n.currentUser=t,function(e,t){e.Fo.forEach(function(e){e.forEach(function(e){e.reject(new Ja(Za.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),e.Fo.clear()}(n),n.sharedClientState.handleUserChange(t,r.removedBatchIds,r.addedBatchIds),[4,bg(n,r.Ln)];case 2:i.sent(),i.label=3;case 3:return[2]}})})}function Tg(e,t){var n=uu(e),r=n.Co.get(t);if(r&&r.bo)return Dl().add(r.key);var i=Dl(),o=n.Vo.get(t);if(!o)return i;for(var s=0,a=o;s<a.length;s++){var u=n.Po.get(a[s]);i=i.unionWith(u.view.wo)}return i}function Eg(e,t){return(0,Ur.__awaiter)(this,void 0,void 0,function(){var n,r,i;return(0,Ur.__generator)(this,function(o){switch(o.label){case 0:return[4,wd((n=uu(e)).localStore,t.query,!0)];case 1:return r=o.sent(),i=t.view.Ao(r),[2,(n.isPrimaryClient&&mg(n,t.targetId,i.To),i)]}})})}function Ig(e){return(0,Ur.__awaiter)(this,void 0,void 0,function(){var t;return(0,Ur.__generator)(this,function(n){return[2,Ed((t=uu(e)).localStore).then(function(e){return bg(t,e)})]})})}function kg(e,t,n,r){return(0,Ur.__awaiter)(this,void 0,void 0,function(){var i,o;return(0,Ur.__generator)(this,function(s){switch(s.label){case 0:return[4,function(e,t){var n=uu(e),r=uu(n._n);return n.persistence.runTransaction("Lookup mutation documents","readonly",function(e){return r.jt(e,t).next(function(t){return t?n.Mn.pn(e,t):zh.resolve(null)})})}((i=uu(e)).localStore,t)];case 1:return null===(o=s.sent())?[3,6]:"pending"!==n?[3,3]:[4,Ip(i.remoteStore)];case 2:return s.sent(),[3,4];case 3:"acknowledged"===n||"rejected"===n?(pg(i,t,r||null),dg(i,t),function(e,t){uu(uu(e)._n).Gt(t)}(i.localStore,t)):su(),s.label=4;case 4:return[4,bg(i,o)];case 5:return s.sent(),[3,7];case 6:nu("SyncEngine","Cannot apply mutation batch with id: "+t),s.label=7;case 7:return[2]}})})}function Cg(e,t){return(0,Ur.__awaiter)(this,void 0,void 0,function(){var n,r,i,o,s,a,u;return(0,Ur.__generator)(this,function(c){switch(c.label){case 0:return Pg(n=uu(e)),Og(n),!0!==t||!0===n.$o?[3,3]:(r=n.sharedClientState.getAllActiveQueryTargets(),[4,Sg(n,r.toArray())]);case 1:return i=c.sent(),n.$o=!0,[4,Dp(n.remoteStore,!0)];case 2:for(c.sent(),o=0,s=i;o<s.length;o++)hp(n.remoteStore,s[o]);return[3,7];case 3:return!1!==t||!1===n.$o?[3,7]:(a=[],u=Promise.resolve(),n.Vo.forEach(function(e,t){n.sharedClientState.isLocalQueryTarget(t)?a.push(t):u=u.then(function(){return gg(n,t),bd(n.localStore,t,!0)}),fp(n.remoteStore,t)}),[4,u]);case 4:return c.sent(),[4,Sg(n,a)];case 5:return c.sent(),function(e){var t=uu(e);t.Co.forEach(function(e,n){fp(t.remoteStore,n)}),t.No.ts(),t.Co=new Map,t.Do=new _l(Lu.comparator)}(n),n.$o=!1,[4,Dp(n.remoteStore,!1)];case 6:c.sent(),c.label=7;case 7:return[2]}})})}function Sg(e,t,n){return(0,Ur.__awaiter)(this,void 0,void 0,function(){var n,r,i,o,s,a,u,c,l,h,f,d,p;return(0,Ur.__generator)(this,function(g){switch(g.label){case 0:n=uu(e),r=[],i=[],o=0,s=t,g.label=1;case 1:return o<s.length?(u=void 0,(c=n.Vo.get(a=s[o]))&&0!==c.length?[4,_d(n.localStore,Ac(c[0]))]:[3,7]):[3,13];case 2:u=g.sent(),l=0,h=c,g.label=3;case 3:return l<h.length?(f=n.Po.get(h[l]),[4,Eg(n,f)]):[3,6];case 4:(d=g.sent()).snapshot&&i.push(d.snapshot),g.label=5;case 5:return l++,[3,3];case 6:return[3,11];case 7:return[4,Td(n.localStore,a)];case 8:return p=g.sent(),[4,_d(n.localStore,p)];case 9:return u=g.sent(),[4,ig(n,Ag(p),a,!1)];case 10:g.sent(),g.label=11;case 11:r.push(u),g.label=12;case 12:return o++,[3,1];case 13:return[2,(n.vo._r(i),r)]}})})}function Ag(e){return bc(e.path,e.collectionGroup,e.orderBy,e.filters,e.limit,"F",e.startAt,e.endAt)}function xg(e){var t=uu(e);return uu(uu(t.localStore).persistence).fn()}function Ng(e,t,n,r){return(0,Ur.__awaiter)(this,void 0,void 0,function(){var i,o,s;return(0,Ur.__generator)(this,function(a){switch(a.label){case 0:return(i=uu(e)).$o?(nu("SyncEngine","Ignoring unexpected query state notification."),[3,8]):[3,1];case 1:if(!i.Vo.has(t))return[3,8];switch(n){case"current":case"not-current":return[3,2];case"rejected":return[3,5]}return[3,7];case 2:return[4,Ed(i.localStore)];case 3:return o=a.sent(),s=Rl.createSynthesizedRemoteEventForCurrentChange(t,"current"===n),[4,bg(i,o,s)];case 4:return a.sent(),[3,8];case 5:return[4,bd(i.localStore,t,!0)];case 6:return a.sent(),gg(i,t,r),[3,8];case 7:su(),a.label=8;case 8:return[2]}})})}function Dg(e,t,n){return(0,Ur.__awaiter)(this,void 0,void 0,function(){var r,i,o,s,a,u,c,l,h;return(0,Ur.__generator)(this,function(f){switch(f.label){case 0:if(!(r=Pg(e)).$o)return[3,10];i=0,o=t,f.label=1;case 1:return i<o.length?r.Vo.has(s=o[i])?(nu("SyncEngine","Adding an already active target "+s),[3,5]):[4,Td(r.localStore,s)]:[3,6];case 2:return a=f.sent(),[4,_d(r.localStore,a)];case 3:return u=f.sent(),[4,ig(r,Ag(a),u.targetId,!1)];case 4:f.sent(),hp(r.remoteStore,u),f.label=5;case 5:return i++,[3,1];case 6:c=function(e){return(0,Ur.__generator)(this,function(t){switch(t.label){case 0:return r.Vo.has(e)?[4,bd(r.localStore,e,!1).then(function(){fp(r.remoteStore,e),gg(r,e)}).catch(Uf)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})},l=0,h=n,f.label=7;case 7:return l<h.length?[5,c(h[l])]:[3,10];case 8:f.sent(),f.label=9;case 9:return l++,[3,7];case 10:return[2]}})})}function Pg(e){var t=uu(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=ag.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=Tg.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=cg.bind(null,t),t.vo._r=Hp.bind(null,t.eventManager),t.vo.Mo=Wp.bind(null,t.eventManager),t}function Og(e){var t=uu(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=lg.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=hg.bind(null,t),t}function Rg(e,t,n){var r=uu(e);(function(e,t,n){return(0,Ur.__awaiter)(this,void 0,void 0,function(){var r,i,o,s,a,u;return(0,Ur.__generator)(this,function(c){switch(c.label){case 0:return c.trys.push([0,14,,15]),[4,t.getMetadata()];case 1:return r=c.sent(),[4,function(e,t){var n=uu(e),r=$l(t.createTime);return n.persistence.runTransaction("hasNewerBundle","readonly",function(e){return n.Ke.getBundleMetadata(e,t.id)}).then(function(e){return!!e&&e.createTime.compareTo(r)>=0})}(e.localStore,r)];case 2:return c.sent()?[4,t.close()]:[3,4];case 3:return[2,(c.sent(),void n._completeWith(function(e){return{taskState:"Success",documentsLoaded:e.totalDocuments,bytesLoaded:e.totalBytes,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}(r)))];case 4:return n._updateProgress(Yp(r)),i=new $p(r,e.localStore,t.R),[4,t.Lo()];case 5:o=c.sent(),c.label=6;case 6:return o?[4,i.oo(o)]:[3,10];case 7:return(s=c.sent())&&n._updateProgress(s),[4,t.Lo()];case 8:o=c.sent(),c.label=9;case 9:return[3,6];case 10:return[4,i.complete()];case 11:return a=c.sent(),[4,bg(e,a.wn,void 0)];case 12:return c.sent(),[4,function(e,t){var n=uu(e);return n.persistence.runTransaction("Save bundle","readwrite",function(e){return n.Ke.saveBundleMetadata(e,t)})}(e.localStore,r)];case 13:return c.sent(),n._completeWith(a.progress),[3,15];case 14:return iu("SyncEngine","Loading bundle failed with "+(u=c.sent())),n._failWith(u),[3,15];case 15:return[2]}})})})(r,t,n).then(function(){r.sharedClientState.notifyBundleLoaded()})}var Lg=function(){function e(){this.synchronizeTabs=!1}return e.prototype.initialize=function(e){return(0,Ur.__awaiter)(this,void 0,void 0,function(){return(0,Ur.__generator)(this,function(t){switch(t.label){case 0:return this.R=tp(e.databaseInfo.databaseId),this.sharedClientState=this.Bo(e),this.persistence=this.qo(e),[4,this.persistence.start()];case 1:return t.sent(),this.gcScheduler=this.Uo(e),this.localStore=this.Ko(e),[2]}})})},e.prototype.Uo=function(e){return null},e.prototype.Ko=function(e){return fd(this.persistence,new ld,e.initialUser,this.R)},e.prototype.qo=function(e){return new Rd(Md.bs,this.R)},e.prototype.Bo=function(e){return new Gd},e.prototype.terminate=function(){return(0,Ur.__awaiter)(this,void 0,void 0,function(){return(0,Ur.__generator)(this,function(e){switch(e.label){case 0:return this.gcScheduler&&this.gcScheduler.stop(),[4,this.sharedClientState.shutdown()];case 1:return e.sent(),[4,this.persistence.shutdown()];case 2:return e.sent(),[2]}})})},e}(),Mg=function(e){function t(t,n,r){var i=this;return(i=e.call(this)||this).Qo=t,i.cacheSizeBytes=n,i.forceOwnership=r,i.synchronizeTabs=!1,i}return(0,Ur.__extends)(t,e),t.prototype.initialize=function(t){return(0,Ur.__awaiter)(this,void 0,void 0,function(){return(0,Ur.__generator)(this,function(n){switch(n.label){case 0:return[4,e.prototype.initialize.call(this,t)];case 1:return n.sent(),[4,Id(this.localStore)];case 2:return n.sent(),[4,this.Qo.initialize(this,t)];case 3:return n.sent(),[4,Og(this.Qo.syncEngine)];case 4:return n.sent(),[4,Ip(this.Qo.remoteStore)];case 5:return n.sent(),[2]}})})},t.prototype.Ko=function(e){return fd(this.persistence,new ld,e.initialUser,this.R)},t.prototype.Uo=function(e){return new Hf(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue)},t.prototype.qo=function(e){var t=sd(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?Sf.withCacheSize(this.cacheSizeBytes):Sf.DEFAULT;return new rd(this.synchronizeTabs,t,e.clientId,n,e.asyncQueue,Jd(),ep(),this.R,this.sharedClientState,!!this.forceOwnership)},t.prototype.Bo=function(e){return new Gd},t}(Lg),Fg=function(e){function t(t,n){var r=this;return(r=e.call(this,t,n,!1)||this).Qo=t,r.cacheSizeBytes=n,r.synchronizeTabs=!0,r}return(0,Ur.__extends)(t,e),t.prototype.initialize=function(t){return(0,Ur.__awaiter)(this,void 0,void 0,function(){var n,r=this;return(0,Ur.__generator)(this,function(i){switch(i.label){case 0:return[4,e.prototype.initialize.call(this,t)];case 1:return i.sent(),n=this.Qo.syncEngine,this.sharedClientState instanceof zd?(this.sharedClientState.syncEngine={ui:kg.bind(null,n),ai:Ng.bind(null,n),hi:Dg.bind(null,n),fn:xg.bind(null,n),ci:Ig.bind(null,n)},[4,this.sharedClientState.start()]):[3,3];case 2:i.sent(),i.label=3;case 3:return[4,this.persistence.He(function(e){return(0,Ur.__awaiter)(r,void 0,void 0,function(){return(0,Ur.__generator)(this,function(t){switch(t.label){case 0:return[4,Cg(this.Qo.syncEngine,e)];case 1:return t.sent(),this.gcScheduler&&(e&&!this.gcScheduler.started?this.gcScheduler.start(this.localStore):e||this.gcScheduler.stop()),[2]}})})})];case 4:return i.sent(),[2]}})})},t.prototype.Bo=function(e){var t=Jd();if(!zd.yt(t))throw new Ja(Za.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=sd(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new zd(t,e.asyncQueue,n,e.clientId,e.initialUser)},t}(Mg),jg=function(){function e(){}return e.prototype.initialize=function(e,t){return(0,Ur.__awaiter)(this,void 0,void 0,function(){var n=this;return(0,Ur.__generator)(this,function(r){switch(r.label){case 0:return this.localStore?[3,2]:(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=function(e){return ug(n.syncEngine,e,1)},this.remoteStore.remoteSyncer.handleCredentialChange=wg.bind(null,this.syncEngine),[4,Dp(this.remoteStore,this.syncEngine.isPrimaryClient)]);case 1:r.sent(),r.label=2;case 2:return[2]}})})},e.prototype.createEventManager=function(e){return new Up},e.prototype.createDatastore=function(e){var t=tp(e.databaseInfo.databaseId),n=new Zd(e.databaseInfo);return function(e,t,n){return new sp(e,t,n)}(e.credentials,n,t)},e.prototype.createRemoteStore=function(e){var t,n,r,i,o,s=this;return t=this.localStore,n=this.datastore,r=e.asyncQueue,i=function(e){return ug(s.syncEngine,e,0)},o=$d.yt()?new $d:new Qd,new up(t,n,r,i,o)},e.prototype.createSyncEngine=function(e,t){return function(e,t,n,r,i,o,s){var a=new ng(e,t,n,r,i,o);return s&&(a.$o=!0),a}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)},e.prototype.terminate=function(){return function(e){return(0,Ur.__awaiter)(this,void 0,void 0,function(){var t;return(0,Ur.__generator)(this,function(n){switch(n.label){case 0:return t=uu(e),nu("RemoteStore","RemoteStore shutting down."),t.Or.add(5),[4,lp(t)];case 1:return n.sent(),t.Lr.shutdown(),t.Br.set("Unknown"),[2]}})})}(this.remoteStore)},e}();function qg(e,t){void 0===t&&(t=10240);var n=0;return{read:function(){return(0,Ur.__awaiter)(this,void 0,void 0,function(){var r;return(0,Ur.__generator)(this,function(i){return n<e.byteLength?(r={value:e.slice(n,n+t),done:!1},[2,(n+=t,r)]):[2,{done:!0}]})})},cancel:function(){return(0,Ur.__awaiter)(this,void 0,void 0,function(){return(0,Ur.__generator)(this,function(e){return[2]})})},releaseLock:function(){},closed:Promise.reject("unimplemented")}}var Ug=function(){function e(e){this.observer=e,this.muted=!1}return e.prototype.next=function(e){this.observer.next&&this.jo(this.observer.next,e)},e.prototype.error=function(e){this.observer.error?this.jo(this.observer.error,e):console.error("Uncaught Error in snapshot listener:",e)},e.prototype.Wo=function(){this.muted=!0},e.prototype.jo=function(e,t){var n=this;this.muted||setTimeout(function(){n.muted||e(t)},0)},e}(),Vg=function(){function e(e,t){var n=this;this.Go=e,this.R=t,this.metadata=new Kh,this.buffer=new Uint8Array,this.zo=new TextDecoder("utf-8"),this.Ho().then(function(e){e&&e.io()?n.metadata.resolve(e.payload.metadata):n.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             "+JSON.stringify(null==e?void 0:e.payload)))},function(e){return n.metadata.reject(e)})}return e.prototype.close=function(){return this.Go.cancel()},e.prototype.getMetadata=function(){return(0,Ur.__awaiter)(this,void 0,void 0,function(){return(0,Ur.__generator)(this,function(e){return[2,this.metadata.promise]})})},e.prototype.Lo=function(){return(0,Ur.__awaiter)(this,void 0,void 0,function(){return(0,Ur.__generator)(this,function(e){switch(e.label){case 0:return[4,this.getMetadata()];case 1:return[2,(e.sent(),this.Ho())]}})})},e.prototype.Ho=function(){return(0,Ur.__awaiter)(this,void 0,void 0,function(){var e,t,n,r;return(0,Ur.__generator)(this,function(i){switch(i.label){case 0:return[4,this.Jo()];case 1:return null===(e=i.sent())?[2,null]:(t=this.zo.decode(e),n=Number(t),isNaN(n)&&this.Yo("length string ("+t+") is not valid number"),[4,this.Xo(n)]);case 2:return r=i.sent(),[2,new Gp(JSON.parse(r),e.length+n)]}})})},e.prototype.Zo=function(){return this.buffer.findIndex(function(e){return e==="{".charCodeAt(0)})},e.prototype.Jo=function(){return(0,Ur.__awaiter)(this,void 0,void 0,function(){var e,t;return(0,Ur.__generator)(this,function(n){switch(n.label){case 0:return this.Zo()<0?[4,this.tc()]:[3,3];case 1:if(n.sent())return[3,3];n.label=2;case 2:return[3,0];case 3:return 0===this.buffer.length?[2,null]:((e=this.Zo())<0&&this.Yo("Reached the end of bundle when a length string is expected."),t=this.buffer.slice(0,e),[2,(this.buffer=this.buffer.slice(e),t)])}})})},e.prototype.Xo=function(e){return(0,Ur.__awaiter)(this,void 0,void 0,function(){var t;return(0,Ur.__generator)(this,function(n){switch(n.label){case 0:return this.buffer.length<e?[4,this.tc()]:[3,3];case 1:n.sent()&&this.Yo("Reached the end of bundle when more is expected."),n.label=2;case 2:return[3,0];case 3:return t=this.zo.decode(this.buffer.slice(0,e)),[2,(this.buffer=this.buffer.slice(e),t)]}})})},e.prototype.Yo=function(e){throw this.Go.cancel(),new Error("Invalid bundle format: "+e)},e.prototype.tc=function(){return(0,Ur.__awaiter)(this,void 0,void 0,function(){var e,t;return(0,Ur.__generator)(this,function(n){switch(n.label){case 0:return[4,this.Go.read()];case 1:return(e=n.sent()).done||((t=new Uint8Array(this.buffer.length+e.value.length)).set(this.buffer),t.set(e.value,this.buffer.length),this.buffer=t),[2,e.done]}})})},e}(),Bg=function(){function e(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}return e.prototype.lookup=function(e){return(0,Ur.__awaiter)(this,void 0,void 0,function(){var t,n=this;return(0,Ur.__generator)(this,function(r){switch(r.label){case 0:if(this.ensureCommitNotCalled(),this.mutations.length>0)throw new Ja(Za.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");return[4,function(e,t){return(0,Ur.__awaiter)(this,void 0,void 0,function(){var n,r,i,o,s,a;return(0,Ur.__generator)(this,function(u){switch(u.label){case 0:return n=uu(e),r=nh(n.R)+"/documents",i={documents:t.map(function(e){return Zl(n.R,e)})},[4,n.$i("BatchGetDocuments",r,i)];case 1:return o=u.sent(),s=new Map,o.forEach(function(e){var t=function(e,t){return"found"in t?function(e,t){au(!!t.found);var n=Jl(e,t.found.name),r=$l(t.found.updateTime),i=new Yu({mapValue:{fields:t.found.fields}});return Zu.newFoundDocument(n,r,i)}(e,t):"missing"in t?function(e,t){au(!!t.missing),au(!!t.readTime);var n=Jl(e,t.missing),r=$l(t.readTime);return Zu.newNoDocument(n,r)}(e,t):su()}(n.R,e);s.set(t.key.toString(),t)}),a=[],[2,(t.forEach(function(e){var t=s.get(e.toString());au(!!t),a.push(t)}),a)]}})})}(this.datastore,e)];case 1:return[2,((t=r.sent()).forEach(function(e){return n.recordVersion(e)}),t)]}})})},e.prototype.set=function(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())},e.prototype.update=function(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(e){this.lastWriteError=e}this.writtenDocs.add(e.toString())},e.prototype.delete=function(e){this.write(new pl(e,this.precondition(e))),this.writtenDocs.add(e.toString())},e.prototype.commit=function(){return(0,Ur.__awaiter)(this,void 0,void 0,function(){var e,t=this;return(0,Ur.__generator)(this,function(n){switch(n.label){case 0:if(this.ensureCommitNotCalled(),this.lastWriteError)throw this.lastWriteError;return e=this.readVersions,this.mutations.forEach(function(t){e.delete(t.key.toString())}),e.forEach(function(e,n){var r=Lu.fromPath(n);t.mutations.push(new gl(r,t.precondition(r)))}),[4,function(e,t){return(0,Ur.__awaiter)(this,void 0,void 0,function(){var n,r,i;return(0,Ur.__generator)(this,function(o){switch(o.label){case 0:return n=uu(e),r=nh(n.R)+"/documents",i={writes:t.map(function(e){return sh(n.R,e)})},[4,n.Ni("Commit",r,i)];case 1:return o.sent(),[2]}})})}(this.datastore,this.mutations)];case 1:return n.sent(),this.committed=!0,[2]}})})},e.prototype.recordVersion=function(e){var t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw su();t=gu.min()}var n=this.readVersions.get(e.key.toString());if(n){if(!t.isEqual(n))throw new Ja(Za.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)},e.prototype.precondition=function(e){var t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?Jc.updateTime(t):Jc.none()},e.prototype.preconditionForUpdate=function(e){var t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(gu.min()))throw new Ja(Za.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Jc.updateTime(t)}return Jc.exists(!0)},e.prototype.write=function(e){this.ensureCommitNotCalled(),this.mutations.push(e)},e.prototype.ensureCommitNotCalled=function(){},e}(),Hg=function(){function e(e,t,n,r){this.asyncQueue=e,this.datastore=t,this.updateFunction=n,this.deferred=r,this.ec=5,this.Zi=new np(this.asyncQueue,"transaction_retry")}return e.prototype.run=function(){this.ec-=1,this.nc()},e.prototype.nc=function(){var e=this;this.Zi.ji(function(){return(0,Ur.__awaiter)(e,void 0,void 0,function(){var e,t,n=this;return(0,Ur.__generator)(this,function(r){return e=new Bg(this.datastore),(t=this.sc(e))&&t.then(function(t){n.asyncQueue.enqueueAndForget(function(){return e.commit().then(function(){n.deferred.resolve(t)}).catch(function(e){n.ic(e)})})}).catch(function(e){n.ic(e)}),[2]})})})},e.prototype.sc=function(e){try{var t=this.updateFunction(e);return!Pu(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(e){return this.deferred.reject(e),null}},e.prototype.ic=function(e){var t=this;this.ec>0&&this.rc(e)?(this.ec-=1,this.asyncQueue.enqueueAndForget(function(){return t.nc(),Promise.resolve()})):this.deferred.reject(e)},e.prototype.rc=function(e){if("FirebaseError"===e.name){var t=e.code;return"aborted"===t||"failed-precondition"===t||!ml(t)}return!1},e}(),Wg=function(){function e(e,t,n){var r=this;this.credentials=e,this.asyncQueue=t,this.databaseInfo=n,this.user=Fd.UNAUTHENTICATED,this.clientId=lu.u(),this.credentialListener=function(){return Promise.resolve()},this.credentials.setChangeListener(t,function(e){return(0,Ur.__awaiter)(r,void 0,void 0,function(){return(0,Ur.__generator)(this,function(t){switch(t.label){case 0:return nu("FirestoreClient","Received user=",e.uid),[4,this.credentialListener(e)];case 1:return t.sent(),this.user=e,[2]}})})})}return e.prototype.getConfiguration=function(){return(0,Ur.__awaiter)(this,void 0,void 0,function(){return(0,Ur.__generator)(this,function(e){return[2,{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,credentials:this.credentials,initialUser:this.user,maxConcurrentLimboResolutions:100}]})})},e.prototype.setCredentialChangeListener=function(e){this.credentialListener=e},e.prototype.verifyNotTerminated=function(){if(this.asyncQueue.isShuttingDown)throw new Ja(Za.FAILED_PRECONDITION,"The client has already been terminated.")},e.prototype.terminate=function(){var e=this;this.asyncQueue.enterRestrictedMode();var t=new Kh;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(function(){return(0,Ur.__awaiter)(e,void 0,void 0,function(){var e,n;return(0,Ur.__generator)(this,function(r){switch(r.label){case 0:return r.trys.push([0,5,,6]),this.onlineComponents?[4,this.onlineComponents.terminate()]:[3,2];case 1:r.sent(),r.label=2;case 2:return this.offlineComponents?[4,this.offlineComponents.terminate()]:[3,4];case 3:r.sent(),r.label=4;case 4:return this.credentials.removeChangeListener(),t.resolve(),[3,6];case 5:return e=r.sent(),n=Lp(e,"Failed to shutdown persistence"),t.reject(n),[3,6];case 6:return[2]}})})}),t.promise},e}();function Kg(e,t){return(0,Ur.__awaiter)(this,void 0,void 0,function(){var n,r,i=this;return(0,Ur.__generator)(this,function(o){switch(o.label){case 0:return e.asyncQueue.verifyOperationInProgress(),nu("FirestoreClient","Initializing OfflineComponentProvider"),[4,e.getConfiguration()];case 1:return n=o.sent(),[4,t.initialize(n)];case 2:return o.sent(),r=n.initialUser,e.setCredentialChangeListener(function(e){return(0,Ur.__awaiter)(i,void 0,void 0,function(){return(0,Ur.__generator)(this,function(n){switch(n.label){case 0:return r.isEqual(e)?[3,2]:[4,dd(t.localStore,e)];case 1:n.sent(),r=e,n.label=2;case 2:return[2]}})})}),t.persistence.setDatabaseDeletedListener(function(){return e.terminate()}),e.offlineComponents=t,[2]}})})}function zg(e,t){return(0,Ur.__awaiter)(this,void 0,void 0,function(){var n,r;return(0,Ur.__generator)(this,function(i){switch(i.label){case 0:return e.asyncQueue.verifyOperationInProgress(),[4,Gg(e)];case 1:return n=i.sent(),nu("FirestoreClient","Initializing OnlineComponentProvider"),[4,e.getConfiguration()];case 2:return r=i.sent(),[4,t.initialize(n,r)];case 3:return i.sent(),e.setCredentialChangeListener(function(e){return function(e,t){return(0,Ur.__awaiter)(this,void 0,void 0,function(){var n,r;return(0,Ur.__generator)(this,function(i){switch(i.label){case 0:return(n=uu(e)).asyncQueue.verifyOperationInProgress(),nu("RemoteStore","RemoteStore received new credentials"),r=mp(n),n.Or.add(3),[4,lp(n)];case 1:return i.sent(),r&&n.Br.set("Unknown"),[4,n.remoteSyncer.handleCredentialChange(t)];case 2:return i.sent(),n.Or.delete(3),[4,cp(n)];case 3:return i.sent(),[2]}})})}(t.remoteStore,e)}),e.onlineComponents=t,[2]}})})}function Gg(e){return(0,Ur.__awaiter)(this,void 0,void 0,function(){return(0,Ur.__generator)(this,function(t){switch(t.label){case 0:return e.offlineComponents?[3,2]:(nu("FirestoreClient","Using default OfflineComponentProvider"),[4,Kg(e,new Lg)]);case 1:t.sent(),t.label=2;case 2:return[2,e.offlineComponents]}})})}function Qg(e){return(0,Ur.__awaiter)(this,void 0,void 0,function(){return(0,Ur.__generator)(this,function(t){switch(t.label){case 0:return e.onlineComponents?[3,2]:(nu("FirestoreClient","Using default OnlineComponentProvider"),[4,zg(e,new jg)]);case 1:t.sent(),t.label=2;case 2:return[2,e.onlineComponents]}})})}function $g(e){return Gg(e).then(function(e){return e.persistence})}function Yg(e){return Gg(e).then(function(e){return e.localStore})}function Xg(e){return Qg(e).then(function(e){return e.remoteStore})}function Zg(e){return Qg(e).then(function(e){return e.syncEngine})}function Jg(e){return(0,Ur.__awaiter)(this,void 0,void 0,function(){var t,n;return(0,Ur.__generator)(this,function(r){switch(r.label){case 0:return[4,Qg(e)];case 1:return t=r.sent(),[2,((n=t.eventManager).onListen=rg.bind(null,t.syncEngine),n.onUnlisten=og.bind(null,t.syncEngine),n)]}})})}function ev(e,t,n){var r=this;void 0===n&&(n={});var i=new Kh;return e.asyncQueue.enqueueAndForget(function(){return(0,Ur.__awaiter)(r,void 0,void 0,function(){var r;return(0,Ur.__generator)(this,function(o){switch(o.label){case 0:return r=function(e,t,n,r,i){var o=new Ug({next:function(o){t.enqueueAndForget(function(){return Bp(e,s)});var a=o.docs.has(n);!a&&o.fromCache?i.reject(new Ja(Za.UNAVAILABLE,"Failed to get document because the client is offline.")):a&&o.fromCache&&r&&"server"===r.source?i.reject(new Ja(Za.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(o)},error:function(e){return i.reject(e)}}),s=new zp(wc(n.path),o,{includeMetadataChanges:!0,so:!0});return Vp(e,s)},[4,Jg(e)];case 1:return[2,r.apply(void 0,[o.sent(),e.asyncQueue,t,n,i])]}})})}),i.promise}function tv(e,t,n){var r=this;void 0===n&&(n={});var i=new Kh;return e.asyncQueue.enqueueAndForget(function(){return(0,Ur.__awaiter)(r,void 0,void 0,function(){var r;return(0,Ur.__generator)(this,function(o){switch(o.label){case 0:return r=function(e,t,n,r,i){var o=new Ug({next:function(n){t.enqueueAndForget(function(){return Bp(e,s)}),n.fromCache&&"server"===r.source?i.reject(new Ja(Za.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:function(e){return i.reject(e)}}),s=new zp(n,o,{includeMetadataChanges:!0,so:!0});return Vp(e,s)},[4,Jg(e)];case 1:return[2,r.apply(void 0,[o.sent(),e.asyncQueue,t,n,i])]}})})}),i.promise}var nv=function(e,t,n,r,i,o,s,a){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=s,this.useFetchStreams=a},rv=function(){function e(e,t){this.projectId=e,this.database=t||"(default)"}return Object.defineProperty(e.prototype,"isDefaultDatabase",{get:function(){return"(default)"===this.database},enumerable:!1,configurable:!0}),e.prototype.isEqual=function(t){return t instanceof e&&t.projectId===this.projectId&&t.database===this.database},e}(),iv=new Map,ov=function(e,t){this.user=t,this.type="OAuth",this.authHeaders={},this.authHeaders.Authorization="Bearer "+e},sv=function(){function e(){this.changeListener=null}return e.prototype.getToken=function(){return Promise.resolve(null)},e.prototype.invalidateToken=function(){},e.prototype.setChangeListener=function(e,t){this.changeListener=t,e.enqueueRetryable(function(){return t(Fd.UNAUTHENTICATED)})},e.prototype.removeChangeListener=function(){this.changeListener=null},e}(),av=function(){function e(e){this.token=e,this.changeListener=null}return e.prototype.getToken=function(){return Promise.resolve(this.token)},e.prototype.invalidateToken=function(){},e.prototype.setChangeListener=function(e,t){var n=this;this.changeListener=t,e.enqueueRetryable(function(){return t(n.token.user)})},e.prototype.removeChangeListener=function(){this.changeListener=null},e}(),uv=function(){function e(e){var t=this;this.currentUser=Fd.UNAUTHENTICATED,this.oc=new Kh,this.cc=0,this.forceRefresh=!1,this.auth=null,this.asyncQueue=null,this.uc=function(){t.cc++,t.currentUser=t.ac(),t.oc.resolve(),t.changeListener&&t.asyncQueue.enqueueRetryable(function(){return t.changeListener(t.currentUser)})};var n=function(e){nu("FirebaseCredentialsProvider","Auth detected"),t.auth=e,t.auth.addAuthTokenListener(t.uc)};e.onInit(function(e){return n(e)}),setTimeout(function(){if(!t.auth){var r=e.getImmediate({optional:!0});r?n(r):(nu("FirebaseCredentialsProvider","Auth not yet detected"),t.oc.resolve())}},0)}return e.prototype.getToken=function(){var e=this,t=this.cc,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(function(n){return e.cc!==t?(nu("FirebaseCredentialsProvider","getToken aborted due to token change."),e.getToken()):n?(au("string"==typeof n.accessToken),new ov(n.accessToken,e.currentUser)):null}):Promise.resolve(null)},e.prototype.invalidateToken=function(){this.forceRefresh=!0},e.prototype.setChangeListener=function(e,t){var n=this;this.asyncQueue=e,this.asyncQueue.enqueueRetryable(function(){return(0,Ur.__awaiter)(n,void 0,void 0,function(){return(0,Ur.__generator)(this,function(e){switch(e.label){case 0:return[4,this.oc.promise];case 1:return e.sent(),[4,t(this.currentUser)];case 2:return e.sent(),this.changeListener=t,[2]}})})})},e.prototype.removeChangeListener=function(){this.auth&&this.auth.removeAuthTokenListener(this.uc),this.changeListener=function(){return Promise.resolve()}},e.prototype.ac=function(){var e=this.auth&&this.auth.getUid();return au(null===e||"string"==typeof e),new Fd(e)},e}(),cv=function(){function e(e,t,n){this.hc=e,this.lc=t,this.fc=n,this.type="FirstParty",this.user=Fd.FIRST_PARTY}return Object.defineProperty(e.prototype,"authHeaders",{get:function(){var e={"X-Goog-AuthUser":this.lc},t=this.hc.auth.getAuthHeaderValueForFirstParty([]);return t&&(e.Authorization=t),this.fc&&(e["X-Goog-Iam-Authorization-Token"]=this.fc),e},enumerable:!1,configurable:!0}),e}(),lv=function(){function e(e,t,n){this.hc=e,this.lc=t,this.fc=n}return e.prototype.getToken=function(){return Promise.resolve(new cv(this.hc,this.lc,this.fc))},e.prototype.setChangeListener=function(e,t){e.enqueueRetryable(function(){return t(Fd.FIRST_PARTY)})},e.prototype.removeChangeListener=function(){},e.prototype.invalidateToken=function(){},e}();function hv(e,t,n){if(!n)throw new Ja(Za.INVALID_ARGUMENT,"Function "+e+"() cannot be called with an empty "+t+".")}function fv(e,t){if(void 0===t)return{merge:!1};if(void 0!==t.mergeFields&&void 0!==t.merge)throw new Ja(Za.INVALID_ARGUMENT,"Invalid options passed to function "+e+'(): You cannot specify both "merge" and "mergeFields".');return t}function dv(e,t,n,r){if(!0===t&&!0===r)throw new Ja(Za.INVALID_ARGUMENT,e+" and "+n+" cannot be used together.")}function pv(e){if(!Lu.isDocumentKey(e))throw new Ja(Za.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+e+" has "+e.length+".")}function gv(e){if(Lu.isDocumentKey(e))throw new Ja(Za.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but "+e+" has "+e.length+".")}function vv(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e=e.substring(0,20)+"..."),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";var t=function(e){if(e.constructor){var t=/function\s+([^\s(]+)\s*\(/.exec(e.constructor.toString());if(t&&t.length>1)return t[1]}return null}(e);return t?"a custom "+t+" object":"an object"}return"function"==typeof e?"a function":su()}function mv(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new Ja(Za.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=vv(e);throw new Ja(Za.INVALID_ARGUMENT,"Expected type '"+t.name+"', but it was: "+n)}return e}function yv(e,t){if(t<=0)throw new Ja(Za.INVALID_ARGUMENT,"Function "+e+"() requires a positive number, but it was: "+t+".")}var _v=function(){function e(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new Ja(Za.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Ja(Za.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,dv("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}return e.prototype.isEqual=function(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams},e}(),bv=function(){function e(e,t){this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new _v({}),this._settingsFrozen=!1,e instanceof rv?(this._databaseId=e,this._credentials=new sv):(this._app=e,this._databaseId=function(e){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new Ja(Za.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new rv(e.options.projectId)}(e),this._credentials=new uv(t))}return Object.defineProperty(e.prototype,"app",{get:function(){if(!this._app)throw new Ja(Za.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"_initialized",{get:function(){return this._settingsFrozen},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"_terminated",{get:function(){return void 0!==this._terminateTask},enumerable:!1,configurable:!0}),e.prototype._setSettings=function(e){if(this._settingsFrozen)throw new Ja(Za.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new _v(e),void 0!==e.credentials&&(this._credentials=function(e){if(!e)return new sv;switch(e.type){case"gapi":var t=e.client;return au(!("object"!=typeof t||null===t||!t.auth||!t.auth.getAuthHeaderValueForFirstParty)),new lv(t,e.sessionIndex||"0",e.iamToken||null);case"provider":return e.client;default:throw new Ja(Za.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}(e.credentials))},e.prototype._getSettings=function(){return this._settings},e.prototype._freezeSettings=function(){return this._settingsFrozen=!0,this._settings},e.prototype._delete=function(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask},e.prototype.toJSON=function(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}},e.prototype._terminate=function(){return(e=iv.get(this))&&(nu("ComponentProvider","Removing Datastore"),iv.delete(this),e.terminate()),Promise.resolve();var e},e}(),wv=function(){function e(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}return Object.defineProperty(e.prototype,"_path",{get:function(){return this._key.path},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._key.path.canonicalString()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){return new Ev(this.firestore,this.converter,this._key.path.popLast())},enumerable:!1,configurable:!0}),e.prototype.withConverter=function(t){return new e(this.firestore,t,this._key)},e}(),Tv=function(){function e(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}return e.prototype.withConverter=function(t){return new e(this.firestore,t,this._query)},e}(),Ev=function(e){function t(t,n,r){var i=this;return(i=e.call(this,t,n,wc(r))||this)._path=r,i.type="collection",i}return(0,Ur.__extends)(t,e),Object.defineProperty(t.prototype,"id",{get:function(){return this._query.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this._query.path.canonicalString()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){var e=this._path.popLast();return e.isEmpty()?null:new wv(this.firestore,null,new Lu(e))},enumerable:!1,configurable:!0}),t.prototype.withConverter=function(e){return new t(this.firestore,e,this._path)},t}(Tv);function Iv(e,t){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(e=(0,Vr.getModularInstance)(e),hv("collection","path",t),e instanceof bv)return gv(n=bu.fromString.apply(bu,(0,Ur.__spreadArray)([t],r))),new Ev(e,null,n);if(!(e instanceof wv||e instanceof Ev))throw new Ja(Za.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return gv(n=bu.fromString.apply(bu,(0,Ur.__spreadArray)([e.path],r)).child(bu.fromString(t))),new Ev(e.firestore,null,n)}function kv(e,t){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(e=(0,Vr.getModularInstance)(e),1===arguments.length&&(t=lu.u()),hv("doc","path",t),e instanceof bv)return pv(n=bu.fromString.apply(bu,(0,Ur.__spreadArray)([t],r))),new wv(e,null,new Lu(n));if(!(e instanceof wv||e instanceof Ev))throw new Ja(Za.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return pv(n=e._path.child(bu.fromString.apply(bu,(0,Ur.__spreadArray)([t],r)))),new wv(e.firestore,e instanceof Ev?e.converter:null,new Lu(n))}function Cv(e,t){return e=(0,Vr.getModularInstance)(e),t=(0,Vr.getModularInstance)(t),(e instanceof wv||e instanceof Ev)&&(t instanceof wv||t instanceof Ev)&&e.firestore===t.firestore&&e.path===t.path&&e.converter===t.converter}function Sv(e,t){return e=(0,Vr.getModularInstance)(e),t=(0,Vr.getModularInstance)(t),e instanceof Tv&&t instanceof Tv&&e.firestore===t.firestore&&Nc(e._query,t._query)&&e.converter===t.converter}var Av=function(){function e(){var e=this;this.dc=Promise.resolve(),this.wc=[],this._c=!1,this.mc=[],this.yc=null,this.gc=!1,this.Ec=!1,this.Tc=[],this.Zi=new np(this,"async_queue_retry"),this.Ic=function(){var t=ep();t&&nu("AsyncQueue","Visibility state changed to "+t.visibilityState),e.Zi.Gi()};var t=ep();t&&"function"==typeof t.addEventListener&&t.addEventListener("visibilitychange",this.Ic)}return Object.defineProperty(e.prototype,"isShuttingDown",{get:function(){return this._c},enumerable:!1,configurable:!0}),e.prototype.enqueueAndForget=function(e){this.enqueue(e)},e.prototype.enqueueAndForgetEvenWhileRestricted=function(e){this.Ac(),this.Rc(e)},e.prototype.enterRestrictedMode=function(e){if(!this._c){this._c=!0,this.Ec=e||!1;var t=ep();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Ic)}},e.prototype.enqueue=function(e){var t=this;if(this.Ac(),this._c)return new Promise(function(){});var n=new Kh;return this.Rc(function(){return t._c&&t.Ec?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)}).then(function(){return n.promise})},e.prototype.enqueueRetryable=function(e){var t=this;this.enqueueAndForget(function(){return t.wc.push(e),t.bc()})},e.prototype.bc=function(){return(0,Ur.__awaiter)(this,void 0,void 0,function(){var e,t=this;return(0,Ur.__generator)(this,function(n){switch(n.label){case 0:if(0===this.wc.length)return[3,5];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this.wc[0]()];case 2:return n.sent(),this.wc.shift(),this.Zi.reset(),[3,4];case 3:if(!Xh(e=n.sent()))throw e;return nu("AsyncQueue","Operation failed with retryable error: "+e),[3,4];case 4:this.wc.length>0&&this.Zi.ji(function(){return t.bc()}),n.label=5;case 5:return[2]}})})},e.prototype.Rc=function(e){var t=this,n=this.dc.then(function(){return t.gc=!0,e().catch(function(e){throw t.yc=e,t.gc=!1,ru("INTERNAL UNHANDLED ERROR: ",function(e){var t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e)),e}).then(function(e){return t.gc=!1,e})});return this.dc=n,n},e.prototype.enqueueAfterDelay=function(e,t,n){var r=this;this.Ac(),this.Tc.indexOf(e)>-1&&(t=0);var i=Rp.createAndSchedule(this,e,t,n,function(e){return r.vc(e)});return this.mc.push(i),i},e.prototype.Ac=function(){this.yc&&su()},e.prototype.verifyOperationInProgress=function(){},e.prototype.Pc=function(){return(0,Ur.__awaiter)(this,void 0,void 0,function(){var e;return(0,Ur.__generator)(this,function(t){switch(t.label){case 0:return[4,e=this.dc];case 1:t.sent(),t.label=2;case 2:if(e!==this.dc)return[3,0];t.label=3;case 3:return[2]}})})},e.prototype.Vc=function(e){for(var t=0,n=this.mc;t<n.length;t++)if(n[t].timerId===e)return!0;return!1},e.prototype.Sc=function(e){var t=this;return this.Pc().then(function(){t.mc.sort(function(e,t){return e.targetTimeMs-t.targetTimeMs});for(var n=0,r=t.mc;n<r.length;n++){var i=r[n];if(i.skipDelay(),"all"!==e&&i.timerId===e)break}return t.Pc()})},e.prototype.Dc=function(e){this.Tc.push(e)},e.prototype.vc=function(e){var t=this.mc.indexOf(e);this.mc.splice(t,1)},e}();function xv(e){return function(e,t){if("object"!=typeof e||null===e)return!1;for(var n=e,r=0,i=["next","error","complete"];r<i.length;r++){var o=i[r];if(o in n&&"function"==typeof n[o])return!0}return!1}(e)}var Nv=function(){function e(){this._progressObserver={},this._taskCompletionResolver=new Kh,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}return e.prototype.onProgress=function(e,t,n){this._progressObserver={next:e,error:t,complete:n}},e.prototype.catch=function(e){return this._taskCompletionResolver.promise.catch(e)},e.prototype.then=function(e,t){return this._taskCompletionResolver.promise.then(e,t)},e.prototype._completeWith=function(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)},e.prototype._failWith=function(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)},e.prototype._updateProgress=function(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)},e}(),Dv=function(e){function t(t,n){var r=this;return(r=e.call(this,t,n)||this).type="firestore",r._queue=new Av,r._persistenceKey="name"in t?t.name:"[DEFAULT]",r}return(0,Ur.__extends)(t,e),t.prototype._terminate=function(){return this._firestoreClient||Ov(this),this._firestoreClient.terminate()},t}(bv);function Pv(e){return e._firestoreClient||Ov(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function Ov(e){var t,n=e._freezeSettings(),r=function(e,t,n,r){return new nv(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,r.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,n);e._firestoreClient=new Wg(e._credentials,e._queue,r)}function Rv(e,t,n){var r=this,i=new Kh;return e.asyncQueue.enqueue(function(){return(0,Ur.__awaiter)(r,void 0,void 0,function(){var r;return(0,Ur.__generator)(this,function(o){switch(o.label){case 0:return o.trys.push([0,3,,4]),[4,Kg(e,n)];case 1:return o.sent(),[4,zg(e,t)];case 2:return o.sent(),i.resolve(),[3,4];case 3:if(!function(e){return"FirebaseError"===e.name?e.code===Za.FAILED_PRECONDITION||e.code===Za.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||22===e.code||20===e.code||11===e.code}(r=o.sent()))throw r;return console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+r),i.reject(r),[3,4];case 4:return[2]}})})}).then(function(){return i.promise})}function Lv(e){if(e._initialized||e._terminated)throw new Ja(Za.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var Mv=function(){function e(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var n=0;n<e.length;++n)if(0===e[n].length)throw new Ja(Za.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Tu(e)}return e.prototype.isEqual=function(e){return this._internalPath.isEqual(e._internalPath)},e}(),Fv=function(){function e(e){this._byteString=e}return e.fromBase64String=function(t){try{return new e(Iu.fromBase64String(t))}catch(t){throw new Ja(Za.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}},e.fromUint8Array=function(t){return new e(Iu.fromUint8Array(t))},e.prototype.toBase64=function(){return this._byteString.toBase64()},e.prototype.toUint8Array=function(){return this._byteString.toUint8Array()},e.prototype.toString=function(){return"Bytes(base64: "+this.toBase64()+")"},e.prototype.isEqual=function(e){return this._byteString.isEqual(e._byteString)},e}(),jv=function(e){this._methodName=e},qv=function(){function e(e,t){if(!isFinite(e)||e<-90||e>90)throw new Ja(Za.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Ja(Za.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}return Object.defineProperty(e.prototype,"latitude",{get:function(){return this._lat},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"longitude",{get:function(){return this._long},enumerable:!1,configurable:!0}),e.prototype.isEqual=function(e){return this._lat===e._lat&&this._long===e._long},e.prototype.toJSON=function(){return{latitude:this._lat,longitude:this._long}},e.prototype._compareTo=function(e){return hu(this._lat,e._lat)||hu(this._long,e._long)},e}(),Uv=/^__.*__$/,Vv=function(){function e(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}return e.prototype.toMutation=function(e,t){return null!==this.fieldMask?new ul(e,this.data,this.fieldMask,t,this.fieldTransforms):new al(e,this.data,t,this.fieldTransforms)},e}(),Bv=function(){function e(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}return e.prototype.toMutation=function(e,t){return new ul(e,this.data,this.fieldMask,t,this.fieldTransforms)},e}();function Hv(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw su()}}var Wv=function(){function e(e,t,n,r,i,o){this.settings=e,this.databaseId=t,this.R=n,this.ignoreUndefinedProperties=r,void 0===i&&this.Cc(),this.fieldTransforms=i||[],this.fieldMask=o||[]}return Object.defineProperty(e.prototype,"path",{get:function(){return this.settings.path},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"Nc",{get:function(){return this.settings.Nc},enumerable:!1,configurable:!0}),e.prototype.xc=function(t){return new e(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.R,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)},e.prototype.Fc=function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.xc({path:n,kc:!1});return r.$c(e),r},e.prototype.Oc=function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.xc({path:n,kc:!1});return r.Cc(),r},e.prototype.Mc=function(e){return this.xc({path:void 0,kc:!0})},e.prototype.Lc=function(e){return lm(e,this.settings.methodName,this.settings.Bc||!1,this.path,this.settings.qc)},e.prototype.contains=function(e){return void 0!==this.fieldMask.find(function(t){return e.isPrefixOf(t)})||void 0!==this.fieldTransforms.find(function(t){return e.isPrefixOf(t.field)})},e.prototype.Cc=function(){if(this.path)for(var e=0;e<this.path.length;e++)this.$c(this.path.get(e))},e.prototype.$c=function(e){if(0===e.length)throw this.Lc("Document fields must not be empty");if(Hv(this.Nc)&&Uv.test(e))throw this.Lc('Document fields cannot begin and end with "__"')},e}(),Kv=function(){function e(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.R=n||tp(e)}return e.prototype.Uc=function(e,t,n,r){return void 0===r&&(r=!1),new Wv({Nc:e,methodName:t,qc:n,path:Tu.emptyPath(),kc:!1,Bc:r},this.databaseId,this.R,this.ignoreUndefinedProperties)},e}();function zv(e){var t=e._freezeSettings(),n=tp(e._databaseId);return new Kv(e._databaseId,!!t.ignoreUndefinedProperties,n)}function Gv(e,t,n,r,i,o){void 0===o&&(o={});var s=e.Uc(o.merge||o.mergeFields?2:0,t,n,i);sm("Data must be an object, but it was:",s,r);var a,u,c=im(r,s);if(o.merge)a=new Eu(s.fieldMask),u=s.fieldTransforms;else if(o.mergeFields){for(var l=[],h=0,f=o.mergeFields;h<f.length;h++){var d=am(t,f[h],n);if(!s.contains(d))throw new Ja(Za.INVALID_ARGUMENT,"Field '"+d+"' is specified in your field mask but missing from your input data.");hm(l,d)||l.push(d)}a=new Eu(l),u=s.fieldTransforms.filter(function(e){return a.covers(e.field)})}else a=null,u=s.fieldTransforms;return new Vv(new Yu(c),a,u)}var Qv=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,Ur.__extends)(t,e),t.prototype._toFieldTransform=function(e){if(2!==e.Nc)throw e.Lc(1===e.Nc?this._methodName+"() can only appear at the top level of your update data":this._methodName+"() cannot be used with set() unless you pass {merge:true}");return e.fieldMask.push(e.path),null},t.prototype.isEqual=function(e){return e instanceof t},t}(jv);function $v(e,t,n){return new Wv({Nc:3,qc:t.settings.qc,methodName:e._methodName,kc:n},t.databaseId,t.R,t.ignoreUndefinedProperties)}var Yv=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,Ur.__extends)(t,e),t.prototype._toFieldTransform=function(e){return new Xc(e.path,new Hc)},t.prototype.isEqual=function(e){return e instanceof t},t}(jv),Xv=function(e){function t(t,n){var r=this;return(r=e.call(this,t)||this).Kc=n,r}return(0,Ur.__extends)(t,e),t.prototype._toFieldTransform=function(e){var t=$v(this,e,!0),n=this.Kc.map(function(e){return rm(e,t)}),r=new Wc(n);return new Xc(e.path,r)},t.prototype.isEqual=function(e){return this===e},t}(jv),Zv=function(e){function t(t,n){var r=this;return(r=e.call(this,t)||this).Kc=n,r}return(0,Ur.__extends)(t,e),t.prototype._toFieldTransform=function(e){var t=$v(this,e,!0),n=this.Kc.map(function(e){return rm(e,t)}),r=new zc(n);return new Xc(e.path,r)},t.prototype.isEqual=function(e){return this===e},t}(jv),Jv=function(e){function t(t,n){var r=this;return(r=e.call(this,t)||this).Qc=n,r}return(0,Ur.__extends)(t,e),t.prototype._toFieldTransform=function(e){var t=new Qc(e.R,jc(e.R,this.Qc));return new Xc(e.path,t)},t.prototype.isEqual=function(e){return this===e},t}(jv);function em(e,t,n,r){var i=e.Uc(1,t,n);sm("Data must be an object, but it was:",i,r);var o=[],s=Yu.empty();mu(r,function(e,r){var a=cm(t,e,n);r=(0,Vr.getModularInstance)(r);var u=i.Oc(a);if(r instanceof Qv)o.push(a);else{var c=rm(r,u);null!=c&&(o.push(a),s.set(a,c))}});var a=new Eu(o);return new Bv(s,a,i.fieldTransforms)}function tm(e,t,n,r,i,o){var s=e.Uc(1,t,n),a=[am(t,r,n)],u=[i];if(o.length%2!=0)throw new Ja(Za.INVALID_ARGUMENT,"Function "+t+"() needs to be called with an even number of arguments that alternate between field names and values.");for(var c=0;c<o.length;c+=2)a.push(am(t,o[c])),u.push(o[c+1]);for(var l=[],h=Yu.empty(),f=a.length-1;f>=0;--f)if(!hm(l,a[f])){var d=a[f],p=u[f];p=(0,Vr.getModularInstance)(p);var g=s.Oc(d);if(p instanceof Qv)l.push(d);else{var v=rm(p,g);null!=v&&(l.push(d),h.set(d,v))}}var m=new Eu(l);return new Bv(h,m,s.fieldTransforms)}function nm(e,t,n,r){return void 0===r&&(r=!1),rm(n,e.Uc(r?4:3,t))}function rm(e,t){if(om(e=(0,Vr.getModularInstance)(e)))return sm("Unsupported field value:",t,e),im(e,t);if(e instanceof jv)return function(e,t){if(!Hv(t.Nc))throw t.Lc(e._methodName+"() can only be used with update() and set()");if(!t.path)throw t.Lc(e._methodName+"() is not currently supported inside arrays");var n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.kc&&4!==t.Nc)throw t.Lc("Nested arrays are not supported");return function(e,t){for(var n=[],r=0,i=0,o=e;i<o.length;i++){var s=rm(o[i],t.Mc(r));null==s&&(s={nullValue:"NULL_VALUE"}),n.push(s),r++}return{arrayValue:{values:n}}}(e,t)}return function(e,t){if(null===(e=(0,Vr.getModularInstance)(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return jc(t.R,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){var n=pu.fromDate(e);return{timestampValue:zl(t.R,n)}}if(e instanceof pu)return n=new pu(e.seconds,1e3*Math.floor(e.nanoseconds/1e3)),{timestampValue:zl(t.R,n)};if(e instanceof qv)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof Fv)return{bytesValue:Gl(t.R,e._byteString)};if(e instanceof wv){var r=e.firestore._databaseId;if(!r.isEqual(n=t.databaseId))throw t.Lc("Document reference is for database "+r.projectId+"/"+r.database+" but should be for database "+n.projectId+"/"+n.database);return{referenceValue:Yl(e.firestore._databaseId||t.databaseId,e._key.path)}}throw t.Lc("Unsupported field value: "+vv(e))}(e,t)}function im(e,t){var n={};return yu(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):mu(e,function(e,r){var i=rm(r,t.Fc(e));null!=i&&(n[e]=i)}),{mapValue:{fields:n}}}function om(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof pu||e instanceof qv||e instanceof Fv||e instanceof wv||e instanceof jv)}function sm(e,t,n){if(!om(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){var r=vv(n);throw t.Lc("an object"===r?e+" a custom object":e+" "+r)}}function am(e,t,n){if((t=(0,Vr.getModularInstance)(t))instanceof Mv)return t._internalPath;if("string"==typeof t)return cm(e,t);throw lm("Field path arguments must be of type string or FieldPath.",e,!1,void 0,n)}var um=new RegExp("[~\\*/\\[\\]]");function cm(e,t,n){if(t.search(um)>=0)throw lm("Invalid field path ("+t+"). Paths must not contain '~', '*', '/', '[', or ']'",e,!1,void 0,n);try{return(new(Mv.bind.apply(Mv,(0,Ur.__spreadArray)([void 0],t.split(".")))))._internalPath}catch(ly){throw lm("Invalid field path ("+t+"). Paths must not be empty, begin with '.', end with '.', or contain '..'",e,!1,void 0,n)}}function lm(e,t,n,r,i){var o=r&&!r.isEmpty(),s=void 0!==i,a="Function "+t+"() called with invalid data";n&&(a+=" (via `toFirestore()`)");var u="";return(o||s)&&(u+=" (found",o&&(u+=" in field "+r),s&&(u+=" in document "+i),u+=")"),new Ja(Za.INVALID_ARGUMENT,(a+=". ")+e+u)}function hm(e,t){return e.some(function(e){return e.isEqual(t)})}var fm=function(){function e(e,t,n,r,i){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=r,this._converter=i}return Object.defineProperty(e.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"ref",{get:function(){return new wv(this._firestore,this._converter,this._key)},enumerable:!1,configurable:!0}),e.prototype.exists=function(){return null!==this._document},e.prototype.data=function(){if(this._document){if(this._converter){var e=new dm(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}},e.prototype.get=function(e){if(this._document){var t=this._document.data.field(pm("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}},e}(),dm=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,Ur.__extends)(t,e),t.prototype.data=function(){return e.prototype.data.call(this)},t}(fm);function pm(e,t){return"string"==typeof t?cm(e,t):t instanceof Mv?t._internalPath:t._delegate._internalPath}var gm=function(){function e(e,t){this.hasPendingWrites=e,this.fromCache=t}return e.prototype.isEqual=function(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache},e}(),vm=function(e){function t(t,n,r,i,o,s){var a=this;return(a=e.call(this,t,n,r,i,s)||this)._firestore=t,a._firestoreImpl=t,a.metadata=o,a}return(0,Ur.__extends)(t,e),t.prototype.exists=function(){return e.prototype.exists.call(this)},t.prototype.data=function(e){if(void 0===e&&(e={}),this._document){if(this._converter){var t=new mm(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}},t.prototype.get=function(e,t){if(void 0===t&&(t={}),this._document){var n=this._document.data.field(pm("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}},t}(fm),mm=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,Ur.__extends)(t,e),t.prototype.data=function(t){return void 0===t&&(t={}),e.prototype.data.call(this,t)},t}(vm),ym=function(){function e(e,t,n,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new gm(r.hasPendingWrites,r.fromCache),this.query=n}return Object.defineProperty(e.prototype,"docs",{get:function(){var e=[];return this.forEach(function(t){return e.push(t)}),e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"size",{get:function(){return this._snapshot.docs.size},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"empty",{get:function(){return 0===this.size},enumerable:!1,configurable:!0}),e.prototype.forEach=function(e,t){var n=this;this._snapshot.docs.forEach(function(r){e.call(t,new mm(n._firestore,n._userDataWriter,r.key,r,new gm(n._snapshot.mutatedKeys.has(r.key),n._snapshot.fromCache),n.query.converter))})},e.prototype.docChanges=function(e){void 0===e&&(e={});var t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Ja(Za.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){var n=0;return e._snapshot.docChanges.map(function(t){return{type:"added",doc:new mm(e._firestore,e._userDataWriter,t.doc.key,t.doc,new gm(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter),oldIndex:-1,newIndex:n++}})}var r=e._snapshot.oldDocs;return e._snapshot.docChanges.filter(function(e){return t||3!==e.type}).map(function(t){var n=new mm(e._firestore,e._userDataWriter,t.doc.key,t.doc,new gm(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter),i=-1,o=-1;return 0!==t.type&&(i=r.indexOf(t.doc.key),r=r.delete(t.doc.key)),1!==t.type&&(o=(r=r.add(t.doc)).indexOf(t.doc.key)),{type:_m(t.type),doc:n,oldIndex:i,newIndex:o}})}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges},e}();function _m(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return su()}}function bm(e,t){return e instanceof vm&&t instanceof vm?e._firestore===t._firestore&&e._key.isEqual(t._key)&&(null===e._document?null===t._document:e._document.isEqual(t._document))&&e._converter===t._converter:e instanceof ym&&t instanceof ym&&e._firestore===t._firestore&&Sv(e.query,t.query)&&e.metadata.isEqual(t.metadata)&&e._snapshot.isEqual(t._snapshot)}function wm(e){if(Ec(e)&&0===e.explicitOrderBy.length)throw new Ja(Za.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var Tm=function(){};function Em(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];for(var r=0,i=t;r<i.length;r++){var o=i[r];e=o._apply(e)}return e}var Im=function(e){function t(t,n,r){var i=this;return(i=e.call(this)||this).jc=t,i.Wc=n,i.Gc=r,i.type="where",i}return(0,Ur.__extends)(t,e),t.prototype._apply=function(e){var t=zv(e.firestore),n=function(e,t,n,r,i,o,s){var a;if(i.isKeyField()){if("array-contains"===o||"array-contains-any"===o)throw new Ja(Za.INVALID_ARGUMENT,"Invalid Query. You can't perform '"+o+"' queries on FieldPath.documentId().");if("in"===o||"not-in"===o){Dm(s,o);for(var u=[],c=0,l=s;c<l.length;c++)u.push(Nm(r,e,l[c]));a={arrayValue:{values:u}}}else a=Nm(r,e,s)}else"in"!==o&&"not-in"!==o&&"array-contains-any"!==o||Dm(s,o),a=nm(n,"where",s,"in"===o||"not-in"===o);var h=ic.create(i,o,a);return function(e,t){if(t.g()){var n=kc(e);if(null!==n&&!n.isEqual(t.field))throw new Ja(Za.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '"+n.toString()+"' and '"+t.field.toString()+"'");var r=Ic(e);null!==r&&Pm(0,t.field,r)}var i=function(e,t){for(var n=0,r=e.filters;n<r.length;n++){var i=r[n];if(t.indexOf(i.op)>=0)return i.op}return null}(e,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==i)throw new Ja(Za.INVALID_ARGUMENT,i===t.op?"Invalid query. You cannot use more than one '"+t.op.toString()+"' filter.":"Invalid query. You cannot use '"+t.op.toString()+"' filters with '"+i.toString()+"' filters.")}(e,h),h}(e._query,0,t,e.firestore._databaseId,this.jc,this.Wc,this.Gc);return new Tv(e.firestore,e.converter,function(e,t){var n=e.filters.concat([t]);return new _c(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}(e._query,n))},t}(Tm),km=function(e){function t(t,n){var r=this;return(r=e.call(this)||this).jc=t,r.zc=n,r.type="orderBy",r}return(0,Ur.__extends)(t,e),t.prototype._apply=function(e){var t=function(e,t,n){if(null!==e.startAt)throw new Ja(Za.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new Ja(Za.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var r=new gc(t,n);return function(e,t){if(null===Ic(e)){var n=kc(e);null!==n&&Pm(0,n,t.field)}}(e,r),r}(e._query,this.jc,this.zc);return new Tv(e.firestore,e.converter,function(e,t){var n=e.explicitOrderBy.concat([t]);return new _c(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))},t}(Tm),Cm=function(e){function t(t,n,r){var i=this;return(i=e.call(this)||this).type=t,i.Hc=n,i.Jc=r,i}return(0,Ur.__extends)(t,e),t.prototype._apply=function(e){return new Tv(e.firestore,e.converter,xc(e._query,this.Hc,this.Jc))},t}(Tm),Sm=function(e){function t(t,n,r){var i=this;return(i=e.call(this)||this).type=t,i.Yc=n,i.Xc=r,i}return(0,Ur.__extends)(t,e),t.prototype._apply=function(e){var t=xm(e,this.type,this.Yc,this.Xc);return new Tv(e.firestore,e.converter,function(e,t){return new _c(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,t,e.endAt)}(e._query,t))},t}(Tm),Am=function(e){function t(t,n,r){var i=this;return(i=e.call(this)||this).type=t,i.Yc=n,i.Xc=r,i}return(0,Ur.__extends)(t,e),t.prototype._apply=function(e){var t=xm(e,this.type,this.Yc,this.Xc);return new Tv(e.firestore,e.converter,function(e,t){return new _c(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,t)}(e._query,t))},t}(Tm);function xm(e,t,n,r){if(n[0]=(0,Vr.getModularInstance)(n[0]),n[0]instanceof fm)return function(e,t,n,r,i){if(!r)throw new Ja(Za.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for "+n+"().");for(var o=[],s=0,a=Sc(e);s<a.length;s++){var u=a[s];if(u.field.isKeyField())o.push(Hu(t,r.key));else{var c=r.data.field(u.field);if(xu(c))throw new Ja(Za.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+u.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===c){var l=u.field.canonicalString();throw new Ja(Za.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '"+l+"' (used as the orderBy) does not exist.")}o.push(c)}}return new dc(o,i)}(e._query,e.firestore._databaseId,t,n[0]._document,r);var i=zv(e.firestore);return function(e,t,n,r,i,o){var s=e.explicitOrderBy;if(i.length>s.length)throw new Ja(Za.INVALID_ARGUMENT,"Too many arguments provided to "+r+"(). The number of arguments must be less than or equal to the number of orderBy() clauses");for(var a=[],u=0;u<i.length;u++){var c=i[u];if(s[u].field.isKeyField()){if("string"!=typeof c)throw new Ja(Za.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in "+r+"(), but got a "+typeof c);if(!Cc(e)&&-1!==c.indexOf("/"))throw new Ja(Za.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to "+r+"() must be a plain document ID, but '"+c+"' contains a slash.");var l=e.path.child(bu.fromString(c));if(!Lu.isDocumentKey(l))throw new Ja(Za.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to "+r+"() must result in a valid document path, but '"+l+"' is not because it contains an odd number of segments.");var h=new Lu(l);a.push(Hu(t,h))}else{var f=nm(n,r,c);a.push(f)}}return new dc(a,o)}(e._query,e.firestore._databaseId,i,t,n,r)}function Nm(e,t,n){if("string"==typeof(n=(0,Vr.getModularInstance)(n))){if(""===n)throw new Ja(Za.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!Cc(t)&&-1!==n.indexOf("/"))throw new Ja(Za.INVALID_ARGUMENT,"Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '"+n+"' contains a '/' character.");var r=t.path.child(bu.fromString(n));if(!Lu.isDocumentKey(r))throw new Ja(Za.INVALID_ARGUMENT,"Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '"+r+"' is not because it has an odd number of segments ("+r.length+").");return Hu(e,new Lu(r))}if(n instanceof wv)return Hu(e,n._key);throw new Ja(Za.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: "+vv(n)+".")}function Dm(e,t){if(!Array.isArray(e)||0===e.length)throw new Ja(Za.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '"+t.toString()+"' filters.");if(e.length>10)throw new Ja(Za.INVALID_ARGUMENT,"Invalid Query. '"+t.toString()+"' filters support a maximum of 10 elements in the value array.")}function Pm(e,t,n){if(!n.isEqual(t))throw new Ja(Za.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '"+t.toString()+"' and so you must also use '"+t.toString()+"' as your first argument to orderBy(), but your first orderBy() is on field '"+n.toString()+"' instead.")}var Om=function(){function e(){}return e.prototype.convertValue=function(e,t){switch(void 0===t&&(t="none"),Mu(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Su(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Au(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw su()}},e.prototype.convertObject=function(e,t){var n=this,r={};return mu(e.fields,function(e,i){r[e]=n.convertValue(i,t)}),r},e.prototype.convertGeoPoint=function(e){return new qv(Su(e.latitude),Su(e.longitude))},e.prototype.convertArray=function(e,t){var n=this;return(e.values||[]).map(function(e){return n.convertValue(e,t)})},e.prototype.convertServerTimestamp=function(e,t){switch(t){case"previous":var n=Nu(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(Du(e));default:return null}},e.prototype.convertTimestamp=function(e){var t=Cu(e);return new pu(t.seconds,t.nanos)},e.prototype.convertDocumentKey=function(e,t){var n=bu.fromString(e);au(wh(n));var r=new rv(n.get(1),n.get(3)),i=new Lu(n.popFirst(5));return r.isEqual(t)||ru("Document "+i+" contains a document reference within a different database ("+r.projectId+"/"+r.database+") which is not supported. It will be treated as a reference in the current database ("+t.projectId+"/"+t.database+") instead."),i},e}();function Rm(e,t,n){return e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t}var Lm=function(e){function t(t){var n=this;return(n=e.call(this)||this).firestore=t,n}return(0,Ur.__extends)(t,e),t.prototype.convertBytes=function(e){return new Fv(e)},t.prototype.convertReference=function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return new wv(this.firestore,null,t)},t}(Om),Mm=function(){function e(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=zv(e)}return e.prototype.set=function(e,t,n){this._verifyNotCommitted();var r=Fm(e,this._firestore),i=Rm(r.converter,t,n),o=Gv(this._dataReader,"WriteBatch.set",r._key,i,null!==r.converter,n);return this._mutations.push(o.toMutation(r._key,Jc.none())),this},e.prototype.update=function(e,t,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];this._verifyNotCommitted();var o,s=Fm(e,this._firestore);return o="string"==typeof(t=(0,Vr.getModularInstance)(t))||t instanceof Mv?tm(this._dataReader,"WriteBatch.update",s._key,t,n,r):em(this._dataReader,"WriteBatch.update",s._key,t),this._mutations.push(o.toMutation(s._key,Jc.exists(!0))),this},e.prototype.delete=function(e){this._verifyNotCommitted();var t=Fm(e,this._firestore);return this._mutations=this._mutations.concat(new pl(t._key,Jc.none())),this},e.prototype.commit=function(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()},e.prototype._verifyNotCommitted=function(){if(this._committed)throw new Ja(Za.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")},e}();function Fm(e,t){if((e=(0,Vr.getModularInstance)(e)).firestore!==t)throw new Ja(Za.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}var jm=function(e){function t(t){var n=this;return(n=e.call(this)||this).firestore=t,n}return(0,Ur.__extends)(t,e),t.prototype.convertBytes=function(e){return new Fv(e)},t.prototype.convertReference=function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return new wv(this.firestore,null,t)},t}(Om);function qm(e,t,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];e=mv(e,wv);var o=mv(e.firestore,Dv),s=zv(o);return Vm(o,[("string"==typeof(t=(0,Vr.getModularInstance)(t))||t instanceof Mv?tm(s,"updateDoc",e._key,t,n,r):em(s,"updateDoc",e._key,t)).toMutation(e._key,Jc.exists(!0))])}function Um(e){for(var t,n,r,i=[],o=1;o<arguments.length;o++)i[o-1]=arguments[o];e=(0,Vr.getModularInstance)(e);var s={includeMetadataChanges:!1},a=0;"object"!=typeof i[a]||xv(i[a])||(s=i[a],a++);var u,c,l,h={includeMetadataChanges:s.includeMetadataChanges};if(xv(i[a])){var f=i[a];i[a]=null===(t=f.next)||void 0===t?void 0:t.bind(f),i[a+1]=null===(n=f.error)||void 0===n?void 0:n.bind(f),i[a+2]=null===(r=f.complete)||void 0===r?void 0:r.bind(f)}if(e instanceof wv)c=mv(e.firestore,Dv),l=wc(e._key.path),u={next:function(t){i[a]&&i[a](Bm(c,e,t))},error:i[a+1],complete:i[a+2]};else{var d=mv(e,Tv);c=mv(d.firestore,Dv),l=d._query;var p=new jm(c);u={next:function(e){i[a]&&i[a](new ym(c,p,d,e))},error:i[a+1],complete:i[a+2]},wm(e._query)}return function(e,t,n,r){var i=this,o=new Ug(r),s=new zp(t,o,n);return e.asyncQueue.enqueueAndForget(function(){return(0,Ur.__awaiter)(i,void 0,void 0,function(){var t;return(0,Ur.__generator)(this,function(n){switch(n.label){case 0:return t=Vp,[4,Jg(e)];case 1:return[2,t.apply(void 0,[n.sent(),s])]}})})}),function(){o.Wo(),e.asyncQueue.enqueueAndForget(function(){return(0,Ur.__awaiter)(i,void 0,void 0,function(){var t;return(0,Ur.__generator)(this,function(n){switch(n.label){case 0:return t=Bp,[4,Jg(e)];case 1:return[2,t.apply(void 0,[n.sent(),s])]}})})})}}(Pv(c),l,h,u)}function Vm(e,t){return function(e,t){var n=this,r=new Kh;return e.asyncQueue.enqueueAndForget(function(){return(0,Ur.__awaiter)(n,void 0,void 0,function(){var n;return(0,Ur.__generator)(this,function(i){switch(i.label){case 0:return n=sg,[4,Zg(e)];case 1:return[2,n.apply(void 0,[i.sent(),t,r])]}})})}),r.promise}(Pv(e),t)}function Bm(e,t,n){var r=n.docs.get(t._key),i=new jm(e);return new vm(e,i,t._key,r,new gm(n.hasPendingWrites,n.fromCache),t.converter)}var Hm=function(e){function t(t,n){var r=this;return(r=e.call(this,t,n)||this)._firestore=t,r}return(0,Ur.__extends)(t,e),t.prototype.get=function(t){var n=this,r=Fm(t,this._firestore),i=new jm(this._firestore);return e.prototype.get.call(this,t).then(function(e){return new vm(n._firestore,i,r._key,e._document,new gm(!1,!1),r.converter)})},t}(function(){function e(e,t){this._firestore=e,this._transaction=t,this._dataReader=zv(e)}return e.prototype.get=function(e){var t=this,n=Fm(e,this._firestore),r=new Lm(this._firestore);return this._transaction.lookup([n._key]).then(function(e){if(!e||1!==e.length)return su();var i=e[0];if(i.isFoundDocument())return new fm(t._firestore,r,i.key,i,n.converter);if(i.isNoDocument())return new fm(t._firestore,r,n._key,null,n.converter);throw su()})},e.prototype.set=function(e,t,n){var r=Fm(e,this._firestore),i=Rm(r.converter,t,n),o=Gv(this._dataReader,"Transaction.set",r._key,i,null!==r.converter,n);return this._transaction.set(r._key,o),this},e.prototype.update=function(e,t,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];var o,s=Fm(e,this._firestore);return o="string"==typeof(t=(0,Vr.getModularInstance)(t))||t instanceof Mv?tm(this._dataReader,"Transaction.update",s._key,t,n,r):em(this._dataReader,"Transaction.update",s._key,t),this._transaction.update(s._key,o),this},e.prototype.delete=function(e){var t=Fm(e,this._firestore);return this._transaction.delete(t._key),this},e}());function Wm(){if("undefined"==typeof Uint8Array)throw new Ja(Za.UNIMPLEMENTED,"Uint8Arrays are not available in this environment.")}function Km(){if("undefined"==typeof atob)throw new Ja(Za.UNIMPLEMENTED,"Blobs are unavailable in Firestore in this environment.")}var zm=function(){function e(e){this._delegate=e}return e.fromBase64String=function(t){return Km(),new e(Fv.fromBase64String(t))},e.fromUint8Array=function(t){return Wm(),new e(Fv.fromUint8Array(t))},e.prototype.toBase64=function(){return Km(),this._delegate.toBase64()},e.prototype.toUint8Array=function(){return Wm(),this._delegate.toUint8Array()},e.prototype.isEqual=function(e){return this._delegate.isEqual(e._delegate)},e.prototype.toString=function(){return"Blob(base64: "+this.toBase64()+")"},e}(),Gm=function(){function e(){}return e.prototype.enableIndexedDbPersistence=function(e,t){return function(e,t){Lv(e=mv(e,Dv));var n=Pv(e),r=e._freezeSettings(),i=new jg;return Rv(n,i,new Mg(i,r.cacheSizeBytes,null==t?void 0:t.forceOwnership))}(e._delegate,{forceOwnership:t})},e.prototype.enableMultiTabIndexedDbPersistence=function(e){return function(e){Lv(e=mv(e,Dv));var t=Pv(e),n=e._freezeSettings(),r=new jg;return Rv(t,r,new Fg(r,n.cacheSizeBytes))}(e._delegate)},e.prototype.clearIndexedDbPersistence=function(e){return function(e){var t=this;if(e._initialized&&!e._terminated)throw new Ja(Za.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var n=new Kh;return e._queue.enqueueAndForgetEvenWhileRestricted(function(){return(0,Ur.__awaiter)(t,void 0,void 0,function(){var t;return(0,Ur.__generator)(this,function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,function(e){return(0,Ur.__awaiter)(this,void 0,void 0,function(){return(0,Ur.__generator)(this,function(t){switch(t.label){case 0:return Qh.yt()?[4,Qh.delete(e+"main")]:[2,Promise.resolve()];case 1:return t.sent(),[2]}})})}(sd(e._databaseId,e._persistenceKey))];case 1:return r.sent(),n.resolve(),[3,3];case 2:return t=r.sent(),n.reject(t),[3,3];case 3:return[2]}})})}),n.promise}(e._delegate)},e}(),Qm=function(){function e(e,t,n){var r=this;this._delegate=t,this.Zc=n,this.INTERNAL={delete:function(){return r.terminate()}},e instanceof rv||(this.tu=e)}return Object.defineProperty(e.prototype,"_databaseId",{get:function(){return this._delegate._databaseId},enumerable:!1,configurable:!0}),e.prototype.settings=function(e){var t=this._delegate._getSettings();e.merge||t.host===e.host||iu("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)},e.prototype.useEmulator=function(e,t,n){void 0===n&&(n={}),function(e,t,n,r){void 0===r&&(r={});var i=(e=mv(e,bv))._getSettings();if("firestore.googleapis.com"!==i.host&&i.host!==t&&iu("Host has been set in both settings() and useEmulator(), emulator host will be used"),e._setSettings(Object.assign(Object.assign({},i),{host:t+":"+n,ssl:!1})),r.mockUserToken){var o=(0,Vr.createMockUserToken)(r.mockUserToken),s=r.mockUserToken.sub||r.mockUserToken.user_id;if(!s)throw new Ja(Za.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");e._credentials=new av(new ov(o,new Fd(s)))}}(this._delegate,e,t,n)},e.prototype.enableNetwork=function(){return function(e){var t=this;return e.asyncQueue.enqueue(function(){return(0,Ur.__awaiter)(t,void 0,void 0,function(){var t,n;return(0,Ur.__generator)(this,function(r){switch(r.label){case 0:return[4,$g(e)];case 1:return t=r.sent(),[4,Xg(e)];case 2:return n=r.sent(),[2,(t.setNetworkEnabled(!0),function(e){var t=uu(e);return t.Or.delete(0),cp(t)}(n))]}})})})}(Pv(mv(this._delegate,Dv)))},e.prototype.disableNetwork=function(){return function(e){var t=this;return e.asyncQueue.enqueue(function(){return(0,Ur.__awaiter)(t,void 0,void 0,function(){var t,n;return(0,Ur.__generator)(this,function(r){switch(r.label){case 0:return[4,$g(e)];case 1:return t=r.sent(),[4,Xg(e)];case 2:return n=r.sent(),[2,(t.setNetworkEnabled(!1),function(e){return(0,Ur.__awaiter)(this,void 0,void 0,function(){var t;return(0,Ur.__generator)(this,function(n){switch(n.label){case 0:return(t=uu(e)).Or.add(0),[4,lp(t)];case 1:return n.sent(),t.Br.set("Offline"),[2]}})})}(n))]}})})})}(Pv(mv(this._delegate,Dv)))},e.prototype.enablePersistence=function(e){var t=!1,n=!1;return e&&dv("synchronizeTabs",t=!!e.synchronizeTabs,"experimentalForceOwningTab",n=!!e.experimentalForceOwningTab),t?this.Zc.enableMultiTabIndexedDbPersistence(this):this.Zc.enableIndexedDbPersistence(this,n)},e.prototype.clearPersistence=function(){return this.Zc.clearIndexedDbPersistence(this)},e.prototype.terminate=function(){return this.tu&&(this.tu._removeServiceInstance("firestore"),this.tu._removeServiceInstance("firestore-exp")),this._delegate._delete()},e.prototype.waitForPendingWrites=function(){return function(e){var t=this,n=new Kh;return e.asyncQueue.enqueueAndForget(function(){return(0,Ur.__awaiter)(t,void 0,void 0,function(){var t;return(0,Ur.__generator)(this,function(r){switch(r.label){case 0:return t=fg,[4,Zg(e)];case 1:return[2,t.apply(void 0,[r.sent(),n])]}})})}),n.promise}(Pv(mv(this._delegate,Dv)))},e.prototype.onSnapshotsInSync=function(e){return function(e,t){return function(e,t){var n=this,r=new Ug(t);return e.asyncQueue.enqueueAndForget(function(){return(0,Ur.__awaiter)(n,void 0,void 0,function(){var t;return(0,Ur.__generator)(this,function(n){switch(n.label){case 0:return t=function(e,t){uu(e).Gr.add(t),t.next()},[4,Jg(e)];case 1:return[2,t.apply(void 0,[n.sent(),r])]}})})}),function(){r.Wo(),e.asyncQueue.enqueueAndForget(function(){return(0,Ur.__awaiter)(n,void 0,void 0,function(){var t;return(0,Ur.__generator)(this,function(n){switch(n.label){case 0:return t=function(e,t){uu(e).Gr.delete(t)},[4,Jg(e)];case 1:return[2,t.apply(void 0,[n.sent(),r])]}})})})}}(Pv(e=mv(e,Dv)),xv(t)?t:{next:t})}(this._delegate,e)},Object.defineProperty(e.prototype,"app",{get:function(){if(!this.tu)throw new Ja(Za.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this.tu},enumerable:!1,configurable:!0}),e.prototype.collection=function(e){try{return new uy(this,Iv(this._delegate,e))}catch(e){throw ey(e,"collection()","Firestore.collection()")}},e.prototype.doc=function(e){try{return new Jm(this,kv(this._delegate,e))}catch(e){throw ey(e,"doc()","Firestore.doc()")}},e.prototype.collectionGroup=function(e){try{return new oy(this,function(e,t){if(e=mv(e,bv),hv("collectionGroup","collection id",t),t.indexOf("/")>=0)throw new Ja(Za.INVALID_ARGUMENT,"Invalid collection ID '"+t+"' passed to function collectionGroup(). Collection IDs must not contain '/'.");return new Tv(e,null,function(e){return new _c(bu.emptyPath(),e)}(t))}(this._delegate,e))}catch(e){throw ey(e,"collectionGroup()","Firestore.collectionGroup()")}},e.prototype.runTransaction=function(e){var t=this;return function(e,t){return function(e,t){var n=this,r=new Kh;return e.asyncQueue.enqueueAndForget(function(){return(0,Ur.__awaiter)(n,void 0,void 0,function(){var n;return(0,Ur.__generator)(this,function(i){switch(i.label){case 0:return[4,function(e){return Qg(e).then(function(e){return e.datastore})}(e)];case 1:return n=i.sent(),new Hg(e.asyncQueue,n,t,r).run(),[2]}})})}),r.promise}(Pv(e),function(n){return t(new Hm(e,n))})}(this._delegate,function(n){return e(new Ym(t,n))})},e.prototype.batch=function(){var e=this;return Pv(this._delegate),new Xm(new Mm(this._delegate,function(t){return Vm(e._delegate,t)}))},e.prototype.loadBundle=function(e){throw new Ja(Za.FAILED_PRECONDITION,'"loadBundle()" does not exist, have you imported "firebase/firestore/bundle"?')},e.prototype.namedQuery=function(e){throw new Ja(Za.FAILED_PRECONDITION,'"namedQuery()" does not exist, have you imported "firebase/firestore/bundle"?')},e}(),$m=function(e){function t(t){var n=this;return(n=e.call(this)||this).firestore=t,n}return(0,Ur.__extends)(t,e),t.prototype.convertBytes=function(e){return new zm(new Fv(e))},t.prototype.convertReference=function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return Jm.eu(t,this.firestore,null)},t}(Om),Ym=function(){function e(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new $m(e)}return e.prototype.get=function(e){var t=this,n=cy(e);return this._delegate.get(n).then(function(e){return new ry(t._firestore,new vm(t._firestore._delegate,t._userDataWriter,e._key,e._document,e.metadata,n.converter))})},e.prototype.set=function(e,t,n){var r=cy(e);return n?(fv("Transaction.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this},e.prototype.update=function(e,t,n){for(var r,i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];var s=cy(e);return 2===arguments.length?this._delegate.update(s,t):(r=this._delegate).update.apply(r,(0,Ur.__spreadArray)([s,t,n],i)),this},e.prototype.delete=function(e){var t=cy(e);return this._delegate.delete(t),this},e}(),Xm=function(){function e(e){this._delegate=e}return e.prototype.set=function(e,t,n){var r=cy(e);return n?(fv("WriteBatch.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this},e.prototype.update=function(e,t,n){for(var r,i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];var s=cy(e);return 2===arguments.length?this._delegate.update(s,t):(r=this._delegate).update.apply(r,(0,Ur.__spreadArray)([s,t,n],i)),this},e.prototype.delete=function(e){var t=cy(e);return this._delegate.delete(t),this},e.prototype.commit=function(){return this._delegate.commit()},e}(),Zm=function(){function e(e,t,n){this._firestore=e,this._userDataWriter=t,this._delegate=n}return e.prototype.fromFirestore=function(e,t){var n=new mm(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new iy(this._firestore,n),null!=t?t:{})},e.prototype.toFirestore=function(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)},e.nu=function(t,n){var r=e.su,i=r.get(t);i||(i=new WeakMap,r.set(t,i));var o=i.get(n);return o||(o=new e(t,new $m(t),n),i.set(n,o)),o},e}();Zm.su=new WeakMap;var Jm=function(){function e(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new $m(e)}return e.iu=function(t,n,r){if(t.length%2!=0)throw new Ja(Za.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+t.canonicalString()+" has "+t.length);return new e(n,new wv(n._delegate,r,new Lu(t)))},e.eu=function(t,n,r){return new e(n,new wv(n._delegate,r,t))},Object.defineProperty(e.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){return new uy(this.firestore,this._delegate.parent)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._delegate.path},enumerable:!1,configurable:!0}),e.prototype.collection=function(e){try{return new uy(this.firestore,Iv(this._delegate,e))}catch(e){throw ey(e,"collection()","DocumentReference.collection()")}},e.prototype.isEqual=function(e){return(e=(0,Vr.getModularInstance)(e))instanceof wv&&Cv(this._delegate,e)},e.prototype.set=function(e,t){t=fv("DocumentReference.set",t);try{return function(e,t,n){e=mv(e,wv);var r=mv(e.firestore,Dv),i=Rm(e.converter,t,n);return Vm(r,[Gv(zv(r),"setDoc",e._key,i,null!==e.converter,n).toMutation(e._key,Jc.none())])}(this._delegate,e,t)}catch(e){throw ey(e,"setDoc()","DocumentReference.set()")}},e.prototype.update=function(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];try{return 1===arguments.length?qm(this._delegate,e):qm.apply(void 0,(0,Ur.__spreadArray)([this._delegate,e,t],n))}catch(e){throw ey(e,"updateDoc()","DocumentReference.update()")}},e.prototype.delete=function(){return Vm(mv((e=this._delegate).firestore,Dv),[new pl(e._key,Jc.none())]);var e},e.prototype.onSnapshot=function(){for(var e=this,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=ty(t),i=ny(t,function(t){return new ry(e.firestore,new vm(e.firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,e._delegate.converter))});return Um(this._delegate,r,i)},e.prototype.get=function(e){var t=this;return("cache"===(null==e?void 0:e.source)?function(e){e=mv(e,wv);var t=mv(e.firestore,Dv),n=Pv(t),r=new jm(t);return function(e,t){var n=this,r=new Kh;return e.asyncQueue.enqueueAndForget(function(){return(0,Ur.__awaiter)(n,void 0,void 0,function(){var n;return(0,Ur.__generator)(this,function(i){switch(i.label){case 0:return n=function(e,t,n){return(0,Ur.__awaiter)(this,void 0,void 0,function(){var r,i;return(0,Ur.__generator)(this,function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),[4,function(e,t){var n=uu(e);return n.persistence.runTransaction("read document","readonly",function(e){return n.Mn.mn(e,t)})}(e,t)];case 1:return(i=o.sent()).isFoundDocument()?n.resolve(i):i.isNoDocument()?n.resolve(null):n.reject(new Ja(Za.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),[3,3];case 2:return r=o.sent(),i=Lp(r,"Failed to get document '"+t+" from cache"),n.reject(i),[3,3];case 3:return[2]}})})},[4,Yg(e)];case 1:return[2,n.apply(void 0,[i.sent(),t,r])]}})})}),r.promise}(n,e._key).then(function(n){return new vm(t,r,e._key,n,new gm(null!==n&&n.hasLocalMutations,!0),e.converter)})}(this._delegate):"server"===(null==e?void 0:e.source)?function(e){e=mv(e,wv);var t=mv(e.firestore,Dv);return ev(Pv(t),e._key,{source:"server"}).then(function(n){return Bm(t,e,n)})}(this._delegate):function(e){e=mv(e,wv);var t=mv(e.firestore,Dv);return ev(Pv(t),e._key).then(function(n){return Bm(t,e,n)})}(this._delegate)).then(function(e){return new ry(t.firestore,new vm(t.firestore._delegate,t._userDataWriter,e._key,e._document,e.metadata,t._delegate.converter))})},e.prototype.withConverter=function(t){return new e(this.firestore,this._delegate.withConverter(t?Zm.nu(this.firestore,t):null))},e}();function ey(e,t,n){return e.message=e.message.replace(t,n),e}function ty(e){for(var t=0,n=e;t<n.length;t++){var r=n[t];if("object"==typeof r&&!xv(r))return r}return{}}function ny(e,t){var n,r,i;return{next:function(e){i.next&&i.next(t(e))},error:null===(n=(i=xv(e[0])?e[0]:xv(e[1])?e[1]:"function"==typeof e[0]?{next:e[0],error:e[1],complete:e[2]}:{next:e[1],error:e[2],complete:e[3]}).error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}var ry=function(){function e(e,t){this._firestore=e,this._delegate=t}return Object.defineProperty(e.prototype,"ref",{get:function(){return new Jm(this._firestore,this._delegate.ref)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"exists",{get:function(){return this._delegate.exists()},enumerable:!1,configurable:!0}),e.prototype.data=function(e){return this._delegate.data(e)},e.prototype.get=function(e,t){return this._delegate.get(e,t)},e.prototype.isEqual=function(e){return bm(this._delegate,e._delegate)},e}(),iy=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,Ur.__extends)(t,e),t.prototype.data=function(e){return this._delegate.data(e)},t}(ry),oy=function(){function e(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new $m(e)}return e.prototype.where=function(t,n,r){try{return new e(this.firestore,Em(this._delegate,function(e,t,n){var r=t,i=pm("where",e);return new Im(i,r,n)}(t,n,r)))}catch(t){throw ey(t,/(orderBy|where)\(\)/,"Query.$1()")}},e.prototype.orderBy=function(t,n){try{return new e(this.firestore,Em(this._delegate,function(e,t){void 0===t&&(t="asc");var n=t,r=pm("orderBy",e);return new km(r,n)}(t,n)))}catch(t){throw ey(t,/(orderBy|where)\(\)/,"Query.$1()")}},e.prototype.limit=function(t){try{return new e(this.firestore,Em(this._delegate,function(e){return yv("limit",e),new Cm("limit",e,"F")}(t)))}catch(t){throw ey(t,"limit()","Query.limit()")}},e.prototype.limitToLast=function(t){try{return new e(this.firestore,Em(this._delegate,function(e){return yv("limitToLast",e),new Cm("limitToLast",e,"L")}(t)))}catch(t){throw ey(t,"limitToLast()","Query.limitToLast()")}},e.prototype.startAt=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return new e(this.firestore,Em(this._delegate,(function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return new Sm("startAt",e,!0)}).apply(void 0,t)))}catch(t){throw ey(t,"startAt()","Query.startAt()")}},e.prototype.startAfter=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return new e(this.firestore,Em(this._delegate,(function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return new Sm("startAfter",e,!1)}).apply(void 0,t)))}catch(t){throw ey(t,"startAfter()","Query.startAfter()")}},e.prototype.endBefore=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return new e(this.firestore,Em(this._delegate,(function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return new Am("endBefore",e,!0)}).apply(void 0,t)))}catch(t){throw ey(t,"endBefore()","Query.endBefore()")}},e.prototype.endAt=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return new e(this.firestore,Em(this._delegate,(function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return new Am("endAt",e,!1)}).apply(void 0,t)))}catch(t){throw ey(t,"endAt()","Query.endAt()")}},e.prototype.isEqual=function(e){return Sv(this._delegate,e._delegate)},e.prototype.get=function(e){var t=this;return("cache"===(null==e?void 0:e.source)?function(e){e=mv(e,Tv);var t=mv(e.firestore,Dv),n=Pv(t),r=new jm(t);return function(e,t){var n=this,r=new Kh;return e.asyncQueue.enqueueAndForget(function(){return(0,Ur.__awaiter)(n,void 0,void 0,function(){var n;return(0,Ur.__generator)(this,function(i){switch(i.label){case 0:return n=function(e,t,n){return(0,Ur.__awaiter)(this,void 0,void 0,function(){var r,i,o,s,a;return(0,Ur.__generator)(this,function(u){switch(u.label){case 0:return u.trys.push([0,2,,3]),[4,wd(e,t,!0)];case 1:return a=u.sent(),r=new Jp(t,a.Bn),i=r._o(a.documents),o=r.applyChanges(i,!1),n.resolve(o.snapshot),[3,3];case 2:return s=u.sent(),a=Lp(s,"Failed to execute query '"+t+" against cache"),n.reject(a),[3,3];case 3:return[2]}})})},[4,Yg(e)];case 1:return[2,n.apply(void 0,[i.sent(),t,r])]}})})}),r.promise}(n,e._query).then(function(n){return new ym(t,r,e,n)})}(this._delegate):"server"===(null==e?void 0:e.source)?function(e){e=mv(e,Tv);var t=mv(e.firestore,Dv),n=Pv(t),r=new jm(t);return tv(n,e._query,{source:"server"}).then(function(n){return new ym(t,r,e,n)})}(this._delegate):function(e){e=mv(e,Tv);var t=mv(e.firestore,Dv),n=Pv(t),r=new jm(t);return wm(e._query),tv(n,e._query).then(function(n){return new ym(t,r,e,n)})}(this._delegate)).then(function(e){return new ay(t.firestore,new ym(t.firestore._delegate,t._userDataWriter,t._delegate,e._snapshot))})},e.prototype.onSnapshot=function(){for(var e=this,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=ty(t),i=ny(t,function(t){return new ay(e.firestore,new ym(e.firestore._delegate,e._userDataWriter,e._delegate,t._snapshot))});return Um(this._delegate,r,i)},e.prototype.withConverter=function(t){return new e(this.firestore,this._delegate.withConverter(t?Zm.nu(this.firestore,t):null))},e}(),sy=function(){function e(e,t){this._firestore=e,this._delegate=t}return Object.defineProperty(e.prototype,"type",{get:function(){return this._delegate.type},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"doc",{get:function(){return new iy(this._firestore,this._delegate.doc)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"oldIndex",{get:function(){return this._delegate.oldIndex},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"newIndex",{get:function(){return this._delegate.newIndex},enumerable:!1,configurable:!0}),e}(),ay=function(){function e(e,t){this._firestore=e,this._delegate=t}return Object.defineProperty(e.prototype,"query",{get:function(){return new oy(this._firestore,this._delegate.query)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"size",{get:function(){return this._delegate.size},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"empty",{get:function(){return this._delegate.empty},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"docs",{get:function(){var e=this;return this._delegate.docs.map(function(t){return new iy(e._firestore,t)})},enumerable:!1,configurable:!0}),e.prototype.docChanges=function(e){var t=this;return this._delegate.docChanges(e).map(function(e){return new sy(t._firestore,e)})},e.prototype.forEach=function(e,t){var n=this;this._delegate.forEach(function(r){e.call(t,new iy(n._firestore,r))})},e.prototype.isEqual=function(e){return bm(this._delegate,e._delegate)},e}(),uy=function(e){function t(t,n){var r=this;return(r=e.call(this,t,n)||this).firestore=t,r._delegate=n,r}return(0,Ur.__extends)(t,e),Object.defineProperty(t.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this._delegate.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){var e=this._delegate.parent;return e?new Jm(this.firestore,e):null},enumerable:!1,configurable:!0}),t.prototype.doc=function(e){try{return new Jm(this.firestore,void 0===e?kv(this._delegate):kv(this._delegate,e))}catch(e){throw ey(e,"doc()","CollectionReference.doc()")}},t.prototype.add=function(e){var t=this;return function(e,t){var n=mv(e.firestore,Dv),r=kv(e),i=Rm(e.converter,t);return Vm(n,[Gv(zv(e.firestore),"addDoc",r._key,i,null!==e.converter,{}).toMutation(r._key,Jc.exists(!1))]).then(function(){return r})}(this._delegate,e).then(function(e){return new Jm(t.firestore,e)})},t.prototype.isEqual=function(e){return Cv(this._delegate,e._delegate)},t.prototype.withConverter=function(e){return new t(this.firestore,this._delegate.withConverter(e?Zm.nu(this.firestore,e):null))},t}(oy);function cy(e){return mv(e,wv)}var ly,hy,fy=function(){function e(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._delegate=new(Mv.bind.apply(Mv,(0,Ur.__spreadArray)([void 0],e)))}return e.documentId=function(){return new e(Tu.keyField().canonicalString())},e.prototype.isEqual=function(e){return(e=(0,Vr.getModularInstance)(e))instanceof Mv&&this._delegate._internalPath.isEqual(e._internalPath)},e}(),dy=function(){function e(e){this._delegate=e}return e.serverTimestamp=function(){var t=new Yv("serverTimestamp");return t._methodName="FieldValue.serverTimestamp",new e(t)},e.delete=function(){var t=new Qv("deleteField");return t._methodName="FieldValue.delete",new e(t)},e.arrayUnion=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=(function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return new Xv("arrayUnion",e)}).apply(void 0,t);return r._methodName="FieldValue.arrayUnion",new e(r)},e.arrayRemove=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=(function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return new Zv("arrayRemove",e)}).apply(void 0,t);return r._methodName="FieldValue.arrayRemove",new e(r)},e.increment=function(t){var n=function(e){return new Jv("increment",e)}(t);return n._methodName="FieldValue.increment",new e(n)},e.prototype.isEqual=function(e){return this._delegate.isEqual(e._delegate)},e}(),py=n(34),gy={Firestore:Qm,GeoPoint:qv,Timestamp:pu,Blob:zm,Transaction:Ym,WriteBatch:Xm,DocumentReference:Jm,DocumentSnapshot:ry,Query:oy,QueryDocumentSnapshot:iy,QuerySnapshot:ay,CollectionReference:uy,FieldPath:fy,FieldValue:dy,setLogLevel:function(e){eu.setLogLevel(e)},CACHE_SIZE_UNLIMITED:-1};(function(e,t){e.INTERNAL.registerComponent(new py.Component("firestore",function(e){return function(e,t){return new Qm(e,new Dv(e,t),new Gm)}(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"))},"PUBLIC").setServiceProps(Object.assign({},gy)))})(ly=qr.default),ly.registerVersion("@firebase/firestore","2.3.10"),(hy=Qm).prototype.loadBundle=function(e){return function(e,t){var n=Pv(e=mv(e,Dv)),r=new Nv;return function(e,t,n,r){var i=this,o=function(e,t){return function(e,t){return new Vg(e,t)}(function(e,t){if(e instanceof Uint8Array)return qg(e,t);if(e instanceof ArrayBuffer)return qg(new Uint8Array(e),t);if(e instanceof ReadableStream)return e.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}("string"==typeof e?(new TextEncoder).encode(e):e),t)}(n,tp(t));e.asyncQueue.enqueueAndForget(function(){return(0,Ur.__awaiter)(i,void 0,void 0,function(){var t;return(0,Ur.__generator)(this,function(n){switch(n.label){case 0:return t=Rg,[4,Zg(e)];case 1:return t.apply(void 0,[n.sent(),o,r]),[2]}})})})}(n,e._databaseId,t,r),r}(this._delegate,e)},hy.prototype.namedQuery=function(e){var t,n,r=this;return(t=this._delegate,n=e,function(e,t){var n=this;return e.asyncQueue.enqueue(function(){return(0,Ur.__awaiter)(n,void 0,void 0,function(){var n;return(0,Ur.__generator)(this,function(r){switch(r.label){case 0:return n=function(e,t){var n=uu(e);return n.persistence.runTransaction("Get named query","readonly",function(e){return n.Ke.getNamedQuery(e,t)})},[4,Yg(e)];case 1:return[2,n.apply(void 0,[r.sent(),t])]}})})})}(Pv(t=mv(t,Dv)),n).then(function(e){return e?new Tv(t,null,e.query):null})).then(function(e){return e?new oy(r,e):null})};var vy={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},my=function(e){function t(n,r,i){var o=e.call(this,r)||this;return Object.setPrototypeOf(o,t.prototype),o.code=n,o.details=i,o}return(0,Ur.__extends)(t,e),t}(Error),yy=function(){function e(e,t){var n=this;this.auth=null,this.messaging=null,this.auth=e.getImmediate({optional:!0}),this.messaging=t.getImmediate({optional:!0}),this.auth||e.get().then(function(e){return n.auth=e},function(){}),this.messaging||t.get().then(function(e){return n.messaging=e},function(){})}return e.prototype.getAuthToken=function(){return(0,Ur.__awaiter)(this,void 0,void 0,function(){var e;return(0,Ur.__generator)(this,function(t){switch(t.label){case 0:if(!this.auth)return[2,void 0];t.label=1;case 1:return t.trys.push([1,3,,4]),[4,this.auth.getToken()];case 2:return(e=t.sent())?[2,e.accessToken]:[2,void 0];case 3:return t.sent(),[2,void 0];case 4:return[2]}})})},e.prototype.getInstanceIdToken=function(){return(0,Ur.__awaiter)(this,void 0,void 0,function(){return(0,Ur.__generator)(this,function(e){switch(e.label){case 0:if(!this.messaging||!("Notification"in self)||"granted"!==Notification.permission)return[2,void 0];e.label=1;case 1:return e.trys.push([1,3,,4]),[4,this.messaging.getToken()];case 2:return[2,e.sent()];case 3:return e.sent(),[2,void 0];case 4:return[2]}})})},e.prototype.getContext=function(){return(0,Ur.__awaiter)(this,void 0,void 0,function(){var e,t;return(0,Ur.__generator)(this,function(n){switch(n.label){case 0:return[4,this.getAuthToken()];case 1:return e=n.sent(),[4,this.getInstanceIdToken()];case 2:return t=n.sent(),[2,{authToken:e,instanceIdToken:t}]}})})},e}();function _y(e,t){var n={};for(var r in e)e.hasOwnProperty(r)&&(n[r]=t(e[r]));return n}var by,wy,Ty,Ey=function(){function e(){}return e.prototype.encode=function(e){var t=this;if(null==e)return null;if(e instanceof Number&&(e=e.valueOf()),"number"==typeof e&&isFinite(e))return e;if(!0===e||!1===e)return e;if("[object String]"===Object.prototype.toString.call(e))return e;if(e instanceof Date)return e.toISOString();if(Array.isArray(e))return e.map(function(e){return t.encode(e)});if("function"==typeof e||"object"==typeof e)return _y(e,function(e){return t.encode(e)});throw new Error("Data cannot be encoded in JSON: "+e)},e.prototype.decode=function(e){var t=this;if(null==e)return e;if(e["@type"])switch(e["@type"]){case"type.googleapis.com/google.protobuf.Int64Value":case"type.googleapis.com/google.protobuf.UInt64Value":var n=Number(e.value);if(isNaN(n))throw new Error("Data cannot be decoded from JSON: "+e);return n;default:throw new Error("Data cannot be decoded from JSON: "+e)}return Array.isArray(e)?e.map(function(e){return t.decode(e)}):"function"==typeof e||"object"==typeof e?_y(e,function(e){return t.decode(e)}):e},e}(),Iy=function(){function e(e,t,n,r,i,o){var s=this;void 0===i&&(i="us-central1"),this.app_=e,this.appCheckProvider=r,this.fetchImpl=o,this.serializer=new Ey,this.emulatorOrigin=null,this.INTERNAL={delete:function(){return Promise.resolve(s.deleteService())}},this.contextProvider=new yy(t,n),this.cancelAllRequests=new Promise(function(e){s.deleteService=function(){return e()}});try{var a=new URL(i);this.customDomain=a.origin,this.region="us-central1"}catch(ly){this.customDomain=null,this.region=i}}return Object.defineProperty(e.prototype,"app",{get:function(){return this.app_},enumerable:!1,configurable:!0}),e.prototype._url=function(e){var t=this.app_.options.projectId;return null!==this.emulatorOrigin?this.emulatorOrigin+"/"+t+"/"+this.region+"/"+e:null!==this.customDomain?this.customDomain+"/"+e:"https://"+this.region+"-"+t+".cloudfunctions.net/"+e},e.prototype.useEmulator=function(e,t){this.emulatorOrigin="http://"+e+":"+t},e.prototype.useFunctionsEmulator=function(e){this.emulatorOrigin=e},e.prototype.httpsCallable=function(e,t){var n=this;return function(r){return n.call(e,r,t||{})}},e.prototype.postJSON=function(e,t,n){return(0,Ur.__awaiter)(this,void 0,void 0,function(){var r,i,o;return(0,Ur.__generator)(this,function(s){switch(s.label){case 0:return n["Content-Type"]="application/json",[4,this.getAppCheckToken()];case 1:null!==(r=s.sent())&&(n["X-Firebase-AppCheck"]=r),s.label=2;case 2:return s.trys.push([2,4,,5]),[4,this.fetchImpl(e,{method:"POST",body:JSON.stringify(t),headers:n})];case 3:return i=s.sent(),[3,5];case 4:return s.sent(),[2,{status:0,json:null}];case 5:o=null,s.label=6;case 6:return s.trys.push([6,8,,9]),[4,i.json()];case 7:return o=s.sent(),[3,9];case 8:return s.sent(),[3,9];case 9:return[2,{status:i.status,json:o}]}})})},e.prototype.getAppCheckToken=function(){return(0,Ur.__awaiter)(this,void 0,void 0,function(){var e;return(0,Ur.__generator)(this,function(t){switch(t.label){case 0:return(e=this.appCheckProvider.getImmediate({optional:!0}))?[4,e.getToken()]:[3,2];case 1:return[2,t.sent().token];case 2:return[2,null]}})})},e.prototype.call=function(e,t,n){return(0,Ur.__awaiter)(this,void 0,void 0,function(){var r,i,o,s,a,u,c,l,h,f;return(0,Ur.__generator)(this,function(d){switch(d.label){case 0:return r=this._url(e),t=this.serializer.encode(t),i={data:t},o={},[4,this.contextProvider.getContext()];case 1:return(s=d.sent()).authToken&&(o.Authorization="Bearer "+s.authToken),s.instanceIdToken&&(o["Firebase-Instance-ID-Token"]=s.instanceIdToken),a=function(e){var t,n=new Promise(function(n,r){t=setTimeout(function(){r(new my("deadline-exceeded","deadline-exceeded"))},e)});return{timer:t,promise:n}}(n.timeout||7e4),u=a.timer,c=a.promise,[4,Promise.race([ky(u,this.postJSON(r,i,o)),c,ky(u,this.cancelAllRequests)])];case 2:if(!(l=d.sent()))throw new my("cancelled","Firebase Functions instance was deleted.");if(h=function(e,t,n){var r=function(e){if(e>=200&&e<300)return"ok";switch(e){case 0:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return"internal";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}(e),i=r,o=void 0;try{var s=t&&t.error;if(s){var a=s.status;if("string"==typeof a){if(!vy[a])return new my("internal","internal");r=vy[a],i=a}var u=s.message;"string"==typeof u&&(i=u),void 0!==(o=s.details)&&(o=n.decode(o))}}catch(ly){}return"ok"===r?null:new my(r,i,o)}(l.status,l.json,this.serializer))throw h;if(!l.json)throw new my("internal","Response is not valid JSON object.");if(void 0===(f=l.json.data)&&(f=l.json.result),void 0===f)throw new my("internal","Response is missing data field.");return[2,{data:this.serializer.decode(f)}]}})})},e}();function ky(e,t){return(0,Ur.__awaiter)(this,void 0,void 0,function(){var n;return(0,Ur.__generator)(this,function(r){switch(r.label){case 0:return[4,t];case 1:return n=r.sent(),clearTimeout(e),[2,n]}})})}by=qr.default,wy=fetch.bind(self),Ty={Functions:Iy},by.INTERNAL.registerComponent(new py.Component("functions",function(e,t){var n=t.instanceIdentifier,r=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal"),o=e.getProvider("app-check-internal"),s=e.getProvider("messaging");return new Iy(r,i,s,o,n,wy)},"PUBLIC").setServiceProps(Ty).setMultipleInstances(!0)),qr.default.registerVersion("@firebase/functions","0.6.14");var Cy,Sy=n(676),Ay="w:0.4.31",xy=((Cy={})["missing-app-config-values"]='Missing App configuration value: "{$valueName}"',Cy["not-registered"]="Firebase Installation is not registered.",Cy["installation-not-found"]="Firebase Installation not found.",Cy["request-failed"]='{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',Cy["app-offline"]="Could not process request. Application offline.",Cy["delete-pending-registration"]="Can't delete installation while there is a pending registration request.",Cy),Ny=new Vr.ErrorFactory("installations","Installations",xy);function Dy(e){return e instanceof Vr.FirebaseError&&e.code.includes("request-failed")}function Py(e){return"https://firebaseinstallations.googleapis.com/v1/projects/"+e.projectId+"/installations"}function Oy(e){return{token:e.token,requestStatus:2,expiresIn:(t=e.expiresIn,Number(t.replace("s","000"))),creationTime:Date.now()};var t}function Ry(e,t){return(0,Ur.__awaiter)(this,void 0,void 0,function(){var n,r;return(0,Ur.__generator)(this,function(i){switch(i.label){case 0:return[4,t.json()];case 1:return n=i.sent(),[2,Ny.create("request-failed",{requestName:e,serverCode:(r=n.error).code,serverMessage:r.message,serverStatus:r.status})]}})})}function Ly(e){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":e.apiKey})}function My(e,t){var n=t.refreshToken,r=Ly(e);return r.append("Authorization",function(e){return"FIS_v2 "+e}(n)),r}function Fy(e){return(0,Ur.__awaiter)(this,void 0,void 0,function(){var t;return(0,Ur.__generator)(this,function(n){switch(n.label){case 0:return[4,e()];case 1:return(t=n.sent()).status>=500&&t.status<600?[2,e()]:[2,t]}})})}function jy(e,t){var n=t.fid;return(0,Ur.__awaiter)(this,void 0,void 0,function(){var t,r,i,o,s;return(0,Ur.__generator)(this,function(a){switch(a.label){case 0:return t=Py(e),r=Ly(e),i={method:"POST",headers:r,body:JSON.stringify({fid:n,authVersion:"FIS_v2",appId:e.appId,sdkVersion:Ay})},[4,Fy(function(){return fetch(t,i)})];case 1:return(o=a.sent()).ok?[4,o.json()]:[3,3];case 2:return[2,{fid:(s=a.sent()).fid||n,registrationStatus:2,refreshToken:s.refreshToken,authToken:Oy(s.authToken)}];case 3:return[4,Ry("Create Installation",o)];case 4:throw a.sent()}})})}function qy(e){return new Promise(function(t){setTimeout(t,e)})}var Uy=/^[cdef][\w-]{21}$/;function Vy(){try{var e=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(e),e[0]=112+e[0]%16;var t=function(e){return(t=e,btoa(String.fromCharCode.apply(String,(0,Ur.__spreadArray)([],(0,Ur.__read)(t)))).replace(/\+/g,"-").replace(/\//g,"_")).substr(0,22);var t}(e);return Uy.test(t)?t:""}catch(Qv){return""}}function By(e){return e.appName+"!"+e.appId}var Hy=new Map;function Wy(e,t){var n=By(e);Ky(n,t),function(e,t){var n=Gy();n&&n.postMessage({key:e,fid:t}),Qy()}(n,t)}function Ky(e,t){var n,r,i=Hy.get(e);if(i)try{for(var o=(0,Ur.__values)(i),s=o.next();!s.done;s=o.next())(0,s.value)(t)}catch(a){n={error:a}}finally{try{s&&!s.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}}var zy=null;function Gy(){return!zy&&"BroadcastChannel"in self&&((zy=new BroadcastChannel("[Firebase] FID Change")).onmessage=function(e){Ky(e.data.key,e.data.fid)}),zy}function Qy(){0===Hy.size&&zy&&(zy.close(),zy=null)}var $y,Yy="firebase-installations-store",Xy=null;function Zy(){return Xy||(Xy=(0,Sy.openDb)("firebase-installations-database",1,function(e){switch(e.oldVersion){case 0:e.createObjectStore(Yy)}})),Xy}function Jy(e,t){return(0,Ur.__awaiter)(this,void 0,void 0,function(){var n,r,i,o,s;return(0,Ur.__generator)(this,function(a){switch(a.label){case 0:return n=By(e),[4,Zy()];case 1:return r=a.sent(),i=r.transaction(Yy,"readwrite"),[4,(o=i.objectStore(Yy)).get(n)];case 2:return s=a.sent(),[4,o.put(t,n)];case 3:return a.sent(),[4,i.complete];case 4:return a.sent(),s&&s.fid===t.fid||Wy(e,t.fid),[2,t]}})})}function e_(e){return(0,Ur.__awaiter)(this,void 0,void 0,function(){var t,n,r;return(0,Ur.__generator)(this,function(i){switch(i.label){case 0:return t=By(e),[4,Zy()];case 1:return n=i.sent(),[4,(r=n.transaction(Yy,"readwrite")).objectStore(Yy).delete(t)];case 2:return i.sent(),[4,r.complete];case 3:return i.sent(),[2]}})})}function t_(e,t){return(0,Ur.__awaiter)(this,void 0,void 0,function(){var n,r,i,o,s,a;return(0,Ur.__generator)(this,function(u){switch(u.label){case 0:return n=By(e),[4,Zy()];case 1:return r=u.sent(),i=r.transaction(Yy,"readwrite"),[4,(o=i.objectStore(Yy)).get(n)];case 2:return s=u.sent(),void 0!==(a=t(s))?[3,4]:[4,o.delete(n)];case 3:return u.sent(),[3,6];case 4:return[4,o.put(a,n)];case 5:u.sent(),u.label=6;case 6:return[4,i.complete];case 7:return u.sent(),!a||s&&s.fid===a.fid||Wy(e,a.fid),[2,a]}})})}function n_(e){return(0,Ur.__awaiter)(this,void 0,void 0,function(){var t,n,r;return(0,Ur.__generator)(this,function(i){switch(i.label){case 0:return[4,t_(e,function(n){var r=function(e){return o_(e||{fid:Vy(),registrationStatus:0})}(n),i=function(e,t){if(0===t.registrationStatus){if(!navigator.onLine)return{installationEntry:t,registrationPromise:Promise.reject(Ny.create("app-offline"))};var n={fid:t.fid,registrationStatus:1,registrationTime:Date.now()};return{installationEntry:n,registrationPromise:function(e,t){return(0,Ur.__awaiter)(this,void 0,void 0,function(){var n,r;return(0,Ur.__generator)(this,function(i){switch(i.label){case 0:return i.trys.push([0,2,,7]),[4,jy(e,t)];case 1:return n=i.sent(),[2,Jy(e,n)];case 2:return Dy(r=i.sent())&&409===r.customData.serverCode?[4,e_(e)]:[3,4];case 3:return i.sent(),[3,6];case 4:return[4,Jy(e,{fid:t.fid,registrationStatus:0})];case 5:i.sent(),i.label=6;case 6:throw r;case 7:return[2]}})})}(e,n)}}return 1===t.registrationStatus?{installationEntry:t,registrationPromise:r_(e)}:{installationEntry:t}}(e,r);return t=i.registrationPromise,i.installationEntry})];case 1:return""!==(n=i.sent()).fid?[3,3]:(r={},[4,t]);case 2:return[2,(r.installationEntry=i.sent(),r)];case 3:return[2,{installationEntry:n,registrationPromise:t}]}})})}function r_(e){return(0,Ur.__awaiter)(this,void 0,void 0,function(){var t,n,r,i;return(0,Ur.__generator)(this,function(o){switch(o.label){case 0:return[4,i_(e)];case 1:t=o.sent(),o.label=2;case 2:return 1!==t.registrationStatus?[3,5]:[4,qy(100)];case 3:return o.sent(),[4,i_(e)];case 4:return t=o.sent(),[3,2];case 5:return 0!==t.registrationStatus?[3,7]:[4,n_(e)];case 6:return n=o.sent(),r=n.installationEntry,(i=n.registrationPromise)?[2,i]:[2,r];case 7:return[2,t]}})})}function i_(e){return t_(e,function(e){if(!e)throw Ny.create("installation-not-found");return o_(e)})}function o_(e){return 1===(t=e).registrationStatus&&t.registrationTime+1e4<Date.now()?{fid:e.fid,registrationStatus:0}:e;var t}function s_(e,t){var n=e.appConfig,r=e.platformLoggerProvider;return(0,Ur.__awaiter)(this,void 0,void 0,function(){var e,i,o,s,a;return(0,Ur.__generator)(this,function(u){switch(u.label){case 0:return e=function(e,t){var n=t.fid;return Py(e)+"/"+n+"/authTokens:generate"}(n,t),i=My(n,t),(o=r.getImmediate({optional:!0}))&&i.append("x-firebase-client",o.getPlatformInfoString()),s={method:"POST",headers:i,body:JSON.stringify({installation:{sdkVersion:Ay}})},[4,Fy(function(){return fetch(e,s)})];case 1:return(a=u.sent()).ok?[4,a.json()]:[3,3];case 2:return[2,Oy(u.sent())];case 3:return[4,Ry("Generate Auth Token",a)];case 4:throw u.sent()}})})}function a_(e,t){return void 0===t&&(t=!1),(0,Ur.__awaiter)(this,void 0,void 0,function(){var n,r,i;return(0,Ur.__generator)(this,function(o){switch(o.label){case 0:return[4,t_(e.appConfig,function(r){if(!c_(r))throw Ny.create("not-registered");var i,o=r.authToken;if(!t&&2===(i=o).requestStatus&&!function(e){var t=Date.now();return t<e.creationTime||e.creationTime+e.expiresIn<t+36e5}(i))return r;if(1===o.requestStatus)return n=function(e,t){return(0,Ur.__awaiter)(this,void 0,void 0,function(){var n,r;return(0,Ur.__generator)(this,function(i){switch(i.label){case 0:return[4,u_(e.appConfig)];case 1:n=i.sent(),i.label=2;case 2:return 1!==n.authToken.requestStatus?[3,5]:[4,qy(100)];case 3:return i.sent(),[4,u_(e.appConfig)];case 4:return n=i.sent(),[3,2];case 5:return 0===(r=n.authToken).requestStatus?[2,a_(e,t)]:[2,r]}})})}(e,t),r;if(!navigator.onLine)throw Ny.create("app-offline");var s=function(e){var t={requestStatus:1,requestTime:Date.now()};return(0,Ur.__assign)((0,Ur.__assign)({},e),{authToken:t})}(r);return n=function(e,t){return(0,Ur.__awaiter)(this,void 0,void 0,function(){var n,r,i;return(0,Ur.__generator)(this,function(o){switch(o.label){case 0:return o.trys.push([0,3,,8]),[4,s_(e,t)];case 1:return n=o.sent(),i=(0,Ur.__assign)((0,Ur.__assign)({},t),{authToken:n}),[4,Jy(e.appConfig,i)];case 2:return o.sent(),[2,n];case 3:return!Dy(r=o.sent())||401!==r.customData.serverCode&&404!==r.customData.serverCode?[3,5]:[4,e_(e.appConfig)];case 4:return o.sent(),[3,7];case 5:return i=(0,Ur.__assign)((0,Ur.__assign)({},t),{authToken:{requestStatus:0}}),[4,Jy(e.appConfig,i)];case 6:o.sent(),o.label=7;case 7:throw r;case 8:return[2]}})})}(e,s),s})];case 1:return r=o.sent(),n?[4,n]:[3,3];case 2:return i=o.sent(),[3,4];case 3:i=r.authToken,o.label=4;case 4:return[2,i]}})})}function u_(e){return t_(e,function(e){if(!c_(e))throw Ny.create("not-registered");var t;return 1===(t=e.authToken).requestStatus&&t.requestTime+1e4<Date.now()?(0,Ur.__assign)((0,Ur.__assign)({},e),{authToken:{requestStatus:0}}):e})}function c_(e){return void 0!==e&&2===e.registrationStatus}function l_(e){return(0,Ur.__awaiter)(this,void 0,void 0,function(){var t;return(0,Ur.__generator)(this,function(n){switch(n.label){case 0:return[4,n_(e)];case 1:return(t=n.sent().registrationPromise)?[4,t]:[3,3];case 2:n.sent(),n.label=3;case 3:return[2]}})})}function h_(e,t){return(0,Ur.__awaiter)(this,void 0,void 0,function(){var n,r,i,o;return(0,Ur.__generator)(this,function(s){switch(s.label){case 0:return n=function(e,t){var n=t.fid;return Py(e)+"/"+n}(e,t),r=My(e,t),i={method:"DELETE",headers:r},[4,Fy(function(){return fetch(n,i)})];case 1:return(o=s.sent()).ok?[3,3]:[4,Ry("Delete Installation",o)];case 2:throw s.sent();case 3:return[2]}})})}function f_(e){return Ny.create("missing-app-config-values",{valueName:e})}!function(e){e.INTERNAL.registerComponent(new py.Component("installations",function(e){var t=e.getProvider("app").getImmediate(),n={appConfig:function(e){var t,n;if(!e||!e.options)throw f_("App Configuration");if(!e.name)throw f_("App Name");try{for(var r=(0,Ur.__values)(["projectId","apiKey","appId"]),i=r.next();!i.done;i=r.next()){var o=i.value;if(!e.options[o])throw f_(o)}}catch(s){t={error:s}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(t)throw t.error}}return{appName:e.name,projectId:e.options.projectId,apiKey:e.options.apiKey,appId:e.options.appId}}(t),platformLoggerProvider:e.getProvider("platform-logger")};return{app:t,getId:function(){return function(e){return(0,Ur.__awaiter)(this,void 0,void 0,function(){var t,n,r;return(0,Ur.__generator)(this,function(i){switch(i.label){case 0:return[4,n_(e.appConfig)];case 1:return t=i.sent(),n=t.installationEntry,(r=t.registrationPromise)?r.catch(console.error):a_(e).catch(console.error),[2,n.fid]}})})}(n)},getToken:function(e){return function(e,t){return void 0===t&&(t=!1),(0,Ur.__awaiter)(this,void 0,void 0,function(){return(0,Ur.__generator)(this,function(n){switch(n.label){case 0:return[4,l_(e.appConfig)];case 1:return n.sent(),[4,a_(e,t)];case 2:return[2,n.sent().token]}})})}(n,e)},delete:function(){return function(e){return(0,Ur.__awaiter)(this,void 0,void 0,function(){var t,n;return(0,Ur.__generator)(this,function(r){switch(r.label){case 0:return[4,t_(t=e.appConfig,function(e){if(!e||0!==e.registrationStatus)return e})];case 1:if(!(n=r.sent()))return[3,6];if(1!==n.registrationStatus)return[3,2];throw Ny.create("delete-pending-registration");case 2:if(2!==n.registrationStatus)return[3,6];if(navigator.onLine)return[3,3];throw Ny.create("app-offline");case 3:return[4,h_(t,n)];case 4:return r.sent(),[4,e_(t)];case 5:r.sent(),r.label=6;case 6:return[2]}})})}(n)},onIdChange:function(e){return function(e,t){var n=e.appConfig;return function(e,t){Gy();var n=By(e),r=Hy.get(n);r||(r=new Set,Hy.set(n,r)),r.add(t)}(n,t),function(){!function(e,t){var n=By(e),r=Hy.get(n);r&&(r.delete(t),0===r.size&&Hy.delete(n),Qy())}(n,t)}}(n,e)}}},"PUBLIC")),e.registerVersion("@firebase/installations","0.4.31")}(qr.default);var d_=(($y={})["missing-app-config-values"]='Missing App configuration value: "{$valueName}"',$y["only-available-in-window"]="This method is available in a Window context.",$y["only-available-in-sw"]="This method is available in a service worker context.",$y["permission-default"]="The notification permission was not granted and dismissed instead.",$y["permission-blocked"]="The notification permission was not granted and blocked instead.",$y["unsupported-browser"]="This browser doesn't support the API's required to use the firebase SDK.",$y["failed-service-worker-registration"]="We are unable to register the default service worker. {$browserErrorMessage}",$y["token-subscribe-failed"]="A problem occurred while subscribing the user to FCM: {$errorInfo}",$y["token-subscribe-no-token"]="FCM returned no token when subscribing the user to push.",$y["token-unsubscribe-failed"]="A problem occurred while unsubscribing the user from FCM: {$errorInfo}",$y["token-update-failed"]="A problem occurred while updating the user from FCM: {$errorInfo}",$y["token-update-no-token"]="FCM returned no token when updating the user to push.",$y["use-sw-after-get-token"]="The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.",$y["invalid-sw-registration"]="The input to useServiceWorker() must be a ServiceWorkerRegistration.",$y["invalid-bg-handler"]="The input to setBackgroundMessageHandler() must be a function.",$y["invalid-vapid-key"]="The public VAPID key must be a string.",$y["use-vapid-key-after-get-token"]="The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used.",$y),p_=new Vr.ErrorFactory("messaging","Messaging",d_),g_="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",v_=(()=>(function(e){e.PUSH_RECEIVED="push-received",e.NOTIFICATION_CLICKED="notification-clicked"}(v_||(v_={})),v_))();function m_(e){var t=new Uint8Array(e);return btoa(String.fromCharCode.apply(String,(0,Ur.__spreadArray)([],(0,Ur.__read)(t)))).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function y_(e){for(var t=(e+"=".repeat((4-e.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),n=atob(t),r=new Uint8Array(n.length),i=0;i<n.length;++i)r[i]=n.charCodeAt(i);return r}var __="fcm_token_details_db",b_="fcm_token_object_Store";function w_(e){return(0,Ur.__awaiter)(this,void 0,void 0,function(){var t,n=this;return(0,Ur.__generator)(this,function(r){switch(r.label){case 0:return"databases"in indexedDB?[4,indexedDB.databases()]:[3,2];case 1:if(!r.sent().map(function(e){return e.name}).includes(__))return[2,null];r.label=2;case 2:return t=null,[4,(0,Sy.openDb)(__,5,function(r){return(0,Ur.__awaiter)(n,void 0,void 0,function(){var n,i,o,s;return(0,Ur.__generator)(this,function(a){switch(a.label){case 0:return r.oldVersion<2?[2]:r.objectStoreNames.contains(b_)?[4,(n=r.transaction.objectStore(b_)).index("fcmSenderId").get(e)]:[2];case 1:return i=a.sent(),[4,n.clear()];case 2:if(a.sent(),!i)return[2];if(2===r.oldVersion){if(!(o=i).auth||!o.p256dh||!o.endpoint)return[2];t={token:o.fcmToken,createTime:null!==(s=o.createTime)&&void 0!==s?s:Date.now(),subscriptionOptions:{auth:o.auth,p256dh:o.p256dh,endpoint:o.endpoint,swScope:o.swScope,vapidKey:"string"==typeof o.vapidKey?o.vapidKey:m_(o.vapidKey)}}}else(3===r.oldVersion||4===r.oldVersion)&&(t={token:(o=i).fcmToken,createTime:o.createTime,subscriptionOptions:{auth:m_(o.auth),p256dh:m_(o.p256dh),endpoint:o.endpoint,swScope:o.swScope,vapidKey:m_(o.vapidKey)}});return[2]}})})})];case 3:return r.sent().close(),[4,(0,Sy.deleteDb)(__)];case 4:return r.sent(),[4,(0,Sy.deleteDb)("fcm_vapid_details_db")];case 5:return r.sent(),[4,(0,Sy.deleteDb)("undefined")];case 6:return r.sent(),[2,T_(t)?t:null]}})})}function T_(e){if(!e||!e.subscriptionOptions)return!1;var t=e.subscriptionOptions;return"number"==typeof e.createTime&&e.createTime>0&&"string"==typeof e.token&&e.token.length>0&&"string"==typeof t.auth&&t.auth.length>0&&"string"==typeof t.p256dh&&t.p256dh.length>0&&"string"==typeof t.endpoint&&t.endpoint.length>0&&"string"==typeof t.swScope&&t.swScope.length>0&&"string"==typeof t.vapidKey&&t.vapidKey.length>0}var E_="firebase-messaging-store",I_=null;function k_(){return I_||(I_=(0,Sy.openDb)("firebase-messaging-database",1,function(e){switch(e.oldVersion){case 0:e.createObjectStore(E_)}})),I_}function C_(e){return(0,Ur.__awaiter)(this,void 0,void 0,function(){var t,n,r;return(0,Ur.__generator)(this,function(i){switch(i.label){case 0:return t=x_(e),[4,k_()];case 1:return[4,i.sent().transaction(E_).objectStore(E_).get(t)];case 2:return(n=i.sent())?[2,n]:[3,3];case 3:return[4,w_(e.appConfig.senderId)];case 4:return(r=i.sent())?[4,S_(e,r)]:[3,6];case 5:return i.sent(),[2,r];case 6:return[2]}})})}function S_(e,t){return(0,Ur.__awaiter)(this,void 0,void 0,function(){var n,r,i;return(0,Ur.__generator)(this,function(o){switch(o.label){case 0:return n=x_(e),[4,k_()];case 1:return r=o.sent(),[4,(i=r.transaction(E_,"readwrite")).objectStore(E_).put(t,n)];case 2:return o.sent(),[4,i.complete];case 3:return o.sent(),[2,t]}})})}function A_(e){return(0,Ur.__awaiter)(this,void 0,void 0,function(){var t,n,r;return(0,Ur.__generator)(this,function(i){switch(i.label){case 0:return t=x_(e),[4,k_()];case 1:return n=i.sent(),[4,(r=n.transaction(E_,"readwrite")).objectStore(E_).delete(t)];case 2:return i.sent(),[4,r.complete];case 3:return i.sent(),[2]}})})}function x_(e){return e.appConfig.appId}function N_(e,t){return(0,Ur.__awaiter)(this,void 0,void 0,function(){var n,r,i,o,s;return(0,Ur.__generator)(this,function(a){switch(a.label){case 0:return[4,R_(e)];case 1:n=a.sent(),r=L_(t),i={method:"POST",headers:n,body:JSON.stringify(r)},a.label=2;case 2:return a.trys.push([2,5,,6]),[4,fetch(O_(e.appConfig),i)];case 3:return[4,a.sent().json()];case 4:return o=a.sent(),[3,6];case 5:throw s=a.sent(),p_.create("token-subscribe-failed",{errorInfo:s});case 6:if(o.error)throw p_.create("token-subscribe-failed",{errorInfo:o.error.message});if(!o.token)throw p_.create("token-subscribe-no-token");return[2,o.token]}})})}function D_(e,t){return(0,Ur.__awaiter)(this,void 0,void 0,function(){var n,r,i,o,s;return(0,Ur.__generator)(this,function(a){switch(a.label){case 0:return[4,R_(e)];case 1:n=a.sent(),r=L_(t.subscriptionOptions),i={method:"PATCH",headers:n,body:JSON.stringify(r)},a.label=2;case 2:return a.trys.push([2,5,,6]),[4,fetch(O_(e.appConfig)+"/"+t.token,i)];case 3:return[4,a.sent().json()];case 4:return o=a.sent(),[3,6];case 5:throw s=a.sent(),p_.create("token-update-failed",{errorInfo:s});case 6:if(o.error)throw p_.create("token-update-failed",{errorInfo:o.error.message});if(!o.token)throw p_.create("token-update-no-token");return[2,o.token]}})})}function P_(e,t){return(0,Ur.__awaiter)(this,void 0,void 0,function(){var n,r,i,o;return(0,Ur.__generator)(this,function(s){switch(s.label){case 0:return[4,R_(e)];case 1:n=s.sent(),r={method:"DELETE",headers:n},s.label=2;case 2:return s.trys.push([2,5,,6]),[4,fetch(O_(e.appConfig)+"/"+t,r)];case 3:return[4,s.sent().json()];case 4:if((i=s.sent()).error)throw p_.create("token-unsubscribe-failed",{errorInfo:i.error.message});return[3,6];case 5:throw o=s.sent(),p_.create("token-unsubscribe-failed",{errorInfo:o});case 6:return[2]}})})}function O_(e){return"https://fcmregistrations.googleapis.com/v1/projects/"+e.projectId+"/registrations"}function R_(e){var t=e.appConfig,n=e.installations;return(0,Ur.__awaiter)(this,void 0,void 0,function(){var e;return(0,Ur.__generator)(this,function(r){switch(r.label){case 0:return[4,n.getToken()];case 1:return e=r.sent(),[2,new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t.apiKey,"x-goog-firebase-installations-auth":"FIS "+e})]}})})}function L_(e){var t=e.vapidKey,n={web:{endpoint:e.endpoint,auth:e.auth,p256dh:e.p256dh}};return t!==g_&&(n.web.applicationPubKey=t),n}function M_(e,t,n){return(0,Ur.__awaiter)(this,void 0,void 0,function(){var r,i,o,s;return(0,Ur.__generator)(this,function(a){switch(a.label){case 0:if("granted"!==Notification.permission)throw p_.create("permission-blocked");return[4,U_(t,n)];case 1:return r=a.sent(),[4,C_(e)];case 2:return i=a.sent(),o={vapidKey:n,swScope:t.scope,endpoint:r.endpoint,auth:m_(r.getKey("auth")),p256dh:m_(r.getKey("p256dh"))},i?[3,3]:[2,q_(e,o)];case 3:if(l=(c=o).endpoint===(u=i.subscriptionOptions).endpoint,c.vapidKey===u.vapidKey&&l&&c.auth===u.auth&&c.p256dh===u.p256dh)return[3,8];a.label=4;case 4:return a.trys.push([4,6,,7]),[4,P_(e,i.token)];case 5:return a.sent(),[3,7];case 6:return s=a.sent(),console.warn(s),[3,7];case 7:return[2,q_(e,o)];case 8:return Date.now()>=i.createTime+6048e5?[2,j_({token:i.token,createTime:Date.now(),subscriptionOptions:o},e,t)]:[2,i.token];case 9:return[2]}var u,c,l})})}function F_(e,t){return(0,Ur.__awaiter)(this,void 0,void 0,function(){var n,r;return(0,Ur.__generator)(this,function(i){switch(i.label){case 0:return[4,C_(e)];case 1:return(n=i.sent())?[4,P_(e,n.token)]:[3,4];case 2:return i.sent(),[4,A_(e)];case 3:i.sent(),i.label=4;case 4:return[4,t.pushManager.getSubscription()];case 5:return(r=i.sent())?[2,r.unsubscribe()]:[2,!0]}})})}function j_(e,t,n){return(0,Ur.__awaiter)(this,void 0,void 0,function(){var r,i,o;return(0,Ur.__generator)(this,function(s){switch(s.label){case 0:return s.trys.push([0,3,,5]),[4,D_(t,e)];case 1:return r=s.sent(),i=(0,Ur.__assign)((0,Ur.__assign)({},e),{token:r,createTime:Date.now()}),[4,S_(t,i)];case 2:return s.sent(),[2,r];case 3:return o=s.sent(),[4,F_(t,n)];case 4:throw s.sent(),o;case 5:return[2]}})})}function q_(e,t){return(0,Ur.__awaiter)(this,void 0,void 0,function(){var n,r;return(0,Ur.__generator)(this,function(i){switch(i.label){case 0:return[4,N_(e,t)];case 1:return n=i.sent(),r={token:n,createTime:Date.now(),subscriptionOptions:t},[4,S_(e,r)];case 2:return i.sent(),[2,r.token]}})})}function U_(e,t){return(0,Ur.__awaiter)(this,void 0,void 0,function(){var n;return(0,Ur.__generator)(this,function(r){switch(r.label){case 0:return[4,e.pushManager.getSubscription()];case 1:return(n=r.sent())?[2,n]:[2,e.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:y_(t)})]}})})}function V_(e){return"object"==typeof e&&!!e&&"google.c.a.c_id"in e}function B_(e){return new Promise(function(t){setTimeout(t,e)})}var H_=function(){function e(e){var t=this;this.firebaseDependencies=e,this.isOnBackgroundMessageUsed=null,this.vapidKey=null,this.bgMessageHandler=null,self.addEventListener("push",function(e){e.waitUntil(t.onPush(e))}),self.addEventListener("pushsubscriptionchange",function(e){e.waitUntil(t.onSubChange(e))}),self.addEventListener("notificationclick",function(e){e.waitUntil(t.onNotificationClick(e))})}return Object.defineProperty(e.prototype,"app",{get:function(){return this.firebaseDependencies.app},enumerable:!1,configurable:!0}),e.prototype.setBackgroundMessageHandler=function(e){if(this.isOnBackgroundMessageUsed=!1,!e||"function"!=typeof e)throw p_.create("invalid-bg-handler");this.bgMessageHandler=e},e.prototype.onBackgroundMessage=function(e){var t=this;return this.isOnBackgroundMessageUsed=!0,this.bgMessageHandler=e,function(){t.bgMessageHandler=null}},e.prototype.getToken=function(){var e,t;return(0,Ur.__awaiter)(this,void 0,void 0,function(){var n;return(0,Ur.__generator)(this,function(r){switch(r.label){case 0:return this.vapidKey?[3,2]:[4,C_(this.firebaseDependencies)];case 1:n=r.sent(),this.vapidKey=null!==(t=null===(e=null==n?void 0:n.subscriptionOptions)||void 0===e?void 0:e.vapidKey)&&void 0!==t?t:g_,r.label=2;case 2:return[2,M_(this.firebaseDependencies,self.registration,this.vapidKey)]}})})},e.prototype.deleteToken=function(){return F_(this.firebaseDependencies,self.registration)},e.prototype.requestPermission=function(){throw p_.create("only-available-in-window")},e.prototype.usePublicVapidKey=function(e){if(null!==this.vapidKey)throw p_.create("use-vapid-key-after-get-token");if("string"!=typeof e||0===e.length)throw p_.create("invalid-vapid-key");this.vapidKey=e},e.prototype.useServiceWorker=function(){throw p_.create("only-available-in-window")},e.prototype.onMessage=function(){throw p_.create("only-available-in-window")},e.prototype.onTokenRefresh=function(){throw p_.create("only-available-in-window")},e.prototype.onPush=function(e){return(0,Ur.__awaiter)(this,void 0,void 0,function(){var t,n,r,i;return(0,Ur.__generator)(this,function(o){switch(o.label){case 0:return(t=function(e){var t=e.data;if(!t)return null;try{return t.json()}catch(n){return null}}(e))?[4,G_()]:(console.debug("FirebaseMessaging: failed to get parsed MessagePayload from the PushEvent. Skip handling the push."),[2]);case 1:return function(e){return e.some(function(e){return"visible"===e.visibilityState&&!e.url.startsWith("chrome-extension://")})}(n=o.sent())?[2,z_(n,t)]:(r=!1,t.notification?[4,Q_(W_(t))]:[3,3]);case 2:o.sent(),r=!0,o.label=3;case 3:return!0===r&&!1===this.isOnBackgroundMessageUsed?[2]:(this.bgMessageHandler&&(i=function(e){var t={from:e.from,collapseKey:e.collapse_key};return function(e,t){if(t.notification){e.notification={};var n=t.notification.title;n&&(e.notification.title=n);var r=t.notification.body;r&&(e.notification.body=r);var i=t.notification.image;i&&(e.notification.image=i)}}(t,e),function(e,t){t.data&&(e.data=t.data)}(t,e),function(e,t){if(t.fcmOptions){e.fcmOptions={};var n=t.fcmOptions.link;n&&(e.fcmOptions.link=n);var r=t.fcmOptions.analytics_label;r&&(e.fcmOptions.analyticsLabel=r)}}(t,e),t}(t),"function"==typeof this.bgMessageHandler?this.bgMessageHandler(i):this.bgMessageHandler.next(i)),[4,B_(1e3)]);case 4:return o.sent(),[2]}})})},e.prototype.onSubChange=function(e){var t,n;return(0,Ur.__awaiter)(this,void 0,void 0,function(){var r;return(0,Ur.__generator)(this,function(i){switch(i.label){case 0:return e.newSubscription?[3,2]:[4,F_(this.firebaseDependencies,self.registration)];case 1:return i.sent(),[2];case 2:return[4,C_(this.firebaseDependencies)];case 3:return r=i.sent(),[4,F_(this.firebaseDependencies,self.registration)];case 4:return i.sent(),[4,M_(this.firebaseDependencies,self.registration,null!==(n=null===(t=null==r?void 0:r.subscriptionOptions)||void 0===t?void 0:t.vapidKey)&&void 0!==n?n:g_)];case 5:return i.sent(),[2]}})})},e.prototype.onNotificationClick=function(e){var t,n;return(0,Ur.__awaiter)(this,void 0,void 0,function(){var r,i,o,s,a;return(0,Ur.__generator)(this,function(u){switch(u.label){case 0:return(r=null===(n=null===(t=e.notification)||void 0===t?void 0:t.data)||void 0===n?void 0:n.FCM_MSG)?e.action?[2]:(e.stopImmediatePropagation(),e.notification.close(),(i=function(e){var t,n,r;return(null!==(n=null===(t=e.fcmOptions)||void 0===t?void 0:t.link)&&void 0!==n?n:null===(r=e.notification)||void 0===r?void 0:r.click_action)||(V_(e.data)?self.location.origin:null)}(r))?(o=new URL(i,self.location.href),s=new URL(self.location.origin),o.host!==s.host?[2]:[4,K_(o)]):[2]):[2];case 1:return(a=u.sent())?[3,4]:[4,self.clients.openWindow(i)];case 2:return a=u.sent(),[4,B_(3e3)];case 3:return u.sent(),[3,6];case 4:return[4,a.focus()];case 5:a=u.sent(),u.label=6;case 6:return a?(r.messageType=v_.NOTIFICATION_CLICKED,r.isFirebaseMessaging=!0,[2,a.postMessage(r)]):[2]}})})},e}();function W_(e){var t,n=(0,Ur.__assign)({},e.notification);return n.data=((t={}).FCM_MSG=e,t),n}function K_(e){return(0,Ur.__awaiter)(this,void 0,void 0,function(){var t,n,r,i,o,s,a;return(0,Ur.__generator)(this,function(u){switch(u.label){case 0:return[4,G_()];case 1:t=u.sent();try{for(n=(0,Ur.__values)(t),r=n.next();!r.done;r=n.next())if(i=r.value,o=new URL(i.url,self.location.href),e.host===o.host)return[2,i]}catch(c){s={error:c}}finally{try{r&&!r.done&&(a=n.return)&&a.call(n)}finally{if(s)throw s.error}}return[2,null]}})})}function z_(e,t){var n,r;t.isFirebaseMessaging=!0,t.messageType=v_.PUSH_RECEIVED;try{for(var i=(0,Ur.__values)(e),o=i.next();!o.done;o=i.next())o.value.postMessage(t)}catch(s){n={error:s}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}}function G_(){return self.clients.matchAll({type:"window",includeUncontrolled:!0})}function Q_(e){var t,n=e.actions,r=Notification.maxActions;return n&&r&&n.length>r&&console.warn("This browser only supports "+r+" actions. The remaining actions will not be displayed."),self.registration.showNotification(null!==(t=e.title)&&void 0!==t?t:"",e)}var $_=function(){function e(e){var t=this;this.firebaseDependencies=e,this.vapidKey=null,this.onMessageCallback=null,navigator.serviceWorker.addEventListener("message",function(e){return t.messageEventListener(e)})}return Object.defineProperty(e.prototype,"app",{get:function(){return this.firebaseDependencies.app},enumerable:!1,configurable:!0}),e.prototype.messageEventListener=function(e){return(0,Ur.__awaiter)(this,void 0,void 0,function(){var t,n;return(0,Ur.__generator)(this,function(r){switch(r.label){case 0:return(t=e.data).isFirebaseMessaging?(this.onMessageCallback&&t.messageType===v_.PUSH_RECEIVED&&("function"==typeof this.onMessageCallback?this.onMessageCallback(function(e){return delete e.messageType,delete e.isFirebaseMessaging,e}(Object.assign({},t))):this.onMessageCallback.next(Object.assign({},t))),V_(n=t.data)&&"1"===n["google.c.a.e"]?[4,this.logEvent(t.messageType,n)]:[3,2]):[2];case 1:r.sent(),r.label=2;case 2:return[2]}})})},e.prototype.getVapidKey=function(){return this.vapidKey},e.prototype.getSwReg=function(){return this.swRegistration},e.prototype.getToken=function(e){return(0,Ur.__awaiter)(this,void 0,void 0,function(){return(0,Ur.__generator)(this,function(t){switch(t.label){case 0:return"default"!==Notification.permission?[3,2]:[4,Notification.requestPermission()];case 1:t.sent(),t.label=2;case 2:if("granted"!==Notification.permission)throw p_.create("permission-blocked");return[4,this.updateVapidKey(null==e?void 0:e.vapidKey)];case 3:return t.sent(),[4,this.updateSwReg(null==e?void 0:e.serviceWorkerRegistration)];case 4:return t.sent(),[2,M_(this.firebaseDependencies,this.swRegistration,this.vapidKey)]}})})},e.prototype.updateVapidKey=function(e){return(0,Ur.__awaiter)(this,void 0,void 0,function(){return(0,Ur.__generator)(this,function(t){return e?this.vapidKey=e:this.vapidKey||(this.vapidKey=g_),[2]})})},e.prototype.updateSwReg=function(e){return(0,Ur.__awaiter)(this,void 0,void 0,function(){return(0,Ur.__generator)(this,function(t){switch(t.label){case 0:return e||this.swRegistration?[3,2]:[4,this.registerDefaultSw()];case 1:t.sent(),t.label=2;case 2:if(!e&&this.swRegistration)return[2];if(!(e instanceof ServiceWorkerRegistration))throw p_.create("invalid-sw-registration");return this.swRegistration=e,[2]}})})},e.prototype.registerDefaultSw=function(){return(0,Ur.__awaiter)(this,void 0,void 0,function(){var e,t;return(0,Ur.__generator)(this,function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),e=this,[4,navigator.serviceWorker.register("/firebase-messaging-sw.js",{scope:"/firebase-cloud-messaging-push-scope"})];case 1:return e.swRegistration=n.sent(),this.swRegistration.update().catch(function(){}),[3,3];case 2:throw t=n.sent(),p_.create("failed-service-worker-registration",{browserErrorMessage:t.message});case 3:return[2]}})})},e.prototype.deleteToken=function(){return(0,Ur.__awaiter)(this,void 0,void 0,function(){return(0,Ur.__generator)(this,function(e){switch(e.label){case 0:return this.swRegistration?[3,2]:[4,this.registerDefaultSw()];case 1:e.sent(),e.label=2;case 2:return[2,F_(this.firebaseDependencies,this.swRegistration)]}})})},e.prototype.requestPermission=function(){return(0,Ur.__awaiter)(this,void 0,void 0,function(){var e;return(0,Ur.__generator)(this,function(t){switch(t.label){case 0:return"granted"===Notification.permission?[2]:[4,Notification.requestPermission()];case 1:if("granted"===(e=t.sent()))return[2];throw p_.create("denied"===e?"permission-blocked":"permission-default")}})})},e.prototype.usePublicVapidKey=function(e){if(null!==this.vapidKey)throw p_.create("use-vapid-key-after-get-token");if("string"!=typeof e||0===e.length)throw p_.create("invalid-vapid-key");this.vapidKey=e},e.prototype.useServiceWorker=function(e){if(!(e instanceof ServiceWorkerRegistration))throw p_.create("invalid-sw-registration");if(this.swRegistration)throw p_.create("use-sw-after-get-token");this.swRegistration=e},e.prototype.onMessage=function(e){var t=this;return this.onMessageCallback=e,function(){t.onMessageCallback=null}},e.prototype.setBackgroundMessageHandler=function(){throw p_.create("only-available-in-sw")},e.prototype.onBackgroundMessage=function(){throw p_.create("only-available-in-sw")},e.prototype.onTokenRefresh=function(){return function(){}},e.prototype.logEvent=function(e,t){return(0,Ur.__awaiter)(this,void 0,void 0,function(){var n;return(0,Ur.__generator)(this,function(r){switch(r.label){case 0:return n=function(e){switch(e){case v_.NOTIFICATION_CLICKED:return"notification_open";case v_.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}(e),[4,this.firebaseDependencies.analyticsProvider.get()];case 1:return r.sent().logEvent(n,{message_id:t["google.c.a.c_id"],message_name:t["google.c.a.c_l"],message_time:t["google.c.a.ts"],message_device_time:Math.floor(Date.now()/1e3)}),[2]}})})},e}();function Y_(e){return p_.create("missing-app-config-values",{valueName:e})}var X_={isSupported:Z_};function Z_(){return self&&"ServiceWorkerGlobalScope"in self?"indexedDB"in self&&null!==indexedDB&&"PushManager"in self&&"Notification"in self&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey"):"indexedDB"in window&&null!==indexedDB&&navigator.cookieEnabled&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")}qr.default.INTERNAL.registerComponent(new py.Component("messaging",function(e){var t=e.getProvider("app").getImmediate(),n={app:t,appConfig:function(e){var t,n;if(!e||!e.options)throw Y_("App Configuration Object");if(!e.name)throw Y_("App Name");var r=e.options;try{for(var i=(0,Ur.__values)(["projectId","apiKey","appId","messagingSenderId"]),o=i.next();!o.done;o=i.next()){var s=o.value;if(!r[s])throw Y_(s)}}catch(a){t={error:a}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}return{appName:e.name,projectId:r.projectId,apiKey:r.apiKey,appId:r.appId,senderId:r.messagingSenderId}}(t),installations:e.getProvider("installations").getImmediate(),analyticsProvider:e.getProvider("analytics-internal")};if(!Z_())throw p_.create("unsupported-browser");return self&&"ServiceWorkerGlobalScope"in self?new H_(n):new $_(n)},"PUBLIC").setServiceProps(X_));var J_="firebasestorage.googleapis.com",eb=function(e){function t(n,r){var i=e.call(this,tb(n),"Firebase Storage: "+r+" ("+tb(n)+")")||this;return i.customData={serverResponse:null},i._baseMessage=i.message,Object.setPrototypeOf(i,t.prototype),i}return(0,Ur.__extends)(t,e),t.prototype._codeEquals=function(e){return tb(e)===this.code},Object.defineProperty(t.prototype,"serverResponse",{get:function(){return this.customData.serverResponse},set:function(e){this.customData.serverResponse=e,this.message=this.customData.serverResponse?this._baseMessage+"\n"+this.customData.serverResponse:this._baseMessage},enumerable:!1,configurable:!0}),t}(Vr.FirebaseError);function tb(e){return"storage/"+e}function nb(){return new eb("unknown","An unknown error occurred, please check the error payload for server response.")}function rb(){return new eb("canceled","User canceled the upload/download.")}function ib(){return new eb("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function ob(e){return new eb("invalid-argument",e)}function sb(){return new eb("app-deleted","The Firebase app was deleted.")}function ab(e){return new eb("invalid-root-operation","The operation '"+e+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function ub(e,t){return new eb("invalid-format","String does not match format '"+e+"': "+t)}function cb(e){throw new eb("internal-error","Internal error: "+e)}var lb={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"},hb=function(e,t){this.data=e,this.contentType=t||null};function fb(e,t){switch(e){case lb.RAW:return new hb(db(t));case lb.BASE64:case lb.BASE64URL:return new hb(pb(e,t));case lb.DATA_URL:return new hb((n=new gb(t)).base64?pb(lb.BASE64,n.rest):function(e){var t;try{t=decodeURIComponent(e)}catch(ly){throw ub(lb.DATA_URL,"Malformed data URL.")}return db(t)}(n.rest),new gb(t).contentType)}var n;throw nb()}function db(e){for(var t=[],n=0;n<e.length;n++){var r=e.charCodeAt(n);if(r<=127)t.push(r);else if(r<=2047)t.push(192|r>>6,128|63&r);else if(55296==(64512&r))if(n<e.length-1&&56320==(64512&e.charCodeAt(n+1))){var i=r,o=e.charCodeAt(++n);t.push(240|(r=65536|(1023&i)<<10|1023&o)>>18,128|r>>12&63,128|r>>6&63,128|63&r)}else t.push(239,191,189);else 56320==(64512&r)?t.push(239,191,189):t.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(t)}function pb(e,t){switch(e){case lb.BASE64:var n=-1!==t.indexOf("-"),r=-1!==t.indexOf("_");if(n||r)throw ub(e,"Invalid character '"+(n?"-":"_")+"' found: is it base64url encoded?");break;case lb.BASE64URL:var i=-1!==t.indexOf("+"),o=-1!==t.indexOf("/");if(i||o)throw ub(e,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");t=t.replace(/-/g,"+").replace(/_/g,"/")}var s;try{s=atob(t)}catch(ly){throw ub(e,"Invalid character found")}for(var a=new Uint8Array(s.length),u=0;u<s.length;u++)a[u]=s.charCodeAt(u);return a}var gb=function(e){this.base64=!1,this.contentType=null;var t=e.match(/^data:([^,]+)?,/);if(null===t)throw ub(lb.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");var n=t[1]||null;null!=n&&(this.base64=function(e,t){return e.length>=t.length&&e.substring(e.length-t.length)===t}(n,";base64"),this.contentType=this.base64?n.substring(0,n.length-";base64".length):n),this.rest=e.substring(e.indexOf(",")+1)},vb={STATE_CHANGED:"state_changed"},mb={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function yb(e){switch(e){case"running":case"pausing":case"canceling":return mb.RUNNING;case"paused":return mb.PAUSED;case"success":return mb.SUCCESS;case"canceled":return mb.CANCELED;case"error":default:return mb.ERROR}}var _b=(()=>(function(e){e[e.NO_ERROR=0]="NO_ERROR",e[e.NETWORK_ERROR=1]="NETWORK_ERROR",e[e.ABORT=2]="ABORT"}(_b||(_b={})),_b))(),bb=function(){function e(){var e=this;this.sent_=!1,this.xhr_=new XMLHttpRequest,this.errorCode_=_b.NO_ERROR,this.sendPromise_=new Promise(function(t){e.xhr_.addEventListener("abort",function(){e.errorCode_=_b.ABORT,t()}),e.xhr_.addEventListener("error",function(){e.errorCode_=_b.NETWORK_ERROR,t()}),e.xhr_.addEventListener("load",function(){t()})})}return e.prototype.send=function(e,t,n,r){if(this.sent_)throw cb("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==r)for(var i in r)r.hasOwnProperty(i)&&this.xhr_.setRequestHeader(i,r[i].toString());return void 0!==n?this.xhr_.send(n):this.xhr_.send(),this.sendPromise_},e.prototype.getErrorCode=function(){if(!this.sent_)throw cb("cannot .getErrorCode() before sending");return this.errorCode_},e.prototype.getStatus=function(){if(!this.sent_)throw cb("cannot .getStatus() before sending");try{return this.xhr_.status}catch(ly){return-1}},e.prototype.getResponseText=function(){if(!this.sent_)throw cb("cannot .getResponseText() before sending");return this.xhr_.responseText},e.prototype.abort=function(){this.xhr_.abort()},e.prototype.getResponseHeader=function(e){return this.xhr_.getResponseHeader(e)},e.prototype.addUploadProgressListener=function(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)},e.prototype.removeUploadProgressListener=function(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)},e}(),wb=function(){function e(){}return e.prototype.createConnection=function(){return new bb},e}(),Tb=function(){function e(e,t){this.bucket=e,this.path_=t}return Object.defineProperty(e.prototype,"path",{get:function(){return this.path_},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isRoot",{get:function(){return 0===this.path.length},enumerable:!1,configurable:!0}),e.prototype.fullServerUrl=function(){var e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)},e.prototype.bucketOnlyServerUrl=function(){return"/b/"+encodeURIComponent(this.bucket)+"/o"},e.makeFromBucketSpec=function(t,n){var r;try{r=e.makeFromUrl(t,n)}catch(ly){return new e(t,"")}if(""===r.path)return r;throw new eb("invalid-default-bucket","Invalid default bucket '"+t+"'.")},e.makeFromUrl=function(t,n){var r=null,i="([A-Za-z0-9.\\-_]+)",o=new RegExp("^gs://"+i+"(/(.*))?$","i");function s(e){e.path_=decodeURIComponent(e.path)}for(var a=n.replace(/[.]/g,"\\."),u=[{regex:o,indices:{bucket:1,path:3},postModify:function(e){"/"===e.path.charAt(e.path.length-1)&&(e.path_=e.path_.slice(0,-1))}},{regex:new RegExp("^https?://"+a+"/v[A-Za-z0-9_]+/b/"+i+"/o(/([^?#]*).*)?$","i"),indices:{bucket:1,path:3},postModify:s},{regex:new RegExp("^https?://"+(n===J_?"(?:storage.googleapis.com|storage.cloud.google.com)":n)+"/"+i+"/([^?#]*)","i"),indices:{bucket:1,path:2},postModify:s}],c=0;c<u.length;c++){var l=u[c],h=l.regex.exec(t);if(h){var f=h[l.indices.path];f||(f=""),r=new e(h[l.indices.bucket],f),l.postModify(r);break}}if(null==r)throw function(e){return new eb("invalid-url","Invalid URL '"+e+"'.")}(t);return r},e}(),Eb=function(){function e(e){this.promise_=Promise.reject(e)}return e.prototype.getPromise=function(){return this.promise_},e.prototype.cancel=function(e){},e}();function Ib(e){return"string"==typeof e||e instanceof String}function kb(e){return Cb()&&e instanceof Blob}function Cb(){return"undefined"!=typeof Blob}function Sb(e,t,n,r){if(r<t)throw ob("Invalid value for '"+e+"'. Expected "+t+" or greater.");if(r>n)throw ob("Invalid value for '"+e+"'. Expected "+n+" or less.")}function Ab(e,t){var n=t.match(/^(\w+):\/\/.+/),r=t;return null==(null==n?void 0:n[1])&&(r="https://"+t),r+"/v0"+e}function xb(e){var t=encodeURIComponent,n="?";for(var r in e)e.hasOwnProperty(r)&&(n=n+(t(r)+"=")+t(e[r])+"&");return n.slice(0,-1)}var Nb=function(){function e(e,t,n,r,i,o,s,a,u,c,l){var h=this;this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.url_=e,this.method_=t,this.headers_=n,this.body_=r,this.successCodes_=i.slice(),this.additionalRetryCodes_=o.slice(),this.callback_=s,this.errorCallback_=a,this.progressCallback_=c,this.timeout_=u,this.pool_=l,this.promise_=new Promise(function(e,t){h.resolve_=e,h.reject_=t,h.start_()})}return e.prototype.start_=function(){var e=this;function t(t,n){var r,i=e.resolve_,o=e.reject_,s=n.connection;if(n.wasSuccessCode)try{var a=e.callback_(s,s.getResponseText());!function(e){return void 0!==e}(a)?i():i(a)}catch(ly){o(ly)}else null!==s?((r=nb()).serverResponse=s.getResponseText(),o(e.errorCallback_?e.errorCallback_(s,r):r)):o(r=n.canceled?e.appDelete_?sb():rb():new eb("retry-limit-exceeded","Max retry time for operation exceeded, please try again."))}this.canceled_?t(0,new Db(!1,null,!0)):this.backoffId_=function(t,n,r){var i=1,o=null,s=!1,a=0;function u(){return 2===a}var c=!1;function l(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];c||(c=!0,n.apply(null,e))}function h(t){o=setTimeout(function(){o=null,function(t,n){if(n)t(!1,new Db(!1,null,!0));else{var r=e.pool_.createConnection();e.pendingConnection_=r,null!==e.progressCallback_&&r.addUploadProgressListener(i),r.send(e.url_,e.method_,e.body_,e.headers_).then(function(){null!==e.progressCallback_&&r.removeUploadProgressListener(i),e.pendingConnection_=null;var n=r.getErrorCode()===_b.NO_ERROR,o=r.getStatus();if(n&&!e.isRetryStatusCode_(o)){var s=-1!==e.successCodes_.indexOf(o);t(!0,new Db(s,r))}else{var a=r.getErrorCode()===_b.ABORT;t(!1,new Db(!1,null,a))}})}function i(t){null!==e.progressCallback_&&e.progressCallback_(t.loaded,t.lengthComputable?t.total:-1)}}(f,u())},t)}function f(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];if(!c)if(e)l.call.apply(l,(0,Ur.__spreadArray)([null,e],t));else{var r;u()||s?l.call.apply(l,(0,Ur.__spreadArray)([null,e],t)):(i<64&&(i*=2),1===a?(a=2,r=0):r=1e3*(i+Math.random()),h(r))}}var d=!1;function p(e){d||(d=!0,c||(null!==o?(e||(a=2),clearTimeout(o),h(0)):e||(a=1)))}return h(0),setTimeout(function(){s=!0,p(!0)},r),p}(0,t,this.timeout_)},e.prototype.getPromise=function(){return this.promise_},e.prototype.cancel=function(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&function(e){e(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()},e.prototype.isRetryStatusCode_=function(e){var t=e>=500&&e<600,n=-1!==[408,429].indexOf(e),r=-1!==this.additionalRetryCodes_.indexOf(e);return t||n||r},e}(),Db=function(e,t,n){this.wasSuccessCode=e,this.connection=t,this.canceled=!!n};function Pb(){return"undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}function Ob(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=Pb();if(void 0!==n){for(var r=new n,i=0;i<e.length;i++)r.append(e[i]);return r.getBlob()}if(Cb())return new Blob(e);throw new eb("unsupported-environment","This browser doesn't seem to support creating Blobs")}var Rb=function(){function e(e,t){var n=0,r="";kb(e)?(this.data_=e,n=e.size,r=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),n=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),n=e.length),this.size_=n,this.type_=r}return e.prototype.size=function(){return this.size_},e.prototype.type=function(){return this.type_},e.prototype.slice=function(t,n){if(kb(this.data_)){var r=function(e,t,n){return e.webkitSlice?e.webkitSlice(t,n):e.mozSlice?e.mozSlice(t,n):e.slice?e.slice(t,n):null}(this.data_,t,n);return null===r?null:new e(r)}return new e(new Uint8Array(this.data_.buffer,t,n-t),!0)},e.getBlob=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];if(Cb()){var r=t.map(function(t){return t instanceof e?t.data_:t});return new e(Ob.apply(null,r))}var i=t.map(function(e){return Ib(e)?fb(lb.RAW,e).data:e.data_}),o=0;i.forEach(function(e){o+=e.byteLength});var s=new Uint8Array(o),a=0;return i.forEach(function(e){for(var t=0;t<e.length;t++)s[a++]=e[t]}),new e(s,!0)},e.prototype.uploadData=function(){return this.data_},e}();function Lb(e){var t;try{t=JSON.parse(e)}catch(ly){return null}return function(e){return"object"==typeof e&&!Array.isArray(e)}(t)?t:null}function Mb(e){var t=e.lastIndexOf("/",e.length-2);return-1===t?e:e.slice(t+1)}function Fb(e,t){return t}var jb=function(e,t,n,r){this.server=e,this.local=t||e,this.writable=!!n,this.xform=r||Fb},qb=null;function Ub(){if(qb)return qb;var e=[];e.push(new jb("bucket")),e.push(new jb("generation")),e.push(new jb("metageneration")),e.push(new jb("name","fullPath",!0));var t=new jb("name");t.xform=function(e,t){return function(e){return!Ib(e)||e.length<2?e:Mb(e)}(t)},e.push(t);var n=new jb("size");return n.xform=function(e,t){return void 0!==t?Number(t):t},e.push(n),e.push(new jb("timeCreated")),e.push(new jb("updated")),e.push(new jb("md5Hash",null,!0)),e.push(new jb("cacheControl",null,!0)),e.push(new jb("contentDisposition",null,!0)),e.push(new jb("contentEncoding",null,!0)),e.push(new jb("contentLanguage",null,!0)),e.push(new jb("contentType",null,!0)),e.push(new jb("metadata","customMetadata",!0)),qb=e}function Vb(e,t,n){var r=Lb(t);return null===r?null:function(e,t,n){for(var r={type:"file"},i=n.length,o=0;o<i;o++){var s=n[o];r[s.local]=s.xform(r,t[s.server])}return function(e,t){Object.defineProperty(e,"ref",{get:function(){var n=new Tb(e.bucket,e.fullPath);return t._makeStorageReference(n)}})}(r,e),r}(e,r,n)}function Bb(e,t){for(var n={},r=t.length,i=0;i<r;i++){var o=t[i];o.writable&&(n[o.server]=e[o.local])}return JSON.stringify(n)}var Hb=function(e,t,n,r){this.url=e,this.method=t,this.handler=n,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]};function Wb(e){if(!e)throw nb()}function Kb(e,t){return function(n,r){var i=Vb(e,r,t);return Wb(null!==i),i}}function zb(e){return function(t,n){var r;return(r=401===t.getStatus()?t.getResponseText().includes("Firebase App Check token is invalid")?new eb("unauthorized-app","This app does not have permission to access Firebase Storage on this project."):new eb("unauthenticated","User is not authenticated, please authenticate using Firebase Authentication and try again."):402===t.getStatus()?new eb("quota-exceeded","Quota for bucket '"+e.bucket+"' exceeded, please view quota on https://firebase.google.com/pricing/."):403===t.getStatus()?new eb("unauthorized","User does not have permission to access '"+e.path+"'."):n).serverResponse=n.serverResponse,r}}function Gb(e){var t=zb(e);return function(n,r){var i=t(n,r);return 404===n.getStatus()&&(i=new eb("object-not-found","Object '"+e.path+"' does not exist.")),i.serverResponse=r.serverResponse,i}}function Qb(e,t,n){var r=Ab(t.fullServerUrl(),e.host),i=e.maxOperationRetryTime,o=new Hb(r,"GET",Kb(e,n),i);return o.errorHandler=Gb(t),o}function $b(e,t,n){var r=Object.assign({},n);return r.fullPath=e.path,r.size=t.size(),r.contentType||(r.contentType=function(e,t){return t&&t.type()||"application/octet-stream"}(0,t)),r}var Yb=function(e,t,n,r){this.current=e,this.total=t,this.finalized=!!n,this.metadata=r||null};function Xb(e,t){var n=null;try{n=e.getResponseHeader("X-Goog-Upload-Status")}catch(ly){Wb(!1)}return Wb(!!n&&-1!==(t||["active"]).indexOf(n)),n}var Zb=262144,Jb=function(e,t,n){if(function(e){return"function"==typeof e}(e)||null!=t||null!=n)this.next=e,this.error=t,this.complete=n;else{var r=e;this.next=r.next,this.error=r.error,this.complete=r.complete}};function ew(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];Promise.resolve().then(function(){return e.apply(void 0,t)})}}var tw=function(){function e(e,t,n){var r=this;void 0===n&&(n=null),this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=t,this._metadata=n,this._mappings=Ub(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=function(e){r._request=void 0,r._chunkMultiplier=1,e._codeEquals("canceled")?(r._needToFetchStatus=!0,r.completeTransitions_()):(r._error=e,r._transition("error"))},this._metadataErrorHandler=function(e){r._request=void 0,e._codeEquals("canceled")?r.completeTransitions_():(r._error=e,r._transition("error"))},this._promise=new Promise(function(e,t){r._resolve=e,r._reject=t,r._start()}),this._promise.then(null,function(){})}return e.prototype._makeProgressCallback=function(){var e=this,t=this._transferred;return function(n){return e._updateProgress(t+n)}},e.prototype._shouldDoResumable=function(e){return e.size()>262144},e.prototype._start=function(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this._continueUpload():this._oneShotUpload())},e.prototype._resolveToken=function(e){var t=this;Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(function(n){var r=n[0],i=n[1];switch(t._state){case"running":e(r,i);break;case"canceling":t._transition("canceled");break;case"pausing":t._transition("paused")}})},e.prototype._createResumable=function(){var e=this;this._resolveToken(function(t,n){var r=function(e,t,n,r,i){var o=t.bucketOnlyServerUrl(),s=$b(t,r,i),a={name:s.fullPath},u=Ab(o,e.host),c={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":""+r.size(),"X-Goog-Upload-Header-Content-Type":s.contentType,"Content-Type":"application/json; charset=utf-8"},l=Bb(s,n),h=new Hb(u,"POST",function(e){var t;Xb(e);try{t=e.getResponseHeader("X-Goog-Upload-URL")}catch(ly){Wb(!1)}return Wb(Ib(t)),t},e.maxUploadRetryTime);return h.urlParams=a,h.headers=c,h.body=l,h.errorHandler=zb(t),h}(e._ref.storage,e._ref._location,e._mappings,e._blob,e._metadata),i=e._ref.storage._makeRequest(r,t,n);e._request=i,i.getPromise().then(function(t){e._request=void 0,e._uploadUrl=t,e._needToFetchStatus=!1,e.completeTransitions_()},e._errorHandler)})},e.prototype._fetchStatus=function(){var e=this,t=this._uploadUrl;this._resolveToken(function(n,r){var i=function(e,t,n,r){var i=new Hb(n,"POST",function(e){var t=Xb(e,["active","final"]),n=null;try{n=e.getResponseHeader("X-Goog-Upload-Size-Received")}catch(ly){Wb(!1)}n||Wb(!1);var i=Number(n);return Wb(!isNaN(i)),new Yb(i,r.size(),"final"===t)},e.maxUploadRetryTime);return i.headers={"X-Goog-Upload-Command":"query"},i.errorHandler=zb(t),i}(e._ref.storage,e._ref._location,t,e._blob),o=e._ref.storage._makeRequest(i,n,r);e._request=o,o.getPromise().then(function(t){t=t,e._request=void 0,e._updateProgress(t.current),e._needToFetchStatus=!1,t.finalized&&(e._needToFetchMetadata=!0),e.completeTransitions_()},e._errorHandler)})},e.prototype._continueUpload=function(){var e=this,t=Zb*this._chunkMultiplier,n=new Yb(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken(function(i,o){var s;try{s=function(e,t,n,r,i,o,s,a){var u=new Yb(0,0);if(s?(u.current=s.current,u.total=s.total):(u.current=0,u.total=r.size()),r.size()!==u.total)throw new eb("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.");var c=u.total-u.current,l=c;i>0&&(l=Math.min(l,i));var h=u.current,f={"X-Goog-Upload-Command":l===c?"upload, finalize":"upload","X-Goog-Upload-Offset":""+u.current},d=r.slice(h,h+l);if(null===d)throw ib();var p=new Hb(n,"POST",function(e,n){var i,s=Xb(e,["active","final"]),a=u.current+l,c=r.size();return i="final"===s?Kb(t,o)(e,n):null,new Yb(a,c,"final"===s,i)},t.maxUploadRetryTime);return p.headers=f,p.body=d.uploadData(),p.progressCallback=a||null,p.errorHandler=zb(e),p}(e._ref._location,e._ref.storage,r,e._blob,t,e._mappings,n,e._makeProgressCallback())}catch(ly){return e._error=ly,void e._transition("error")}var a=e._ref.storage._makeRequest(s,i,o);e._request=a,a.getPromise().then(function(t){e._increaseMultiplier(),e._request=void 0,e._updateProgress(t.current),t.finalized?(e._metadata=t.metadata,e._transition("success")):e.completeTransitions_()},e._errorHandler)})},e.prototype._increaseMultiplier=function(){Zb*this._chunkMultiplier<33554432&&(this._chunkMultiplier*=2)},e.prototype._fetchMetadata=function(){var e=this;this._resolveToken(function(t,n){var r=Qb(e._ref.storage,e._ref._location,e._mappings),i=e._ref.storage._makeRequest(r,t,n);e._request=i,i.getPromise().then(function(t){e._request=void 0,e._metadata=t,e._transition("success")},e._metadataErrorHandler)})},e.prototype._oneShotUpload=function(){var e=this;this._resolveToken(function(t,n){var r=function(e,t,n,r,i){var o=t.bucketOnlyServerUrl(),s={"X-Goog-Upload-Protocol":"multipart"},a=function(){for(var e="",t=0;t<2;t++)e+=Math.random().toString().slice(2);return e}();s["Content-Type"]="multipart/related; boundary="+a;var u=$b(t,r,i),c=Bb(u,n),l=Rb.getBlob("--"+a+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+c+"\r\n--"+a+"\r\nContent-Type: "+u.contentType+"\r\n\r\n",r,"\r\n--"+a+"--");if(null===l)throw ib();var h={name:u.fullPath},f=Ab(o,e.host),d=e.maxUploadRetryTime,p=new Hb(f,"POST",Kb(e,n),d);return p.urlParams=h,p.headers=s,p.body=l.uploadData(),p.errorHandler=zb(t),p}(e._ref.storage,e._ref._location,e._mappings,e._blob,e._metadata),i=e._ref.storage._makeRequest(r,t,n);e._request=i,i.getPromise().then(function(t){e._request=void 0,e._metadata=t,e._updateProgress(e._blob.size()),e._transition("success")},e._errorHandler)})},e.prototype._updateProgress=function(e){var t=this._transferred;this._transferred=e,this._transferred!==t&&this._notifyObservers()},e.prototype._transition=function(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,void 0!==this._request&&this._request.cancel();break;case"running":var t="paused"===this._state;this._state=e,t&&(this._notifyObservers(),this._start());break;case"paused":this._state=e,this._notifyObservers();break;case"canceled":this._error=rb(),this._state=e,this._notifyObservers();break;case"error":case"success":this._state=e,this._notifyObservers()}},e.prototype.completeTransitions_=function(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}},Object.defineProperty(e.prototype,"snapshot",{get:function(){var e=yb(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}},enumerable:!1,configurable:!0}),e.prototype.on=function(e,t,n,r){var i=this,o=new Jb(t,n,r);return this._addObserver(o),function(){i._removeObserver(o)}},e.prototype.then=function(e,t){return this._promise.then(e,t)},e.prototype.catch=function(e){return this.then(null,e)},e.prototype._addObserver=function(e){this._observers.push(e),this._notifyObserver(e)},e.prototype._removeObserver=function(e){var t=this._observers.indexOf(e);-1!==t&&this._observers.splice(t,1)},e.prototype._notifyObservers=function(){var e=this;this._finishPromise(),this._observers.slice().forEach(function(t){e._notifyObserver(t)})},e.prototype._finishPromise=function(){if(void 0!==this._resolve){var e=!0;switch(yb(this._state)){case mb.SUCCESS:ew(this._resolve.bind(null,this.snapshot))();break;case mb.CANCELED:case mb.ERROR:ew(this._reject.bind(null,this._error))();break;default:e=!1}e&&(this._resolve=void 0,this._reject=void 0)}},e.prototype._notifyObserver=function(e){switch(yb(this._state)){case mb.RUNNING:case mb.PAUSED:e.next&&ew(e.next.bind(e,this.snapshot))();break;case mb.SUCCESS:e.complete&&ew(e.complete.bind(e))();break;case mb.CANCELED:case mb.ERROR:e.error&&ew(e.error.bind(e,this._error))();break;default:e.error&&ew(e.error.bind(e,this._error))()}},e.prototype.resume=function(){var e="paused"===this._state||"pausing"===this._state;return e&&this._transition("running"),e},e.prototype.pause=function(){var e="running"===this._state;return e&&this._transition("pausing"),e},e.prototype.cancel=function(){var e="running"===this._state||"pausing"===this._state;return e&&this._transition("canceling"),e},e}(),nw=function(){function e(e,t){this._service=e,this._location=t instanceof Tb?t:Tb.makeFromUrl(t,e.host)}return e.prototype.toString=function(){return"gs://"+this._location.bucket+"/"+this._location.path},e.prototype._newRef=function(t,n){return new e(t,n)},Object.defineProperty(e.prototype,"root",{get:function(){var e=new Tb(this._location.bucket,"");return this._newRef(this._service,e)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"bucket",{get:function(){return this._location.bucket},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fullPath",{get:function(){return this._location.path},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"name",{get:function(){return Mb(this._location.path)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"storage",{get:function(){return this._service},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=function(e){if(0===e.length)return null;var t=e.lastIndexOf("/");return-1===t?"":e.slice(0,t)}(this._location.path);if(null===t)return null;var n=new Tb(this._location.bucket,t);return new e(this._service,n)},enumerable:!1,configurable:!0}),e.prototype._throwIfRoot=function(e){if(""===this._location.path)throw ab(e)},e}();function rw(e){var t={prefixes:[],items:[]};return iw(e,t).then(function(){return t})}function iw(e,t,n){return(0,Ur.__awaiter)(this,void 0,void 0,function(){var r,i,o;return(0,Ur.__generator)(this,function(s){switch(s.label){case 0:return[4,ow(e,{pageToken:n})];case 1:return r=s.sent(),(i=t.prefixes).push.apply(i,r.prefixes),(o=t.items).push.apply(o,r.items),null==r.nextPageToken?[3,3]:[4,iw(e,t,r.nextPageToken)];case 2:s.sent(),s.label=3;case 3:return[2]}})})}function ow(e,t){return(0,Ur.__awaiter)(this,void 0,void 0,function(){var n,r;return(0,Ur.__generator)(this,function(i){switch(i.label){case 0:return null!=t&&"number"==typeof t.maxResults&&Sb("options.maxResults",1,1e3,t.maxResults),r=function(e,t,n,r,i){var o={};o.prefix=t.isRoot?"":t.path+"/",n&&n.length>0&&(o.delimiter=n),r&&(o.pageToken=r),i&&(o.maxResults=i);var s=Ab(t.bucketOnlyServerUrl(),e.host),a=e.maxOperationRetryTime,u=new Hb(s,"GET",function(e,t){return function(n,r){var i=function(e,t,n){var r=Lb(n);return null===r?null:function(e,t,n){var r={prefixes:[],items:[],nextPageToken:n.nextPageToken};if(n.prefixes)for(var i=0,o=n.prefixes;i<o.length;i++){var s=o[i].replace(/\/$/,""),a=e._makeStorageReference(new Tb(t,s));r.prefixes.push(a)}if(n.items)for(var u=0,c=n.items;u<c.length;u++)a=e._makeStorageReference(new Tb(t,c[u].name)),r.items.push(a);return r}(e,t,r)}(e,t,r);return Wb(null!==i),i}}(e,t.bucket),a);return u.urlParams=o,u.errorHandler=zb(t),u}(e.storage,e._location,"/",(n=t||{}).pageToken,n.maxResults),[4,e.storage.makeRequestWithTokens(r)];case 1:return[2,i.sent().getPromise()]}})})}function sw(e,t){var n=function(e,t){var n=t.split("/").filter(function(e){return e.length>0}).join("/");return 0===e.length?n:e+"/"+n}(e._location.path,t),r=new Tb(e._location.bucket,n);return new nw(e.storage,r)}function aw(e){return/^[A-Za-z]+:\/\//.test(e)}function uw(e,t){if(e instanceof hw){var n=e;if(null==n._bucket)throw new eb("no-default-bucket","No default bucket found. Did you set the 'storageBucket' property when initializing the app?");var r=new nw(n,n._bucket);return null!=t?uw(r,t):r}if(void 0!==t){if(t.includes(".."))throw ob('`path` param cannot contain ".."');return sw(e,t)}return e}function cw(e,t){if(t&&aw(t)){if(e instanceof hw)return new nw(e,t);throw ob("To use ref(service, url), the first argument must be a Storage instance.")}return uw(e,t)}function lw(e,t){var n=null==t?void 0:t.storageBucket;return null==n?null:Tb.makeFromBucketSpec(n,e)}var hw=function(){function e(e,t,n,r,i,o){this.app=e,this._authProvider=t,this._appCheckProvider=n,this._pool=r,this._url=i,this._firebaseVersion=o,this._bucket=null,this._host=J_,this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=i?Tb.makeFromBucketSpec(i,this._host):lw(this._host,this.app.options)}return Object.defineProperty(e.prototype,"host",{get:function(){return this._host},set:function(e){this._host=e,this._bucket=null!=this._url?Tb.makeFromBucketSpec(this._url,e):lw(e,this.app.options)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"maxUploadRetryTime",{get:function(){return this._maxUploadRetryTime},set:function(e){Sb("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"maxOperationRetryTime",{get:function(){return this._maxOperationRetryTime},set:function(e){Sb("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e},enumerable:!1,configurable:!0}),e.prototype._getAuthToken=function(){return(0,Ur.__awaiter)(this,void 0,void 0,function(){var e,t;return(0,Ur.__generator)(this,function(n){switch(n.label){case 0:return(e=this._authProvider.getImmediate({optional:!0}))?[4,e.getToken()]:[3,2];case 1:if(null!==(t=n.sent()))return[2,t.accessToken];n.label=2;case 2:return[2,null]}})})},e.prototype._getAppCheckToken=function(){return(0,Ur.__awaiter)(this,void 0,void 0,function(){var e;return(0,Ur.__generator)(this,function(t){switch(t.label){case 0:return(e=this._appCheckProvider.getImmediate({optional:!0}))?[4,e.getToken()]:[3,2];case 1:return[2,t.sent().token];case 2:return[2,null]}})})},e.prototype._delete=function(){return this._deleted||(this._deleted=!0,this._requests.forEach(function(e){return e.cancel()}),this._requests.clear()),Promise.resolve()},e.prototype._makeStorageReference=function(e){return new nw(this,e)},e.prototype._makeRequest=function(e,t,n){var r=this;if(this._deleted)return new Eb(sb());var i=function(e,t,n,r,i,o){var s=xb(e.urlParams),a=e.url+s,u=Object.assign({},e.headers);return function(e,t){t&&(e["X-Firebase-GMPID"]=t)}(u,t),function(e,t){null!==t&&t.length>0&&(e.Authorization="Firebase "+t)}(u,n),function(e,t){e["X-Firebase-Storage-Version"]="webjs/"+(null!=t?t:"AppManager")}(u,o),function(e,t){null!==t&&(e["X-Firebase-AppCheck"]=t)}(u,r),new Nb(a,e.method,u,e.body,e.successCodes,e.additionalRetryCodes,e.handler,e.errorHandler,e.timeout,e.progressCallback,i)}(e,this._appId,t,n,this._pool,this._firebaseVersion);return this._requests.add(i),i.getPromise().then(function(){return r._requests.delete(i)},function(){return r._requests.delete(i)}),i},e.prototype.makeRequestWithTokens=function(e){return(0,Ur.__awaiter)(this,void 0,void 0,function(){var t;return(0,Ur.__generator)(this,function(n){switch(n.label){case 0:return[4,Promise.all([this._getAuthToken(),this._getAppCheckToken()])];case 1:return t=n.sent(),[2,this._makeRequest(e,t[0],t[1])]}})})},e}();function fw(e,t){return cw(e=(0,Vr.getModularInstance)(e),t)}var dw=function(){function e(e,t,n){this._delegate=e,this.task=t,this.ref=n}return Object.defineProperty(e.prototype,"bytesTransferred",{get:function(){return this._delegate.bytesTransferred},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"state",{get:function(){return this._delegate.state},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"totalBytes",{get:function(){return this._delegate.totalBytes},enumerable:!1,configurable:!0}),e}(),pw=function(){function e(e,t){this._delegate=e,this._ref=t,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}return Object.defineProperty(e.prototype,"snapshot",{get:function(){return new dw(this._delegate.snapshot,this,this._ref)},enumerable:!1,configurable:!0}),e.prototype.then=function(e,t){var n=this;return this._delegate.then(function(t){if(e)return e(new dw(t,n,n._ref))},t)},e.prototype.on=function(e,t,n,r){var i=this,o=void 0;return t&&(o="function"==typeof t?function(e){return t(new dw(e,i,i._ref))}:{next:t.next?function(e){return t.next(new dw(e,i,i._ref))}:void 0,complete:t.complete||void 0,error:t.error||void 0}),this._delegate.on(e,o,n||void 0,r||void 0)},e}(),gw=function(){function e(e,t){this._delegate=e,this._service=t}return Object.defineProperty(e.prototype,"prefixes",{get:function(){var e=this;return this._delegate.prefixes.map(function(t){return new vw(t,e._service)})},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"items",{get:function(){var e=this;return this._delegate.items.map(function(t){return new vw(t,e._service)})},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"nextPageToken",{get:function(){return this._delegate.nextPageToken||null},enumerable:!1,configurable:!0}),e}(),vw=function(){function e(e,t){this._delegate=e,this.storage=t}return Object.defineProperty(e.prototype,"name",{get:function(){return this._delegate.name},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"bucket",{get:function(){return this._delegate.bucket},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fullPath",{get:function(){return this._delegate.fullPath},enumerable:!1,configurable:!0}),e.prototype.toString=function(){return this._delegate.toString()},e.prototype.child=function(t){return new e(function(e,t){return sw(e,t)}(this._delegate,t),this.storage)},Object.defineProperty(e.prototype,"root",{get:function(){return new e(this._delegate.root,this.storage)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this._delegate.parent;return null==t?null:new e(t,this.storage)},enumerable:!1,configurable:!0}),e.prototype.put=function(e,t){return this._throwIfRoot("put"),new pw(function(e,t,n){return function(e,t,n){return e._throwIfRoot("uploadBytesResumable"),new tw(e,new Rb(t),n)}(e=(0,Vr.getModularInstance)(e),t,n)}(this._delegate,e,t),this)},e.prototype.putString=function(e,t,n){void 0===t&&(t=lb.RAW),this._throwIfRoot("putString");var r=fb(t,e),i=(0,Ur.__assign)({},n);return null==i.contentType&&null!=r.contentType&&(i.contentType=r.contentType),new pw(new tw(this._delegate,new Rb(r.data,!0),i),this)},e.prototype.listAll=function(){var e=this;return function(e){return rw(e=(0,Vr.getModularInstance)(e))}(this._delegate).then(function(t){return new gw(t,e.storage)})},e.prototype.list=function(e){var t=this;return function(e,t){return ow(e=(0,Vr.getModularInstance)(e),t)}(this._delegate,e||void 0).then(function(e){return new gw(e,t.storage)})},e.prototype.getMetadata=function(){return function(e){return function(e){return(0,Ur.__awaiter)(this,void 0,void 0,function(){var t;return(0,Ur.__generator)(this,function(n){switch(n.label){case 0:return e._throwIfRoot("getMetadata"),t=Qb(e.storage,e._location,Ub()),[4,e.storage.makeRequestWithTokens(t)];case 1:return[2,n.sent().getPromise()]}})})}(e=(0,Vr.getModularInstance)(e))}(this._delegate)},e.prototype.updateMetadata=function(e){return function(e,t){return function(e,t){return(0,Ur.__awaiter)(this,void 0,void 0,function(){var n;return(0,Ur.__generator)(this,function(r){switch(r.label){case 0:return e._throwIfRoot("updateMetadata"),n=function(e,t,n,r){var i=Ab(t.fullServerUrl(),e.host),o=Bb(n,r),s=e.maxOperationRetryTime,a=new Hb(i,"PATCH",Kb(e,r),s);return a.headers={"Content-Type":"application/json; charset=utf-8"},a.body=o,a.errorHandler=Gb(t),a}(e.storage,e._location,t,Ub()),[4,e.storage.makeRequestWithTokens(n)];case 1:return[2,r.sent().getPromise()]}})})}(e=(0,Vr.getModularInstance)(e),t)}(this._delegate,e)},e.prototype.getDownloadURL=function(){return function(e){return function(e){return(0,Ur.__awaiter)(this,void 0,void 0,function(){var t;return(0,Ur.__generator)(this,function(n){switch(n.label){case 0:return e._throwIfRoot("getDownloadURL"),t=function(e,t,n){var r=Ab(t.fullServerUrl(),e.host),i=e.maxOperationRetryTime,o=new Hb(r,"GET",function(e,t){return function(n,r){var i=Vb(e,r,t);return Wb(null!==i),function(e,t,n){var r=Lb(t);if(null===r)return null;if(!Ib(r.downloadTokens))return null;var i=r.downloadTokens;if(0===i.length)return null;var o=encodeURIComponent;return i.split(",").map(function(t){var r=e.fullPath;return Ab("/b/"+o(e.bucket)+"/o/"+o(r),n)+xb({alt:"media",token:t})})[0]}(i,r,e.host)}}(e,n),i);return o.errorHandler=Gb(t),o}(e.storage,e._location,Ub()),[4,e.storage.makeRequestWithTokens(t)];case 1:return[2,n.sent().getPromise().then(function(e){if(null===e)throw new eb("no-download-url","The given file does not have any download URLs.");return e})]}})})}(e=(0,Vr.getModularInstance)(e))}(this._delegate)},e.prototype.delete=function(){return this._throwIfRoot("delete"),function(e){return function(e){return(0,Ur.__awaiter)(this,void 0,void 0,function(){var t;return(0,Ur.__generator)(this,function(n){switch(n.label){case 0:return e._throwIfRoot("deleteObject"),t=function(e,t){var n=Ab(t.fullServerUrl(),e.host),r=new Hb(n,"DELETE",function(e,t){},e.maxOperationRetryTime);return r.successCodes=[200,204],r.errorHandler=Gb(t),r}(e.storage,e._location),[4,e.storage.makeRequestWithTokens(t)];case 1:return[2,n.sent().getPromise()]}})})}(e=(0,Vr.getModularInstance)(e))}(this._delegate)},e.prototype._throwIfRoot=function(e){if(""===this._delegate._location.path)throw ab(e)},e}(),mw=function(){function e(e,t){this.app=e,this._delegate=t}return Object.defineProperty(e.prototype,"maxOperationRetryTime",{get:function(){return this._delegate.maxOperationRetryTime},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"maxUploadRetryTime",{get:function(){return this._delegate.maxUploadRetryTime},enumerable:!1,configurable:!0}),e.prototype.ref=function(e){if(aw(e))throw ob("ref() expected a child path but got a URL, use refFromURL instead.");return new vw(fw(this._delegate,e),this)},e.prototype.refFromURL=function(e){if(!aw(e))throw ob("refFromURL() expected a full URL but got a child path, use ref() instead.");try{Tb.makeFromUrl(e,this._delegate.host)}catch(ly){throw ob("refFromUrl() expected a valid full URL but got an invalid one.")}return new vw(fw(this._delegate,e),this)},e.prototype.setMaxUploadRetryTime=function(e){this._delegate.maxUploadRetryTime=e},e.prototype.setMaxOperationRetryTime=function(e){this._delegate.maxOperationRetryTime=e},e.prototype.useEmulator=function(e,t){!function(e,t,n){!function(e,t,n){e.host="http://"+t+":"+n}(e,t,n)}(this._delegate,e,t)},e}();function yw(e,t){var n=t.instanceIdentifier,r=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal"),o=e.getProvider("app-check-internal");return new mw(r,new hw(r,i,o,new wb,n,qr.default.SDK_VERSION))}!function(e){var t={TaskState:mb,TaskEvent:vb,StringFormat:lb,Storage:hw,Reference:vw};e.INTERNAL.registerComponent(new py.Component("storage",yw,"PUBLIC").setServiceProps(t).setMultipleInstances(!0)),e.registerVersion("@firebase/storage","0.6.2")}(qr.default);var _w,bw,ww,Tw="0.4.17",Ew=Tw,Iw="FB-PERF-TRACE-MEASURE",kw="_wt_",Cw="_fcp",Sw="_fid",Aw="@firebase/performance/config",xw="@firebase/performance/configexpire",Nw="Performance",Dw=((_w={})["trace started"]="Trace {$traceName} was started before.",_w["trace stopped"]="Trace {$traceName} is not running.",_w["nonpositive trace startTime"]="Trace {$traceName} startTime should be positive.",_w["nonpositive trace duration"]="Trace {$traceName} duration should be positive.",_w["no window"]="Window is not available.",_w["no app id"]="App id is not available.",_w["no project id"]="Project id is not available.",_w["no api key"]="Api key is not available.",_w["invalid cc log"]="Attempted to queue invalid cc event",_w["FB not default"]="Performance can only start when Firebase app instance is the default one.",_w["RC response not ok"]="RC response is not ok",_w["invalid attribute name"]="Attribute name {$attributeName} is invalid.",_w["invalid attribute value"]="Attribute value {$attributeValue} is invalid.",_w["invalid custom metric name"]="Custom metric name {$customMetricName} is invalid",_w["invalid String merger input"]="Input for String merger is invalid, contact support team to resolve.",_w),Pw=new Vr.ErrorFactory("performance",Nw,Dw),Ow=new Br.Logger(Nw);Ow.logLevel=Br.LogLevel.INFO;var Rw,Lw=function(){function e(e){if(this.window=e,!e)throw Pw.create("no window");this.performance=e.performance,this.PerformanceObserver=e.PerformanceObserver,this.windowLocation=e.location,this.navigator=e.navigator,this.document=e.document,this.navigator&&this.navigator.cookieEnabled&&(this.localStorage=e.localStorage),e.perfMetrics&&e.perfMetrics.onFirstInputDelay&&(this.onFirstInputDelay=e.perfMetrics.onFirstInputDelay)}return e.prototype.getUrl=function(){return this.windowLocation.href.split("?")[0]},e.prototype.mark=function(e){this.performance&&this.performance.mark&&this.performance.mark(e)},e.prototype.measure=function(e,t,n){this.performance&&this.performance.measure&&this.performance.measure(e,t,n)},e.prototype.getEntriesByType=function(e){return this.performance&&this.performance.getEntriesByType?this.performance.getEntriesByType(e):[]},e.prototype.getEntriesByName=function(e){return this.performance&&this.performance.getEntriesByName?this.performance.getEntriesByName(e):[]},e.prototype.getTimeOrigin=function(){return this.performance&&(this.performance.timeOrigin||this.performance.timing.navigationStart)},e.prototype.requiredApisAvailable=function(){return fetch&&Promise&&this.navigator&&this.navigator.cookieEnabled?!!(0,Vr.isIndexedDBAvailable)()||(Ow.info("IndexedDB is not supported by current browswer"),!1):(Ow.info("Firebase Performance cannot start if browser does not support fetch and Promise or cookie is disabled."),!1)},e.prototype.setupObserver=function(e,t){this.PerformanceObserver&&new this.PerformanceObserver(function(e){for(var n=0,r=e.getEntries();n<r.length;n++)t(r[n])}).observe({entryTypes:[e]})},e.getInstance=function(){return void 0===bw&&(bw=new e(ww)),bw},e}();function Mw(e,t){var n=e.length-t.length;if(n<0||n>1)throw Pw.create("invalid String merger input");for(var r=[],i=0;i<e.length;i++)r.push(e.charAt(i)),t.length>i&&r.push(t.charAt(i));return r.join("")}var Fw,jw=function(){function e(){this.instrumentationEnabled=!0,this.dataCollectionEnabled=!0,this.loggingEnabled=!1,this.tracesSamplingRate=1,this.networkRequestsSamplingRate=1,this.logEndPointUrl="https://firebaselogging.googleapis.com/v0cc/log?format=json_proto",this.flTransportEndpointUrl=Mw("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),this.transportKey=Mw("AzSC8r6ReiGqFMyfvgow","Iayx0u-XT3vksVM-pIV"),this.logSource=462,this.logTraceAfterSampling=!1,this.logNetworkAfterSampling=!1,this.configTimeToLive=12}return e.prototype.getAppId=function(){var e=this.firebaseAppInstance&&this.firebaseAppInstance.options&&this.firebaseAppInstance.options.appId;if(!e)throw Pw.create("no app id");return e},e.prototype.getProjectId=function(){var e=this.firebaseAppInstance&&this.firebaseAppInstance.options&&this.firebaseAppInstance.options.projectId;if(!e)throw Pw.create("no project id");return e},e.prototype.getApiKey=function(){var e=this.firebaseAppInstance&&this.firebaseAppInstance.options&&this.firebaseAppInstance.options.apiKey;if(!e)throw Pw.create("no api key");return e},e.prototype.getFlTransportFullUrl=function(){return this.flTransportEndpointUrl.concat("?key=",this.transportKey)},e.getInstance=function(){return void 0===Rw&&(Rw=new e),Rw},e}();function qw(){return Fw}var Uw=(()=>(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.VISIBLE=1]="VISIBLE",e[e.HIDDEN=2]="HIDDEN"}(Uw||(Uw={})),Uw))(),Vw=["firebase_","google_","ga_"],Bw=new RegExp("^[a-zA-Z]\\w*$");function Hw(){var e=Lw.getInstance().navigator;return"serviceWorker"in e?e.serviceWorker.controller?2:3:1}function Ww(){switch(Lw.getInstance().document.visibilityState){case"visible":return Uw.VISIBLE;case"hidden":return Uw.HIDDEN;default:return Uw.UNKNOWN}}function Kw(){var e=Lw.getInstance().navigator.connection;switch(e&&e.effectiveType){case"slow-2g":return 1;case"2g":return 2;case"3g":return 3;case"4g":return 4;default:return 0}}function zw(e){if(!e)return e;var t=jw.getInstance(),n=e.entries||{};return t.loggingEnabled=void 0===n.fpr_enabled||"true"===String(n.fpr_enabled),n.fpr_log_source&&(t.logSource=Number(n.fpr_log_source)),n.fpr_log_endpoint_url&&(t.logEndPointUrl=n.fpr_log_endpoint_url),n.fpr_log_transport_key&&(t.transportKey=n.fpr_log_transport_key),void 0!==n.fpr_vc_network_request_sampling_rate&&(t.networkRequestsSamplingRate=Number(n.fpr_vc_network_request_sampling_rate)),void 0!==n.fpr_vc_trace_sampling_rate&&(t.tracesSamplingRate=Number(n.fpr_vc_trace_sampling_rate)),t.logTraceAfterSampling=Gw(t.tracesSamplingRate),t.logNetworkAfterSampling=Gw(t.networkRequestsSamplingRate),e}function Gw(e){return Math.random()<=e}var Qw,$w=1;function Yw(){return $w=2,Qw=Qw||function(){var e=Lw.getInstance().document;return new Promise(function(t){if(e&&"complete"!==e.readyState){var n=function(){"complete"===e.readyState&&(e.removeEventListener("readystatechange",n),t())};e.addEventListener("readystatechange",n)}else t()})}().then(function(){return(e=jw.getInstance().installationsService.getId()).then(function(e){Fw=e}),e;var e}).then(function(e){return function(e){var t=function(){var e=Lw.getInstance().localStorage;if(e){var t=e.getItem(xw);if(t&&Number(t)>Date.now()){var n=e.getItem(Aw);if(n)try{return JSON.parse(n)}catch(Qv){return}}}}();return t?(zw(t),Promise.resolve()):function(e){return(t=jw.getInstance().installationsService.getToken(),t.then(function(e){}),t).then(function(t){var n="https://firebaseremoteconfig.googleapis.com/v1/projects/"+jw.getInstance().getProjectId()+"/namespaces/fireperf:fetch?key="+jw.getInstance().getApiKey(),r=new Request(n,{method:"POST",headers:{Authorization:"FIREBASE_INSTALLATIONS_AUTH "+t},body:JSON.stringify({app_instance_id:e,app_instance_id_token:t,app_id:jw.getInstance().getAppId(),app_version:Ew,sdk_version:"0.0.1"})});return fetch(r).then(function(e){if(e.ok)return e.json();throw Pw.create("RC response not ok")})}).catch(function(){Ow.info("Could not fetch config, will use default configs")});var t}(e).then(zw).then(function(e){return function(e){var t=Lw.getInstance().localStorage;e&&t&&(t.setItem(Aw,JSON.stringify(e)),t.setItem(xw,String(Date.now()+60*jw.getInstance().configTimeToLive*60*1e3)))}(e)},function(){})}(e)}).then(function(){return Xw()},function(){return Xw()})}function Xw(){$w=3}var Zw,Jw=1e4,eT=3,tT=[],nT=!1;function rT(e){setTimeout(function(){var e,t;if(0!==eT)return tT.length?(t=(e=tT.splice(0,1e3)).map(function(e){return{source_extension_json_proto3:e.message,event_time_ms:String(e.eventTime)}}),void function(e,t){return function(e){var t=jw.getInstance().getFlTransportFullUrl();return fetch(t,{method:"POST",body:JSON.stringify(e)})}(e).then(function(e){return e.ok||Ow.info("Call to Firebase backend failed."),e.json()}).then(function(e){var n=Number(e.nextRequestWaitMillis),r=Jw;isNaN(n)||(r=Math.max(n,r));var i=e.logResponseDetails;Array.isArray(i)&&i.length>0&&"RETRY_REQUEST_LATER"===i[0].responseAction&&(tT=(0,Ur.__spreadArray)((0,Ur.__spreadArray)([],t),tT),Ow.info("Retry transport request later.")),eT=3,rT(r)})}({request_time_ms:String(Date.now()),client_info:{client_type:1,js_client_info:{}},log_source:jw.getInstance().logSource,log_event:t},e).catch(function(){tT=(0,Ur.__spreadArray)((0,Ur.__spreadArray)([],e),tT),eT--,Ow.info("Tries left: "+eT+"."),rT(Jw)})):rT(Jw)},e)}function iT(e){if(!e.eventTime||!e.message)throw Pw.create("invalid cc log");tT=(0,Ur.__spreadArray)((0,Ur.__spreadArray)([],tT),[e])}function oT(e,t){Zw||(Zw=function(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];iT({message:e.apply(void 0,t),eventTime:Date.now()})}}(uT)),Zw(e,t)}function sT(e){var t=jw.getInstance();!t.instrumentationEnabled&&e.isAuto||(t.dataCollectionEnabled||e.isAuto)&&Lw.getInstance().requiredApisAvailable()&&(e.isAuto&&Ww()!==Uw.VISIBLE||(3===$w?aT(e):Yw().then(function(){return aT(e)},function(){return aT(e)})))}function aT(e){if(qw()){var t=jw.getInstance();t.loggingEnabled&&t.logTraceAfterSampling&&setTimeout(function(){return oT(e,1)},0)}}function uT(e,t){return 0===t?(r={url:(n=e).url,http_method:n.httpMethod||0,http_response_code:200,response_payload_bytes:n.responsePayloadBytes,client_start_time_us:n.startTimeUs,time_to_response_initiated_us:n.timeToResponseInitiatedUs,time_to_response_completed_us:n.timeToResponseCompletedUs},i={application_info:cT(),network_request_metric:r},JSON.stringify(i)):function(e){var t={name:e.name,is_auto:e.isAuto,client_start_time_us:e.startTimeUs,duration_us:e.durationUs};0!==Object.keys(e.counters).length&&(t.counters=e.counters);var n=e.getAttributes();0!==Object.keys(n).length&&(t.custom_attributes=n);var r={application_info:cT(),trace_metric:t};return JSON.stringify(r)}(e);var n,r,i}function cT(){return{google_app_id:jw.getInstance().getAppId(),app_instance_id:qw(),web_app_info:{sdk_version:Ew,page_url:Lw.getInstance().getUrl(),service_worker_status:Hw(),visibility_state:Ww(),effective_connection_type:Kw()},application_process_state:0}}var lT=["_fp",Cw,Sw],hT=function(){function e(e,t,n){void 0===t&&(t=!1),this.name=e,this.isAuto=t,this.state=1,this.customAttributes={},this.counters={},this.api=Lw.getInstance(),this.randomId=Math.floor(1e6*Math.random()),this.isAuto||(this.traceStartMark="FB-PERF-TRACE-START-"+this.randomId+"-"+this.name,this.traceStopMark="FB-PERF-TRACE-STOP-"+this.randomId+"-"+this.name,this.traceMeasure=n||"FB-PERF-TRACE-MEASURE-"+this.randomId+"-"+this.name,n&&this.calculateTraceMetrics())}return e.prototype.start=function(){if(1!==this.state)throw Pw.create("trace started",{traceName:this.name});this.api.mark(this.traceStartMark),this.state=2},e.prototype.stop=function(){if(2!==this.state)throw Pw.create("trace stopped",{traceName:this.name});this.state=3,this.api.mark(this.traceStopMark),this.api.measure(this.traceMeasure,this.traceStartMark,this.traceStopMark),this.calculateTraceMetrics(),sT(this)},e.prototype.record=function(e,t,n){if(e<=0)throw Pw.create("nonpositive trace startTime",{traceName:this.name});if(t<=0)throw Pw.create("nonpositive trace duration",{traceName:this.name});if(this.durationUs=Math.floor(1e3*t),this.startTimeUs=Math.floor(1e3*e),n&&n.attributes&&(this.customAttributes=(0,Ur.__assign)({},n.attributes)),n&&n.metrics)for(var r=0,i=Object.keys(n.metrics);r<i.length;r++){var o=i[r];isNaN(Number(n.metrics[o]))||(this.counters[o]=Number(Math.floor(n.metrics[o])))}sT(this)},e.prototype.incrementMetric=function(e,t){void 0===t&&(t=1),this.putMetric(e,void 0===this.counters[e]?t:this.counters[e]+t)},e.prototype.putMetric=function(e,t){if(o=this.name,0===(i=e).length||i.length>100||!(o&&o.startsWith(kw)&&lT.indexOf(i)>-1)&&i.startsWith("_"))throw Pw.create("invalid custom metric name",{customMetricName:e});var n,r,i,o;this.counters[e]=(n=t,(r=Math.floor(n))<n&&Ow.info("Metric value should be an Integer, setting the value as : "+r+"."),r)},e.prototype.getMetric=function(e){return this.counters[e]||0},e.prototype.putAttribute=function(e,t){var n,r=!(0===(n=e).length||n.length>40||Vw.some(function(e){return n.startsWith(e)})||!n.match(Bw)),i=function(e){return 0!==e.length&&e.length<=100}(t);if(r&&i)this.customAttributes[e]=t;else{if(!r)throw Pw.create("invalid attribute name",{attributeName:e});if(!i)throw Pw.create("invalid attribute value",{attributeValue:t})}},e.prototype.getAttribute=function(e){return this.customAttributes[e]},e.prototype.removeAttribute=function(e){void 0!==this.customAttributes[e]&&delete this.customAttributes[e]},e.prototype.getAttributes=function(){return(0,Ur.__assign)({},this.customAttributes)},e.prototype.setStartTime=function(e){this.startTimeUs=e},e.prototype.setDuration=function(e){this.durationUs=e},e.prototype.calculateTraceMetrics=function(){var e=this.api.getEntriesByName(this.traceMeasure),t=e&&e[0];t&&(this.durationUs=Math.floor(1e3*t.duration),this.startTimeUs=Math.floor(1e3*(t.startTime+this.api.getTimeOrigin())))},e.createOobTrace=function(t,n,r){var i=Lw.getInstance().getUrl();if(i){var o=new e(kw+i,!0),s=Math.floor(1e3*Lw.getInstance().getTimeOrigin());if(o.setStartTime(s),t&&t[0]&&(o.setDuration(Math.floor(1e3*t[0].duration)),o.putMetric("domInteractive",Math.floor(1e3*t[0].domInteractive)),o.putMetric("domContentLoadedEventEnd",Math.floor(1e3*t[0].domContentLoadedEventEnd)),o.putMetric("loadEventEnd",Math.floor(1e3*t[0].loadEventEnd))),n){var a=n.find(function(e){return"first-paint"===e.name});a&&a.startTime&&o.putMetric("_fp",Math.floor(1e3*a.startTime));var u=n.find(function(e){return"first-contentful-paint"===e.name});u&&u.startTime&&o.putMetric(Cw,Math.floor(1e3*u.startTime)),r&&o.putMetric(Sw,Math.floor(1e3*r))}sT(o)}},e.createUserTimingTrace=function(t){sT(new e(t,!1,t))},e}();function fT(e){var t=e;if(t&&void 0!==t.responseStart){var n=Lw.getInstance().getTimeOrigin(),r=Math.floor(1e3*(t.startTime+n)),i=t.responseStart?Math.floor(1e3*(t.responseStart-t.startTime)):void 0,o=Math.floor(1e3*(t.responseEnd-t.startTime));!function(e){var t=jw.getInstance();if(t.instrumentationEnabled){var n=e.url,r=t.logEndPointUrl.split("?")[0],i=t.flTransportEndpointUrl.split("?")[0];n!==r&&n!==i&&t.loggingEnabled&&t.logNetworkAfterSampling&&setTimeout(function(){return oT(e,0)},0)}}({url:t.name&&t.name.split("?")[0],responsePayloadBytes:t.transferSize,startTimeUs:r,timeToResponseInitiatedUs:i,timeToResponseCompletedUs:o})}}function dT(){qw()&&(setTimeout(function(){return function(){var e=Lw.getInstance(),t=e.getEntriesByType("navigation"),n=e.getEntriesByType("paint");if(e.onFirstInputDelay){var r=setTimeout(function(){hT.createOobTrace(t,n),r=void 0},5e3);e.onFirstInputDelay(function(e){r&&(clearTimeout(r),hT.createOobTrace(t,n,e))})}else hT.createOobTrace(t,n)}()},0),setTimeout(function(){return function(){for(var e=Lw.getInstance(),t=0,n=e.getEntriesByType("resource");t<n.length;t++)fT(n[t]);e.setupObserver("resource",fT)}()},0),setTimeout(function(){return function(){for(var e=Lw.getInstance(),t=0,n=e.getEntriesByType("measure");t<n.length;t++)pT(n[t]);e.setupObserver("measure",pT)}()},0))}function pT(e){var t=e.name;t.substring(0,Iw.length)!==Iw&&hT.createUserTimingTrace(t)}var gT=function(){function e(e){this.app=e,Lw.getInstance().requiredApisAvailable()&&(0,Vr.validateIndexedDBOpenable)().then(function(e){e&&(nT||(rT(5500),nT=!0),Yw().then(dT,dT))}).catch(function(e){Ow.info("Environment doesn't support IndexedDB: "+e)})}return e.prototype.trace=function(e){return new hT(e)},Object.defineProperty(e.prototype,"instrumentationEnabled",{get:function(){return jw.getInstance().instrumentationEnabled},set:function(e){jw.getInstance().instrumentationEnabled=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"dataCollectionEnabled",{get:function(){return jw.getInstance().dataCollectionEnabled},set:function(e){jw.getInstance().dataCollectionEnabled=e},enumerable:!1,configurable:!0}),e}();!function(e){e.INTERNAL.registerComponent(new py.Component("performance",function(e){return function(e,t){if("[DEFAULT]"!==e.name)throw Pw.create("FB not default");if("undefined"==typeof window)throw Pw.create("no window");return function(e){ww=e}(window),jw.getInstance().firebaseAppInstance=e,jw.getInstance().installationsService=t,new gT(e)}(e.getProvider("app").getImmediate(),e.getProvider("installations").getImmediate())},"PUBLIC")),e.registerVersion("@firebase/performance",Tw)}(qr.default);var vT,mT="https://www.googletagmanager.com/gtag/js",yT=(()=>(function(e){e.EVENT="event",e.SET="set",e.CONFIG="config"}(yT||(yT={})),yT))(),_T=(()=>(function(e){e.ADD_SHIPPING_INFO="add_shipping_info",e.ADD_PAYMENT_INFO="add_payment_info",e.ADD_TO_CART="add_to_cart",e.ADD_TO_WISHLIST="add_to_wishlist",e.BEGIN_CHECKOUT="begin_checkout",e.CHECKOUT_PROGRESS="checkout_progress",e.EXCEPTION="exception",e.GENERATE_LEAD="generate_lead",e.LOGIN="login",e.PAGE_VIEW="page_view",e.PURCHASE="purchase",e.REFUND="refund",e.REMOVE_FROM_CART="remove_from_cart",e.SCREEN_VIEW="screen_view",e.SEARCH="search",e.SELECT_CONTENT="select_content",e.SELECT_ITEM="select_item",e.SELECT_PROMOTION="select_promotion",e.SET_CHECKOUT_OPTION="set_checkout_option",e.SHARE="share",e.SIGN_UP="sign_up",e.TIMING_COMPLETE="timing_complete",e.VIEW_CART="view_cart",e.VIEW_ITEM="view_item",e.VIEW_ITEM_LIST="view_item_list",e.VIEW_PROMOTION="view_promotion",e.VIEW_SEARCH_RESULTS="view_search_results"}(_T||(_T={})),_T))(),bT=new Br.Logger("@firebase/analytics");function wT(e,t,n,r,i,o){return(0,Ur.__awaiter)(this,void 0,void 0,function(){var s,a,u,c;return(0,Ur.__generator)(this,function(l){switch(l.label){case 0:s=r[i],l.label=1;case 1:return l.trys.push([1,7,,8]),s?[4,t[s]]:[3,3];case 2:return l.sent(),[3,6];case 3:return[4,Promise.all(n)];case 4:return a=l.sent(),(u=a.find(function(e){return e.measurementId===i}))?[4,t[u.appId]]:[3,6];case 5:l.sent(),l.label=6;case 6:return[3,8];case 7:return c=l.sent(),bT.error(c),[3,8];case 8:return e(yT.CONFIG,i,o),[2]}})})}function TT(e,t,n,r,i){return(0,Ur.__awaiter)(this,void 0,void 0,function(){var o,s,a,u,c,l,h;return(0,Ur.__generator)(this,function(f){switch(f.label){case 0:return f.trys.push([0,4,,5]),o=[],i&&i.send_to?(s=i.send_to,Array.isArray(s)||(s=[s]),[4,Promise.all(n)]):[3,2];case 1:for(a=f.sent(),u=function(e){var n=a.find(function(t){return t.measurementId===e}),r=n&&t[n.appId];if(!r)return o=[],"break";o.push(r)},c=0,l=s;c<l.length&&"break"!==u(l[c]);c++);f.label=2;case 2:return 0===o.length&&(o=Object.values(t)),[4,Promise.all(o)];case 3:return f.sent(),e(yT.EVENT,r,i||{}),[3,5];case 4:return h=f.sent(),bT.error(h),[3,5];case 5:return[2]}})})}var ET=((vT={})["already-exists"]="A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.",vT["already-initialized"]="Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.",vT["interop-component-reg-failed"]="Firebase Analytics Interop Component failed to instantiate: {$reason}",vT["invalid-analytics-context"]="Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}",vT["indexeddb-unavailable"]="IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}",vT["fetch-throttle"]="The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.",vT["config-fetch-failed"]="Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}",vT["no-api-key"]='The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',vT["no-app-id"]='The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',vT),IT=new Vr.ErrorFactory("analytics","Analytics",ET),kT=new(function(){function e(e,t){void 0===e&&(e={}),void 0===t&&(t=1e3),this.throttleMetadata=e,this.intervalMillis=t}return e.prototype.getThrottleMetadata=function(e){return this.throttleMetadata[e]},e.prototype.setThrottleMetadata=function(e,t){this.throttleMetadata[e]=t},e.prototype.deleteThrottleMetadata=function(e){delete this.throttleMetadata[e]},e}());function CT(e){var t;return(0,Ur.__awaiter)(this,void 0,void 0,function(){var n,r,i,o,s,a;return(0,Ur.__generator)(this,function(u){switch(u.label){case 0:return n=e.appId,r={method:"GET",headers:(c=e.apiKey,new Headers({Accept:"application/json","x-goog-api-key":c}))},i="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig".replace("{app-id}",n),[4,fetch(i,r)];case 1:if(200===(o=u.sent()).status||304===o.status)return[3,6];s="",u.label=2;case 2:return u.trys.push([2,4,,5]),[4,o.json()];case 3:return a=u.sent(),(null===(t=a.error)||void 0===t?void 0:t.message)&&(s=a.error.message),[3,5];case 4:return u.sent(),[3,5];case 5:throw IT.create("config-fetch-failed",{httpStatus:o.status,responseMessage:s});case 6:return[2,o.json()]}var c})})}function ST(e,t,n,r){var i=t.throttleEndTimeMillis,o=t.backoffCount;return void 0===r&&(r=kT),(0,Ur.__awaiter)(this,void 0,void 0,function(){var t,s,a,u,c,l,h;return(0,Ur.__generator)(this,function(f){switch(f.label){case 0:t=e.appId,s=e.measurementId,f.label=1;case 1:return f.trys.push([1,3,,4]),[4,AT(n,i)];case 2:return f.sent(),[3,4];case 3:if(a=f.sent(),s)return bT.warn("Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID "+s+' provided in the "measurementId" field in the local Firebase config. ['+a.message+"]"),[2,{appId:t,measurementId:s}];throw a;case 4:return f.trys.push([4,6,,7]),[4,CT(e)];case 5:return u=f.sent(),r.deleteThrottleMetadata(t),[2,u];case 6:if(!function(e){if(!(e instanceof Vr.FirebaseError&&e.customData))return!1;var t=Number(e.customData.httpStatus);return 429===t||500===t||503===t||504===t}(c=f.sent())){if(r.deleteThrottleMetadata(t),s)return bT.warn("Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID "+s+' provided in the "measurementId" field in the local Firebase config. ['+c.message+"]"),[2,{appId:t,measurementId:s}];throw c}return l=503===Number(c.customData.httpStatus)?(0,Vr.calculateBackoffMillis)(o,r.intervalMillis,30):(0,Vr.calculateBackoffMillis)(o,r.intervalMillis),h={throttleEndTimeMillis:Date.now()+l,backoffCount:o+1},r.setThrottleMetadata(t,h),bT.debug("Calling attemptFetch again in "+l+" millis"),[2,ST(e,h,n,r)];case 7:return[2]}})})}function AT(e,t){return new Promise(function(n,r){var i=Math.max(t-Date.now(),0),o=setTimeout(n,i);e.addEventListener(function(){clearTimeout(o),r(IT.create("fetch-throttle",{throttleEndTimeMillis:t}))})})}var xT,NT,DT=function(){function e(){this.listeners=[]}return e.prototype.addEventListener=function(e){this.listeners.push(e)},e.prototype.abort=function(){this.listeners.forEach(function(e){return e()})},e}(),PT={},OT=[],RT={},LT="dataLayer",MT="gtag",FT=!1;function jT(e){if(FT)throw IT.create("already-initialized");e.dataLayerName&&(LT=e.dataLayerName),e.gtagName&&(MT=e.gtagName)}var qT="analytics";function UT(){return(0,Ur.__awaiter)(this,void 0,void 0,function(){return(0,Ur.__generator)(this,function(e){switch(e.label){case 0:if((0,Vr.isBrowserExtension)())return[2,!1];if(!(0,Vr.areCookiesEnabled)())return[2,!1];if(!(0,Vr.isIndexedDBAvailable)())return[2,!1];e.label=1;case 1:return e.trys.push([1,3,,4]),[4,(0,Vr.validateIndexedDBOpenable)()];case 2:return[2,e.sent()];case 3:return e.sent(),[2,!1];case 4:return[2]}})})}!function(e){e.INTERNAL.registerComponent(new py.Component(qT,function(e){return function(e,t){!function(){var e=[];if((0,Vr.isBrowserExtension)()&&e.push("This is a browser extension environment."),(0,Vr.areCookiesEnabled)()||e.push("Cookies are not available."),e.length>0){var t=e.map(function(e,t){return"("+(t+1)+") "+e}).join(" "),n=IT.create("invalid-analytics-context",{errorInfo:t});bT.warn(n.message)}}();var n=e.options.appId;if(!n)throw IT.create("no-app-id");if(!e.options.apiKey){if(!e.options.measurementId)throw IT.create("no-api-key");bT.warn('The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID '+e.options.measurementId+' provided in the "measurementId" field in the local Firebase config.')}if(null!=PT[n])throw IT.create("already-exists",{id:n});if(!FT){!function(e){var t=[];Array.isArray(window[e])?t=window[e]:window[e]=t}(LT);var r=function(e,t,n,r,i){var o=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];window[r].push(arguments)};return window[i]&&"function"==typeof window[i]&&(o=window[i]),window[i]=function(e,t,n,r){return function(i,o,s){return(0,Ur.__awaiter)(this,void 0,void 0,function(){var a;return(0,Ur.__generator)(this,function(u){switch(u.label){case 0:return u.trys.push([0,6,,7]),i!==yT.EVENT?[3,2]:[4,TT(e,t,n,o,s)];case 1:return u.sent(),[3,5];case 2:return i!==yT.CONFIG?[3,4]:[4,wT(e,t,n,r,o,s)];case 3:return u.sent(),[3,5];case 4:e(yT.SET,o),u.label=5;case 5:return[3,7];case 6:return a=u.sent(),bT.error(a),[3,7];case 7:return[2]}})})}}(o,e,t,n),{gtagCore:o,wrappedGtag:window[i]}}(PT,OT,RT,LT,MT);NT=r.wrappedGtag,xT=r.gtagCore,FT=!0}return PT[n]=function(e,t,n,r,i,o){return(0,Ur.__awaiter)(this,void 0,void 0,function(){var s,a,u,c,l,h,f;return(0,Ur.__generator)(this,function(d){switch(d.label){case 0:return(s=function(e,t,n){return void 0===t&&(t=kT),(0,Ur.__awaiter)(this,void 0,void 0,function(){var n,r,i,o,s,a,u=this;return(0,Ur.__generator)(this,function(c){if(i=(n=e.options).apiKey,o=n.measurementId,!(r=n.appId))throw IT.create("no-app-id");if(!i){if(o)return[2,{measurementId:o,appId:r}];throw IT.create("no-api-key")}return s=t.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},a=new DT,setTimeout(function(){return(0,Ur.__awaiter)(u,void 0,void 0,function(){return(0,Ur.__generator)(this,function(e){return a.abort(),[2]})})},6e4),[2,ST({appId:r,apiKey:i,measurementId:o},s,a,t)]})})}(e)).then(function(t){n[t.measurementId]=t.appId,e.options.measurementId&&t.measurementId!==e.options.measurementId&&bT.warn("The measurement ID in the local Firebase config ("+e.options.measurementId+") does not match the measurement ID fetched from the server ("+t.measurementId+"). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.")}).catch(function(e){return bT.error(e)}),t.push(s),a=function(){return(0,Ur.__awaiter)(this,void 0,void 0,function(){var e;return(0,Ur.__generator)(this,function(t){switch(t.label){case 0:return(0,Vr.isIndexedDBAvailable)()?[3,1]:(bT.warn(IT.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),[2,!1]);case 1:return t.trys.push([1,3,,4]),[4,(0,Vr.validateIndexedDBOpenable)()];case 2:return t.sent(),[3,4];case 3:return e=t.sent(),bT.warn(IT.create("indexeddb-unavailable",{errorInfo:e}).message),[2,!1];case 4:return[2,!0]}})})}().then(function(e){return e?r.getId():void 0}),[4,Promise.all([s,a])];case 1:return u=d.sent(),c=u[0],l=u[1],function(){for(var e=window.document.getElementsByTagName("script"),t=0,n=Object.values(e);t<n.length;t++){var r=n[t];if(r.src&&r.src.includes(mT))return r}return null}()||function(e,t){var n=document.createElement("script");n.src=mT+"?l="+e+"&id="+t,n.async=!0,document.head.appendChild(n)}(o,c.measurementId),i("js",new Date),(f={}).origin="firebase",f.update=!0,h=f,null!=l&&(h.firebase_id=l),i(yT.CONFIG,c.measurementId,h),[2,c.measurementId]}})})}(e,OT,RT,t,xT,LT),{app:e,logEvent:function(e,t,r){(function(e,t,n,r,i){return(0,Ur.__awaiter)(this,void 0,void 0,function(){var o,s;return(0,Ur.__generator)(this,function(a){switch(a.label){case 0:return i&&i.global?(e(yT.EVENT,n,r),[2]):[3,1];case 1:return[4,t];case 2:o=a.sent(),s=(0,Ur.__assign)((0,Ur.__assign)({},r),{send_to:o}),e(yT.EVENT,n,s),a.label=3;case 3:return[2]}})})})(NT,PT[n],e,t,r).catch(function(e){return bT.error(e)})},setCurrentScreen:function(e,t){(function(e,t,n,r){return(0,Ur.__awaiter)(this,void 0,void 0,function(){var i;return(0,Ur.__generator)(this,function(o){switch(o.label){case 0:return r&&r.global?(e(yT.SET,{screen_name:n}),[2,Promise.resolve()]):[3,1];case 1:return[4,t];case 2:i=o.sent(),e(yT.CONFIG,i,{update:!0,screen_name:n}),o.label=3;case 3:return[2]}})})})(NT,PT[n],e,t).catch(function(e){return bT.error(e)})},setUserId:function(e,t){(function(e,t,n,r){return(0,Ur.__awaiter)(this,void 0,void 0,function(){var i;return(0,Ur.__generator)(this,function(o){switch(o.label){case 0:return r&&r.global?(e(yT.SET,{user_id:n}),[2,Promise.resolve()]):[3,1];case 1:return[4,t];case 2:i=o.sent(),e(yT.CONFIG,i,{update:!0,user_id:n}),o.label=3;case 3:return[2]}})})})(NT,PT[n],e,t).catch(function(e){return bT.error(e)})},setUserProperties:function(e,t){(function(e,t,n,r){return(0,Ur.__awaiter)(this,void 0,void 0,function(){var i,o,s,a,u;return(0,Ur.__generator)(this,function(c){switch(c.label){case 0:if(!r||!r.global)return[3,1];for(i={},o=0,s=Object.keys(n);o<s.length;o++)i["user_properties."+(a=s[o])]=n[a];return e(yT.SET,i),[2,Promise.resolve()];case 1:return[4,t];case 2:u=c.sent(),e(yT.CONFIG,u,{update:!0,user_properties:n}),c.label=3;case 3:return[2]}})})})(NT,PT[n],e,t).catch(function(e){return bT.error(e)})},setAnalyticsCollectionEnabled:function(e){(function(e,t){return(0,Ur.__awaiter)(this,void 0,void 0,function(){var n;return(0,Ur.__generator)(this,function(r){switch(r.label){case 0:return[4,e];case 1:return n=r.sent(),window["ga-disable-"+n]=!t,[2]}})})})(PT[n],e).catch(function(e){return bT.error(e)})},INTERNAL:{delete:function(){return delete PT[n],Promise.resolve()}}}}(e.getProvider("app").getImmediate(),e.getProvider("installations").getImmediate())},"PUBLIC").setServiceProps({settings:jT,EventName:_T,isSupported:UT})),e.INTERNAL.registerComponent(new py.Component("analytics-internal",function(e){try{return{logEvent:e.getProvider(qT).getImmediate().logEvent}}catch(ly){throw IT.create("interop-component-reg-failed",{reason:ly})}},"PRIVATE")),e.registerVersion("@firebase/analytics","0.6.17")}(qr.default);var VT,BT=function(){function e(e,t,n,r){this.client=e,this.storage=t,this.storageCache=n,this.logger=r}return e.prototype.isCachedDataFresh=function(e,t){if(!t)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;var n=Date.now()-t,r=n<=e;return this.logger.debug("Config fetch cache check. Cache age millis: "+n+". Cache max age millis (minimumFetchIntervalMillis setting): "+e+". Is cache hit: "+r+"."),r},e.prototype.fetch=function(e){return(0,Ur.__awaiter)(this,void 0,void 0,function(){var t,n,r,i,o;return(0,Ur.__generator)(this,function(s){switch(s.label){case 0:return[4,Promise.all([this.storage.getLastSuccessfulFetchTimestampMillis(),this.storage.getLastSuccessfulFetchResponse()])];case 1:return t=s.sent(),n=t[0],(r=t[1])&&this.isCachedDataFresh(e.cacheMaxAgeMillis,n)?[2,r]:(e.eTag=r&&r.eTag,[4,this.client.fetch(e)]);case 2:return i=s.sent(),o=[this.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())],200===i.status&&o.push(this.storage.setLastSuccessfulFetchResponse(i)),[4,Promise.all(o)];case 3:return s.sent(),[2,i]}})})},e}(),HT=((VT={})["registration-window"]="Undefined window object. This SDK only supports usage in a browser environment.",VT["registration-project-id"]="Undefined project identifier. Check Firebase app initialization.",VT["registration-api-key"]="Undefined API key. Check Firebase app initialization.",VT["registration-app-id"]="Undefined app identifier. Check Firebase app initialization.",VT["storage-open"]="Error thrown when opening storage. Original error: {$originalErrorMessage}.",VT["storage-get"]="Error thrown when reading from storage. Original error: {$originalErrorMessage}.",VT["storage-set"]="Error thrown when writing to storage. Original error: {$originalErrorMessage}.",VT["storage-delete"]="Error thrown when deleting from storage. Original error: {$originalErrorMessage}.",VT["fetch-client-network"]="Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.",VT["fetch-timeout"]='The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',VT["fetch-throttle"]='The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',VT["fetch-client-parse"]="Fetch client could not parse response. Original error: {$originalErrorMessage}.",VT["fetch-status"]="Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.",VT),WT=new Vr.ErrorFactory("remoteconfig","Remote Config",HT),KT=function(){function e(e,t,n,r,i,o){this.firebaseInstallations=e,this.sdkVersion=t,this.namespace=n,this.projectId=r,this.apiKey=i,this.appId=o}return e.prototype.fetch=function(e){return(0,Ur.__awaiter)(this,void 0,void 0,function(){var t,n,r,i,o,s,a,u,c,l,h,f,d,p,g,v;return(0,Ur.__generator)(this,function(m){switch(m.label){case 0:return[4,Promise.all([this.firebaseInstallations.getId(),this.firebaseInstallations.getToken()])];case 1:t=m.sent(),n=window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com",r=n+"/v1/projects/"+this.projectId+"/namespaces/"+this.namespace+":fetch?key="+this.apiKey,i={sdk_version:this.sdkVersion,app_instance_id:t[0],app_instance_id_token:t[1],app_id:this.appId,language_code:(void 0===y&&(y=navigator),y.languages&&y.languages[0]||y.language)},o={method:"POST",headers:{"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":e.eTag||"*"},body:JSON.stringify(i)},s=fetch(r,o),a=new Promise(function(t,n){e.signal.addEventListener(function(){var e=new Error("The operation was aborted.");e.name="AbortError",n(e)})}),m.label=2;case 2:return m.trys.push([2,5,,6]),[4,Promise.race([s,a])];case 3:return m.sent(),[4,s];case 4:return u=m.sent(),[3,6];case 5:throw c=m.sent(),l="fetch-client-network","AbortError"===c.name&&(l="fetch-timeout"),WT.create(l,{originalErrorMessage:c.message});case 6:if(h=u.status,f=u.headers.get("ETag")||void 0,200!==u.status)return[3,11];g=void 0,m.label=7;case 7:return m.trys.push([7,9,,10]),[4,u.json()];case 8:return g=m.sent(),[3,10];case 9:throw v=m.sent(),WT.create("fetch-client-parse",{originalErrorMessage:v.message});case 10:d=g.entries,p=g.state,m.label=11;case 11:if("INSTANCE_STATE_UNSPECIFIED"===p?h=500:"NO_CHANGE"===p?h=304:"NO_TEMPLATE"!==p&&"EMPTY_CONFIG"!==p||(d={}),304!==h&&200!==h)throw WT.create("fetch-status",{httpStatus:h});return[2,{status:h,eTag:f,config:d}]}var y})})},e}(),zT=function(){function e(){this.listeners=[]}return e.prototype.addEventListener=function(e){this.listeners.push(e)},e.prototype.abort=function(){this.listeners.forEach(function(e){return e()})},e}(),GT=["1","true","t","yes","y","on"],QT=function(){function e(e,t){void 0===t&&(t=""),this._source=e,this._value=t}return e.prototype.asString=function(){return this._value},e.prototype.asBoolean=function(){return"static"!==this._source&&GT.indexOf(this._value.toLowerCase())>=0},e.prototype.asNumber=function(){if("static"===this._source)return 0;var e=Number(this._value);return isNaN(e)&&(e=0),e},e.prototype.getSource=function(){return this._source},e}(),$T=function(){function e(e,t,n,r,i){this.app=e,this._client=t,this._storageCache=n,this._storage=r,this._logger=i,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}return e.prototype.setLogLevel=function(e){switch(e){case"debug":this._logger.logLevel=Br.LogLevel.DEBUG;break;case"silent":this._logger.logLevel=Br.LogLevel.SILENT;break;default:this._logger.logLevel=Br.LogLevel.ERROR}},Object.defineProperty(e.prototype,"fetchTimeMillis",{get:function(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"lastFetchStatus",{get:function(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"},enumerable:!1,configurable:!0}),e.prototype.activate=function(){return(0,Ur.__awaiter)(this,void 0,void 0,function(){var e,t,n;return(0,Ur.__generator)(this,function(r){switch(r.label){case 0:return[4,Promise.all([this._storage.getLastSuccessfulFetchResponse(),this._storage.getActiveConfigEtag()])];case 1:return e=r.sent(),n=e[1],(t=e[0])&&t.config&&t.eTag&&t.eTag!==n?[4,Promise.all([this._storageCache.setActiveConfig(t.config),this._storage.setActiveConfigEtag(t.eTag)])]:[2,!1];case 2:return r.sent(),[2,!0]}})})},e.prototype.ensureInitialized=function(){var e=this;return this._initializePromise||(this._initializePromise=this._storageCache.loadFromStorage().then(function(){e._isInitializationComplete=!0})),this._initializePromise},e.prototype.fetch=function(){return(0,Ur.__awaiter)(this,void 0,void 0,function(){var e,t,n,r=this;return(0,Ur.__generator)(this,function(i){switch(i.label){case 0:e=new zT,setTimeout(function(){return(0,Ur.__awaiter)(r,void 0,void 0,function(){return(0,Ur.__generator)(this,function(t){return e.abort(),[2]})})},this.settings.fetchTimeoutMillis),i.label=1;case 1:return i.trys.push([1,4,,6]),[4,this._client.fetch({cacheMaxAgeMillis:this.settings.minimumFetchIntervalMillis,signal:e})];case 2:return i.sent(),[4,this._storageCache.setLastFetchStatus("success")];case 3:return i.sent(),[3,6];case 4:return t=i.sent(),n=function(e,t){return e instanceof Vr.FirebaseError&&-1!==e.code.indexOf("fetch-throttle")}(t)?"throttle":"failure",[4,this._storageCache.setLastFetchStatus(n)];case 5:throw i.sent(),t;case 6:return[2]}})})},e.prototype.fetchAndActivate=function(){return(0,Ur.__awaiter)(this,void 0,void 0,function(){return(0,Ur.__generator)(this,function(e){switch(e.label){case 0:return[4,this.fetch()];case 1:return e.sent(),[2,this.activate()]}})})},e.prototype.getAll=function(){var e,t,n=this;return(e=this._storageCache.getActiveConfig(),t=this.defaultConfig,void 0===e&&(e={}),void 0===t&&(t={}),Object.keys((0,Ur.__assign)((0,Ur.__assign)({},e),t))).reduce(function(e,t){return e[t]=n.getValue(t),e},{})},e.prototype.getBoolean=function(e){return this.getValue(e).asBoolean()},e.prototype.getNumber=function(e){return this.getValue(e).asNumber()},e.prototype.getString=function(e){return this.getValue(e).asString()},e.prototype.getValue=function(e){this._isInitializationComplete||this._logger.debug('A value was requested for key "'+e+'" before SDK initialization completed. Await on ensureInitialized if the intent was to get a previously activated value.');var t=this._storageCache.getActiveConfig();return t&&void 0!==t[e]?new QT("remote",t[e]):this.defaultConfig&&void 0!==this.defaultConfig[e]?new QT("default",String(this.defaultConfig[e])):(this._logger.debug('Returning static value for key "'+e+'". Define a default or remote value if this is unintentional.'),new QT("static"))},e}();function YT(e,t){var n=e.target.error||void 0;return WT.create(t,{originalErrorMessage:n&&n.message})}var XT="app_namespace_store",ZT=function(){function e(e,t,n,r){void 0===r&&(r=new Promise(function(e,t){var n=indexedDB.open("firebase_remote_config",1);n.onerror=function(e){t(YT(e,"storage-open"))},n.onsuccess=function(t){e(t.target.result)},n.onupgradeneeded=function(e){var t=e.target.result;switch(e.oldVersion){case 0:t.createObjectStore(XT,{keyPath:"compositeKey"})}}})),this.appId=e,this.appName=t,this.namespace=n,this.openDbPromise=r}return e.prototype.getLastFetchStatus=function(){return this.get("last_fetch_status")},e.prototype.setLastFetchStatus=function(e){return this.set("last_fetch_status",e)},e.prototype.getLastSuccessfulFetchTimestampMillis=function(){return this.get("last_successful_fetch_timestamp_millis")},e.prototype.setLastSuccessfulFetchTimestampMillis=function(e){return this.set("last_successful_fetch_timestamp_millis",e)},e.prototype.getLastSuccessfulFetchResponse=function(){return this.get("last_successful_fetch_response")},e.prototype.setLastSuccessfulFetchResponse=function(e){return this.set("last_successful_fetch_response",e)},e.prototype.getActiveConfig=function(){return this.get("active_config")},e.prototype.setActiveConfig=function(e){return this.set("active_config",e)},e.prototype.getActiveConfigEtag=function(){return this.get("active_config_etag")},e.prototype.setActiveConfigEtag=function(e){return this.set("active_config_etag",e)},e.prototype.getThrottleMetadata=function(){return this.get("throttle_metadata")},e.prototype.setThrottleMetadata=function(e){return this.set("throttle_metadata",e)},e.prototype.deleteThrottleMetadata=function(){return this.delete("throttle_metadata")},e.prototype.get=function(e){return(0,Ur.__awaiter)(this,void 0,void 0,function(){var t,n=this;return(0,Ur.__generator)(this,function(r){switch(r.label){case 0:return[4,this.openDbPromise];case 1:return t=r.sent(),[2,new Promise(function(r,i){var o=t.transaction([XT],"readonly").objectStore(XT),s=n.createCompositeKey(e);try{var a=o.get(s);a.onerror=function(e){i(YT(e,"storage-get"))},a.onsuccess=function(e){var t=e.target.result;r(t?t.value:void 0)}}catch(ly){i(WT.create("storage-get",{originalErrorMessage:ly&&ly.message}))}})]}})})},e.prototype.set=function(e,t){return(0,Ur.__awaiter)(this,void 0,void 0,function(){var n,r=this;return(0,Ur.__generator)(this,function(i){switch(i.label){case 0:return[4,this.openDbPromise];case 1:return n=i.sent(),[2,new Promise(function(i,o){var s=n.transaction([XT],"readwrite").objectStore(XT),a=r.createCompositeKey(e);try{var u=s.put({compositeKey:a,value:t});u.onerror=function(e){o(YT(e,"storage-set"))},u.onsuccess=function(){i()}}catch(ly){o(WT.create("storage-set",{originalErrorMessage:ly&&ly.message}))}})]}})})},e.prototype.delete=function(e){return(0,Ur.__awaiter)(this,void 0,void 0,function(){var t,n=this;return(0,Ur.__generator)(this,function(r){switch(r.label){case 0:return[4,this.openDbPromise];case 1:return t=r.sent(),[2,new Promise(function(r,i){var o=t.transaction([XT],"readwrite").objectStore(XT),s=n.createCompositeKey(e);try{var a=o.delete(s);a.onerror=function(e){i(YT(e,"storage-delete"))},a.onsuccess=function(){r()}}catch(ly){i(WT.create("storage-delete",{originalErrorMessage:ly&&ly.message}))}})]}})})},e.prototype.createCompositeKey=function(e){return[this.appId,this.appName,this.namespace,e].join()},e}(),JT=function(){function e(e){this.storage=e}return e.prototype.getLastFetchStatus=function(){return this.lastFetchStatus},e.prototype.getLastSuccessfulFetchTimestampMillis=function(){return this.lastSuccessfulFetchTimestampMillis},e.prototype.getActiveConfig=function(){return this.activeConfig},e.prototype.loadFromStorage=function(){return(0,Ur.__awaiter)(this,void 0,void 0,function(){var e,t,n,r,i,o;return(0,Ur.__generator)(this,function(s){switch(s.label){case 0:return e=this.storage.getLastFetchStatus(),t=this.storage.getLastSuccessfulFetchTimestampMillis(),n=this.storage.getActiveConfig(),[4,e];case 1:return(r=s.sent())&&(this.lastFetchStatus=r),[4,t];case 2:return(i=s.sent())&&(this.lastSuccessfulFetchTimestampMillis=i),[4,n];case 3:return(o=s.sent())&&(this.activeConfig=o),[2]}})})},e.prototype.setLastFetchStatus=function(e){return this.lastFetchStatus=e,this.storage.setLastFetchStatus(e)},e.prototype.setLastSuccessfulFetchTimestampMillis=function(e){return this.lastSuccessfulFetchTimestampMillis=e,this.storage.setLastSuccessfulFetchTimestampMillis(e)},e.prototype.setActiveConfig=function(e){return this.activeConfig=e,this.storage.setActiveConfig(e)},e}();function eE(e,t){return new Promise(function(n,r){var i=Math.max(t-Date.now(),0),o=setTimeout(n,i);e.addEventListener(function(){clearTimeout(o),r(WT.create("fetch-throttle",{throttleEndTimeMillis:t}))})})}var tE,nE=function(){function e(e,t){this.client=e,this.storage=t}return e.prototype.fetch=function(e){return(0,Ur.__awaiter)(this,void 0,void 0,function(){var t;return(0,Ur.__generator)(this,function(n){switch(n.label){case 0:return[4,this.storage.getThrottleMetadata()];case 1:return t=n.sent()||{backoffCount:0,throttleEndTimeMillis:Date.now()},[2,this.attemptFetch(e,t)]}})})},e.prototype.attemptFetch=function(e,t){var n=t.throttleEndTimeMillis,r=t.backoffCount;return(0,Ur.__awaiter)(this,void 0,void 0,function(){var t,i,o;return(0,Ur.__generator)(this,function(s){switch(s.label){case 0:return[4,eE(e.signal,n)];case 1:s.sent(),s.label=2;case 2:return s.trys.push([2,5,,7]),[4,this.client.fetch(e)];case 3:return t=s.sent(),[4,this.storage.deleteThrottleMetadata()];case 4:return s.sent(),[2,t];case 5:if(!function(e){if(!(e instanceof Vr.FirebaseError&&e.customData))return!1;var t=Number(e.customData.httpStatus);return 429===t||500===t||503===t||504===t}(i=s.sent()))throw i;return o={throttleEndTimeMillis:Date.now()+(0,Vr.calculateBackoffMillis)(r),backoffCount:r+1},[4,this.storage.setThrottleMetadata(o)];case 6:return s.sent(),[2,this.attemptFetch(e,o)];case 7:return[2]}})})},e}(),rE="@firebase/remote-config";(tE=qr.default).INTERNAL.registerComponent(new py.Component("remoteConfig",function(e,t){var n=t.instanceIdentifier,r=e.getProvider("app").getImmediate(),i=e.getProvider("installations").getImmediate();if("undefined"==typeof window)throw WT.create("registration-window");var o=r.options,s=o.projectId,a=o.apiKey,u=o.appId;if(!s)throw WT.create("registration-project-id");if(!a)throw WT.create("registration-api-key");if(!u)throw WT.create("registration-app-id");var c=new ZT(u,r.name,n=n||"firebase"),l=new JT(c),h=new Br.Logger(rE);h.logLevel=Br.LogLevel.ERROR;var f=new KT(i,tE.SDK_VERSION,n,s,a,u),d=new nE(f,c),p=new BT(d,c,l,h),g=new $T(r,p,l,c,h);return g.ensureInitialized(),g},"PUBLIC").setMultipleInstances(!0)),tE.registerVersion(rE,"0.1.42"),n(367);var iE="8.9.1";qr.default.registerVersion("firebase",iE,"app"),qr.default.SDK_VERSION=iE,console.warn("\nIt looks like you're using the development build of the Firebase JS SDK.\nWhen deploying Firebase apps to production, it is advisable to only import\nthe individual SDK components you intend to use.\n\nFor the module builds, these are available in the following manner\n(replace <PACKAGE> with the name of a component - i.e. auth, database, etc):\n\nCommonJS Modules:\nconst firebase = require('firebase/app');\nrequire('firebase/<PACKAGE>');\n\nES Modules:\nimport firebase from 'firebase/app';\nimport 'firebase/<PACKAGE>';\n\nTypescript:\nimport firebase from 'firebase/app';\nimport 'firebase/<PACKAGE>';\n"),qr.default.registerVersion("firebase","8.9.1")},762:(e,t,n)=>{"use strict";n.r(t),n.d(t,{__extends:()=>i,__assign:()=>o,__rest:()=>s,__decorate:()=>a,__param:()=>u,__metadata:()=>c,__awaiter:()=>l,__generator:()=>h,__createBinding:()=>f,__exportStar:()=>d,__values:()=>p,__read:()=>g,__spread:()=>v,__spreadArrays:()=>m,__spreadArray:()=>y,__await:()=>_,__asyncGenerator:()=>b,__asyncDelegator:()=>w,__asyncValues:()=>T,__makeTemplateObject:()=>E,__importStar:()=>k,__importDefault:()=>C,__classPrivateFieldGet:()=>S,__classPrivateFieldSet:()=>A});var r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)};function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var o=function(){return(o=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};function s(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}function a(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s}function u(e,t){return function(n,r){t(n,r,e)}}function c(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}function l(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{u(r.next(e))}catch(t){o(t)}}function a(e){try{u(r.throw(e))}catch(t){o(t)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(s,a)}u((r=r.apply(e,t||[])).next())})}function h(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(a){o=[6,a],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}}var f=Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]};function d(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||f(t,e,n)}function p(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function g(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(a){i={error:a}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s}function v(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(g(arguments[t]));return e}function m(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),i=0;for(t=0;t<n;t++)for(var o=arguments[t],s=0,a=o.length;s<a;s++,i++)r[i]=o[s];return r}function y(e,t,n){if(n||2===arguments.length)for(var r,i=0,o=t.length;i<o;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))}function _(e){return this instanceof _?(this.v=e,this):new _(e)}function b(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,i=n.apply(e,t||[]),o=[];return r={},s("next"),s("throw"),s("return"),r[Symbol.asyncIterator]=function(){return this},r;function s(e){i[e]&&(r[e]=function(t){return new Promise(function(n,r){o.push([e,t,n,r])>1||a(e,t)})})}function a(e,t){try{(n=i[e](t)).value instanceof _?Promise.resolve(n.value.v).then(u,c):l(o[0][2],n)}catch(r){l(o[0][3],r)}var n}function u(e){a("next",e)}function c(e){a("throw",e)}function l(e,t){e(t),o.shift(),o.length&&a(o[0][0],o[0][1])}}function w(e){var t,n;return t={},r("next"),r("throw",function(e){throw e}),r("return"),t[Symbol.iterator]=function(){return this},t;function r(r,i){t[r]=e[r]?function(t){return(n=!n)?{value:_(e[r](t)),done:"return"===r}:i?i(t):t}:i}}function T(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,n=e[Symbol.asyncIterator];return n?n.call(e):(e=p(e),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(n){t[n]=e[n]&&function(t){return new Promise(function(r,i){!function(e,t,n,r){Promise.resolve(r).then(function(t){e({value:t,done:n})},t)}(r,i,(t=e[n](t)).done,t.value)})}}}function E(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}var I=Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t};function k(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&f(t,e,n);return I(t,e),t}function C(e){return e&&e.__esModule?e:{default:e}}function S(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)}function A(e,t,n,r,i){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?i.call(e,n):i?i.value=n:t.set(e,n),n}}},e=>{"use strict";e(e.s=440)}]);